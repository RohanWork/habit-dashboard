function s$(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nP={exports:{}},Bp={},iP={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td=Symbol.for("react.element"),l$=Symbol.for("react.portal"),c$=Symbol.for("react.fragment"),u$=Symbol.for("react.strict_mode"),d$=Symbol.for("react.profiler"),f$=Symbol.for("react.provider"),h$=Symbol.for("react.context"),p$=Symbol.for("react.forward_ref"),m$=Symbol.for("react.suspense"),g$=Symbol.for("react.memo"),y$=Symbol.for("react.lazy"),Ck=Symbol.iterator;function v$(t){return t===null||typeof t!="object"?null:(t=Ck&&t[Ck]||t["@@iterator"],typeof t=="function"?t:null)}var aP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oP=Object.assign,sP={};function dl(t,e,r){this.props=t,this.context=e,this.refs=sP,this.updater=r||aP}dl.prototype.isReactComponent={};dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lP(){}lP.prototype=dl.prototype;function Rx(t,e,r){this.props=t,this.context=e,this.refs=sP,this.updater=r||aP}var Dx=Rx.prototype=new lP;Dx.constructor=Rx;oP(Dx,dl.prototype);Dx.isPureReactComponent=!0;var jk=Array.isArray,cP=Object.prototype.hasOwnProperty,Mx={current:null},uP={key:!0,ref:!0,__self:!0,__source:!0};function dP(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)cP.call(e,n)&&!uP.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:td,type:t,key:a,ref:o,props:i,_owner:Mx.current}}function x$(t,e){return{$$typeof:td,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $x(t){return typeof t=="object"&&t!==null&&t.$$typeof===td}function b$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Nk=/\/+/g;function jg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b$(""+t.key):e.toString(36)}function Cf(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case td:case l$:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+jg(o,0):n,jk(i)?(r="",t!=null&&(r=t.replace(Nk,"$&/")+"/"),Cf(i,e,r,"",function(c){return c})):i!=null&&($x(i)&&(i=x$(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Nk,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",jk(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+jg(a,s);o+=Cf(a,e,r,l,i)}else if(l=v$(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+jg(a,s++),o+=Cf(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qd(t,e,r){if(t==null)return t;var n=[],i=0;return Cf(t,n,"","",function(a){return e.call(r,a,i++)}),n}function w$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vr={current:null},jf={transition:null},_$={ReactCurrentDispatcher:vr,ReactCurrentBatchConfig:jf,ReactCurrentOwner:Mx};function fP(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:qd,forEach:function(t,e,r){qd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return qd(t,function(){e++}),e},toArray:function(t){return qd(t,function(e){return e})||[]},only:function(t){if(!$x(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=dl;Te.Fragment=c$;Te.Profiler=d$;Te.PureComponent=Rx;Te.StrictMode=u$;Te.Suspense=m$;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_$;Te.act=fP;Te.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=oP({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Mx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)cP.call(e,l)&&!uP.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:td,type:t.type,key:i,ref:a,props:n,_owner:o}};Te.createContext=function(t){return t={$$typeof:h$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f$,_context:t},t.Consumer=t};Te.createElement=dP;Te.createFactory=function(t){var e=dP.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:p$,render:t}};Te.isValidElement=$x;Te.lazy=function(t){return{$$typeof:y$,_payload:{_status:-1,_result:t},_init:w$}};Te.memo=function(t,e){return{$$typeof:g$,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=jf.transition;jf.transition={};try{t()}finally{jf.transition=e}};Te.unstable_act=fP;Te.useCallback=function(t,e){return vr.current.useCallback(t,e)};Te.useContext=function(t){return vr.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return vr.current.useDeferredValue(t)};Te.useEffect=function(t,e){return vr.current.useEffect(t,e)};Te.useId=function(){return vr.current.useId()};Te.useImperativeHandle=function(t,e,r){return vr.current.useImperativeHandle(t,e,r)};Te.useInsertionEffect=function(t,e){return vr.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return vr.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return vr.current.useMemo(t,e)};Te.useReducer=function(t,e,r){return vr.current.useReducer(t,e,r)};Te.useRef=function(t){return vr.current.useRef(t)};Te.useState=function(t){return vr.current.useState(t)};Te.useSyncExternalStore=function(t,e,r){return vr.current.useSyncExternalStore(t,e,r)};Te.useTransition=function(){return vr.current.useTransition()};Te.version="18.3.1";iP.exports=Te;var R=iP.exports;const V=Qe(R),k$=s$({__proto__:null,default:V},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S$=R,E$=Symbol.for("react.element"),T$=Symbol.for("react.fragment"),A$=Object.prototype.hasOwnProperty,P$=S$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C$={key:!0,ref:!0,__self:!0,__source:!0};function hP(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)A$.call(e,n)&&!C$.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:E$,type:t,key:a,ref:o,props:i,_owner:P$.current}}Bp.Fragment=T$;Bp.jsx=hP;Bp.jsxs=hP;nP.exports=Bp;var u=nP.exports,zy={},pP={exports:{}},Ur={},mP={exports:{}},gP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var B=M.length;M.push(F);e:for(;0<B;){var K=B-1>>>1,H=M[K];if(0<i(H,F))M[K]=F,M[B]=H,B=K;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var F=M[0],B=M.pop();if(B!==F){M[0]=B;e:for(var K=0,H=M.length,ee=H>>>1;K<ee;){var ce=2*(K+1)-1,xe=M[ce],qe=ce+1,et=M[qe];if(0>i(xe,B))qe<H&&0>i(et,xe)?(M[K]=et,M[qe]=B,K=qe):(M[K]=xe,M[ce]=B,K=ce);else if(qe<H&&0>i(et,B))M[K]=et,M[qe]=B,K=qe;else break e}}return F}function i(M,F){var B=M.sortIndex-F.sortIndex;return B!==0?B:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],c=[],d=1,f=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var F=r(c);F!==null;){if(F.callback===null)n(c);else if(F.startTime<=M)n(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=r(c)}}function j(M){if(v=!1,k(M),!g)if(r(l)!==null)g=!0,U(w);else{var F=r(c);F!==null&&z(j,F.startTime-M)}}function w(M,F){g=!1,v&&(v=!1,x(E),E=-1),m=!0;var B=p;try{for(k(F),f=r(l);f!==null&&(!(f.expirationTime>F)||M&&!I());){var K=f.callback;if(typeof K=="function"){f.callback=null,p=f.priorityLevel;var H=K(f.expirationTime<=F);F=t.unstable_now(),typeof H=="function"?f.callback=H:f===r(l)&&n(l),k(F)}else n(l);f=r(l)}if(f!==null)var ee=!0;else{var ce=r(c);ce!==null&&z(j,ce.startTime-F),ee=!1}return ee}finally{f=null,p=B,m=!1}}var T=!1,S=null,E=-1,P=5,N=-1;function I(){return!(t.unstable_now()-N<P)}function O(){if(S!==null){var M=t.unstable_now();N=M;var F=!0;try{F=S(!0,M)}finally{F?A():(T=!1,S=null)}}else T=!1}var A;if(typeof b=="function")A=function(){b(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=O,A=function(){L.postMessage(null)}}else A=function(){y(O,0)};function U(M){S=M,T||(T=!0,A())}function z(M,F){E=y(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,U(w))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var B=p;p=F;try{return M()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=p;p=M;try{return F()}finally{p=B}},t.unstable_scheduleCallback=function(M,F,B){var K=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,M){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,M={id:d++,callback:F,priorityLevel:M,startTime:B,expirationTime:H,sortIndex:-1},B>K?(M.sortIndex=B,e(c,M),r(l)===null&&M===r(c)&&(v?(x(E),E=-1):v=!0,z(j,B-K))):(M.sortIndex=H,e(l,M),g||m||(g=!0,U(w))),M},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(M){var F=p;return function(){var B=p;p=F;try{return M.apply(this,arguments)}finally{p=B}}}})(gP);mP.exports=gP;var j$=mP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N$=R,Fr=j$;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yP=new Set,Hc={};function _o(t,e){Ps(t,e),Ps(t+"Capture",e)}function Ps(t,e){for(Hc[t]=e,t=0;t<e.length;t++)yP.add(e[t])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wy=Object.prototype.hasOwnProperty,I$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ik={},Ok={};function O$(t){return Wy.call(Ok,t)?!0:Wy.call(Ik,t)?!1:I$.test(t)?Ok[t]=!0:(Ik[t]=!0,!1)}function R$(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D$(t,e,r,n){if(e===null||typeof e>"u"||R$(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xr(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new xr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new xr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new xr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new xr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new xr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new xr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new xr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new xr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new xr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lx=/[\-:]([a-z])/g;function Vx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lx,Vx);Qt[e]=new xr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lx,Vx);Qt[e]=new xr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lx,Vx);Qt[e]=new xr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new xr(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new xr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new xr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fx(t,e,r,n){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D$(e,r,i,n)&&(r=null),n||i===null?O$(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ei=N$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gd=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),Bx=Symbol.for("react.strict_mode"),Hy=Symbol.for("react.profiler"),vP=Symbol.for("react.provider"),xP=Symbol.for("react.context"),Ux=Symbol.for("react.forward_ref"),qy=Symbol.for("react.suspense"),Gy=Symbol.for("react.suspense_list"),zx=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),bP=Symbol.for("react.offscreen"),Rk=Symbol.iterator;function Kl(t){return t===null||typeof t!="object"?null:(t=Rk&&t[Rk]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Ng;function hc(t){if(Ng===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ng=e&&e[1]||""}return`
`+Ng+t}var Ig=!1;function Og(t,e){if(!t||Ig)return"";Ig=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{Ig=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?hc(t):""}function M$(t){switch(t.tag){case 5:return hc(t.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return t=Og(t.type,!1),t;case 11:return t=Og(t.type.render,!1),t;case 1:return t=Og(t.type,!0),t;default:return""}}function Ky(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Qo:return"Portal";case Hy:return"Profiler";case Bx:return"StrictMode";case qy:return"Suspense";case Gy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xP:return(t.displayName||"Context")+".Consumer";case vP:return(t._context.displayName||"Context")+".Provider";case Ux:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zx:return e=t.displayName||null,e!==null?e:Ky(t.type)||"Memo";case $i:e=t._payload,t=t._init;try{return Ky(t(e))}catch{}}return null}function $$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ky(e);case 8:return e===Bx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L$(t){var e=wP(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kd(t){t._valueTracker||(t._valueTracker=L$(t))}function _P(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=wP(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Zf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yy(t,e){var r=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Dk(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=pa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kP(t,e){e=e.checked,e!=null&&Fx(t,"checked",e,!1)}function Qy(t,e){kP(t,e);var r=pa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xy(t,e.type,r):e.hasOwnProperty("defaultValue")&&Xy(t,e.type,pa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mk(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Xy(t,e,r){(e!=="number"||Zf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var pc=Array.isArray;function hs(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+pa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $k(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(pc(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:pa(r)}}function SP(t,e){var r=pa(e.value),n=pa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Lk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yd,TP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yd=Yd||document.createElement("div"),Yd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V$=["Webkit","ms","Moz","O"];Object.keys(Ec).forEach(function(t){V$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ec[e]=Ec[t]})});function AP(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ec.hasOwnProperty(t)&&Ec[t]?(""+e).trim():e+"px"}function PP(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=AP(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var F$=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ev(t,e){if(e){if(F$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function tv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rv=null;function Wx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nv=null,ps=null,ms=null;function Vk(t){if(t=id(t)){if(typeof nv!="function")throw Error(te(280));var e=t.stateNode;e&&(e=qp(e),nv(t.stateNode,t.type,e))}}function CP(t){ps?ms?ms.push(t):ms=[t]:ps=t}function jP(){if(ps){var t=ps,e=ms;if(ms=ps=null,Vk(t),e)for(t=0;t<e.length;t++)Vk(e[t])}}function NP(t,e){return t(e)}function IP(){}var Rg=!1;function OP(t,e,r){if(Rg)return t(e,r);Rg=!0;try{return NP(t,e,r)}finally{Rg=!1,(ps!==null||ms!==null)&&(IP(),jP())}}function Gc(t,e){var r=t.stateNode;if(r===null)return null;var n=qp(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var iv=!1;if(hi)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){iv=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{iv=!1}function B$(t,e,r,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Tc=!1,eh=null,th=!1,av=null,U$={onError:function(t){Tc=!0,eh=t}};function z$(t,e,r,n,i,a,o,s,l){Tc=!1,eh=null,B$.apply(U$,arguments)}function W$(t,e,r,n,i,a,o,s,l){if(z$.apply(this,arguments),Tc){if(Tc){var c=eh;Tc=!1,eh=null}else throw Error(te(198));th||(th=!0,av=c)}}function ko(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function RP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fk(t){if(ko(t)!==t)throw Error(te(188))}function H$(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Fk(i),t;if(a===n)return Fk(i),e;a=a.sibling}throw Error(te(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function DP(t){return t=H$(t),t!==null?MP(t):null}function MP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MP(t);if(e!==null)return e;t=t.sibling}return null}var $P=Fr.unstable_scheduleCallback,Bk=Fr.unstable_cancelCallback,q$=Fr.unstable_shouldYield,G$=Fr.unstable_requestPaint,bt=Fr.unstable_now,K$=Fr.unstable_getCurrentPriorityLevel,Hx=Fr.unstable_ImmediatePriority,LP=Fr.unstable_UserBlockingPriority,rh=Fr.unstable_NormalPriority,Y$=Fr.unstable_LowPriority,VP=Fr.unstable_IdlePriority,Up=null,On=null;function Q$(t){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Up,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:Z$,X$=Math.log,J$=Math.LN2;function Z$(t){return t>>>=0,t===0?32:31-(X$(t)/J$|0)|0}var Qd=64,Xd=4194304;function mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=mc(s):(a&=o,a!==0&&(n=mc(a)))}else o=r&~i,o!==0?n=mc(o):a!==0&&(n=mc(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-xn(e),i=1<<r,n|=t[r],e&=~i;return n}function eL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tL(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-xn(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=eL(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function ov(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FP(){var t=Qd;return Qd<<=1,!(Qd&4194240)&&(Qd=64),t}function Dg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=r}function rL(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-xn(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function qx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-xn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ze=0;function BP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UP,Gx,zP,WP,HP,sv=!1,Jd=[],Ji=null,Zi=null,ea=null,Kc=new Map,Yc=new Map,Fi=[],nL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uk(t,e){switch(t){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":Kc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(e.pointerId)}}function Ql(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=id(e),e!==null&&Gx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iL(t,e,r,n,i){switch(e){case"focusin":return Ji=Ql(Ji,t,e,r,n,i),!0;case"dragenter":return Zi=Ql(Zi,t,e,r,n,i),!0;case"mouseover":return ea=Ql(ea,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Kc.set(a,Ql(Kc.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Yc.set(a,Ql(Yc.get(a)||null,t,e,r,n,i)),!0}return!1}function qP(t){var e=Ba(t.target);if(e!==null){var r=ko(e);if(r!==null){if(e=r.tag,e===13){if(e=RP(r),e!==null){t.blockedOn=e,HP(t.priority,function(){zP(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=lv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);rv=n,r.target.dispatchEvent(n),rv=null}else return e=id(r),e!==null&&Gx(e),t.blockedOn=r,!1;e.shift()}return!0}function zk(t,e,r){Nf(t)&&r.delete(e)}function aL(){sv=!1,Ji!==null&&Nf(Ji)&&(Ji=null),Zi!==null&&Nf(Zi)&&(Zi=null),ea!==null&&Nf(ea)&&(ea=null),Kc.forEach(zk),Yc.forEach(zk)}function Xl(t,e){t.blockedOn===e&&(t.blockedOn=null,sv||(sv=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,aL)))}function Qc(t){function e(i){return Xl(i,t)}if(0<Jd.length){Xl(Jd[0],t);for(var r=1;r<Jd.length;r++){var n=Jd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ji!==null&&Xl(Ji,t),Zi!==null&&Xl(Zi,t),ea!==null&&Xl(ea,t),Kc.forEach(e),Yc.forEach(e),r=0;r<Fi.length;r++)n=Fi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Fi.length&&(r=Fi[0],r.blockedOn===null);)qP(r),r.blockedOn===null&&Fi.shift()}var gs=Ei.ReactCurrentBatchConfig,ih=!0;function oL(t,e,r,n){var i=ze,a=gs.transition;gs.transition=null;try{ze=1,Kx(t,e,r,n)}finally{ze=i,gs.transition=a}}function sL(t,e,r,n){var i=ze,a=gs.transition;gs.transition=null;try{ze=4,Kx(t,e,r,n)}finally{ze=i,gs.transition=a}}function Kx(t,e,r,n){if(ih){var i=lv(t,e,r,n);if(i===null)Hg(t,e,n,ah,r),Uk(t,n);else if(iL(i,t,e,r,n))n.stopPropagation();else if(Uk(t,n),e&4&&-1<nL.indexOf(t)){for(;i!==null;){var a=id(i);if(a!==null&&UP(a),a=lv(t,e,r,n),a===null&&Hg(t,e,n,ah,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Hg(t,e,n,null,r)}}var ah=null;function lv(t,e,r,n){if(ah=null,t=Wx(n),t=Ba(t),t!==null)if(e=ko(t),e===null)t=null;else if(r=e.tag,r===13){if(t=RP(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ah=t,null}function GP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K$()){case Hx:return 1;case LP:return 4;case rh:case Y$:return 16;case VP:return 536870912;default:return 16}default:return 16}}var Gi=null,Yx=null,If=null;function KP(){if(If)return If;var t,e=Yx,r=e.length,n,i="value"in Gi?Gi.value:Gi.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return If=i.slice(t,1<n?1-n:void 0)}function Of(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zd(){return!0}function Wk(){return!1}function zr(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Zd:Wk,this.isPropagationStopped=Wk,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zd)},persist:function(){},isPersistent:Zd}),e}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qx=zr(fl),nd=pt({},fl,{view:0,detail:0}),lL=zr(nd),Mg,$g,Jl,zp=pt({},nd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jl&&(Jl&&t.type==="mousemove"?(Mg=t.screenX-Jl.screenX,$g=t.screenY-Jl.screenY):$g=Mg=0,Jl=t),Mg)},movementY:function(t){return"movementY"in t?t.movementY:$g}}),Hk=zr(zp),cL=pt({},zp,{dataTransfer:0}),uL=zr(cL),dL=pt({},nd,{relatedTarget:0}),Lg=zr(dL),fL=pt({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),hL=zr(fL),pL=pt({},fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mL=zr(pL),gL=pt({},fl,{data:0}),qk=zr(gL),yL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xL[t])?!!e[t]:!1}function Xx(){return bL}var wL=pt({},nd,{key:function(t){if(t.key){var e=yL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Of(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xx,charCode:function(t){return t.type==="keypress"?Of(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Of(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_L=zr(wL),kL=pt({},zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gk=zr(kL),SL=pt({},nd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xx}),EL=zr(SL),TL=pt({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),AL=zr(TL),PL=pt({},zp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CL=zr(PL),jL=[9,13,27,32],Jx=hi&&"CompositionEvent"in window,Ac=null;hi&&"documentMode"in document&&(Ac=document.documentMode);var NL=hi&&"TextEvent"in window&&!Ac,YP=hi&&(!Jx||Ac&&8<Ac&&11>=Ac),Kk=" ",Yk=!1;function QP(t,e){switch(t){case"keyup":return jL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jo=!1;function IL(t,e){switch(t){case"compositionend":return XP(e);case"keypress":return e.which!==32?null:(Yk=!0,Kk);case"textInput":return t=e.data,t===Kk&&Yk?null:t;default:return null}}function OL(t,e){if(Jo)return t==="compositionend"||!Jx&&QP(t,e)?(t=KP(),If=Yx=Gi=null,Jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YP&&e.locale!=="ko"?null:e.data;default:return null}}var RL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RL[t.type]:e==="textarea"}function JP(t,e,r,n){CP(n),e=oh(e,"onChange"),0<e.length&&(r=new Qx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Pc=null,Xc=null;function DL(t){cC(t,0)}function Wp(t){var e=ts(t);if(_P(e))return t}function ML(t,e){if(t==="change")return e}var ZP=!1;if(hi){var Vg;if(hi){var Fg="oninput"in document;if(!Fg){var Xk=document.createElement("div");Xk.setAttribute("oninput","return;"),Fg=typeof Xk.oninput=="function"}Vg=Fg}else Vg=!1;ZP=Vg&&(!document.documentMode||9<document.documentMode)}function Jk(){Pc&&(Pc.detachEvent("onpropertychange",eC),Xc=Pc=null)}function eC(t){if(t.propertyName==="value"&&Wp(Xc)){var e=[];JP(e,Xc,t,Wx(t)),OP(DL,e)}}function $L(t,e,r){t==="focusin"?(Jk(),Pc=e,Xc=r,Pc.attachEvent("onpropertychange",eC)):t==="focusout"&&Jk()}function LL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wp(Xc)}function VL(t,e){if(t==="click")return Wp(e)}function FL(t,e){if(t==="input"||t==="change")return Wp(e)}function BL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:BL;function Jc(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Wy.call(e,i)||!_n(t[i],e[i]))return!1}return!0}function Zk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e1(t,e){var r=Zk(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zk(r)}}function tC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rC(){for(var t=window,e=Zf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Zf(t.document)}return e}function Zx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UL(t){var e=rC(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&tC(r.ownerDocument.documentElement,r)){if(n!==null&&Zx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=e1(r,a);var o=e1(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zL=hi&&"documentMode"in document&&11>=document.documentMode,Zo=null,cv=null,Cc=null,uv=!1;function t1(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;uv||Zo==null||Zo!==Zf(n)||(n=Zo,"selectionStart"in n&&Zx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cc&&Jc(Cc,n)||(Cc=n,n=oh(cv,"onSelect"),0<n.length&&(e=new Qx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Zo)))}function ef(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var es={animationend:ef("Animation","AnimationEnd"),animationiteration:ef("Animation","AnimationIteration"),animationstart:ef("Animation","AnimationStart"),transitionend:ef("Transition","TransitionEnd")},Bg={},nC={};hi&&(nC=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function Hp(t){if(Bg[t])return Bg[t];if(!es[t])return t;var e=es[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in nC)return Bg[t]=e[r];return t}var iC=Hp("animationend"),aC=Hp("animationiteration"),oC=Hp("animationstart"),sC=Hp("transitionend"),lC=new Map,r1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xa(t,e){lC.set(t,e),_o(e,[t])}for(var Ug=0;Ug<r1.length;Ug++){var zg=r1[Ug],WL=zg.toLowerCase(),HL=zg[0].toUpperCase()+zg.slice(1);xa(WL,"on"+HL)}xa(iC,"onAnimationEnd");xa(aC,"onAnimationIteration");xa(oC,"onAnimationStart");xa("dblclick","onDoubleClick");xa("focusin","onFocus");xa("focusout","onBlur");xa(sC,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qL=new Set("cancel close invalid load scroll toggle".split(" ").concat(gc));function n1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,W$(n,e,void 0,t),t.currentTarget=null}function cC(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;n1(i,s,c),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;n1(i,s,c),a=l}}}if(th)throw t=av,th=!1,av=null,t}function nt(t,e){var r=e[mv];r===void 0&&(r=e[mv]=new Set);var n=t+"__bubble";r.has(n)||(uC(e,t,2,!1),r.add(n))}function Wg(t,e,r){var n=0;e&&(n|=4),uC(r,t,n,e)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Zc(t){if(!t[tf]){t[tf]=!0,yP.forEach(function(r){r!=="selectionchange"&&(qL.has(r)||Wg(r,!1,t),Wg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tf]||(e[tf]=!0,Wg("selectionchange",!1,e))}}function uC(t,e,r,n){switch(GP(e)){case 1:var i=oL;break;case 4:i=sL;break;default:i=Kx}r=i.bind(null,e,r,t),i=void 0,!iv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Hg(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Ba(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}OP(function(){var c=a,d=Wx(r),f=[];e:{var p=lC.get(t);if(p!==void 0){var m=Qx,g=t;switch(t){case"keypress":if(Of(r)===0)break e;case"keydown":case"keyup":m=_L;break;case"focusin":g="focus",m=Lg;break;case"focusout":g="blur",m=Lg;break;case"beforeblur":case"afterblur":m=Lg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Hk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=EL;break;case iC:case aC:case oC:m=hL;break;case sC:m=AL;break;case"scroll":m=lL;break;case"wheel":m=CL;break;case"copy":case"cut":case"paste":m=mL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gk}var v=(e&4)!==0,y=!v&&t==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var b=c,k;b!==null;){k=b;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,x!==null&&(j=Gc(b,x),j!=null&&v.push(eu(b,j,k)))),y)break;b=b.return}0<v.length&&(p=new m(p,g,null,r,d),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&r!==rv&&(g=r.relatedTarget||r.fromElement)&&(Ba(g)||g[pi]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=c,g=g?Ba(g):null,g!==null&&(y=ko(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=Hk,j="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=Gk,j="onPointerLeave",x="onPointerEnter",b="pointer"),y=m==null?p:ts(m),k=g==null?p:ts(g),p=new v(j,b+"leave",m,r,d),p.target=y,p.relatedTarget=k,j=null,Ba(d)===c&&(v=new v(x,b+"enter",g,r,d),v.target=k,v.relatedTarget=y,j=v),y=j,m&&g)t:{for(v=m,x=g,b=0,k=v;k;k=Fo(k))b++;for(k=0,j=x;j;j=Fo(j))k++;for(;0<b-k;)v=Fo(v),b--;for(;0<k-b;)x=Fo(x),k--;for(;b--;){if(v===x||x!==null&&v===x.alternate)break t;v=Fo(v),x=Fo(x)}v=null}else v=null;m!==null&&i1(f,p,m,v,!1),g!==null&&y!==null&&i1(f,y,g,v,!0)}}e:{if(p=c?ts(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var w=ML;else if(Qk(p))if(ZP)w=FL;else{w=LL;var T=$L}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=VL);if(w&&(w=w(t,c))){JP(f,w,r,d);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Xy(p,"number",p.value)}switch(T=c?ts(c):window,t){case"focusin":(Qk(T)||T.contentEditable==="true")&&(Zo=T,cv=c,Cc=null);break;case"focusout":Cc=cv=Zo=null;break;case"mousedown":uv=!0;break;case"contextmenu":case"mouseup":case"dragend":uv=!1,t1(f,r,d);break;case"selectionchange":if(zL)break;case"keydown":case"keyup":t1(f,r,d)}var S;if(Jx)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Jo?QP(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(YP&&r.locale!=="ko"&&(Jo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Jo&&(S=KP()):(Gi=d,Yx="value"in Gi?Gi.value:Gi.textContent,Jo=!0)),T=oh(c,E),0<T.length&&(E=new qk(E,t,null,r,d),f.push({event:E,listeners:T}),S?E.data=S:(S=XP(r),S!==null&&(E.data=S)))),(S=NL?IL(t,r):OL(t,r))&&(c=oh(c,"onBeforeInput"),0<c.length&&(d=new qk("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=S))}cC(f,e)})}function eu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function oh(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Gc(t,r),a!=null&&n.unshift(eu(t,a,i)),a=Gc(t,e),a!=null&&n.push(eu(t,a,i))),t=t.return}return n}function Fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i1(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=Gc(r,a),l!=null&&o.unshift(eu(r,l,s))):i||(l=Gc(r,a),l!=null&&o.push(eu(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var GL=/\r\n?/g,KL=/\u0000|\uFFFD/g;function a1(t){return(typeof t=="string"?t:""+t).replace(GL,`
`).replace(KL,"")}function rf(t,e,r){if(e=a1(e),a1(t)!==e&&r)throw Error(te(425))}function sh(){}var dv=null,fv=null;function hv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pv=typeof setTimeout=="function"?setTimeout:void 0,YL=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,QL=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(t){return o1.resolve(null).then(t).catch(XL)}:pv;function XL(t){setTimeout(function(){throw t})}function qg(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Qc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Qc(e)}function ta(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var hl=Math.random().toString(36).slice(2),Pn="__reactFiber$"+hl,tu="__reactProps$"+hl,pi="__reactContainer$"+hl,mv="__reactEvents$"+hl,JL="__reactListeners$"+hl,ZL="__reactHandles$"+hl;function Ba(t){var e=t[Pn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[pi]||r[Pn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=s1(t);t!==null;){if(r=t[Pn])return r;t=s1(t)}return e}t=r,r=t.parentNode}return null}function id(t){return t=t[Pn]||t[pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function qp(t){return t[tu]||null}var gv=[],rs=-1;function ba(t){return{current:t}}function st(t){0>rs||(t.current=gv[rs],gv[rs]=null,rs--)}function Ze(t,e){rs++,gv[rs]=t.current,t.current=e}var ma={},cr=ba(ma),Tr=ba(!1),no=ma;function Cs(t,e){var r=t.type.contextTypes;if(!r)return ma;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(t){return t=t.childContextTypes,t!=null}function lh(){st(Tr),st(cr)}function l1(t,e,r){if(cr.current!==ma)throw Error(te(168));Ze(cr,e),Ze(Tr,r)}function dC(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(te(108,$$(t)||"Unknown",i));return pt({},r,n)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ma,no=cr.current,Ze(cr,t),Ze(Tr,Tr.current),!0}function c1(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=dC(t,e,no),n.__reactInternalMemoizedMergedChildContext=t,st(Tr),st(cr),Ze(cr,t)):st(Tr),Ze(Tr,r)}var Xn=null,Gp=!1,Gg=!1;function fC(t){Xn===null?Xn=[t]:Xn.push(t)}function e4(t){Gp=!0,fC(t)}function wa(){if(!Gg&&Xn!==null){Gg=!0;var t=0,e=ze;try{var r=Xn;for(ze=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Xn=null,Gp=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),$P(Hx,wa),i}finally{ze=e,Gg=!1}}return null}var ns=[],is=0,uh=null,dh=0,Gr=[],Kr=0,io=null,Jn=1,Zn="";function Da(t,e){ns[is++]=dh,ns[is++]=uh,uh=t,dh=e}function hC(t,e,r){Gr[Kr++]=Jn,Gr[Kr++]=Zn,Gr[Kr++]=io,io=t;var n=Jn;t=Zn;var i=32-xn(n)-1;n&=~(1<<i),r+=1;var a=32-xn(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Jn=1<<32-xn(e)+i|r<<i|n,Zn=a+t}else Jn=1<<a|r<<i|n,Zn=t}function eb(t){t.return!==null&&(Da(t,1),hC(t,1,0))}function tb(t){for(;t===uh;)uh=ns[--is],ns[is]=null,dh=ns[--is],ns[is]=null;for(;t===io;)io=Gr[--Kr],Gr[Kr]=null,Zn=Gr[--Kr],Gr[Kr]=null,Jn=Gr[--Kr],Gr[Kr]=null}var Vr=null,$r=null,lt=!1,mn=null;function pC(t,e){var r=Yr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function u1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vr=t,$r=ta(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vr=t,$r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=io!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Yr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Vr=t,$r=null,!0):!1;default:return!1}}function yv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vv(t){if(lt){var e=$r;if(e){var r=e;if(!u1(t,e)){if(yv(t))throw Error(te(418));e=ta(r.nextSibling);var n=Vr;e&&u1(t,e)?pC(n,r):(t.flags=t.flags&-4097|2,lt=!1,Vr=t)}}else{if(yv(t))throw Error(te(418));t.flags=t.flags&-4097|2,lt=!1,Vr=t}}}function d1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vr=t}function nf(t){if(t!==Vr)return!1;if(!lt)return d1(t),lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hv(t.type,t.memoizedProps)),e&&(e=$r)){if(yv(t))throw mC(),Error(te(418));for(;e;)pC(t,e),e=ta(e.nextSibling)}if(d1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){$r=ta(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}$r=null}}else $r=Vr?ta(t.stateNode.nextSibling):null;return!0}function mC(){for(var t=$r;t;)t=ta(t.nextSibling)}function js(){$r=Vr=null,lt=!1}function rb(t){mn===null?mn=[t]:mn.push(t)}var t4=Ei.ReactCurrentBatchConfig;function Zl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function af(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f1(t){var e=t._init;return e(t._payload)}function gC(t){function e(x,b){if(t){var k=x.deletions;k===null?(x.deletions=[b],x.flags|=16):k.push(b)}}function r(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=aa(x,b),x.index=0,x.sibling=null,x}function a(x,b,k){return x.index=k,t?(k=x.alternate,k!==null?(k=k.index,k<b?(x.flags|=2,b):k):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function s(x,b,k,j){return b===null||b.tag!==6?(b=ey(k,x.mode,j),b.return=x,b):(b=i(b,k),b.return=x,b)}function l(x,b,k,j){var w=k.type;return w===Xo?d(x,b,k.props.children,j,k.key):b!==null&&(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$i&&f1(w)===b.type)?(j=i(b,k.props),j.ref=Zl(x,b,k),j.return=x,j):(j=Ff(k.type,k.key,k.props,null,x.mode,j),j.ref=Zl(x,b,k),j.return=x,j)}function c(x,b,k,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==k.containerInfo||b.stateNode.implementation!==k.implementation?(b=ty(k,x.mode,j),b.return=x,b):(b=i(b,k.children||[]),b.return=x,b)}function d(x,b,k,j,w){return b===null||b.tag!==7?(b=Ja(k,x.mode,j,w),b.return=x,b):(b=i(b,k),b.return=x,b)}function f(x,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ey(""+b,x.mode,k),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gd:return k=Ff(b.type,b.key,b.props,null,x.mode,k),k.ref=Zl(x,null,b),k.return=x,k;case Qo:return b=ty(b,x.mode,k),b.return=x,b;case $i:var j=b._init;return f(x,j(b._payload),k)}if(pc(b)||Kl(b))return b=Ja(b,x.mode,k,null),b.return=x,b;af(x,b)}return null}function p(x,b,k,j){var w=b!==null?b.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return w!==null?null:s(x,b,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gd:return k.key===w?l(x,b,k,j):null;case Qo:return k.key===w?c(x,b,k,j):null;case $i:return w=k._init,p(x,b,w(k._payload),j)}if(pc(k)||Kl(k))return w!==null?null:d(x,b,k,j,null);af(x,k)}return null}function m(x,b,k,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(k)||null,s(b,x,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Gd:return x=x.get(j.key===null?k:j.key)||null,l(b,x,j,w);case Qo:return x=x.get(j.key===null?k:j.key)||null,c(b,x,j,w);case $i:var T=j._init;return m(x,b,k,T(j._payload),w)}if(pc(j)||Kl(j))return x=x.get(k)||null,d(b,x,j,w,null);af(b,j)}return null}function g(x,b,k,j){for(var w=null,T=null,S=b,E=b=0,P=null;S!==null&&E<k.length;E++){S.index>E?(P=S,S=null):P=S.sibling;var N=p(x,S,k[E],j);if(N===null){S===null&&(S=P);break}t&&S&&N.alternate===null&&e(x,S),b=a(N,b,E),T===null?w=N:T.sibling=N,T=N,S=P}if(E===k.length)return r(x,S),lt&&Da(x,E),w;if(S===null){for(;E<k.length;E++)S=f(x,k[E],j),S!==null&&(b=a(S,b,E),T===null?w=S:T.sibling=S,T=S);return lt&&Da(x,E),w}for(S=n(x,S);E<k.length;E++)P=m(S,x,E,k[E],j),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?E:P.key),b=a(P,b,E),T===null?w=P:T.sibling=P,T=P);return t&&S.forEach(function(I){return e(x,I)}),lt&&Da(x,E),w}function v(x,b,k,j){var w=Kl(k);if(typeof w!="function")throw Error(te(150));if(k=w.call(k),k==null)throw Error(te(151));for(var T=w=null,S=b,E=b=0,P=null,N=k.next();S!==null&&!N.done;E++,N=k.next()){S.index>E?(P=S,S=null):P=S.sibling;var I=p(x,S,N.value,j);if(I===null){S===null&&(S=P);break}t&&S&&I.alternate===null&&e(x,S),b=a(I,b,E),T===null?w=I:T.sibling=I,T=I,S=P}if(N.done)return r(x,S),lt&&Da(x,E),w;if(S===null){for(;!N.done;E++,N=k.next())N=f(x,N.value,j),N!==null&&(b=a(N,b,E),T===null?w=N:T.sibling=N,T=N);return lt&&Da(x,E),w}for(S=n(x,S);!N.done;E++,N=k.next())N=m(S,x,E,N.value,j),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?E:N.key),b=a(N,b,E),T===null?w=N:T.sibling=N,T=N);return t&&S.forEach(function(O){return e(x,O)}),lt&&Da(x,E),w}function y(x,b,k,j){if(typeof k=="object"&&k!==null&&k.type===Xo&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Gd:e:{for(var w=k.key,T=b;T!==null;){if(T.key===w){if(w=k.type,w===Xo){if(T.tag===7){r(x,T.sibling),b=i(T,k.props.children),b.return=x,x=b;break e}}else if(T.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$i&&f1(w)===T.type){r(x,T.sibling),b=i(T,k.props),b.ref=Zl(x,T,k),b.return=x,x=b;break e}r(x,T);break}else e(x,T);T=T.sibling}k.type===Xo?(b=Ja(k.props.children,x.mode,j,k.key),b.return=x,x=b):(j=Ff(k.type,k.key,k.props,null,x.mode,j),j.ref=Zl(x,b,k),j.return=x,x=j)}return o(x);case Qo:e:{for(T=k.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===k.containerInfo&&b.stateNode.implementation===k.implementation){r(x,b.sibling),b=i(b,k.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else e(x,b);b=b.sibling}b=ty(k,x.mode,j),b.return=x,x=b}return o(x);case $i:return T=k._init,y(x,b,T(k._payload),j)}if(pc(k))return g(x,b,k,j);if(Kl(k))return v(x,b,k,j);af(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,b!==null&&b.tag===6?(r(x,b.sibling),b=i(b,k),b.return=x,x=b):(r(x,b),b=ey(k,x.mode,j),b.return=x,x=b),o(x)):r(x,b)}return y}var Ns=gC(!0),yC=gC(!1),fh=ba(null),hh=null,as=null,nb=null;function ib(){nb=as=hh=null}function ab(t){var e=fh.current;st(fh),t._currentValue=e}function xv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ys(t,e){hh=t,nb=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kr=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(nb!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(hh===null)throw Error(te(308));as=t,hh.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var Ua=null;function ob(t){Ua===null?Ua=[t]:Ua.push(t)}function vC(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,ob(e)):(r.next=i.next,i.next=r),e.interleaved=r,mi(t,n)}function mi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Li=!1;function sb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ra(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,mi(t,r)}return i=n.interleaved,i===null?(e.next=e,ob(n)):(e.next=i.next,i.next=e),n.interleaved=e,mi(t,r)}function Rf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,qx(t,r)}}function h1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ph(t,e,r,n){var i=t.updateQueue;Li=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==o&&(s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,d=c=l=null,s=a;do{var p=s.lane,m=s.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,v=s;switch(p=e,m=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=pt({},f,p);break e;case 2:Li=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[s]:p.push(s))}else m={eventTime:m,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);oo|=o,t.lanes=o,t.memoizedState=f}}function p1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(te(191,i));i.call(n)}}}var ad={},Rn=ba(ad),ru=ba(ad),nu=ba(ad);function za(t){if(t===ad)throw Error(te(174));return t}function lb(t,e){switch(Ze(nu,e),Ze(ru,t),Ze(Rn,ad),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zy(e,t)}st(Rn),Ze(Rn,e)}function Is(){st(Rn),st(ru),st(nu)}function bC(t){za(nu.current);var e=za(Rn.current),r=Zy(e,t.type);e!==r&&(Ze(ru,t),Ze(Rn,r))}function cb(t){ru.current===t&&(st(Rn),st(ru))}var dt=ba(0);function mh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kg=[];function ub(){for(var t=0;t<Kg.length;t++)Kg[t]._workInProgressVersionPrimary=null;Kg.length=0}var Df=Ei.ReactCurrentDispatcher,Yg=Ei.ReactCurrentBatchConfig,ao=0,ht=null,It=null,Vt=null,gh=!1,jc=!1,iu=0,r4=0;function er(){throw Error(te(321))}function db(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!_n(t[r],e[r]))return!1;return!0}function fb(t,e,r,n,i,a){if(ao=a,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Df.current=t===null||t.memoizedState===null?o4:s4,t=r(n,i),jc){a=0;do{if(jc=!1,iu=0,25<=a)throw Error(te(301));a+=1,Vt=It=null,e.updateQueue=null,Df.current=l4,t=r(n,i)}while(jc)}if(Df.current=yh,e=It!==null&&It.next!==null,ao=0,Vt=It=ht=null,gh=!1,e)throw Error(te(300));return t}function hb(){var t=iu!==0;return iu=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ht.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function tn(){if(It===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Vt===null?ht.memoizedState:Vt.next;if(e!==null)Vt=e,It=t;else{if(t===null)throw Error(te(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Vt===null?ht.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function au(t,e){return typeof e=="function"?e(t):e}function Qg(t){var e=tn(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=It,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,c=a;do{var d=c.lane;if((ao&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,o=n):l=l.next=f,ht.lanes|=d,oo|=d}c=c.next}while(c!==null&&c!==a);l===null?o=n:l.next=s,_n(n,e.memoizedState)||(kr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,ht.lanes|=a,oo|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Xg(t){var e=tn(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);_n(a,e.memoizedState)||(kr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function wC(){}function _C(t,e){var r=ht,n=tn(),i=e(),a=!_n(n.memoizedState,i);if(a&&(n.memoizedState=i,kr=!0),n=n.queue,pb(EC.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Vt!==null&&Vt.memoizedState.tag&1){if(r.flags|=2048,ou(9,SC.bind(null,r,n,i,e),void 0,null),Ft===null)throw Error(te(349));ao&30||kC(r,e,i)}return i}function kC(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function SC(t,e,r,n){e.value=r,e.getSnapshot=n,TC(e)&&AC(t)}function EC(t,e,r){return r(function(){TC(e)&&AC(t)})}function TC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_n(t,r)}catch{return!0}}function AC(t){var e=mi(t,1);e!==null&&bn(e,t,1,-1)}function m1(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:t},e.queue=t,t=t.dispatch=a4.bind(null,ht,t),[e.memoizedState,t]}function ou(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function PC(){return tn().memoizedState}function Mf(t,e,r,n){var i=An();ht.flags|=t,i.memoizedState=ou(1|e,r,void 0,n===void 0?null:n)}function Kp(t,e,r,n){var i=tn();n=n===void 0?null:n;var a=void 0;if(It!==null){var o=It.memoizedState;if(a=o.destroy,n!==null&&db(n,o.deps)){i.memoizedState=ou(e,r,a,n);return}}ht.flags|=t,i.memoizedState=ou(1|e,r,a,n)}function g1(t,e){return Mf(8390656,8,t,e)}function pb(t,e){return Kp(2048,8,t,e)}function CC(t,e){return Kp(4,2,t,e)}function jC(t,e){return Kp(4,4,t,e)}function NC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IC(t,e,r){return r=r!=null?r.concat([t]):null,Kp(4,4,NC.bind(null,e,t),r)}function mb(){}function OC(t,e){var r=tn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&db(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function RC(t,e){var r=tn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&db(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function DC(t,e,r){return ao&21?(_n(r,e)||(r=FP(),ht.lanes|=r,oo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kr=!0),t.memoizedState=r)}function n4(t,e){var r=ze;ze=r!==0&&4>r?r:4,t(!0);var n=Yg.transition;Yg.transition={};try{t(!1),e()}finally{ze=r,Yg.transition=n}}function MC(){return tn().memoizedState}function i4(t,e,r){var n=ia(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},$C(t))LC(e,r);else if(r=vC(t,e,r,n),r!==null){var i=mr();bn(r,t,n,i),VC(r,e,n)}}function a4(t,e,r){var n=ia(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if($C(t))LC(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,_n(s,o)){var l=e.interleaved;l===null?(i.next=i,ob(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=vC(t,e,i,n),r!==null&&(i=mr(),bn(r,t,n,i),VC(r,e,n))}}function $C(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function LC(t,e){jc=gh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function VC(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,qx(t,r)}}var yh={readContext:en,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},o4={readContext:en,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:g1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Mf(4194308,4,NC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Mf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mf(4,2,t,e)},useMemo:function(t,e){var r=An();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=An();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=i4.bind(null,ht,t),[n.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:m1,useDebugValue:mb,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=m1(!1),e=t[0];return t=n4.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ht,i=An();if(lt){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),Ft===null)throw Error(te(349));ao&30||kC(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,g1(EC.bind(null,n,a,t),[t]),n.flags|=2048,ou(9,SC.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=An(),e=Ft.identifierPrefix;if(lt){var r=Zn,n=Jn;r=(n&~(1<<32-xn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=iu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=r4++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},s4={readContext:en,useCallback:OC,useContext:en,useEffect:pb,useImperativeHandle:IC,useInsertionEffect:CC,useLayoutEffect:jC,useMemo:RC,useReducer:Qg,useRef:PC,useState:function(){return Qg(au)},useDebugValue:mb,useDeferredValue:function(t){var e=tn();return DC(e,It.memoizedState,t)},useTransition:function(){var t=Qg(au)[0],e=tn().memoizedState;return[t,e]},useMutableSource:wC,useSyncExternalStore:_C,useId:MC,unstable_isNewReconciler:!1},l4={readContext:en,useCallback:OC,useContext:en,useEffect:pb,useImperativeHandle:IC,useInsertionEffect:CC,useLayoutEffect:jC,useMemo:RC,useReducer:Xg,useRef:PC,useState:function(){return Xg(au)},useDebugValue:mb,useDeferredValue:function(t){var e=tn();return It===null?e.memoizedState=t:DC(e,It.memoizedState,t)},useTransition:function(){var t=Xg(au)[0],e=tn().memoizedState;return[t,e]},useMutableSource:wC,useSyncExternalStore:_C,useId:MC,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function bv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Yp={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=mr(),i=ia(t),a=oi(n,i);a.payload=e,r!=null&&(a.callback=r),e=ra(t,a,i),e!==null&&(bn(e,t,i,n),Rf(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=mr(),i=ia(t),a=oi(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ra(t,a,i),e!==null&&(bn(e,t,i,n),Rf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=mr(),n=ia(t),i=oi(r,n);i.tag=2,e!=null&&(i.callback=e),e=ra(t,i,n),e!==null&&(bn(e,t,n,r),Rf(e,t,n))}};function y1(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Jc(r,n)||!Jc(i,a):!0}function FC(t,e,r){var n=!1,i=ma,a=e.contextType;return typeof a=="object"&&a!==null?a=en(a):(i=Ar(e)?no:cr.current,n=e.contextTypes,a=(n=n!=null)?Cs(t,i):ma),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function v1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Yp.enqueueReplaceState(e,e.state,null)}function wv(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},sb(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=en(a):(a=Ar(e)?no:cr.current,i.context=Cs(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(bv(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yp.enqueueReplaceState(i,i.state,null),ph(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Os(t,e){try{var r="",n=e;do r+=M$(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Jg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function _v(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var c4=typeof WeakMap=="function"?WeakMap:Map;function BC(t,e,r){r=oi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){xh||(xh=!0,Iv=n),_v(t,e)},r}function UC(t,e,r){r=oi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){_v(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){_v(t,e),typeof n!="function"&&(na===null?na=new Set([this]):na.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function x1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new c4;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=k4.bind(null,t,e,r),e.then(t,t))}function b1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w1(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=oi(-1,1),e.tag=2,ra(r,e,1))),r.lanes|=1),t)}var u4=Ei.ReactCurrentOwner,kr=!1;function fr(t,e,r,n){e.child=t===null?yC(e,null,r,n):Ns(e,t.child,r,n)}function _1(t,e,r,n,i){r=r.render;var a=e.ref;return ys(e,i),n=fb(t,e,r,n,a,i),r=hb(),t!==null&&!kr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gi(t,e,i)):(lt&&r&&eb(e),e.flags|=1,fr(t,e,n,i),e.child)}function k1(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!kb(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,zC(t,e,a,n,i)):(t=Ff(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Jc,r(o,n)&&t.ref===e.ref)return gi(t,e,i)}return e.flags|=1,t=aa(a,n),t.ref=e.ref,t.return=e,e.child=t}function zC(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Jc(a,n)&&t.ref===e.ref)if(kr=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(kr=!0);else return e.lanes=t.lanes,gi(t,e,i)}return kv(t,e,r,n,i)}function WC(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(ss,Rr),Rr|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(ss,Rr),Rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ze(ss,Rr),Rr|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Ze(ss,Rr),Rr|=n;return fr(t,e,i,r),e.child}function HC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function kv(t,e,r,n,i){var a=Ar(r)?no:cr.current;return a=Cs(e,a),ys(e,i),r=fb(t,e,r,n,a,i),n=hb(),t!==null&&!kr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gi(t,e,i)):(lt&&n&&eb(e),e.flags|=1,fr(t,e,r,i),e.child)}function S1(t,e,r,n,i){if(Ar(r)){var a=!0;ch(e)}else a=!1;if(ys(e,i),e.stateNode===null)$f(t,e),FC(e,r,n),wv(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Ar(r)?no:cr.current,c=Cs(e,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==c)&&v1(e,o,n,c),Li=!1;var p=e.memoizedState;o.state=p,ph(e,n,o,i),l=e.memoizedState,s!==n||p!==l||Tr.current||Li?(typeof d=="function"&&(bv(e,r,d,n),l=e.memoizedState),(s=Li||y1(e,r,s,n,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,xC(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:dn(e.type,s),o.props=c,f=e.pendingProps,p=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=en(l):(l=Ar(r)?no:cr.current,l=Cs(e,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||p!==l)&&v1(e,o,n,l),Li=!1,p=e.memoizedState,o.state=p,ph(e,n,o,i);var g=e.memoizedState;s!==f||p!==g||Tr.current||Li?(typeof m=="function"&&(bv(e,r,m,n),g=e.memoizedState),(c=Li||y1(e,r,c,n,p,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Sv(t,e,r,n,a,i)}function Sv(t,e,r,n,i,a){HC(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&c1(e,r,!1),gi(t,e,a);n=e.stateNode,u4.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ns(e,t.child,null,a),e.child=Ns(e,null,s,a)):fr(t,e,s,a),e.memoizedState=n.state,i&&c1(e,r,!0),e.child}function qC(t){var e=t.stateNode;e.pendingContext?l1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l1(t,e.context,!1),lb(t,e.containerInfo)}function E1(t,e,r,n,i){return js(),rb(i),e.flags|=256,fr(t,e,r,n),e.child}var Ev={dehydrated:null,treeContext:null,retryLane:0};function Tv(t){return{baseLanes:t,cachePool:null,transitions:null}}function GC(t,e,r){var n=e.pendingProps,i=dt.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ze(dt,i&1),t===null)return vv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Jp(o,n,0,null),t=Ja(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Tv(r),e.memoizedState=Ev,t):gb(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return d4(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=aa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=aa(s,a):(a=Ja(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Tv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Ev,n}return a=t.child,t=a.sibling,n=aa(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function gb(t,e){return e=Jp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function of(t,e,r,n){return n!==null&&rb(n),Ns(e,t.child,null,r),t=gb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function d4(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Jg(Error(te(422))),of(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Jp({mode:"visible",children:n.children},i,0,null),a=Ja(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Ns(e,t.child,null,o),e.child.memoizedState=Tv(o),e.memoizedState=Ev,a);if(!(e.mode&1))return of(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(te(419)),n=Jg(a,n,void 0),of(t,e,o,n)}if(s=(o&t.childLanes)!==0,kr||s){if(n=Ft,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,mi(t,i),bn(n,t,i,-1))}return _b(),n=Jg(Error(te(421))),of(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=S4.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,$r=ta(i.nextSibling),Vr=e,lt=!0,mn=null,t!==null&&(Gr[Kr++]=Jn,Gr[Kr++]=Zn,Gr[Kr++]=io,Jn=t.id,Zn=t.overflow,io=e),e=gb(e,n.children),e.flags|=4096,e)}function T1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),xv(t.return,e,r)}function Zg(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function KC(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(fr(t,e,n.children,r),n=dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T1(t,r,e);else if(t.tag===19)T1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ze(dt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&mh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Zg(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Zg(e,!0,r,null,a);break;case"together":Zg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $f(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=aa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=aa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function f4(t,e,r){switch(e.tag){case 3:qC(e),js();break;case 5:bC(e);break;case 1:Ar(e.type)&&ch(e);break;case 4:lb(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ze(fh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ze(dt,dt.current&1),e.flags|=128,null):r&e.child.childLanes?GC(t,e,r):(Ze(dt,dt.current&1),t=gi(t,e,r),t!==null?t.sibling:null);Ze(dt,dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return KC(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(dt,dt.current),n)break;return null;case 22:case 23:return e.lanes=0,WC(t,e,r)}return gi(t,e,r)}var YC,Av,QC,XC;YC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Av=function(){};QC=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,za(Rn.current);var a=null;switch(r){case"input":i=Yy(t,i),n=Yy(t,n),a=[];break;case"select":i=pt({},i,{value:void 0}),n=pt({},n,{value:void 0}),a=[];break;case"textarea":i=Jy(t,i),n=Jy(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=sh)}ev(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hc.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nt("scroll",t),a||s===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};XC=function(t,e,r,n){r!==n&&(e.flags|=4)};function ec(t,e){if(!lt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function h4(t,e,r){var n=e.pendingProps;switch(tb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return Ar(e.type)&&lh(),tr(e),null;case 3:return n=e.stateNode,Is(),st(Tr),st(cr),ub(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(nf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(Dv(mn),mn=null))),Av(t,e),tr(e),null;case 5:cb(e);var i=za(nu.current);if(r=e.type,t!==null&&e.stateNode!=null)QC(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return tr(e),null}if(t=za(Rn.current),nf(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Pn]=e,n[tu]=a,t=(e.mode&1)!==0,r){case"dialog":nt("cancel",n),nt("close",n);break;case"iframe":case"object":case"embed":nt("load",n);break;case"video":case"audio":for(i=0;i<gc.length;i++)nt(gc[i],n);break;case"source":nt("error",n);break;case"img":case"image":case"link":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"input":Dk(n,a),nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},nt("invalid",n);break;case"textarea":$k(n,a),nt("invalid",n)}ev(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&rf(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&rf(n.textContent,s,t),i=["children",""+s]):Hc.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&nt("scroll",n)}switch(r){case"input":Kd(n),Mk(n,a,!0);break;case"textarea":Kd(n),Lk(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=sh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EP(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Pn]=e,t[tu]=n,YC(t,e,!1,!1),e.stateNode=t;e:{switch(o=tv(r,n),r){case"dialog":nt("cancel",t),nt("close",t),i=n;break;case"iframe":case"object":case"embed":nt("load",t),i=n;break;case"video":case"audio":for(i=0;i<gc.length;i++)nt(gc[i],t);i=n;break;case"source":nt("error",t),i=n;break;case"img":case"image":case"link":nt("error",t),nt("load",t),i=n;break;case"details":nt("toggle",t),i=n;break;case"input":Dk(t,n),i=Yy(t,n),nt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=pt({},n,{value:void 0}),nt("invalid",t);break;case"textarea":$k(t,n),i=Jy(t,n),nt("invalid",t);break;default:i=n}ev(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?PP(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&TP(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&qc(t,l):typeof l=="number"&&qc(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Hc.hasOwnProperty(a)?l!=null&&a==="onScroll"&&nt("scroll",t):l!=null&&Fx(t,a,l,o))}switch(r){case"input":Kd(t),Mk(t,n,!1);break;case"textarea":Kd(t),Lk(t);break;case"option":n.value!=null&&t.setAttribute("value",""+pa(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?hs(t,!!n.multiple,a,!1):n.defaultValue!=null&&hs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)XC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=za(nu.current),za(Rn.current),nf(e)){if(n=e.stateNode,r=e.memoizedProps,n[Pn]=e,(a=n.nodeValue!==r)&&(t=Vr,t!==null))switch(t.tag){case 3:rf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rf(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Pn]=e,e.stateNode=n}return tr(e),null;case 13:if(st(dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(lt&&$r!==null&&e.mode&1&&!(e.flags&128))mC(),js(),e.flags|=98560,a=!1;else if(a=nf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(te(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(te(317));a[Pn]=e}else js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),a=!1}else mn!==null&&(Dv(mn),mn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Ot===0&&(Ot=3):_b())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return Is(),Av(t,e),t===null&&Zc(e.stateNode.containerInfo),tr(e),null;case 10:return ab(e.type._context),tr(e),null;case 17:return Ar(e.type)&&lh(),tr(e),null;case 19:if(st(dt),a=e.memoizedState,a===null)return tr(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)ec(a,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mh(t),o!==null){for(e.flags|=128,ec(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ze(dt,dt.current&1|2),e.child}t=t.sibling}a.tail!==null&&bt()>Rs&&(e.flags|=128,n=!0,ec(a,!1),e.lanes=4194304)}else{if(!n)if(t=mh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ec(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!lt)return tr(e),null}else 2*bt()-a.renderingStartTime>Rs&&r!==1073741824&&(e.flags|=128,n=!0,ec(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=bt(),e.sibling=null,r=dt.current,Ze(dt,n?r&1|2:r&1),e):(tr(e),null);case 22:case 23:return wb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Rr&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function p4(t,e){switch(tb(e),e.tag){case 1:return Ar(e.type)&&lh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(),st(Tr),st(cr),ub(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cb(e),null;case 13:if(st(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(dt),null;case 4:return Is(),null;case 10:return ab(e.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var sf=!1,ar=!1,m4=typeof WeakSet=="function"?WeakSet:Set,se=null;function os(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yt(t,e,n)}else r.current=null}function Pv(t,e,r){try{r()}catch(n){yt(t,e,n)}}var A1=!1;function g4(t,e){if(dv=ih,t=rC(),Zx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==r||i!==0&&f.nodeType!==3||(s=o+i),f!==a||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===r&&++c===i&&(s=o),p===a&&++d===n&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(fv={focusedElem:t,selectionRange:r},ih=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:dn(e.type,v),y);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(j){yt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return g=A1,A1=!1,g}function Nc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Pv(e,r,a)}i=i.next}while(i!==n)}}function Qp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Cv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function JC(t){var e=t.alternate;e!==null&&(t.alternate=null,JC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[tu],delete e[mv],delete e[JL],delete e[ZL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZC(t){return t.tag===5||t.tag===3||t.tag===4}function P1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=sh));else if(n!==4&&(t=t.child,t!==null))for(jv(t,e,r),t=t.sibling;t!==null;)jv(t,e,r),t=t.sibling}function Nv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Nv(t,e,r),t=t.sibling;t!==null;)Nv(t,e,r),t=t.sibling}var Wt=null,fn=!1;function Di(t,e,r){for(r=r.child;r!==null;)ej(t,e,r),r=r.sibling}function ej(t,e,r){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Up,r)}catch{}switch(r.tag){case 5:ar||os(r,e);case 6:var n=Wt,i=fn;Wt=null,Di(t,e,r),Wt=n,fn=i,Wt!==null&&(fn?(t=Wt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Wt.removeChild(r.stateNode));break;case 18:Wt!==null&&(fn?(t=Wt,r=r.stateNode,t.nodeType===8?qg(t.parentNode,r):t.nodeType===1&&qg(t,r),Qc(t)):qg(Wt,r.stateNode));break;case 4:n=Wt,i=fn,Wt=r.stateNode.containerInfo,fn=!0,Di(t,e,r),Wt=n,fn=i;break;case 0:case 11:case 14:case 15:if(!ar&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Pv(r,e,o),i=i.next}while(i!==n)}Di(t,e,r);break;case 1:if(!ar&&(os(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){yt(r,e,s)}Di(t,e,r);break;case 21:Di(t,e,r);break;case 22:r.mode&1?(ar=(n=ar)||r.memoizedState!==null,Di(t,e,r),ar=n):Di(t,e,r);break;default:Di(t,e,r)}}function C1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new m4),e.forEach(function(n){var i=E4.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function cn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Wt=s.stateNode,fn=!1;break e;case 3:Wt=s.stateNode.containerInfo,fn=!0;break e;case 4:Wt=s.stateNode.containerInfo,fn=!0;break e}s=s.return}if(Wt===null)throw Error(te(160));ej(a,o,i),Wt=null,fn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){yt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tj(e,t),e=e.sibling}function tj(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),Tn(t),n&4){try{Nc(3,t,t.return),Qp(3,t)}catch(v){yt(t,t.return,v)}try{Nc(5,t,t.return)}catch(v){yt(t,t.return,v)}}break;case 1:cn(e,t),Tn(t),n&512&&r!==null&&os(r,r.return);break;case 5:if(cn(e,t),Tn(t),n&512&&r!==null&&os(r,r.return),t.flags&32){var i=t.stateNode;try{qc(i,"")}catch(v){yt(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&kP(i,a),tv(s,o);var c=tv(s,a);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?PP(i,f):d==="dangerouslySetInnerHTML"?TP(i,f):d==="children"?qc(i,f):Fx(i,d,f,c)}switch(s){case"input":Qy(i,a);break;case"textarea":SP(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?hs(i,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?hs(i,!!a.multiple,a.defaultValue,!0):hs(i,!!a.multiple,a.multiple?[]:"",!1))}i[tu]=a}catch(v){yt(t,t.return,v)}}break;case 6:if(cn(e,t),Tn(t),n&4){if(t.stateNode===null)throw Error(te(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){yt(t,t.return,v)}}break;case 3:if(cn(e,t),Tn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qc(e.containerInfo)}catch(v){yt(t,t.return,v)}break;case 4:cn(e,t),Tn(t);break;case 13:cn(e,t),Tn(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(xb=bt())),n&4&&C1(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ar=(c=ar)||d,cn(e,t),ar=c):cn(e,t),Tn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(f=se=d;se!==null;){switch(p=se,m=p.child,p.tag){case 0:case 11:case 14:case 15:Nc(4,p,p.return);break;case 1:os(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){yt(n,r,v)}}break;case 5:os(p,p.return);break;case 22:if(p.memoizedState!==null){N1(f);continue}}m!==null?(m.return=p,se=m):N1(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=AP("display",o))}catch(v){yt(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){yt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(e,t),Tn(t),n&4&&C1(t);break;case 21:break;default:cn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ZC(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(qc(i,""),n.flags&=-33);var a=P1(t);Nv(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=P1(t);jv(t,s,o);break;default:throw Error(te(161))}}catch(l){yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function y4(t,e,r){se=t,rj(t)}function rj(t,e,r){for(var n=(t.mode&1)!==0;se!==null;){var i=se,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||sf;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||ar;s=sf;var c=ar;if(sf=o,(ar=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?I1(i):l!==null?(l.return=o,se=l):I1(i);for(;a!==null;)se=a,rj(a),a=a.sibling;se=i,sf=s,ar=c}j1(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,se=a):j1(t)}}function j1(t){for(;se!==null;){var e=se;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ar||Qp(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ar)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:dn(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&p1(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}p1(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Qc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}ar||e.flags&512&&Cv(e)}catch(p){yt(e,e.return,p)}}if(e===t){se=null;break}if(r=e.sibling,r!==null){r.return=e.return,se=r;break}se=e.return}}function N1(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var r=e.sibling;if(r!==null){r.return=e.return,se=r;break}se=e.return}}function I1(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Qp(4,e)}catch(l){yt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){yt(e,i,l)}}var a=e.return;try{Cv(e)}catch(l){yt(e,a,l)}break;case 5:var o=e.return;try{Cv(e)}catch(l){yt(e,o,l)}}}catch(l){yt(e,e.return,l)}if(e===t){se=null;break}var s=e.sibling;if(s!==null){s.return=e.return,se=s;break}se=e.return}}var v4=Math.ceil,vh=Ei.ReactCurrentDispatcher,yb=Ei.ReactCurrentOwner,Xr=Ei.ReactCurrentBatchConfig,Oe=0,Ft=null,St=null,Kt=0,Rr=0,ss=ba(0),Ot=0,su=null,oo=0,Xp=0,vb=0,Ic=null,wr=null,xb=0,Rs=1/0,Qn=null,xh=!1,Iv=null,na=null,lf=!1,Ki=null,bh=0,Oc=0,Ov=null,Lf=-1,Vf=0;function mr(){return Oe&6?bt():Lf!==-1?Lf:Lf=bt()}function ia(t){return t.mode&1?Oe&2&&Kt!==0?Kt&-Kt:t4.transition!==null?(Vf===0&&(Vf=FP()),Vf):(t=ze,t!==0||(t=window.event,t=t===void 0?16:GP(t.type)),t):1}function bn(t,e,r,n){if(50<Oc)throw Oc=0,Ov=null,Error(te(185));rd(t,r,n),(!(Oe&2)||t!==Ft)&&(t===Ft&&(!(Oe&2)&&(Xp|=r),Ot===4&&Bi(t,Kt)),Pr(t,n),r===1&&Oe===0&&!(e.mode&1)&&(Rs=bt()+500,Gp&&wa()))}function Pr(t,e){var r=t.callbackNode;tL(t,e);var n=nh(t,t===Ft?Kt:0);if(n===0)r!==null&&Bk(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Bk(r),e===1)t.tag===0?e4(O1.bind(null,t)):fC(O1.bind(null,t)),QL(function(){!(Oe&6)&&wa()}),r=null;else{switch(BP(n)){case 1:r=Hx;break;case 4:r=LP;break;case 16:r=rh;break;case 536870912:r=VP;break;default:r=rh}r=uj(r,nj.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function nj(t,e){if(Lf=-1,Vf=0,Oe&6)throw Error(te(327));var r=t.callbackNode;if(vs()&&t.callbackNode!==r)return null;var n=nh(t,t===Ft?Kt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=wh(t,n);else{e=n;var i=Oe;Oe|=2;var a=aj();(Ft!==t||Kt!==e)&&(Qn=null,Rs=bt()+500,Xa(t,e));do try{w4();break}catch(s){ij(t,s)}while(!0);ib(),vh.current=a,Oe=i,St!==null?e=0:(Ft=null,Kt=0,e=Ot)}if(e!==0){if(e===2&&(i=ov(t),i!==0&&(n=i,e=Rv(t,i))),e===1)throw r=su,Xa(t,0),Bi(t,n),Pr(t,bt()),r;if(e===6)Bi(t,n);else{if(i=t.current.alternate,!(n&30)&&!x4(i)&&(e=wh(t,n),e===2&&(a=ov(t),a!==0&&(n=a,e=Rv(t,a))),e===1))throw r=su,Xa(t,0),Bi(t,n),Pr(t,bt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:Ma(t,wr,Qn);break;case 3:if(Bi(t,n),(n&130023424)===n&&(e=xb+500-bt(),10<e)){if(nh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){mr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pv(Ma.bind(null,t,wr,Qn),e);break}Ma(t,wr,Qn);break;case 4:if(Bi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-xn(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=bt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*v4(n/1960))-n,10<n){t.timeoutHandle=pv(Ma.bind(null,t,wr,Qn),n);break}Ma(t,wr,Qn);break;case 5:Ma(t,wr,Qn);break;default:throw Error(te(329))}}}return Pr(t,bt()),t.callbackNode===r?nj.bind(null,t):null}function Rv(t,e){var r=Ic;return t.current.memoizedState.isDehydrated&&(Xa(t,e).flags|=256),t=wh(t,e),t!==2&&(e=wr,wr=r,e!==null&&Dv(e)),t}function Dv(t){wr===null?wr=t:wr.push.apply(wr,t)}function x4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!_n(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bi(t,e){for(e&=~vb,e&=~Xp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-xn(e),n=1<<r;t[r]=-1,e&=~n}}function O1(t){if(Oe&6)throw Error(te(327));vs();var e=nh(t,0);if(!(e&1))return Pr(t,bt()),null;var r=wh(t,e);if(t.tag!==0&&r===2){var n=ov(t);n!==0&&(e=n,r=Rv(t,n))}if(r===1)throw r=su,Xa(t,0),Bi(t,e),Pr(t,bt()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ma(t,wr,Qn),Pr(t,bt()),null}function bb(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(Rs=bt()+500,Gp&&wa())}}function so(t){Ki!==null&&Ki.tag===0&&!(Oe&6)&&vs();var e=Oe;Oe|=1;var r=Xr.transition,n=ze;try{if(Xr.transition=null,ze=1,t)return t()}finally{ze=n,Xr.transition=r,Oe=e,!(Oe&6)&&wa()}}function wb(){Rr=ss.current,st(ss)}function Xa(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,YL(r)),St!==null)for(r=St.return;r!==null;){var n=r;switch(tb(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&lh();break;case 3:Is(),st(Tr),st(cr),ub();break;case 5:cb(n);break;case 4:Is();break;case 13:st(dt);break;case 19:st(dt);break;case 10:ab(n.type._context);break;case 22:case 23:wb()}r=r.return}if(Ft=t,St=t=aa(t.current,null),Kt=Rr=e,Ot=0,su=null,vb=Xp=oo=0,wr=Ic=null,Ua!==null){for(e=0;e<Ua.length;e++)if(r=Ua[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Ua=null}return t}function ij(t,e){do{var r=St;try{if(ib(),Df.current=yh,gh){for(var n=ht.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}gh=!1}if(ao=0,Vt=It=ht=null,jc=!1,iu=0,yb.current=null,r===null||r.return===null){Ot=1,su=e,St=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=Kt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=s,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=b1(o);if(m!==null){m.flags&=-257,w1(m,o,s,a,e),m.mode&1&&x1(a,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){x1(a,c,e),_b();break e}l=Error(te(426))}}else if(lt&&s.mode&1){var y=b1(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),w1(y,o,s,a,e),rb(Os(l,s));break e}}a=l=Os(l,s),Ot!==4&&(Ot=2),Ic===null?Ic=[a]:Ic.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=BC(a,l,e);h1(a,x);break e;case 1:s=l;var b=a.type,k=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(na===null||!na.has(k)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=UC(a,s,e);h1(a,j);break e}}a=a.return}while(a!==null)}sj(r)}catch(w){e=w,St===r&&r!==null&&(St=r=r.return);continue}break}while(!0)}function aj(){var t=vh.current;return vh.current=yh,t===null?yh:t}function _b(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ft===null||!(oo&268435455)&&!(Xp&268435455)||Bi(Ft,Kt)}function wh(t,e){var r=Oe;Oe|=2;var n=aj();(Ft!==t||Kt!==e)&&(Qn=null,Xa(t,e));do try{b4();break}catch(i){ij(t,i)}while(!0);if(ib(),Oe=r,vh.current=n,St!==null)throw Error(te(261));return Ft=null,Kt=0,Ot}function b4(){for(;St!==null;)oj(St)}function w4(){for(;St!==null&&!q$();)oj(St)}function oj(t){var e=cj(t.alternate,t,Rr);t.memoizedProps=t.pendingProps,e===null?sj(t):St=e,yb.current=null}function sj(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=p4(r,e),r!==null){r.flags&=32767,St=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,St=null;return}}else if(r=h4(r,e,Rr),r!==null){St=r;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);Ot===0&&(Ot=5)}function Ma(t,e,r){var n=ze,i=Xr.transition;try{Xr.transition=null,ze=1,_4(t,e,r,n)}finally{Xr.transition=i,ze=n}return null}function _4(t,e,r,n){do vs();while(Ki!==null);if(Oe&6)throw Error(te(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(rL(t,a),t===Ft&&(St=Ft=null,Kt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lf||(lf=!0,uj(rh,function(){return vs(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Xr.transition,Xr.transition=null;var o=ze;ze=1;var s=Oe;Oe|=4,yb.current=null,g4(t,r),tj(r,t),UL(fv),ih=!!dv,fv=dv=null,t.current=r,y4(r),G$(),Oe=s,ze=o,Xr.transition=a}else t.current=r;if(lf&&(lf=!1,Ki=t,bh=i),a=t.pendingLanes,a===0&&(na=null),Q$(r.stateNode),Pr(t,bt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(xh)throw xh=!1,t=Iv,Iv=null,t;return bh&1&&t.tag!==0&&vs(),a=t.pendingLanes,a&1?t===Ov?Oc++:(Oc=0,Ov=t):Oc=0,wa(),null}function vs(){if(Ki!==null){var t=BP(bh),e=Xr.transition,r=ze;try{if(Xr.transition=null,ze=16>t?16:t,Ki===null)var n=!1;else{if(t=Ki,Ki=null,bh=0,Oe&6)throw Error(te(331));var i=Oe;for(Oe|=4,se=t.current;se!==null;){var a=se,o=a.child;if(se.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Nc(8,d,a)}var f=d.child;if(f!==null)f.return=d,se=f;else for(;se!==null;){d=se;var p=d.sibling,m=d.return;if(JC(d),d===c){se=null;break}if(p!==null){p.return=m,se=p;break}se=m}}}var g=a.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}se=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,se=o;else e:for(;se!==null;){if(a=se,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Nc(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,se=x;break e}se=a.return}}var b=t.current;for(se=b;se!==null;){o=se;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,se=k;else e:for(o=b;se!==null;){if(s=se,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Qp(9,s)}}catch(w){yt(s,s.return,w)}if(s===o){se=null;break e}var j=s.sibling;if(j!==null){j.return=s.return,se=j;break e}se=s.return}}if(Oe=i,wa(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Up,t)}catch{}n=!0}return n}finally{ze=r,Xr.transition=e}}return!1}function R1(t,e,r){e=Os(r,e),e=BC(t,e,1),t=ra(t,e,1),e=mr(),t!==null&&(rd(t,1,e),Pr(t,e))}function yt(t,e,r){if(t.tag===3)R1(t,t,r);else for(;e!==null;){if(e.tag===3){R1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(na===null||!na.has(n))){t=Os(r,t),t=UC(e,t,1),e=ra(e,t,1),t=mr(),e!==null&&(rd(e,1,t),Pr(e,t));break}}e=e.return}}function k4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=mr(),t.pingedLanes|=t.suspendedLanes&r,Ft===t&&(Kt&r)===r&&(Ot===4||Ot===3&&(Kt&130023424)===Kt&&500>bt()-xb?Xa(t,0):vb|=r),Pr(t,e)}function lj(t,e){e===0&&(t.mode&1?(e=Xd,Xd<<=1,!(Xd&130023424)&&(Xd=4194304)):e=1);var r=mr();t=mi(t,e),t!==null&&(rd(t,e,r),Pr(t,r))}function S4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lj(t,r)}function E4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),lj(t,r)}var cj;cj=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tr.current)kr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return kr=!1,f4(t,e,r);kr=!!(t.flags&131072)}else kr=!1,lt&&e.flags&1048576&&hC(e,dh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;$f(t,e),t=e.pendingProps;var i=Cs(e,cr.current);ys(e,r),i=fb(null,e,n,t,i,r);var a=hb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(n)?(a=!0,ch(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sb(e),i.updater=Yp,e.stateNode=i,i._reactInternals=e,wv(e,n,t,r),e=Sv(null,e,n,!0,a,r)):(e.tag=0,lt&&a&&eb(e),fr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch($f(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=A4(n),t=dn(n,t),i){case 0:e=kv(null,e,n,t,r);break e;case 1:e=S1(null,e,n,t,r);break e;case 11:e=_1(null,e,n,t,r);break e;case 14:e=k1(null,e,n,dn(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dn(n,i),kv(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dn(n,i),S1(t,e,n,i,r);case 3:e:{if(qC(e),t===null)throw Error(te(387));n=e.pendingProps,a=e.memoizedState,i=a.element,xC(t,e),ph(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Os(Error(te(423)),e),e=E1(t,e,n,r,i);break e}else if(n!==i){i=Os(Error(te(424)),e),e=E1(t,e,n,r,i);break e}else for($r=ta(e.stateNode.containerInfo.firstChild),Vr=e,lt=!0,mn=null,r=yC(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(js(),n===i){e=gi(t,e,r);break e}fr(t,e,n,r)}e=e.child}return e;case 5:return bC(e),t===null&&vv(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,hv(n,i)?o=null:a!==null&&hv(n,a)&&(e.flags|=32),HC(t,e),fr(t,e,o,r),e.child;case 6:return t===null&&vv(e),null;case 13:return GC(t,e,r);case 4:return lb(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ns(e,null,n,r):fr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dn(n,i),_1(t,e,n,i,r);case 7:return fr(t,e,e.pendingProps,r),e.child;case 8:return fr(t,e,e.pendingProps.children,r),e.child;case 12:return fr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ze(fh,n._currentValue),n._currentValue=o,a!==null)if(_n(a.value,o)){if(a.children===i.children&&!Tr.current){e=gi(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=oi(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),xv(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(te(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),xv(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}fr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ys(e,r),i=en(i),n=n(i),e.flags|=1,fr(t,e,n,r),e.child;case 14:return n=e.type,i=dn(n,e.pendingProps),i=dn(n.type,i),k1(t,e,n,i,r);case 15:return zC(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dn(n,i),$f(t,e),e.tag=1,Ar(n)?(t=!0,ch(e)):t=!1,ys(e,r),FC(e,n,i),wv(e,n,i,r),Sv(null,e,n,!0,t,r);case 19:return KC(t,e,r);case 22:return WC(t,e,r)}throw Error(te(156,e.tag))};function uj(t,e){return $P(t,e)}function T4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(t,e,r,n){return new T4(t,e,r,n)}function kb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A4(t){if(typeof t=="function")return kb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ux)return 11;if(t===zx)return 14}return 2}function aa(t,e){var r=t.alternate;return r===null?(r=Yr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ff(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")kb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xo:return Ja(r.children,i,a,e);case Bx:o=8,i|=8;break;case Hy:return t=Yr(12,r,e,i|2),t.elementType=Hy,t.lanes=a,t;case qy:return t=Yr(13,r,e,i),t.elementType=qy,t.lanes=a,t;case Gy:return t=Yr(19,r,e,i),t.elementType=Gy,t.lanes=a,t;case bP:return Jp(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vP:o=10;break e;case xP:o=9;break e;case Ux:o=11;break e;case zx:o=14;break e;case $i:o=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Yr(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Ja(t,e,r,n){return t=Yr(7,t,n,e),t.lanes=r,t}function Jp(t,e,r,n){return t=Yr(22,t,n,e),t.elementType=bP,t.lanes=r,t.stateNode={isHidden:!1},t}function ey(t,e,r){return t=Yr(6,t,null,e),t.lanes=r,t}function ty(t,e,r){return e=Yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function P4(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dg(0),this.expirationTimes=Dg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dg(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sb(t,e,r,n,i,a,o,s,l){return t=new P4(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Yr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sb(a),t}function C4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function dj(t){if(!t)return ma;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(Ar(r))return dC(t,r,e)}return e}function fj(t,e,r,n,i,a,o,s,l){return t=Sb(r,n,!0,t,i,a,o,s,l),t.context=dj(null),r=t.current,n=mr(),i=ia(r),a=oi(n,i),a.callback=e??null,ra(r,a,i),t.current.lanes=i,rd(t,i,n),Pr(t,n),t}function Zp(t,e,r,n){var i=e.current,a=mr(),o=ia(i);return r=dj(r),e.context===null?e.context=r:e.pendingContext=r,e=oi(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ra(i,e,o),t!==null&&(bn(t,i,o,a),Rf(t,i,o)),o}function _h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Eb(t,e){D1(t,e),(t=t.alternate)&&D1(t,e)}function j4(){return null}var hj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tb(t){this._internalRoot=t}em.prototype.render=Tb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Zp(t,e,null,null)};em.prototype.unmount=Tb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){Zp(null,t,null,null)}),e[pi]=null}};function em(t){this._internalRoot=t}em.prototype.unstable_scheduleHydration=function(t){if(t){var e=WP();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Fi.length&&e!==0&&e<Fi[r].priority;r++);Fi.splice(r,0,t),r===0&&qP(t)}};function Ab(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M1(){}function N4(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=_h(o);a.call(c)}}var o=fj(e,n,t,0,null,!1,!1,"",M1);return t._reactRootContainer=o,t[pi]=o.current,Zc(t.nodeType===8?t.parentNode:t),so(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=_h(l);s.call(c)}}var l=Sb(t,0,!1,null,null,!1,!1,"",M1);return t._reactRootContainer=l,t[pi]=l.current,Zc(t.nodeType===8?t.parentNode:t),so(function(){Zp(e,l,r,n)}),l}function rm(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=_h(o);s.call(l)}}Zp(e,o,t,i)}else o=N4(r,e,t,i,n);return _h(o)}UP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=mc(e.pendingLanes);r!==0&&(qx(e,r|1),Pr(e,bt()),!(Oe&6)&&(Rs=bt()+500,wa()))}break;case 13:so(function(){var n=mi(t,1);if(n!==null){var i=mr();bn(n,t,1,i)}}),Eb(t,1)}};Gx=function(t){if(t.tag===13){var e=mi(t,134217728);if(e!==null){var r=mr();bn(e,t,134217728,r)}Eb(t,134217728)}};zP=function(t){if(t.tag===13){var e=ia(t),r=mi(t,e);if(r!==null){var n=mr();bn(r,t,e,n)}Eb(t,e)}};WP=function(){return ze};HP=function(t,e){var r=ze;try{return ze=t,e()}finally{ze=r}};nv=function(t,e,r){switch(e){case"input":if(Qy(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=qp(n);if(!i)throw Error(te(90));_P(n),Qy(n,i)}}}break;case"textarea":SP(t,r);break;case"select":e=r.value,e!=null&&hs(t,!!r.multiple,e,!1)}};NP=bb;IP=so;var I4={usingClientEntryPoint:!1,Events:[id,ts,qp,CP,jP,bb]},tc={findFiberByHostInstance:Ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O4={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DP(t),t===null?null:t.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||j4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Up=cf.inject(O4),On=cf}catch{}}Ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I4;Ur.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ab(e))throw Error(te(200));return C4(t,e,null,r)};Ur.createRoot=function(t,e){if(!Ab(t))throw Error(te(299));var r=!1,n="",i=hj;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Sb(t,1,!1,null,null,r,!1,n,i),t[pi]=e.current,Zc(t.nodeType===8?t.parentNode:t),new Tb(e)};Ur.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=DP(e),t=t===null?null:t.stateNode,t};Ur.flushSync=function(t){return so(t)};Ur.hydrate=function(t,e,r){if(!tm(e))throw Error(te(200));return rm(null,t,e,!0,r)};Ur.hydrateRoot=function(t,e,r){if(!Ab(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=hj;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=fj(e,null,t,1,r??null,i,!1,a,o),t[pi]=e.current,Zc(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new em(e)};Ur.render=function(t,e,r){if(!tm(e))throw Error(te(200));return rm(null,t,e,!1,r)};Ur.unmountComponentAtNode=function(t){if(!tm(t))throw Error(te(40));return t._reactRootContainer?(so(function(){rm(null,null,t,!1,function(){t._reactRootContainer=null,t[pi]=null})}),!0):!1};Ur.unstable_batchedUpdates=bb;Ur.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!tm(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return rm(t,e,r,!1,n)};Ur.version="18.3.1-next-f1338f8080-20240426";function pj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pj)}catch(t){console.error(t)}}pj(),pP.exports=Ur;var R4=pP.exports,$1=R4;zy.createRoot=$1.createRoot,zy.hydrateRoot=$1.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lu.apply(this,arguments)}var Yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yi||(Yi={}));const L1="popstate";function D4(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:o,hash:s}=n.location;return Mv("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:mj(i)}return $4(e,r,null,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M4(){return Math.random().toString(36).substr(2,8)}function V1(t,e){return{usr:t.state,key:t.key,idx:e}}function Mv(t,e,r,n){return r===void 0&&(r=null),lu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pl(e):e,{state:r,key:e&&e.key||n||M4()})}function mj(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function pl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function $4(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=Yi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(lu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){s=Yi.Pop;let y=d(),x=y==null?null:y-c;c=y,l&&l({action:s,location:v.location,delta:x})}function p(y,x){s=Yi.Push;let b=Mv(v.location,y,x);c=d()+1;let k=V1(b,c),j=v.createHref(b);try{o.pushState(k,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(j)}a&&l&&l({action:s,location:v.location,delta:1})}function m(y,x){s=Yi.Replace;let b=Mv(v.location,y,x);c=d();let k=V1(b,c),j=v.createHref(b);o.replaceState(k,"",j),a&&l&&l({action:s,location:v.location,delta:0})}function g(y){let x=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:mj(y);return b=b.replace(/ $/,"%20"),Tt(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let v={get action(){return s},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(L1,f),l=y,()=>{i.removeEventListener(L1,f),l=null}},createHref(y){return e(i,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(y){return o.go(y)}};return v}var F1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F1||(F1={}));function L4(t,e,r){return r===void 0&&(r="/"),V4(t,e,r)}function V4(t,e,r,n){let i=typeof e=="string"?pl(e):e,a=vj(i.pathname||"/",r);if(a==null)return null;let o=gj(t);F4(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=J4(a);s=Y4(o[l],c)}return s}function gj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Tt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Za([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Tt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gj(a.children,e,d,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:G4(c,a.index),routesMeta:d})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of yj(a.path))i(a,o,l)}),e}function yj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=yj(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function F4(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:K4(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const B4=/^:[\w-]+$/,U4=3,z4=2,W4=1,H4=10,q4=-2,B1=t=>t==="*";function G4(t,e){let r=t.split("/"),n=r.length;return r.some(B1)&&(n+=q4),e&&(n+=z4),r.filter(i=>!B1(i)).reduce((i,a)=>i+(B4.test(a)?U4:a===""?W4:H4),n)}function K4(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Y4(t,e,r){let{routesMeta:n}=t,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=Q4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Za([a,f.pathname]),pathnameBase:n3(Za([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Za([a,f.pathnameBase]))}return o}function Q4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=X4(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=s[f]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const g=s[f];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function X4(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Pb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function J4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Z4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e3=t=>Z4.test(t);function t3(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?pl(t):t,a;if(r)if(e3(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Pb(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=U1(r.substring(1),"/"):a=U1(r,e)}else a=e;return{pathname:a,search:i3(n),hash:a3(i)}}function U1(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ry(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r3(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function xj(t,e){let r=r3(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bj(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=pl(t):(i=lu({},t),Tt(!i.pathname||!i.pathname.includes("?"),ry("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),ry("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),ry("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}s=f>=0?e[f]:"/"}let l=t3(i,s),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Za=t=>t.join("/").replace(/\/\/+/g,"/"),n3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),i3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,a3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function o3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wj=["post","put","patch","delete"];new Set(wj);const s3=["get",...wj];new Set(s3);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cu.apply(this,arguments)}const Cb=R.createContext(null),l3=R.createContext(null),od=R.createContext(null),nm=R.createContext(null),So=R.createContext({outlet:null,matches:[],isDataRoute:!1}),_j=R.createContext(null);function sd(){return R.useContext(nm)!=null}function im(){return sd()||Tt(!1),R.useContext(nm).location}function kj(t){R.useContext(od).static||R.useLayoutEffect(t)}function Sj(){let{isDataRoute:t}=R.useContext(So);return t?w3():c3()}function c3(){sd()||Tt(!1);let t=R.useContext(Cb),{basename:e,future:r,navigator:n}=R.useContext(od),{matches:i}=R.useContext(So),{pathname:a}=im(),o=JSON.stringify(xj(i,r.v7_relativeSplatPath)),s=R.useRef(!1);return kj(()=>{s.current=!0}),R.useCallback(function(c,d){if(d===void 0&&(d={}),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=bj(c,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Za([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,o,a,t])}function u3(t,e){return d3(t,e)}function d3(t,e,r,n){sd()||Tt(!1);let{navigator:i}=R.useContext(od),{matches:a}=R.useContext(So),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=im(),d;if(e){var f;let y=typeof e=="string"?pl(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||Tt(!1),d=y}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=L4(t,{pathname:m}),v=g3(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:Za([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Za([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r,n);return e&&v?R.createElement(nm.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yi.Pop}},v):v}function f3(){let t=b3(),e=o3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),r?R.createElement("pre",{style:i},r):null,null)}const h3=R.createElement(f3,null);class p3 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?R.createElement(So.Provider,{value:this.props.routeContext},R.createElement(_j.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m3(t){let{routeContext:e,match:r,children:n}=t,i=R.useContext(Cb);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(So.Provider,{value:e},n)}function g3(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,s=(i=r)==null?void 0:i.errors;if(s!=null){let d=o.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);d>=0||Tt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=r,g=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let m,g=!1,v=null,y=null;r&&(m=s&&f.route.id?s[f.route.id]:void 0,v=f.route.errorElement||h3,l&&(c<0&&p===0?(_3("route-fallback"),g=!0,y=null):c===p&&(g=!0,y=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,p+1)),b=()=>{let k;return m?k=v:g?k=y:f.route.Component?k=R.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=d,R.createElement(m3,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:k})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?R.createElement(p3,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var Ej=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ej||{}),Tj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tj||{});function y3(t){let e=R.useContext(Cb);return e||Tt(!1),e}function v3(t){let e=R.useContext(l3);return e||Tt(!1),e}function x3(t){let e=R.useContext(So);return e||Tt(!1),e}function Aj(t){let e=x3(),r=e.matches[e.matches.length-1];return r.route.id||Tt(!1),r.route.id}function b3(){var t;let e=R.useContext(_j),r=v3(),n=Aj();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function w3(){let{router:t}=y3(Ej.UseNavigateStable),e=Aj(Tj.UseNavigateStable),r=R.useRef(!1);return kj(()=>{r.current=!0}),R.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cu({fromRouteId:e},a)))},[t,e])}const z1={};function _3(t,e,r){z1[t]||(z1[t]=!0)}function k3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Pj(t){let{to:e,replace:r,state:n,relative:i}=t;sd()||Tt(!1);let{future:a,static:o}=R.useContext(od),{matches:s}=R.useContext(So),{pathname:l}=im(),c=Sj(),d=bj(e,xj(s,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return R.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:i}),[c,f,i,r,n]),null}function Yn(t){Tt(!1)}function S3(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Yi.Pop,navigator:a,static:o=!1,future:s}=t;sd()&&Tt(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:a,static:o,future:cu({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof n=="string"&&(n=pl(n));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:g="default"}=n,v=R.useMemo(()=>{let y=vj(d,l);return y==null?null:{location:{pathname:y,search:f,hash:p,state:m,key:g},navigationType:i}},[l,d,f,p,m,g,i]);return v==null?null:R.createElement(od.Provider,{value:c},R.createElement(nm.Provider,{children:r,value:v}))}function E3(t){let{children:e,location:r}=t;return u3($v(e),r)}new Promise(()=>{});function $v(t,e){e===void 0&&(e=[]);let r=[];return R.Children.forEach(t,(n,i)=>{if(!R.isValidElement(n))return;let a=[...e,i];if(n.type===R.Fragment){r.push.apply(r,$v(n.props.children,a));return}n.type!==Yn&&Tt(!1),!n.props.index||!n.props.children||Tt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$v(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const T3="6";try{window.__reactRouterVersion=T3}catch{}const A3="startTransition",W1=k$[A3];function P3(t){let{basename:e,children:r,future:n,window:i}=t,a=R.useRef();a.current==null&&(a.current=D4({window:i,v5Compat:!0}));let o=a.current,[s,l]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=R.useCallback(f=>{c&&W1?W1(()=>l(f)):l(f)},[l,c]);return R.useLayoutEffect(()=>o.listen(d),[o,d]),R.useEffect(()=>k3(n),[n]),R.createElement(S3,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:o,future:n})}var H1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(H1||(H1={}));var q1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(q1||(q1={}));var G1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},C3=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],s=t[r++],l=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},jj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,s=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=a>>2,f=(a&3)<<4|s>>4;let p=(s&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),n.push(r[d],r[f],r[p],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],s=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||s==null||c==null||f==null)throw new j3;const p=a<<2|s>>4;if(n.push(p),c!==64){const m=s<<4&240|c>>2;if(n.push(m),f!==64){const g=c<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class j3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N3=function(t){const e=Cj(t);return jj.encodeByteArray(e,!0)},kh=function(t){return N3(t).replace(/\./g,"")},Nj=function(t){try{return jj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=()=>I3().__FIREBASE_DEFAULTS__,R3=()=>{if(typeof process>"u"||typeof G1>"u")return;const t=G1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},D3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nj(t[1]);return e&&JSON.parse(e)},am=()=>{try{return O3()||R3()||D3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ij=t=>{var e,r;return(r=(e=am())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},M3=t=>{const e=Ij(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Oj=()=>{var t;return(t=am())===null||t===void 0?void 0:t.config},Rj=t=>{var e;return(e=am())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kh(JSON.stringify(r)),kh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ur())}function F3(){var t;const e=(t=am())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function z3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W3(){const t=ur();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H3(){return!F3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q3(){try{return typeof indexedDB=="object"}catch{return!1}}function G3(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="FirebaseError";class Ti extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=K3,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ld.prototype.create)}}class ld{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Y3(a,n):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Ti(i,s,n)}}function Y3(t,e){return t.replace(Q3,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Q3=/\{\$([^}]+)}/g;function X3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(K1(a)&&K1(o)){if(!Sh(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function K1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function yc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function vc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function J3(t,e){const r=new Z3(t,e);return r.subscribe.bind(r)}class Z3{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");eV(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=ny),i.error===void 0&&(i.error=ny),i.complete===void 0&&(i.complete=ny);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eV(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function ny(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new $3;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nV(e))try{this.getOrInitializeService({instanceIdentifier:$a})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=$a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$a){return this.instances.has(e)}getOptions(e=$a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);n===s&&o.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rV(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$a){return this.component?this.component.multipleInstances?e:$a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rV(t){return t===$a?void 0:t}function nV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new tV(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const aV={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},oV=Pe.INFO,sV={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},lV=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=sV[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jb{constructor(e){this.name=e,this._logLevel=oV,this._logHandler=lV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const cV=(t,e)=>e.some(r=>t instanceof r);let Y1,Q1;function uV(){return Y1||(Y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dV(){return Q1||(Q1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dj=new WeakMap,Lv=new WeakMap,Mj=new WeakMap,iy=new WeakMap,Nb=new WeakMap;function fV(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(oa(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Dj.set(r,t)}).catch(()=>{}),Nb.set(e,t),e}function hV(t){if(Lv.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Lv.set(t,e)}let Vv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Lv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return oa(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pV(t){Vv=t(Vv)}function mV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(ay(this),e,...r);return Mj.set(n,e.sort?e.sort():[e]),oa(n)}:dV().includes(t)?function(...e){return t.apply(ay(this),e),oa(Dj.get(this))}:function(...e){return oa(t.apply(ay(this),e))}}function gV(t){return typeof t=="function"?mV(t):(t instanceof IDBTransaction&&hV(t),cV(t,uV())?new Proxy(t,Vv):t)}function oa(t){if(t instanceof IDBRequest)return fV(t);if(iy.has(t))return iy.get(t);const e=gV(t);return e!==t&&(iy.set(t,e),Nb.set(e,t)),e}const ay=t=>Nb.get(t);function yV(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=oa(o);return n&&o.addEventListener("upgradeneeded",l=>{n(oa(o.result),l.oldVersion,l.newVersion,oa(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),s.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const vV=["get","getKey","getAll","getAllKeys","count"],xV=["put","add","delete","clear"],oy=new Map;function X1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oy.get(e))return oy.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=xV.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||vV.includes(r)))return;const a=async function(o,...s){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(s.shift())),(await Promise.all([c[r](...s),i&&l.done]))[0]};return oy.set(e,a),a}pV(t=>({...t,get:(e,r,n)=>X1(e,r)||t.get(e,r,n),has:(e,r)=>!!X1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(wV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function wV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fv="@firebase/app",J1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new jb("@firebase/app"),_V="@firebase/app-compat",kV="@firebase/analytics-compat",SV="@firebase/analytics",EV="@firebase/app-check-compat",TV="@firebase/app-check",AV="@firebase/auth",PV="@firebase/auth-compat",CV="@firebase/database",jV="@firebase/data-connect",NV="@firebase/database-compat",IV="@firebase/functions",OV="@firebase/functions-compat",RV="@firebase/installations",DV="@firebase/installations-compat",MV="@firebase/messaging",$V="@firebase/messaging-compat",LV="@firebase/performance",VV="@firebase/performance-compat",FV="@firebase/remote-config",BV="@firebase/remote-config-compat",UV="@firebase/storage",zV="@firebase/storage-compat",WV="@firebase/firestore",HV="@firebase/vertexai-preview",qV="@firebase/firestore-compat",GV="firebase",KV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="[DEFAULT]",YV={[Fv]:"fire-core",[_V]:"fire-core-compat",[SV]:"fire-analytics",[kV]:"fire-analytics-compat",[TV]:"fire-app-check",[EV]:"fire-app-check-compat",[AV]:"fire-auth",[PV]:"fire-auth-compat",[CV]:"fire-rtdb",[jV]:"fire-data-connect",[NV]:"fire-rtdb-compat",[IV]:"fire-fn",[OV]:"fire-fn-compat",[RV]:"fire-iid",[DV]:"fire-iid-compat",[MV]:"fire-fcm",[$V]:"fire-fcm-compat",[LV]:"fire-perf",[VV]:"fire-perf-compat",[FV]:"fire-rc",[BV]:"fire-rc-compat",[UV]:"fire-gcs",[zV]:"fire-gcs-compat",[WV]:"fire-fst",[qV]:"fire-fst-compat",[HV]:"fire-vertex","fire-js":"fire-js",[GV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,QV=new Map,Uv=new Map;function Z1(t,e){try{t.container.addComponent(e)}catch(r){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ds(t){const e=t.name;if(Uv.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;Uv.set(e,t);for(const r of Eh.values())Z1(r,t);for(const r of QV.values())Z1(r,t);return!0}function Ib(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Cn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new ld("app","Firebase",XV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=KV;function $j(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Bv,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw sa.create("bad-app-name",{appName:String(i)});if(r||(r=Oj()),!r)throw sa.create("no-options");const a=Eh.get(i);if(a){if(Sh(r,a.options)&&Sh(n,a.config))return a;throw sa.create("duplicate-app",{appName:i})}const o=new iV(i);for(const l of Uv.values())o.addComponent(l);const s=new JV(r,n,o);return Eh.set(i,s),s}function Lj(t=Bv){const e=Eh.get(t);if(!e&&t===Bv&&Oj())return $j();if(!e)throw sa.create("no-app",{appName:t});return e}function la(t,e,r){var n;let i=(n=YV[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(s.join(" "));return}Ds(new lo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV="firebase-heartbeat-database",e5=1,uu="firebase-heartbeat-store";let sy=null;function Vj(){return sy||(sy=yV(ZV,e5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(r){console.warn(r)}}}}).catch(t=>{throw sa.create("idb-open",{originalErrorMessage:t.message})})),sy}async function t5(t){try{const r=(await Vj()).transaction(uu),n=await r.objectStore(uu).get(Fj(t));return await r.done,n}catch(e){if(e instanceof Ti)yi.warn(e.message);else{const r=sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(r.message)}}}async function eS(t,e){try{const n=(await Vj()).transaction(uu,"readwrite");await n.objectStore(uu).put(e,Fj(t)),await n.done}catch(r){if(r instanceof Ti)yi.warn(r.message);else{const n=sa.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});yi.warn(n.message)}}}function Fj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=1024,n5=30*24*60*60*1e3;class i5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new o5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=n5}),this._storage.overwrite(this._heartbeatsCache))}catch(n){yi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tS(),{heartbeatsToSend:n,unsentEntries:i}=a5(this._heartbeatsCache.heartbeats),a=kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return yi.warn(r),""}}}function tS(){return new Date().toISOString().substring(0,10)}function a5(t,e=r5){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),rS(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),rS(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class o5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q3()?G3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await t5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return eS(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return eS(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rS(t){return kh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t){Ds(new lo("platform-logger",e=>new bV(e),"PRIVATE")),Ds(new lo("heartbeat",e=>new i5(e),"PRIVATE")),la(Fv,J1,t),la(Fv,J1,"esm2017"),la("fire-js","")}s5("");function Ob(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Bj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l5=Bj,Uj=new ld("auth","Firebase",Bj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new jb("@firebase/auth");function c5(t,...e){Th.logLevel<=Pe.WARN&&Th.warn(`Auth (${ml}): ${t}`,...e)}function Bf(t,...e){Th.logLevel<=Pe.ERROR&&Th.error(`Auth (${ml}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw Rb(t,...e)}function Dn(t,...e){return Rb(t,...e)}function zj(t,e,r){const n=Object.assign(Object.assign({},l5()),{[e]:r});return new ld("auth","Firebase",n).create(e,{appName:t.name})}function si(t){return zj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Uj.create(t,...e)}function ve(t,e,...r){if(!t)throw Rb(e,...r)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bf(e),new Error(e)}function vi(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function u5(){return nS()==="http:"||nS()==="https:"}function nS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u5()||U3()||"connection"in navigator)?navigator.onLine:!0}function f5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,r){this.shortDelay=e,this.longDelay=r,vi(r>e,"Short delay should be less than long delay!"),this.isMobile=V3()||z3()}get(){return d5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e){vi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new ud(3e4,6e4);function Ai(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pi(t,e,r,n,i={}){return Hj(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const s=cd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},a);return B3()||(c.referrerPolicy="no-referrer"),Wj.fetch()(qj(t,t.config.apiHost,r,s),c)})}async function Hj(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},h5),e);try{const i=new g5(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw uf(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[l,c]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw uf(t,"user-disabled",o);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zj(t,d,c);kn(t,d)}}catch(i){if(i instanceof Ti)throw i;kn(t,"network-request-failed",{message:String(i)})}}async function dd(t,e,r,n,i={}){const a=await Pi(t,e,r,n,i);return"mfaPendingCredential"in a&&kn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function qj(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Db(t.config,i):`${t.config.apiScheme}://${i}`}function m5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class g5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Dn(this.auth,"network-request-failed")),p5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Dn(t,e,n);return i.customData._tokenResponse=r,i}function iS(t){return t!==void 0&&t.enterprise!==void 0}class y5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return m5(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function v5(t,e){return Pi(t,"GET","/v2/recaptchaConfig",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(t,e){return Pi(t,"POST","/v1/accounts:delete",e)}async function Gj(t,e){return Pi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b5(t,e=!1){const r=Pt(t),n=await r.getIdToken(e),i=Mb(n);ve(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Rc(ly(i.auth_time)),issuedAtTime:Rc(ly(i.iat)),expirationTime:Rc(ly(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ly(t){return Number(t)*1e3}function Mb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const i=Nj(r);return i?JSON.parse(i):(Bf("Failed to decode base64 JWT payload"),null)}catch(i){return Bf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function aS(t){const e=Mb(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ti&&w5(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function w5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){var e;const r=t.auth,n=await t.getIdToken(),i=await du(t,Gj(r,{idToken:n}));ve(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Yj(a.providerUserInfo):[],s=k5(t.providerData,o),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(s!=null&&s.length),d=l?c:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Wv(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Kj(t){const e=Pt(t);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k5(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Yj(t){return t.map(e=>{var{providerId:r}=e,n=Ob(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(t,e){const r=await Hj(t,{},async()=>{const n=cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=qj(t,i,"/v1/token",`key=${a}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Wj.fetch()(o,{method:"POST",headers:s,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function E5(t,e){return Pi(t,"POST","/v2/accounts:revokeToken",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const r=aS(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await S5(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new xs;return n&&(ve(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ve(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xs,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=Ob(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Wv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await du(this,this.stsTokenManager.getToken(this.auth,e));return ve(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return b5(this,e)}reload(){return Kj(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Ah(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await du(this,x5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,o,s,l,c,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(i=r.email)!==null&&i!==void 0?i:void 0,m=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,g=(o=r.photoURL)!==null&&o!==void 0?o:void 0,v=(s=r.tenantId)!==null&&s!==void 0?s:void 0,y=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,b=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:k,emailVerified:j,isAnonymous:w,providerData:T,stsTokenManager:S}=r;ve(k&&S,e,"internal-error");const E=xs.fromJSON(this.name,S);ve(typeof k=="string",e,"internal-error"),Mi(f,e.name),Mi(p,e.name),ve(typeof j=="boolean",e,"internal-error"),ve(typeof w=="boolean",e,"internal-error"),Mi(m,e.name),Mi(g,e.name),Mi(v,e.name),Mi(y,e.name),Mi(x,e.name),Mi(b,e.name);const P=new ti({uid:k,auth:e,email:p,emailVerified:j,displayName:f,isAnonymous:w,photoURL:g,phoneNumber:m,tenantId:v,stsTokenManager:E,createdAt:x,lastLoginAt:b});return T&&Array.isArray(T)&&(P.providerData=T.map(N=>Object.assign({},N))),y&&(P._redirectEventId=y),P}static async _fromIdTokenResponse(e,r,n=!1){const i=new xs;i.updateFromServerResponse(r);const a=new ti({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Ah(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ve(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Yj(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new xs;s.updateFromIdToken(n);const l=new ti({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Wv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;function ri(t){vi(t instanceof Function,"Expected a class definition");let e=oS.get(t);return e?(vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Qj.type="NONE";const sS=Qj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e,r){return`firebase:${t}:${e}:${r}`}class bs{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Uf(this.userKey,i.apiKey,a),this.fullPersistenceKey=Uf("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new bs(ri(sS),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=i[0]||ri(sS);const o=Uf(n,e.config.apiKey,e.name);let s=null;for(const c of r)try{const d=await c._get(o);if(d){const f=ti._fromJSON(e,d);c!==a&&(s=f),a=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new bs(a,e,n):(a=l[0],s&&await a._set(o,s.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new bs(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rN(e))return"Blackberry";if(nN(e))return"Webos";if(Jj(e))return"Safari";if((e.includes("chrome/")||Zj(e))&&!e.includes("edge/"))return"Chrome";if(tN(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Xj(t=ur()){return/firefox\//i.test(t)}function Jj(t=ur()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zj(t=ur()){return/crios\//i.test(t)}function eN(t=ur()){return/iemobile/i.test(t)}function tN(t=ur()){return/android/i.test(t)}function rN(t=ur()){return/blackberry/i.test(t)}function nN(t=ur()){return/webos/i.test(t)}function $b(t=ur()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T5(t=ur()){var e;return $b(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function A5(){return W3()&&document.documentMode===10}function iN(t=ur()){return $b(t)||tN(t)||nN(t)||rN(t)||/windows phone/i.test(t)||eN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e=[]){let r;switch(t){case"Browser":r=lS(ur());break;case"Worker":r=`${lS(ur())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ml}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,s)=>{try{const l=e(a);o(l)}catch(l){s(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e={}){return Pi(t,"GET","/v2/passwordPolicy",Ai(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=6;class N5{constructor(e){var r,n,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:j5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,o,s;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cS(this),this.idTokenSubscription=new cS(this),this.beforeStateQueue=new P5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ri(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await bs.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Gj(this,{idToken:e}),n=await ti._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===s)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(si(this));const r=e?Pt(e):null;return r&&ve(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C5(this),r=new N5(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ld("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await E5(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ri(e)||this._popupRedirectResolver;ve(r,this,"argument-error"),this.redirectPersistenceManager=await bs.create(this,[ri(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{o=!0,l()}}else{const l=e.addObserver(r);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&c5(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function _a(t){return Pt(t)}class cS{constructor(e){this.auth=e,this.observer=null,this.addObserver=J3(r=>this.observer=r)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O5(t){om=t}function oN(t){return om.loadJS(t)}function R5(){return om.recaptchaEnterpriseScript}function D5(){return om.gapiScript}function M5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $5="recaptcha-enterprise",L5="NO_RECAPTCHA";class V5{constructor(e){this.type=$5,this.auth=_a(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{v5(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const c=new y5(l);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(l=>{s(l)})})}function i(a,o,s){const l=window.grecaptcha;iS(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(L5)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(s=>{if(!r&&iS(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=R5();l.length!==0&&(l+=s),oN(l).then(()=>{i(s,a,o)}).catch(c=>{o(c)})}}).catch(s=>{o(s)})})}}async function uS(t,e,r,n=!1){const i=new V5(t);let a;try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ph(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await uS(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uS(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t,e){const r=Ib(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Sh(a,e??{}))return i;kn(i,"already-initialized")}return r.initialize({options:e})}function B5(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ri);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function U5(t,e,r){const n=_a(t);ve(n._canInitEmulator,n,"emulator-config-failed"),ve(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=sN(e),{host:o,port:s}=z5(e),l=s===null?"":`:${s}`;n.config.emulator={url:`${a}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),W5()}function sN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function z5(t){const e=sN(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:dS(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:dS(o)}}}function dS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function W5(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,r){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function H5(t,e){return Pi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return dd(t,"POST","/v1/accounts:signInWithPassword",Ai(t,e))}async function lN(t,e){return Pi(t,"POST","/v1/accounts:sendOobCode",Ai(t,e))}async function G5(t,e){return lN(t,e)}async function K5(t,e){return lN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e){return dd(t,"POST","/v1/accounts:signInWithEmailLink",Ai(t,e))}async function Q5(t,e){return dd(t,"POST","/v1/accounts:signInWithEmailLink",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Lb{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new fu(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new fu(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,r,"signInWithPassword",q5);case"emailLink":return Y5(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,n,"signUpPassword",H5);case"emailLink":return Q5(e,{idToken:r,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e){return dd(t,"POST","/v1/accounts:signInWithIdp",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="http://localhost";class co extends Lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):kn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=Ob(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new co(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return ws(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ws(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ws(e,r)}buildRequest(){const e={requestUri:X5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=cd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z5(t){const e=yc(vc(t)).link,r=e?yc(vc(e)).deep_link_id:null,n=yc(vc(t)).deep_link_id;return(n?yc(vc(n)).link:null)||n||r||e||t}class Vb{constructor(e){var r,n,i,a,o,s;const l=yc(vc(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,f=J5((i=l.mode)!==null&&i!==void 0?i:null);ve(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=l.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const r=Z5(e);try{return new Vb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.providerId=gl.PROVIDER_ID}static credential(e,r){return fu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Vb.parseLink(r);return ve(n,"argument-error"),fu._fromEmailAndCode(e,n.code,n.tenantId)}}gl.PROVIDER_ID="password";gl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends cN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends fd{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return co._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return zi.credential(r,n)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends fd{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends fd{constructor(){super("twitter.com")}static credential(e,r){return co._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Hi.credential(r,n)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e){return dd(t,"POST","/v1/accounts:signUp",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await ti._fromIdTokenResponse(e,n,i),o=fS(n);return new uo({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=fS(n);return new uo({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function fS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Ti{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Ch(e,r,n,i)}}function uN(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(t,a,e,n):a})}async function tF(t,e,r=!1){const n=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return uo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e,r=!1){const{auth:n}=t;if(Cn(n.app))return Promise.reject(si(n));const i="reauthenticate";try{const a=await du(t,uN(n,i,e,t),r);ve(a.idToken,n,"internal-error");const o=Mb(a.idToken);ve(o,n,"internal-error");const{sub:s}=o;return ve(t.uid===s,n,"user-mismatch"),uo._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&kn(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e,r=!1){if(Cn(t.app))return Promise.reject(si(t));const n="signIn",i=await uN(t,n,e),a=await uo._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function nF(t,e){return dN(_a(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(t){const e=_a(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iF(t,e,r){const n=_a(t);await Ph(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",K5)}async function aF(t,e,r){if(Cn(t.app))return Promise.reject(si(t));const n=_a(t),o=await Ph(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eF).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&fN(t),l}),s=await uo._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(s.user),s}function oF(t,e,r){return Cn(t.app)?Promise.reject(si(t)):nF(Pt(t),gl.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&fN(t),n})}async function hN(t,e){const r=Pt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await G5(r.auth,i);a!==t.email&&await t.reload()}function sF(t,e,r,n){return Pt(t).onIdTokenChanged(e,r,n)}function lF(t,e,r){return Pt(t).beforeAuthStateChanged(e,r)}function cF(t,e,r,n){return Pt(t).onAuthStateChanged(e,r,n)}function uF(t){return Pt(t).signOut()}async function dF(t){return Pt(t).delete()}const jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(jh,"1"),this.storage.removeItem(jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=1e3,hF=10;class mN extends pN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,s,l)=>{this.notifyListeners(o,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);A5()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hF):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},fF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}mN.type="LOCAL";const pF=mN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN extends pN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}gN.type="SESSION";const yN=gN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new sm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map(async c=>c(r.origin,a)),l=await mF(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,l)=>{const c=Fb("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(p.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function yF(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function vF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bF(){return vN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="firebaseLocalStorageDb",wF=1,Nh="firebaseLocalStorage",bN="fbase_key";class hd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function lm(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function _F(){const t=indexedDB.deleteDatabase(xN);return new hd(t).toPromise()}function Hv(){const t=indexedDB.open(xN,wF);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Nh,{keyPath:bN})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Nh)?e(n):(n.close(),await _F(),e(await Hv()))})})}async function hS(t,e,r){const n=lm(t,!0).put({[bN]:e,value:r});return new hd(n).toPromise()}async function kF(t,e){const r=lm(t,!1).get(e),n=await new hd(r).toPromise();return n===void 0?null:n.value}function pS(t,e){const r=lm(t,!0).delete(e);return new hd(r).toPromise()}const SF=800,EF=3;class wN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>EF)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sm._getInstance(bF()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await vF(),!this.activeServiceWorker)return;this.sender=new gF(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hv();return await hS(e,jh,"1"),await pS(e,jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>hS(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>kF(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>pS(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=lm(i,!1).getAll();return new hd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wN.type="LOCAL";const TF=wN;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t,e){return e?ri(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ws(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function PF(t){return dN(t.auth,new Bb(t),t.bypassAuthState)}function CF(t){const{auth:e,user:r}=t;return ve(r,e,"internal-error"),rF(r,new Bb(t),t.bypassAuthState)}async function jF(t){const{auth:e,user:r}=t;return ve(r,e,"internal-error"),tF(r,new Bb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PF;case"linkViaPopup":case"linkViaRedirect":return jF;case"reauthViaPopup":case"reauthViaRedirect":return CF;default:kn(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=new ud(2e3,1e4);class ls extends _N{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,ls.currentPopupAction&&ls.currentPopupAction.cancel(),ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=Fb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NF.get())};e()}}ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="pendingRedirect",zf=new Map;class OF extends _N{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=zf.get(this.auth._key());if(!e){try{const n=await RF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}zf.set(this.auth._key(),e)}return this.bypassAuthState||zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RF(t,e){const r=$F(e),n=MF(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function DF(t,e){zf.set(t._key(),e)}function MF(t){return ri(t._redirectPersistence)}function $F(t){return Uf(IF,t.config.apiKey,t.name)}async function LF(t,e,r=!1){if(Cn(t.app))return Promise.reject(si(t));const n=_a(t),i=AF(n,e),o=await new OF(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=10*60*1e3;class FF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BF(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!kN(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Dn(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VF&&this.cachedEventUids.clear(),this.cachedEventUids.has(mS(e))}saveEventToCache(e){this.cachedEventUids.add(mS(e)),this.lastProcessedEventTime=Date.now()}}function mS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e={}){return Pi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WF=/^https?/;async function HF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UF(t);for(const r of e)try{if(qF(r))return}catch{}kn(t,"unauthorized-domain")}function qF(t){const e=zv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!WF.test(r))return!1;if(zF.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=new ud(3e4,6e4);function gS(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function KF(t){return new Promise((e,r)=>{var n,i,a;function o(){gS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gS(),r(Dn(t,"network-request-failed"))},timeout:GF.get()})}if(!((i=(n=Mn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Mn().gapi)===null||a===void 0)&&a.load)o();else{const s=M5("iframefcb");return Mn()[s]=()=>{gapi.load?o():r(Dn(t,"network-request-failed"))},oN(`${D5()}?onload=${s}`).catch(l=>r(l))}}).catch(e=>{throw Wf=null,e})}let Wf=null;function YF(t){return Wf=Wf||KF(t),Wf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=new ud(5e3,15e3),XF="__/auth/iframe",JF="emulator/auth/iframe",ZF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t6(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Db(e,JF):`https://${t.config.authDomain}/${XF}`,n={apiKey:e.apiKey,appName:t.name,v:ml},i=e6.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${cd(n).slice(1)}`}async function r6(t){const e=await YF(t),r=Mn().gapi;return ve(r,t,"internal-error"),e.open({where:document.body,url:t6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZF,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=Dn(t,"network-request-failed"),s=Mn().setTimeout(()=>{a(o)},QF.get());function l(){Mn().clearTimeout(s),i(n)}n.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i6=500,a6=600,o6="_blank",s6="http://localhost";class yS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l6(t,e,r,n=i6,i=a6){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const l=Object.assign(Object.assign({},n6),{width:n.toString(),height:i.toString(),top:a,left:o}),c=ur().toLowerCase();r&&(s=Zj(c)?o6:r),Xj(c)&&(e=e||s6,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(T5(c)&&s!=="_self")return c6(e||"",s),new yS(null);const f=window.open(e||"",s,d);ve(f,t,"popup-blocked");try{f.focus()}catch{}return new yS(f)}function c6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="__/auth/handler",d6="emulator/auth/handler",f6=encodeURIComponent("fac");async function vS(t,e,r,n,i,a){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:ml,eventId:i};if(e instanceof cN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",X3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof fd){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const s=o;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const l=await t._getAppCheckToken(),c=l?`#${f6}=${encodeURIComponent(l)}`:"";return`${h6(t)}?${cd(s).slice(1)}${c}`}function h6({config:t}){return t.emulator?Db(t,d6):`https://${t.authDomain}/${u6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="webStorageSupport";class p6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yN,this._completeRedirectFn=LF,this._overrideRedirectResult=DF}async _openPopup(e,r,n,i){var a;vi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await vS(e,r,n,zv(),i);return l6(e,o,Fb())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await vS(e,r,n,zv(),i);return yF(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(vi(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await r6(e),n=new FF(e);return r.register("authEvent",i=>(ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(cy,{type:cy},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[cy];o!==void 0&&r(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=HF(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return iN()||Jj()||$b()}}const m6=p6;var xS="@firebase/auth",bS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v6(t){Ds(new lo("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=n.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aN(t)},c=new I5(n,i,a,l);return B5(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ds(new lo("auth-internal",e=>{const r=_a(e.getProvider("auth").getImmediate());return(n=>new g6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),la(xS,bS,y6(t)),la(xS,bS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=5*60,b6=Rj("authIdTokenMaxAge")||x6;let wS=null;const w6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>b6)return;const i=r==null?void 0:r.token;wS!==i&&(wS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _6(t=Lj()){const e=Ib(t,"auth");if(e.isInitialized())return e.getImmediate();const r=F5(t,{popupRedirectResolver:m6,persistence:[TF,pF,yN]}),n=Rj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=w6(a.toString());lF(r,o,()=>o(r.currentUser)),sF(r,s=>o(s))}}const i=Ij("auth");return i&&U5(r,`http://${i}`),r}function k6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}O5({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Dn("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",k6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v6("Browser");var S6="firebase",E6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */la(S6,E6,"app");var _S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eo,SN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function P(){}P.prototype=E.prototype,S.D=E.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(N,I,O){for(var A=Array(arguments.length-2),$=2;$<arguments.length;$++)A[$-2]=arguments[$];return E.prototype[I].apply(N,A)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,P){P||(P=0);var N=Array(16);if(typeof E=="string")for(var I=0;16>I;++I)N[I]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(I=0;16>I;++I)N[I]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=S.g[0],P=S.g[1],I=S.g[2];var O=S.g[3],A=E+(O^P&(I^O))+N[0]+3614090360&4294967295;E=P+(A<<7&4294967295|A>>>25),A=O+(I^E&(P^I))+N[1]+3905402710&4294967295,O=E+(A<<12&4294967295|A>>>20),A=I+(P^O&(E^P))+N[2]+606105819&4294967295,I=O+(A<<17&4294967295|A>>>15),A=P+(E^I&(O^E))+N[3]+3250441966&4294967295,P=I+(A<<22&4294967295|A>>>10),A=E+(O^P&(I^O))+N[4]+4118548399&4294967295,E=P+(A<<7&4294967295|A>>>25),A=O+(I^E&(P^I))+N[5]+1200080426&4294967295,O=E+(A<<12&4294967295|A>>>20),A=I+(P^O&(E^P))+N[6]+2821735955&4294967295,I=O+(A<<17&4294967295|A>>>15),A=P+(E^I&(O^E))+N[7]+4249261313&4294967295,P=I+(A<<22&4294967295|A>>>10),A=E+(O^P&(I^O))+N[8]+1770035416&4294967295,E=P+(A<<7&4294967295|A>>>25),A=O+(I^E&(P^I))+N[9]+2336552879&4294967295,O=E+(A<<12&4294967295|A>>>20),A=I+(P^O&(E^P))+N[10]+4294925233&4294967295,I=O+(A<<17&4294967295|A>>>15),A=P+(E^I&(O^E))+N[11]+2304563134&4294967295,P=I+(A<<22&4294967295|A>>>10),A=E+(O^P&(I^O))+N[12]+1804603682&4294967295,E=P+(A<<7&4294967295|A>>>25),A=O+(I^E&(P^I))+N[13]+4254626195&4294967295,O=E+(A<<12&4294967295|A>>>20),A=I+(P^O&(E^P))+N[14]+2792965006&4294967295,I=O+(A<<17&4294967295|A>>>15),A=P+(E^I&(O^E))+N[15]+1236535329&4294967295,P=I+(A<<22&4294967295|A>>>10),A=E+(I^O&(P^I))+N[1]+4129170786&4294967295,E=P+(A<<5&4294967295|A>>>27),A=O+(P^I&(E^P))+N[6]+3225465664&4294967295,O=E+(A<<9&4294967295|A>>>23),A=I+(E^P&(O^E))+N[11]+643717713&4294967295,I=O+(A<<14&4294967295|A>>>18),A=P+(O^E&(I^O))+N[0]+3921069994&4294967295,P=I+(A<<20&4294967295|A>>>12),A=E+(I^O&(P^I))+N[5]+3593408605&4294967295,E=P+(A<<5&4294967295|A>>>27),A=O+(P^I&(E^P))+N[10]+38016083&4294967295,O=E+(A<<9&4294967295|A>>>23),A=I+(E^P&(O^E))+N[15]+3634488961&4294967295,I=O+(A<<14&4294967295|A>>>18),A=P+(O^E&(I^O))+N[4]+3889429448&4294967295,P=I+(A<<20&4294967295|A>>>12),A=E+(I^O&(P^I))+N[9]+568446438&4294967295,E=P+(A<<5&4294967295|A>>>27),A=O+(P^I&(E^P))+N[14]+3275163606&4294967295,O=E+(A<<9&4294967295|A>>>23),A=I+(E^P&(O^E))+N[3]+4107603335&4294967295,I=O+(A<<14&4294967295|A>>>18),A=P+(O^E&(I^O))+N[8]+1163531501&4294967295,P=I+(A<<20&4294967295|A>>>12),A=E+(I^O&(P^I))+N[13]+2850285829&4294967295,E=P+(A<<5&4294967295|A>>>27),A=O+(P^I&(E^P))+N[2]+4243563512&4294967295,O=E+(A<<9&4294967295|A>>>23),A=I+(E^P&(O^E))+N[7]+1735328473&4294967295,I=O+(A<<14&4294967295|A>>>18),A=P+(O^E&(I^O))+N[12]+2368359562&4294967295,P=I+(A<<20&4294967295|A>>>12),A=E+(P^I^O)+N[5]+4294588738&4294967295,E=P+(A<<4&4294967295|A>>>28),A=O+(E^P^I)+N[8]+2272392833&4294967295,O=E+(A<<11&4294967295|A>>>21),A=I+(O^E^P)+N[11]+1839030562&4294967295,I=O+(A<<16&4294967295|A>>>16),A=P+(I^O^E)+N[14]+4259657740&4294967295,P=I+(A<<23&4294967295|A>>>9),A=E+(P^I^O)+N[1]+2763975236&4294967295,E=P+(A<<4&4294967295|A>>>28),A=O+(E^P^I)+N[4]+1272893353&4294967295,O=E+(A<<11&4294967295|A>>>21),A=I+(O^E^P)+N[7]+4139469664&4294967295,I=O+(A<<16&4294967295|A>>>16),A=P+(I^O^E)+N[10]+3200236656&4294967295,P=I+(A<<23&4294967295|A>>>9),A=E+(P^I^O)+N[13]+681279174&4294967295,E=P+(A<<4&4294967295|A>>>28),A=O+(E^P^I)+N[0]+3936430074&4294967295,O=E+(A<<11&4294967295|A>>>21),A=I+(O^E^P)+N[3]+3572445317&4294967295,I=O+(A<<16&4294967295|A>>>16),A=P+(I^O^E)+N[6]+76029189&4294967295,P=I+(A<<23&4294967295|A>>>9),A=E+(P^I^O)+N[9]+3654602809&4294967295,E=P+(A<<4&4294967295|A>>>28),A=O+(E^P^I)+N[12]+3873151461&4294967295,O=E+(A<<11&4294967295|A>>>21),A=I+(O^E^P)+N[15]+530742520&4294967295,I=O+(A<<16&4294967295|A>>>16),A=P+(I^O^E)+N[2]+3299628645&4294967295,P=I+(A<<23&4294967295|A>>>9),A=E+(I^(P|~O))+N[0]+4096336452&4294967295,E=P+(A<<6&4294967295|A>>>26),A=O+(P^(E|~I))+N[7]+1126891415&4294967295,O=E+(A<<10&4294967295|A>>>22),A=I+(E^(O|~P))+N[14]+2878612391&4294967295,I=O+(A<<15&4294967295|A>>>17),A=P+(O^(I|~E))+N[5]+4237533241&4294967295,P=I+(A<<21&4294967295|A>>>11),A=E+(I^(P|~O))+N[12]+1700485571&4294967295,E=P+(A<<6&4294967295|A>>>26),A=O+(P^(E|~I))+N[3]+2399980690&4294967295,O=E+(A<<10&4294967295|A>>>22),A=I+(E^(O|~P))+N[10]+4293915773&4294967295,I=O+(A<<15&4294967295|A>>>17),A=P+(O^(I|~E))+N[1]+2240044497&4294967295,P=I+(A<<21&4294967295|A>>>11),A=E+(I^(P|~O))+N[8]+1873313359&4294967295,E=P+(A<<6&4294967295|A>>>26),A=O+(P^(E|~I))+N[15]+4264355552&4294967295,O=E+(A<<10&4294967295|A>>>22),A=I+(E^(O|~P))+N[6]+2734768916&4294967295,I=O+(A<<15&4294967295|A>>>17),A=P+(O^(I|~E))+N[13]+1309151649&4294967295,P=I+(A<<21&4294967295|A>>>11),A=E+(I^(P|~O))+N[4]+4149444226&4294967295,E=P+(A<<6&4294967295|A>>>26),A=O+(P^(E|~I))+N[11]+3174756917&4294967295,O=E+(A<<10&4294967295|A>>>22),A=I+(E^(O|~P))+N[2]+718787259&4294967295,I=O+(A<<15&4294967295|A>>>17),A=P+(O^(I|~E))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(I+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+O&4294967295}n.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var P=E-this.blockSize,N=this.B,I=this.h,O=0;O<E;){if(I==0)for(;O<=P;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<E;)if(N[I++]=S.charCodeAt(O++),I==this.blockSize){i(this,N),I=0;break}}else for(;O<E;)if(N[I++]=S[O++],I==this.blockSize){i(this,N),I=0;break}}this.h=I,this.o+=E},n.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var P=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=P&255,P/=256;for(this.u(S),S=Array(16),E=P=0;4>E;++E)for(var N=0;32>N;N+=8)S[P++]=this.g[E]>>>N&255;return S};function a(S,E){var P=s;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=E(S)}function o(S,E){this.h=E;for(var P=[],N=!0,I=S.length-1;0<=I;I--){var O=S[I]|0;N&&O==E||(P[I]=O,N=!1)}this.g=P}var s={};function l(S){return-128<=S&&128>S?a(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return y(c(-S));for(var E=[],P=1,N=0;S>=P;N++)E[N]=S/P|0,P*=4294967296;return new o(E,0)}function d(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return y(d(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(E,8)),N=f,I=0;I<S.length;I+=8){var O=Math.min(8,S.length-I),A=parseInt(S.substring(I,I+O),E);8>O?(O=c(Math.pow(E,O)),N=N.j(O).add(c(A))):(N=N.j(P),N=N.add(c(A)))}return N}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-y(this).m();for(var S=0,E=1,P=0;P<this.g.length;P++){var N=this.i(P);S+=(0<=N?N:4294967296+N)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+y(this).toString(S);for(var E=c(Math.pow(S,6)),P=this,N="";;){var I=j(P,E).g;P=x(P,I.j(E));var O=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=I,g(P))return O+N;for(;6>O.length;)O="0"+O;N=O+N}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=x(this,S),v(S)?-1:g(S)?0:1};function y(S){for(var E=S.g.length,P=[],N=0;N<E;N++)P[N]=~S.g[N];return new o(P,~S.h).add(p)}t.abs=function(){return v(this)?y(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],N=0,I=0;I<=E;I++){var O=N+(this.i(I)&65535)+(S.i(I)&65535),A=(O>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);N=A>>>16,O&=65535,A&=65535,P[I]=A<<16|O}return new o(P,P[P.length-1]&-2147483648?-1:0)};function x(S,E){return S.add(y(E))}t.j=function(S){if(g(this)||g(S))return f;if(v(this))return v(S)?y(this).j(y(S)):y(y(this).j(S));if(v(S))return y(this.j(y(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,P=[],N=0;N<2*E;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var I=0;I<S.g.length;I++){var O=this.i(N)>>>16,A=this.i(N)&65535,$=S.i(I)>>>16,L=S.i(I)&65535;P[2*N+2*I]+=A*L,b(P,2*N+2*I),P[2*N+2*I+1]+=O*L,b(P,2*N+2*I+1),P[2*N+2*I+1]+=A*$,b(P,2*N+2*I+1),P[2*N+2*I+2]+=O*$,b(P,2*N+2*I+2)}for(N=0;N<E;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=E;N<2*E;N++)P[N]=0;return new o(P,0)};function b(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function k(S,E){this.g=S,this.h=E}function j(S,E){if(g(E))throw Error("division by zero");if(g(S))return new k(f,f);if(v(S))return E=j(y(S),E),new k(y(E.g),y(E.h));if(v(E))return E=j(S,y(E)),new k(y(E.g),E.h);if(30<S.g.length){if(v(S)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var P=p,N=E;0>=N.l(S);)P=w(P),N=w(N);var I=T(P,1),O=T(N,1);for(N=T(N,2),P=T(P,2);!g(N);){var A=O.add(N);0>=A.l(S)&&(I=I.add(P),O=A),N=T(N,1),P=T(P,1)}return E=x(S,I.j(E)),new k(I,E)}for(I=f;0<=S.l(E);){for(P=Math.max(1,Math.floor(S.m()/E.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),O=c(P),A=O.j(E);v(A)||0<A.l(S);)P-=N,O=c(P),A=O.j(E);g(O)&&(O=p),I=I.add(O),S=x(S,A)}return new k(I,S)}t.A=function(S){return j(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],N=0;N<E;N++)P[N]=this.i(N)&S.i(N);return new o(P,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],N=0;N<E;N++)P[N]=this.i(N)|S.i(N);return new o(P,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),P=[],N=0;N<E;N++)P[N]=this.i(N)^S.i(N);return new o(P,this.h^S.h)};function w(S){for(var E=S.g.length+1,P=[],N=0;N<E;N++)P[N]=S.i(N)<<1|S.i(N-1)>>>31;return new o(P,S.h)}function T(S,E){var P=E>>5;E%=32;for(var N=S.g.length-P,I=[],O=0;O<N;O++)I[O]=0<E?S.i(O+P)>>>E|S.i(O+P+1)<<32-E:S.i(O+P);return new o(I,S.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,SN=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,eo=o}).apply(typeof _S<"u"?_S:typeof self<"u"?self:typeof window<"u"?window:{});var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EN,xc,TN,Hf,qv,AN,PN,CN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,C){return h==Array.prototype||h==Object.prototype||(h[_]=C.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof df=="object"&&df];for(var _=0;_<h.length;++_){var C=h[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var n=r(this);function i(h,_){if(_)e:{var C=n;h=h.split(".");for(var D=0;D<h.length-1;D++){var W=h[D];if(!(W in C))break e;C=C[W]}h=h[h.length-1],D=C[h],_=_(D),_!=D&&_!=null&&e(C,h,{configurable:!0,writable:!0,value:_})}}function a(h,_){h instanceof String&&(h+="");var C=0,D=!1,W={next:function(){if(!D&&C<h.length){var q=C++;return{value:_(q,h[q]),done:!1}}return D=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(h){return h||function(){return a(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function c(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,C){return h.call.apply(h.bind,arguments)}function f(h,_,C){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,D),h.apply(_,W)}}return function(){return h.apply(_,arguments)}}function p(h,_,C){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function m(h,_){var C=Array.prototype.slice.call(arguments,1);return function(){var D=C.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function g(h,_){function C(){}C.prototype=_.prototype,h.aa=_.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(D,W,q){for(var ne=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ne[Ke-2]=arguments[Ke];return _.prototype[W].apply(D,ne)}}function v(h){const _=h.length;if(0<_){const C=Array(_);for(let D=0;D<_;D++)C[D]=h[D];return C}return[]}function y(h,_){for(let C=1;C<arguments.length;C++){const D=arguments[C];if(l(D)){const W=h.length||0,q=D.length||0;h.length=W+q;for(let ne=0;ne<q;ne++)h[W+ne]=D[ne]}else h.push(D)}}class x{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function b(h){return/^[\s\xa0]*$/.test(h)}function k(){var h=s.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var w=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function T(h,_,C){for(const D in h)_.call(C,h[D],D,h)}function S(h,_){for(const C in h)_.call(void 0,h[C],C,h)}function E(h){const _={};for(const C in h)_[C]=h[C];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,_){let C,D;for(let W=1;W<arguments.length;W++){D=arguments[W];for(C in D)h[C]=D[C];for(let q=0;q<P.length;q++)C=P[q],Object.prototype.hasOwnProperty.call(D,C)&&(h[C]=D[C])}}function I(h){var _=1;h=h.split(":");const C=[];for(;0<_&&h.length;)C.push(h.shift()),_--;return h.length&&C.push(h.join(":")),C}function O(h){s.setTimeout(()=>{throw h},0)}function A(){var h=F;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,C){const D=L.get();D.set(_,C),this.h?this.h.next=D:this.g=D,this.h=D}}var L=new x(()=>new U,h=>h.reset());class U{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let z,M=!1,F=new $,B=()=>{const h=s.Promise.resolve(void 0);z=()=>{h.then(K)}};var K=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(C){O(C)}var _=L;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}M=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};s.addEventListener("test",C,_),s.removeEventListener("test",C,_)}catch{}return h}();function xe(h,_){if(ee.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(w){e:{try{j(_.nodeName);var W=!0;break e}catch{}W=!1}W||(_=null)}}else C=="mouseover"?_=h.fromElement:C=="mouseout"&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:qe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xe.aa.h.call(this)}}g(xe,ee);var qe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function re(h,_,C,D,W){this.listener=h,this.proxy=null,this.src=_,this.type=C,this.capture=!!D,this.ha=W,this.key=++Ne,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,_,C,D,W){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var ne=Fe(h,_,D,W);return-1<ne?(_=h[ne],C||(_.fa=!1)):(_=new re(_,this.src,q,!!D,W),_.fa=C,h.push(_)),_};function Q(h,_){var C=_.type;if(C in h.g){var D=h.g[C],W=Array.prototype.indexOf.call(D,_,void 0),q;(q=0<=W)&&Array.prototype.splice.call(D,W,1),q&&(pe(_),h.g[C].length==0&&(delete h.g[C],h.h--))}}function Fe(h,_,C,D){for(var W=0;W<h.length;++W){var q=h[W];if(!q.da&&q.listener==_&&q.capture==!!C&&q.ha==D)return W}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Be={};function J(h,_,C,D,W){if(Array.isArray(_)){for(var q=0;q<_.length;q++)J(h,_[q],C,D,W);return null}return C=ut(C),h&&h[et]?h.K(_,C,c(D)?!!D.capture:!1,W):me(h,_,C,!1,D,W)}function me(h,_,C,D,W,q){if(!_)throw Error("Invalid event type");var ne=c(W)?!!W.capture:!!W,Ke=Ie(h);if(Ke||(h[ke]=Ke=new ye(h)),C=Ke.add(_,C,D,ne,q),C.proxy)return C;if(D=tt(),C.proxy=D,D.src=h,D.listener=C,h.addEventListener)ce||(W=ne),W===void 0&&(W=!1),h.addEventListener(_.toString(),D,W);else if(h.attachEvent)h.attachEvent(de(_.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return C}function tt(){function h(C){return _.call(h.src,h.listener,C)}const _=fe;return h}function X(h,_,C,D,W){if(Array.isArray(_))for(var q=0;q<_.length;q++)X(h,_[q],C,D,W);else D=c(D)?!!D.capture:!!D,C=ut(C),h&&h[et]?(h=h.i,_=String(_).toString(),_ in h.g&&(q=h.g[_],C=Fe(q,C,D,W),-1<C&&(pe(q[C]),Array.prototype.splice.call(q,C,1),q.length==0&&(delete h.g[_],h.h--)))):h&&(h=Ie(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Fe(_,C,D,W)),(C=-1<h?_[h]:null)&&ae(C))}function ae(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[et])Q(_.i,h);else{var C=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(C,D,h.capture):_.detachEvent?_.detachEvent(de(C),D):_.addListener&&_.removeListener&&_.removeListener(D),(C=Ie(_))?(Q(C,h),C.h==0&&(C.src=null,_[ke]=null)):pe(h)}}}function de(h){return h in Be?Be[h]:Be[h]="on"+h}function fe(h,_){if(h.da)h=!0;else{_=new xe(_,this);var C=h.listener,D=h.ha||h.src;h.fa&&ae(h),h=C.call(D,_)}return h}function Ie(h){return h=h[ke],h instanceof ye?h:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(h){return typeof h=="function"?h:(h[Xe]||(h[Xe]=function(_){return h.handleEvent(_)}),h[Xe])}function Le(){H.call(this),this.i=new ye(this),this.M=this,this.F=null}g(Le,H),Le.prototype[et]=!0,Le.prototype.removeEventListener=function(h,_,C,D){X(this,h,_,C,D)};function Ue(h,_){var C,D=h.F;if(D)for(C=[];D;D=D.F)C.push(D);if(h=h.M,D=_.type||_,typeof _=="string")_=new ee(_,h);else if(_ instanceof ee)_.target=_.target||h;else{var W=_;_=new ee(D,h),N(_,W)}if(W=!0,C)for(var q=C.length-1;0<=q;q--){var ne=_.g=C[q];W=on(ne,D,!0,_)&&W}if(ne=_.g=h,W=on(ne,D,!0,_)&&W,W=on(ne,D,!1,_)&&W,C)for(q=0;q<C.length;q++)ne=_.g=C[q],W=on(ne,D,!1,_)&&W}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var C=h.g[_],D=0;D<C.length;D++)pe(C[D]);delete h.g[_],h.h--}}this.F=null},Le.prototype.K=function(h,_,C,D){return this.i.add(String(h),_,!1,C,D)},Le.prototype.L=function(h,_,C,D){return this.i.add(String(h),_,!0,C,D)};function on(h,_,C,D){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var W=!0,q=0;q<_.length;++q){var ne=_[q];if(ne&&!ne.da&&ne.capture==C){var Ke=ne.listener,Ut=ne.ha||ne.src;ne.fa&&Q(h.i,ne),W=Ke.call(Ut,D)!==!1&&W}}return W&&!D.defaultPrevented}function Oo(h,_,C){if(typeof h=="function")C&&(h=p(h,C));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:s.setTimeout(h,_||0)}function Ro(h){h.g=Oo(()=>{h.g=null,h.i&&(h.i=!1,Ro(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Dl extends H{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ro(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hn(h){H.call(this),this.h=h,this.g={}}g(Hn,H);var pg=[];function Do(h){T(h.g,function(_,C){this.g.hasOwnProperty(C)&&ae(_)},h),h.g={}}Hn.prototype.N=function(){Hn.aa.N.call(this),Do(this)},Hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ct=s.JSON.stringify,sn=s.JSON.parse,$M=class{stringify(h){return s.JSON.stringify(h,void 0)}parse(h){return s.JSON.parse(h,void 0)}};function mg(){}mg.prototype.h=null;function L_(h){return h.h||(h.h=h.i())}function V_(){}var Ml={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gg(){ee.call(this,"d")}g(gg,ee);function yg(){ee.call(this,"c")}g(yg,ee);var ja={},F_=null;function jd(){return F_=F_||new Le}ja.La="serverreachability";function B_(h){ee.call(this,ja.La,h)}g(B_,ee);function $l(h){const _=jd();Ue(_,new B_(_))}ja.STAT_EVENT="statevent";function U_(h,_){ee.call(this,ja.STAT_EVENT,h),this.stat=_}g(U_,ee);function dr(h){const _=jd();Ue(_,new U_(_,h))}ja.Ma="timingevent";function z_(h,_){ee.call(this,ja.Ma,h),this.size=_}g(z_,ee);function Ll(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){h()},_)}function Vl(){this.g=!0}Vl.prototype.xa=function(){this.g=!1};function LM(h,_,C,D,W,q){h.info(function(){if(h.g)if(q)for(var ne="",Ke=q.split("&"),Ut=0;Ut<Ke.length;Ut++){var De=Ke[Ut].split("=");if(1<De.length){var Jt=De[0];De=De[1];var Zt=Jt.split("_");ne=2<=Zt.length&&Zt[1]=="type"?ne+(Jt+"="+De+"&"):ne+(Jt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+D+") [attempt "+W+"]: "+_+`
`+C+`
`+ne})}function VM(h,_,C,D,W,q,ne){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+W+"]: "+_+`
`+C+`
`+q+" "+ne})}function Mo(h,_,C,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+BM(h,C)+(D?" "+D:"")})}function FM(h,_){h.info(function(){return"TIMEOUT: "+_})}Vl.prototype.info=function(){};function BM(h,_){if(!h.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var D=C[h];if(!(2>D.length)){var W=D[1];if(Array.isArray(W)&&!(1>W.length)){var q=W[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<W.length;ne++)W[ne]=""}}}}return Ct(C)}catch{return _}}var Nd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},W_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vg;function Id(){}g(Id,mg),Id.prototype.g=function(){return new XMLHttpRequest},Id.prototype.i=function(){return{}},vg=new Id;function Ii(h,_,C,D){this.j=h,this.i=_,this.l=C,this.R=D||1,this.U=new Hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new H_}function H_(){this.i=null,this.g="",this.h=!1}var q_={},xg={};function bg(h,_,C){h.L=1,h.v=Md(qn(_)),h.m=C,h.P=!0,G_(h,null)}function G_(h,_){h.F=Date.now(),Od(h),h.A=qn(h.v);var C=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),sk(C.i,"t",D),h.C=0,C=h.j.J,h.h=new H_,h.g=Ek(h.j,C?_:null,!h.m),0<h.O&&(h.M=new Dl(p(h.Y,h,h.g),h.O)),_=h.U,C=h.g,D=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(pg[0]=W.toString()),W=pg);for(var q=0;q<W.length;q++){var ne=J(C,W[q],D||_.handleEvent,!1,_.h||_);if(!ne)break;_.g[ne.key]=ne}_=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),$l(),LM(h.i,h.u,h.A,h.l,h.R,h.m)}Ii.prototype.ca=function(h){h=h.target;const _=this.M;_&&Gn(h)==3?_.j():this.Y(h)},Ii.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=Gn(this.g);var _=this.g.Ba();const Vo=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||pk(this.g)))){this.J||Zt!=4||_==7||(_==8||0>=Vo?$l(3):$l(2)),wg(this);var C=this.g.Z();this.X=C;t:if(K_(this)){var D=pk(this.g);h="";var W=D.length,q=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Na(this),Fl(this);var ne="";break t}this.h.i=new s.TextDecoder}for(_=0;_<W;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(q&&_==W-1)});D.length=0,this.h.g+=h,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=C==200,VM(this.i,this.u,this.A,this.l,this.R,Zt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Ut=this.g;if((Ke=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ke)){var De=Ke;break t}}De=null}if(C=De)Mo(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_g(this,C);else{this.o=!1,this.s=3,dr(12),Na(this),Fl(this);break e}}if(this.P){C=!0;let ln;for(;!this.J&&this.C<ne.length;)if(ln=UM(this,ne),ln==xg){Zt==4&&(this.s=4,dr(14),C=!1),Mo(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==q_){this.s=4,dr(15),Mo(this.i,this.l,ne,"[Invalid Chunk]"),C=!1;break}else Mo(this.i,this.l,ln,null),_g(this,ln);if(K_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||ne.length!=0||this.h.h||(this.s=1,dr(16),C=!1),this.o=this.o&&C,!C)Mo(this.i,this.l,ne,"[Invalid Chunked Response]"),Na(this),Fl(this);else if(0<ne.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Pg(Jt),Jt.M=!0,dr(11))}}else Mo(this.i,this.l,ne,null),_g(this,ne);Zt==4&&Na(this),this.o&&!this.J&&(Zt==4?wk(this.j,this):(this.o=!1,Od(this)))}else a$(this.g),C==400&&0<ne.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),Na(this),Fl(this)}}}catch{}finally{}};function K_(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function UM(h,_){var C=h.C,D=_.indexOf(`
`,C);return D==-1?xg:(C=Number(_.substring(C,D)),isNaN(C)?q_:(D+=1,D+C>_.length?xg:(_=_.slice(D,D+C),h.C=D+C,_)))}Ii.prototype.cancel=function(){this.J=!0,Na(this)};function Od(h){h.S=Date.now()+h.I,Y_(h,h.I)}function Y_(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ll(p(h.ba,h),_)}function wg(h){h.B&&(s.clearTimeout(h.B),h.B=null)}Ii.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(FM(this.i,this.A),this.L!=2&&($l(),dr(17)),Na(this),this.s=2,Fl(this)):Y_(this,this.S-h)};function Fl(h){h.j.G==0||h.J||wk(h.j,h)}function Na(h){wg(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Do(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function _g(h,_){try{var C=h.j;if(C.G!=0&&(C.g==h||kg(C.h,h))){if(!h.K&&kg(C.h,h)&&C.G==3){try{var D=C.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var W=D;if(W[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Ud(C),Fd(C);else break e;Ag(C),dr(18)}}else C.za=W[1],0<C.za-C.T&&37500>W[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ll(p(C.Za,C),6e3));if(1>=J_(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Oa(C,11)}else if((h.K||C.g==h)&&Ud(C),!b(_))for(W=C.Da.g.parse(_),_=0;_<W.length;_++){let De=W[_];if(C.T=De[0],De=De[1],C.G==2)if(De[0]=="c"){C.K=De[1],C.ia=De[2];const Jt=De[3];Jt!=null&&(C.la=Jt,C.j.info("VER="+C.la));const Zt=De[4];Zt!=null&&(C.Aa=Zt,C.j.info("SVER="+C.Aa));const Vo=De[5];Vo!=null&&typeof Vo=="number"&&0<Vo&&(D=1.5*Vo,C.L=D,C.j.info("backChannelRequestTimeoutMs_="+D)),D=C;const ln=h.g;if(ln){const Wd=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wd){var q=D.h;q.g||Wd.indexOf("spdy")==-1&&Wd.indexOf("quic")==-1&&Wd.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Sg(q,q.h),q.h=null))}if(D.D){const Cg=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Cg&&(D.ya=Cg,rt(D.I,D.D,Cg))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),D=C;var ne=h;if(D.qa=Sk(D,D.J?D.ia:null,D.W),ne.K){Z_(D.h,ne);var Ke=ne,Ut=D.L;Ut&&(Ke.I=Ut),Ke.B&&(wg(Ke),Od(Ke)),D.g=ne}else xk(D);0<C.i.length&&Bd(C)}else De[0]!="stop"&&De[0]!="close"||Oa(C,7);else C.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Oa(C,7):Tg(C):De[0]!="noop"&&C.l&&C.l.ta(De),C.v=0)}}$l(4)}catch{}}var zM=class{constructor(h,_){this.g=h,this.map=_}};function Q_(h){this.l=h||10,s.PerformanceNavigationTiming?(h=s.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function X_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function J_(h){return h.h?1:h.g?h.g.size:0}function kg(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Sg(h,_){h.g?h.g.add(_):h.h=_}function Z_(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Q_.prototype.cancel=function(){if(this.i=ek(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ek(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const C of h.g.values())_=_.concat(C.D);return _}return v(h.i)}function WM(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var _=[],C=h.length,D=0;D<C;D++)_.push(h[D]);return _}_=[],C=0;for(D in h)_[C++]=h[D];return _}function HM(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var _=[];h=h.length;for(var C=0;C<h;C++)_.push(C);return _}_=[],C=0;for(const D in h)_[C++]=D;return _}}}function tk(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var C=HM(h),D=WM(h),W=D.length,q=0;q<W;q++)_.call(void 0,D[q],C&&C[q],h)}var rk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qM(h,_){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var D=h[C].indexOf("="),W=null;if(0<=D){var q=h[C].substring(0,D);W=h[C].substring(D+1)}else q=h[C];_(q,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ia(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ia){this.h=h.h,Rd(this,h.j),this.o=h.o,this.g=h.g,Dd(this,h.s),this.l=h.l;var _=h.i,C=new zl;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),nk(this,C),this.m=h.m}else h&&(_=String(h).match(rk))?(this.h=!1,Rd(this,_[1]||"",!0),this.o=Bl(_[2]||""),this.g=Bl(_[3]||"",!0),Dd(this,_[4]),this.l=Bl(_[5]||"",!0),nk(this,_[6]||"",!0),this.m=Bl(_[7]||"")):(this.h=!1,this.i=new zl(null,this.h))}Ia.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Ul(_,ik,!0),":");var C=this.g;return(C||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ul(_,ik,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Ul(C,C.charAt(0)=="/"?YM:KM,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Ul(C,XM)),h.join("")};function qn(h){return new Ia(h)}function Rd(h,_,C){h.j=C?Bl(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Dd(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function nk(h,_,C){_ instanceof zl?(h.i=_,JM(h.i,h.h)):(C||(_=Ul(_,QM)),h.i=new zl(_,h.h))}function rt(h,_,C){h.i.set(_,C)}function Md(h){return rt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Bl(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ul(h,_,C){return typeof h=="string"?(h=encodeURI(h).replace(_,GM),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function GM(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ik=/[#\/\?@]/g,KM=/[#\?:]/g,YM=/[#\?]/g,QM=/[#\?@]/g,XM=/#/g;function zl(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Oi(h){h.g||(h.g=new Map,h.h=0,h.i&&qM(h.i,function(_,C){h.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=zl.prototype,t.add=function(h,_){Oi(this),this.i=null,h=$o(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(_),this.h+=1,this};function ak(h,_){Oi(h),_=$o(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ok(h,_){return Oi(h),_=$o(h,_),h.g.has(_)}t.forEach=function(h,_){Oi(this),this.g.forEach(function(C,D){C.forEach(function(W){h.call(_,W,D,this)},this)},this)},t.na=function(){Oi(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let D=0;D<_.length;D++){const W=h[D];for(let q=0;q<W.length;q++)C.push(_[D])}return C},t.V=function(h){Oi(this);let _=[];if(typeof h=="string")ok(this,h)&&(_=_.concat(this.g.get($o(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)_=_.concat(h[C])}return _},t.set=function(h,_){return Oi(this),this.i=null,h=$o(this,h),ok(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function sk(h,_,C){ak(h,_),0<C.length&&(h.i=null,h.g.set($o(h,_),v(C)),h.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var D=_[C];const q=encodeURIComponent(String(D)),ne=this.V(D);for(D=0;D<ne.length;D++){var W=q;ne[D]!==""&&(W+="="+encodeURIComponent(String(ne[D]))),h.push(W)}}return this.i=h.join("&")};function $o(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function JM(h,_){_&&!h.j&&(Oi(h),h.i=null,h.g.forEach(function(C,D){var W=D.toLowerCase();D!=W&&(ak(this,D),sk(this,W,C))},h)),h.j=_}function ZM(h,_){const C=new Vl;if(s.Image){const D=new Image;D.onload=m(Ri,C,"TestLoadImage: loaded",!0,_,D),D.onerror=m(Ri,C,"TestLoadImage: error",!1,_,D),D.onabort=m(Ri,C,"TestLoadImage: abort",!1,_,D),D.ontimeout=m(Ri,C,"TestLoadImage: timeout",!1,_,D),s.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}function e$(h,_){const C=new Vl,D=new AbortController,W=setTimeout(()=>{D.abort(),Ri(C,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:D.signal}).then(q=>{clearTimeout(W),q.ok?Ri(C,"TestPingServer: ok",!0,_):Ri(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),Ri(C,"TestPingServer: error",!1,_)})}function Ri(h,_,C,D,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),D(C)}catch{}}function t$(){this.g=new $M}function r$(h,_,C){const D=C||"";try{tk(h,function(W,q){let ne=W;c(W)&&(ne=Ct(W)),_.push(D+q+"="+encodeURIComponent(ne))})}catch(W){throw _.push(D+"type="+encodeURIComponent("_badmap")),W}}function $d(h){this.l=h.Ub||null,this.j=h.eb||!1}g($d,mg),$d.prototype.g=function(){return new Ld(this.l,this.j)},$d.prototype.i=function(h){return function(){return h}}({});function Ld(h,_){Le.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Ld,Le),t=Ld.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Hl(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||s).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wl(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hl(this)),this.g&&(this.readyState=3,Hl(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lk(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function lk(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Wl(this):Hl(this),this.readyState==3&&lk(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Wl(this))},t.Qa=function(h){this.g&&(this.response=h,Wl(this))},t.ga=function(){this.g&&Wl(this)};function Wl(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Hl(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=_.next();return h.join(`\r
`)};function Hl(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ld.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ck(h){let _="";return T(h,function(C,D){_+=D,_+=":",_+=C,_+=`\r
`}),_}function Eg(h,_,C){e:{for(D in C){var D=!1;break e}D=!0}D||(C=ck(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):rt(h,_,C))}function gt(h){Le.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(gt,Le);var n$=/^https?$/i,i$=["POST","PUT"];t=gt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,C,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vg.g(),this.v=this.o?L_(this.o):L_(vg),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(q){uk(this,q);return}if(h=C||"",C=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var W in D)C.set(W,D[W]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const q of D.keys())C.set(q,D.get(q));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(C.keys()).find(q=>q.toLowerCase()=="content-type"),W=s.FormData&&h instanceof s.FormData,!(0<=Array.prototype.indexOf.call(i$,_,void 0))||D||W||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of C)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hk(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){uk(this,q)}};function uk(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,dk(h),Vd(h)}function dk(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ue(this,"complete"),Ue(this,"abort"),Vd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vd(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fk(this):this.bb())},t.bb=function(){fk(this)};function fk(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Gn(h)!=4||h.Z()!=2)){if(h.u&&Gn(h)==4)Oo(h.Ea,0,h);else if(Ue(h,"readystatechange"),Gn(h)==4){h.h=!1;try{const ne=h.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var D;if(D=ne===0){var W=String(h.D).match(rk)[1]||null;!W&&s.self&&s.self.location&&(W=s.self.location.protocol.slice(0,-1)),D=!n$.test(W?W.toLowerCase():"")}C=D}if(C)Ue(h,"complete"),Ue(h,"success");else{h.m=6;try{var q=2<Gn(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",dk(h)}}finally{Vd(h)}}}}function Vd(h,_){if(h.g){hk(h);const C=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ue(h,"ready");try{C.onreadystatechange=D}catch{}}}function hk(h){h.I&&(s.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Gn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),sn(_)}};function pk(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function a$(h){const _={};h=(h.g&&2<=Gn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(b(h[D]))continue;var C=I(h[D]);const W=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const q=_[W]||[];_[W]=q,q.push(C)}S(_,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ql(h,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||_}function mk(h){this.Aa=0,this.i=[],this.j=new Vl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ql("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ql("baseRetryDelayMs",5e3,h),this.cb=ql("retryDelaySeedMs",1e4,h),this.Wa=ql("forwardChannelMaxRetries",2,h),this.wa=ql("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Q_(h&&h.concurrentRequestLimit),this.Da=new t$,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mk.prototype,t.la=8,t.G=1,t.connect=function(h,_,C,D){dr(0),this.W=h,this.H=_||{},C&&D!==void 0&&(this.H.OSID=C,this.H.OAID=D),this.F=this.X,this.I=Sk(this,null,this.W),Bd(this)};function Tg(h){if(gk(h),h.G==3){var _=h.U++,C=qn(h.I);if(rt(C,"SID",h.K),rt(C,"RID",_),rt(C,"TYPE","terminate"),Gl(h,C),_=new Ii(h,h.j,_),_.L=2,_.v=Md(qn(C)),C=!1,s.navigator&&s.navigator.sendBeacon)try{C=s.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&s.Image&&(new Image().src=_.v,C=!0),C||(_.g=Ek(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Od(_)}kk(h)}function Fd(h){h.g&&(Pg(h),h.g.cancel(),h.g=null)}function gk(h){Fd(h),h.u&&(s.clearTimeout(h.u),h.u=null),Ud(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&s.clearTimeout(h.s),h.s=null)}function Bd(h){if(!X_(h.h)&&!h.s){h.s=!0;var _=h.Ga;z||B(),M||(z(),M=!0),F.add(_,h),h.B=0}}function o$(h,_){return J_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ll(p(h.Ga,h,_),_k(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Ii(this,this.j,h);let q=this.o;if(this.S&&(q?(q=E(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(W.H=q,q=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var D=this.i[C];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=vk(this,W,_),C=qn(this.I),rt(C,"RID",h),rt(C,"CVER",22),this.D&&rt(C,"X-HTTP-Session-Id",this.D),Gl(this,C),q&&(this.O?_="headers="+encodeURIComponent(String(ck(q)))+"&"+_:this.m&&Eg(C,this.m,q)),Sg(this.h,W),this.Ua&&rt(C,"TYPE","init"),this.P?(rt(C,"$req",_),rt(C,"SID","null"),W.T=!0,bg(W,C,null)):bg(W,C,_),this.G=2}}else this.G==3&&(h?yk(this,h):this.i.length==0||X_(this.h)||yk(this))};function yk(h,_){var C;_?C=_.l:C=h.U++;const D=qn(h.I);rt(D,"SID",h.K),rt(D,"RID",C),rt(D,"AID",h.T),Gl(h,D),h.m&&h.o&&Eg(D,h.m,h.o),C=new Ii(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),_&&(h.i=_.D.concat(h.i)),_=vk(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Sg(h.h,C),bg(C,D,_)}function Gl(h,_){h.H&&T(h.H,function(C,D){rt(_,D,C)}),h.l&&tk({},function(C,D){rt(_,D,C)})}function vk(h,_,C){C=Math.min(h.i.length,C);var D=h.l?p(h.l.Na,h.l,h):null;e:{var W=h.i;let q=-1;for(;;){const ne=["count="+C];q==-1?0<C?(q=W[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let Ke=!0;for(let Ut=0;Ut<C;Ut++){let De=W[Ut].g;const Jt=W[Ut].map;if(De-=q,0>De)q=Math.max(0,W[Ut].g-100),Ke=!1;else try{r$(Jt,ne,"req"+De+"_")}catch{D&&D(Jt)}}if(Ke){D=ne.join("&");break e}}}return h=h.i.splice(0,C),_.D=h,D}function xk(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;z||B(),M||(z(),M=!0),F.add(_,h),h.v=0}}function Ag(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ll(p(h.Fa,h),_k(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,bk(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ll(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),Fd(this),bk(this))};function Pg(h){h.A!=null&&(s.clearTimeout(h.A),h.A=null)}function bk(h){h.g=new Ii(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=qn(h.qa);rt(_,"RID","rpc"),rt(_,"SID",h.K),rt(_,"AID",h.T),rt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&rt(_,"TO",h.ja),rt(_,"TYPE","xmlhttp"),Gl(h,_),h.m&&h.o&&Eg(_,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Md(qn(_)),C.m=null,C.P=!0,G_(C,h)}t.Za=function(){this.C!=null&&(this.C=null,Fd(this),Ag(this),dr(19))};function Ud(h){h.C!=null&&(s.clearTimeout(h.C),h.C=null)}function wk(h,_){var C=null;if(h.g==_){Ud(h),Pg(h),h.g=null;var D=2}else if(kg(h.h,_))C=_.D,Z_(h.h,_),D=1;else return;if(h.G!=0){if(_.o)if(D==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var W=h.B;D=jd(),Ue(D,new z_(D,C)),Bd(h)}else xk(h);else if(W=_.s,W==3||W==0&&0<_.X||!(D==1&&o$(h,_)||D==2&&Ag(h)))switch(C&&0<C.length&&(_=h.h,_.i=_.i.concat(C)),W){case 1:Oa(h,5);break;case 4:Oa(h,10);break;case 3:Oa(h,6);break;default:Oa(h,2)}}}function _k(h,_){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*_}function Oa(h,_){if(h.j.info("Error code "+_),_==2){var C=p(h.fb,h),D=h.Xa;const W=!D;D=new Ia(D||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Rd(D,"https"),Md(D),W?ZM(D.toString(),C):e$(D.toString(),C)}else dr(2);h.G=0,h.l&&h.l.sa(_),kk(h),gk(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function kk(h){if(h.G=0,h.ka=[],h.l){const _=ek(h.h);(_.length!=0||h.i.length!=0)&&(y(h.ka,_),y(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function Sk(h,_,C){var D=C instanceof Ia?qn(C):new Ia(C);if(D.g!="")_&&(D.g=_+"."+D.g),Dd(D,D.s);else{var W=s.location;D=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;var q=new Ia(null);D&&Rd(q,D),_&&(q.g=_),W&&Dd(q,W),C&&(q.l=C),D=q}return C=h.D,_=h.ya,C&&_&&rt(D,C,_),rt(D,"VER",h.la),Gl(h,D),D}function Ek(h,_,C){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new gt(new $d({eb:C})):new gt(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tk(){}t=Tk.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zd(){}zd.prototype.g=function(h,_){return new Nr(h,_)};function Nr(h,_){Le.call(this),this.g=new mk(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!b(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!b(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Lo(this)}g(Nr,Le),Nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){Tg(this.g)},Nr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Ct(h),h=C);_.i.push(new zM(_.Ya++,h)),_.G==3&&Bd(_)},Nr.prototype.N=function(){this.g.l=null,delete this.j,Tg(this.g),delete this.g,Nr.aa.N.call(this)};function Ak(h){gg.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const C in _){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}g(Ak,gg);function Pk(){yg.call(this),this.status=1}g(Pk,yg);function Lo(h){this.g=h}g(Lo,Tk),Lo.prototype.ua=function(){Ue(this.g,"a")},Lo.prototype.ta=function(h){Ue(this.g,new Ak(h))},Lo.prototype.sa=function(h){Ue(this.g,new Pk)},Lo.prototype.ra=function(){Ue(this.g,"b")},zd.prototype.createWebChannel=zd.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,CN=function(){return new zd},PN=function(){return jd()},AN=ja,qv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nd.NO_ERROR=0,Nd.TIMEOUT=8,Nd.HTTP_ERROR=6,Hf=Nd,W_.COMPLETE="complete",TN=W_,V_.EventType=Ml,Ml.OPEN="a",Ml.CLOSE="b",Ml.ERROR="c",Ml.MESSAGE="d",Le.prototype.listen=Le.prototype.K,xc=V_,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,EN=gt}).apply(typeof df<"u"?df:typeof self<"u"?self:typeof window<"u"?window:{});const kS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new jb("@firebase/firestore");function rc(){return fo.logLevel}function ue(t,...e){if(fo.logLevel<=Pe.DEBUG){const r=e.map(Ub);fo.debug(`Firestore (${yl}): ${t}`,...r)}}function xi(t,...e){if(fo.logLevel<=Pe.ERROR){const r=e.map(Ub);fo.error(`Firestore (${yl}): ${t}`,...r)}}function Ms(t,...e){if(fo.logLevel<=Pe.WARN){const r=e.map(Ub);fo.warn(`Firestore (${yl}): ${t}`,...r)}}function Ub(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: `+t;throw xi(e),new Error(e)}function We(t,e){t||be()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Ti{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ir.UNAUTHENTICATED))}shutdown(){}}class A6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class P6{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){We(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new li;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new li,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new li)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(We(typeof n.accessToken=="string"),new jN(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new ir(e)}}class C6{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class j6{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new C6(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){We(this.o===void 0);const n=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(We(typeof r.token=="string"),this.R=r.token,new N6(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=O6(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Me(t,e){return t<e?-1:t>e?1:0}function $s(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new oe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new oe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new oe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Dt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.timestamp=e}static fromTimestamp(e){return new we(e)}static min(){return new we(new Dt(0,0))}static max(){return new we(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,r,n){r===void 0?r=0:r>e.length&&be(),n===void 0?n=e.length-r:n>e.length-r&&be(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return hu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof hu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),o=r.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ot extends hu{construct(e,r,n){return new ot(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new oe(Y.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new ot(r)}static emptyPath(){return new ot([])}}const R6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends hu{construct(e,r,n){return new qt(e,r,n)}static isValidIdentifier(e){return R6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new oe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new oe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new oe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(n+=s,i++):(a(),i++)}if(a(),o)throw new oe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(r)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ot.fromString(e))}static fromName(e){return new he(ot.fromString(e).popFirst(5))}static empty(){return new he(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ot.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ot(e.slice()))}}function D6(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=we.fromTimestamp(n===1e9?new Dt(r+1,0):new Dt(r,n));return new ga(i,he.empty(),e)}function M6(t){return new ga(t.readTime,t.key,-1)}class ga{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ga(we.min(),he.empty(),-1)}static max(){return new ga(we.max(),he.empty(),-1)}}function $6(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=he.comparator(t.documentKey,e.documentKey),r!==0?r:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==L6)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Z((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Z?r:Z.resolve(r)}catch(r){return Z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.reject(r)}static resolve(e){return new Z((r,n)=>{r(e)})}static reject(e){return new Z((r,n)=>{n(e)})}static waitFor(e){return new Z((r,n)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&r()},l=>n(l))}),o=!0,a===i&&r()})}static or(e){let r=Z.resolve(!1);for(const n of e)r=r.next(i=>i?Z.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new Z((n,i)=>{const a=e.length,o=new Array(a);let s=0;for(let l=0;l<a;l++){const c=l;r(e[c]).next(d=>{o[c]=d,++s,s===a&&n(o)},d=>i(d))}})}static doWhile(e,r){return new Z((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function F6(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function md(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zb.oe=-1;function cm(t){return t==null}function Ih(t){return t===0&&1/t==-1/0}function B6(t){return typeof t=="number"&&Number.isInteger(t)&&!Ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Eo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function IN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,r){this.comparator=e,this.root=r||Ht.EMPTY}insert(e,r){return new mt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Ht.RED,this.left=i??Ht.EMPTY,this.right=a??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Ht(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,r,n,i,a){return this}insert(e,r,n){return new Ht(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ES(this.data.getIterator())}getIteratorFrom(e){return new ES(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yt(this.comparator);return r.data=e,r}}class ES{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new Lr([])}unionWith(e){let r=new Yt(qt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Lr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ON("Invalid base64 string: "+a):a}}(e);return new Xt(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Xt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const U6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(t){if(We(!!t),typeof t=="string"){let e=0;const r=U6.exec(t);if(We(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ho(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Hb(t){const e=t.mapValue.fields.__previous_value__;return Wb(e)?Hb(e):e}function pu(t){const e=ya(t.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,r,n,i,a,o,s,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class mu{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf={mapValue:{}};function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wb(t)?4:H6(t)?9007199254740991:W6(t)?10:11:be()}function Bn(t,e){if(t===e)return!0;const r=po(t);if(r!==po(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pu(t).isEqual(pu(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=ya(i.timestampValue),s=ya(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return ho(i.bytesValue).isEqual(ho(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return xt(i.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return xt(i.integerValue)===xt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=xt(i.doubleValue),s=xt(a.doubleValue);return o===s?Ih(o)===Ih(s):isNaN(o)&&isNaN(s)}return!1}(t,e);case 9:return $s(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(SS(o)!==SS(s))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(s[l]===void 0||!Bn(o[l],s[l])))return!1;return!0}(t,e);default:return be()}}function gu(t,e){return(t.values||[]).find(r=>Bn(r,e))!==void 0}function Ls(t,e){if(t===e)return 0;const r=po(t),n=po(e);if(r!==n)return Me(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(a,o){const s=xt(a.integerValue||a.doubleValue),l=xt(o.integerValue||o.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(t,e);case 3:return TS(t.timestampValue,e.timestampValue);case 4:return TS(pu(t),pu(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(a,o){const s=ho(a),l=ho(o);return s.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),l=o.split("/");for(let c=0;c<s.length&&c<l.length;c++){const d=Me(s[c],l[c]);if(d!==0)return d}return Me(s.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const s=Me(xt(a.latitude),xt(o.latitude));return s!==0?s:Me(xt(a.longitude),xt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return AS(t.arrayValue,e.arrayValue);case 10:return function(a,o){var s,l,c,d;const f=a.fields||{},p=o.fields||{},m=(s=f.value)===null||s===void 0?void 0:s.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=Me(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:AS(m,g)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===hf.mapValue&&o===hf.mapValue)return 0;if(a===hf.mapValue)return 1;if(o===hf.mapValue)return-1;const s=a.fields||{},l=Object.keys(s),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=Me(l[f],d[f]);if(p!==0)return p;const m=Ls(s[l[f]],c[d[f]]);if(m!==0)return m}return Me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw be()}}function TS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const r=ya(t),n=ya(e),i=Me(r.seconds,n.seconds);return i!==0?i:Me(r.nanos,n.nanos)}function AS(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Ls(r[i],n[i]);if(a)return a}return Me(r.length,n.length)}function Vs(t){return Gv(t)}function Gv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ya(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ho(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return he.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=Gv(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${Gv(r.fields[o])}`;return i+"}"}(t.mapValue):be()}function PS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kv(t){return!!t&&"integerValue"in t}function qb(t){return!!t&&"arrayValue"in t}function CS(t){return!!t&&"nullValue"in t}function jS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qf(t){return!!t&&"mapValue"in t}function W6(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Dc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Dc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Dc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function H6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!qf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(r)}setAll(e){let r=qt.emptyPath(),n={},i=[];e.forEach((o,s)=>{if(!r.isImmediateParentOf(s)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=s.popLast()}o?n[s.lastSegment()]=Dc(o):i.push(s.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());qf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Eo(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new _r(Dc(this.value))}}function RN(t){const e=[];return Eo(t.fields,(r,n)=>{const i=new qt([r]);if(qf(n)){const a=RN(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,r,n,i,a,o,s){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new or(e,0,we.min(),we.min(),we.min(),_r.empty(),0)}static newFoundDocument(e,r,n,i){return new or(e,1,r,we.min(),n,i,0)}static newNoDocument(e,r){return new or(e,2,r,we.min(),we.min(),_r.empty(),0)}static newUnknownDocument(e,r){return new or(e,3,r,we.min(),we.min(),_r.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,r){this.position=e,this.inclusive=r}}function NS(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=he.comparator(he.fromName(o.referenceValue),r.key):n=Ls(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function IS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Bn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,r="asc"){this.field=e,this.dir=r}}function q6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{}class Et extends DN{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new K6(e,r,n):r==="array-contains"?new X6(e,n):r==="in"?new J6(e,n):r==="not-in"?new Z6(e,n):r==="array-contains-any"?new eB(e,n):new Et(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Y6(e,n):new Q6(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ls(r,this.value)):r!==null&&po(this.value)===po(r)&&this.matchesComparison(Ls(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends DN{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Sn(e,r)}matches(e){return MN(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MN(t){return t.op==="and"}function $N(t){return G6(t)&&MN(t)}function G6(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function Yv(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+Vs(t.value);if($N(t))return t.filters.map(e=>Yv(e)).join(",");{const e=t.filters.map(r=>Yv(r)).join(",");return`${t.op}(${e})`}}function LN(t,e){return t instanceof Et?function(n,i){return i instanceof Et&&n.op===i.op&&n.field.isEqual(i.field)&&Bn(n.value,i.value)}(t,e):t instanceof Sn?function(n,i){return i instanceof Sn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,s)=>a&&LN(o,i.filters[s]),!0):!1}(t,e):void be()}function VN(t){return t instanceof Et?function(r){return`${r.field.canonicalString()} ${r.op} ${Vs(r.value)}`}(t):t instanceof Sn?function(r){return r.op.toString()+" {"+r.getFilters().map(VN).join(" ,")+"}"}(t):"Filter"}class K6 extends Et{constructor(e,r,n){super(e,r,n),this.key=he.fromName(n.referenceValue)}matches(e){const r=he.comparator(e.key,this.key);return this.matchesComparison(r)}}class Y6 extends Et{constructor(e,r){super(e,"in",r),this.keys=FN("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Q6 extends Et{constructor(e,r){super(e,"not-in",r),this.keys=FN("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function FN(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>he.fromName(n.referenceValue))}class X6 extends Et{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return qb(r)&&gu(r.arrayValue,this.value)}}class J6 extends Et{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&gu(this.value.arrayValue,r)}}class Z6 extends Et{constructor(e,r){super(e,"not-in",r)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!gu(this.value.arrayValue,r)}}class eB extends Et{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!qb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>gu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,r=null,n=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ue=null}}function OS(t,e=null,r=[],n=[],i=null,a=null,o=null){return new tB(t,e,r,n,i,a,o)}function Gb(t){const e=_e(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Yv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),cm(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Vs(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Vs(n)).join(",")),e.ue=r}return e.ue}function Kb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!q6(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!LN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IS(t.startAt,e.startAt)&&IS(t.endAt,e.endAt)}function Qv(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,r=null,n=[],i=[],a=null,o="F",s=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rB(t,e,r,n,i,a,o,s){return new vl(t,e,r,n,i,a,o,s)}function Yb(t){return new vl(t)}function RS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BN(t){return t.collectionGroup!==null}function Mc(t){const e=_e(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new Yt(qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new yu(a,n))}),r.has(qt.keyField().canonicalString())||e.ce.push(new yu(qt.keyField(),n))}return e.ce}function $n(t){const e=_e(t);return e.le||(e.le=nB(e,Mc(t))),e.le}function nB(t,e){if(t.limitType==="F")return OS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new yu(i.field,a)});const r=t.endAt?new Oh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Oh(t.startAt.position,t.startAt.inclusive):null;return OS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Xv(t,e){const r=t.filters.concat([e]);return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Jv(t,e,r){return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function um(t,e){return Kb($n(t),$n(e))&&t.limitType===e.limitType}function UN(t){return`${Gb($n(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>VN(i)).join(", ")}]`),cm(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Vs(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Vs(i)).join(",")),`Target(${n})`}($n(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):he.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Mc(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,s,l){const c=NS(o,s,l);return o.inclusive?c<=0:c<0}(n.startAt,Mc(n),i)||n.endAt&&!function(o,s,l){const c=NS(o,s,l);return o.inclusive?c>=0:c>0}(n.endAt,Mc(n),i))}(t,e)}function iB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zN(t){return(e,r)=>{let n=!1;for(const i of Mc(t)){const a=aB(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function aB(t,e,r){const n=t.field.isKeyField()?he.comparator(e.key,r.key):function(a,o,s){const l=o.data.field(a),c=s.data.field(a);return l!==null&&c!==null?Ls(l,c):be()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return IN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=new mt(he.comparator);function bi(){return oB}const WN=new mt(he.comparator);function bc(...t){let e=WN;for(const r of t)e=e.insert(r.key,r);return e}function HN(t){let e=WN;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Wa(){return $c()}function qN(){return $c()}function $c(){return new xl(t=>t.toString(),(t,e)=>t.isEqual(e))}const sB=new mt(he.comparator),lB=new Yt(he.comparator);function Ae(...t){let e=lB;for(const r of t)e=e.add(r);return e}const cB=new Yt(Me);function uB(){return cB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function GN(t){return{integerValue:""+t}}function dB(t,e){return B6(e)?GN(e):Qb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function fB(t,e,r){return t instanceof Rh?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Wb(a)&&(a=Hb(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof vu?YN(t,e):t instanceof xu?QN(t,e):function(i,a){const o=KN(i,a),s=DS(o)+DS(i.Pe);return Kv(o)&&Kv(i.Pe)?GN(s):Qb(i.serializer,s)}(t,e)}function hB(t,e,r){return t instanceof vu?YN(t,e):t instanceof xu?QN(t,e):r}function KN(t,e){return t instanceof Dh?function(n){return Kv(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Rh extends fm{}class vu extends fm{constructor(e){super(),this.elements=e}}function YN(t,e){const r=XN(e);for(const n of t.elements)r.some(i=>Bn(i,n))||r.push(n);return{arrayValue:{values:r}}}class xu extends fm{constructor(e){super(),this.elements=e}}function QN(t,e){let r=XN(e);for(const n of t.elements)r=r.filter(i=>!Bn(i,n));return{arrayValue:{values:r}}}class Dh extends fm{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function DS(t){return xt(t.integerValue||t.doubleValue)}function XN(t){return qb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pB(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof vu&&i instanceof vu||n instanceof xu&&i instanceof xu?$s(n.elements,i.elements,Bn):n instanceof Dh&&i instanceof Dh?Bn(n.Pe,i.Pe):n instanceof Rh&&i instanceof Rh}(t.transform,e.transform)}class mB{constructor(e,r){this.version=e,this.transformResults=r}}class wn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hm{}function JN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xb(t.key,wn.none()):new gd(t.key,t.data,wn.none());{const r=t.data,n=_r.empty();let i=new Yt(qt.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new ka(t.key,n,new Lr(i.toArray()),wn.none())}}function gB(t,e,r){t instanceof gd?function(i,a,o){const s=i.value.clone(),l=$S(i.fieldTransforms,a,o.transformResults);s.setAll(l),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(t,e,r):t instanceof ka?function(i,a,o){if(!Gf(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=$S(i.fieldTransforms,a,o.transformResults),l=a.data;l.setAll(ZN(i)),l.setAll(s),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Lc(t,e,r,n){return t instanceof gd?function(a,o,s,l){if(!Gf(a.precondition,o))return s;const c=a.value.clone(),d=LS(a.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof ka?function(a,o,s,l){if(!Gf(a.precondition,o))return s;const c=LS(a.fieldTransforms,l,o),d=o.data;return d.setAll(ZN(a)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(a,o,s){return Gf(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(t,e,r)}function yB(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=KN(n.transform,i||null);a!=null&&(r===null&&(r=_r.empty()),r.set(n.field,a))}return r||null}function MS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&$s(n,i,(a,o)=>pB(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gd extends hm{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ka extends hm{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ZN(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function $S(t,e,r){const n=new Map;We(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,s=e.data.field(a.field);n.set(a.field,hB(o,s,r[i]))}return n}function LS(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,fB(a,o,e))}return n}class Xb extends hm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vB extends hm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&gB(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Lc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Lc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=qN();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=r.has(i.key)?null:s;const l=JN(o,s);l!==null&&n.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(we.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ae())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(r,n)=>MS(r,n))&&$s(this.baseMutations,e.baseMutations,(r,n)=>MS(r,n))}}class Jb{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){We(e.mutations.length===n.length);let i=function(){return sB}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new Jb(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,je;function _B(t){switch(t){default:return be();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function eI(t){if(t===void 0)return xi("GRPC error has no .code"),Y.UNKNOWN;switch(t){case _t.OK:return Y.OK;case _t.CANCELLED:return Y.CANCELLED;case _t.UNKNOWN:return Y.UNKNOWN;case _t.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case _t.INTERNAL:return Y.INTERNAL;case _t.UNAVAILABLE:return Y.UNAVAILABLE;case _t.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case _t.NOT_FOUND:return Y.NOT_FOUND;case _t.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case _t.ABORTED:return Y.ABORTED;case _t.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case _t.DATA_LOSS:return Y.DATA_LOSS;default:return be()}}(je=_t||(_t={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=new eo([4294967295,4294967295],0);function VS(t){const e=kB().encode(t),r=new SN;return r.update(e),new Uint8Array(r.digest())}function FS(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new eo([r,n],0),new eo([i,a],0)]}class Zb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new wc(`Invalid padding: ${r}`);if(n<0)throw new wc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new wc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=eo.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(eo.fromNumber(n)));return i.compare(SB)===1&&(i=new eo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=VS(e),[n,i]=FS(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Zb(a,i,r);return n.forEach(s=>o.insert(s)),o}insert(e){if(this.Ie===0)return;const r=VS(e),[n,i]=FS(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new pm(we.min(),i,new mt(Me),bi(),Ae())}}class yd{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new yd(n,r,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class tI{constructor(e,r){this.targetId=e,this.me=r}}class rI{constructor(e,r,n=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class BS{constructor(){this.fe=0,this.ge=zS(),this.pe=Xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),r=Ae(),n=Ae();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:be()}}),new yd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=zS()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class EB{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=US(),this.Qe=new mt(Me)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:be()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(Qv(a))if(n===0){const o=new he(a.path);this.Ue(r,o,or.newNoDocument(o,we.min()))}else We(n===1);else{const o=this.Ye(r);if(o!==n){const s=this.Ze(e),l=s?this.Xe(s,e,o):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,s;try{o=ho(n).toUint8Array()}catch(l){if(l instanceof ON)return Ms("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new Zb(o,i,a)}catch(l){return Ms(l instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Ie===0?null:s}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const o=this.Le.tt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.Ue(r,a,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const s=this.Je(o);if(s){if(a.current&&Qv(s.target)){const l=new he(s.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,or.newNoDocument(l,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=Ae();this.qe.forEach((a,o)=>{let s=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new pm(e,r,this.Qe,this.ke,n);return this.ke=bi(),this.qe=US(),this.Qe=new mt(Me),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new BS,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Yt(Me),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ue("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new BS),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function US(){return new mt(he.comparator)}function zS(){return new mt(he.comparator)}const TB={asc:"ASCENDING",desc:"DESCENDING"},AB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PB={and:"AND",or:"OR"};class CB{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Zv(t,e){return t.useProto3Json||cm(e)?e:{value:e}}function Mh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jB(t,e){return Mh(t,e.toTimestamp())}function Ln(t){return We(!!t),we.fromTimestamp(function(r){const n=ya(r);return new Dt(n.seconds,n.nanos)}(t))}function ew(t,e){return e0(t,e).canonicalString()}function e0(t,e){const r=function(i){return new ot(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function iI(t){const e=ot.fromString(t);return We(cI(e)),e}function t0(t,e){return ew(t.databaseId,e.path)}function uy(t,e){const r=iI(e);if(r.get(1)!==t.databaseId.projectId)throw new oe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new oe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new he(oI(r))}function aI(t,e){return ew(t.databaseId,e)}function NB(t){const e=iI(t);return e.length===4?ot.emptyPath():oI(e)}function r0(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oI(t){return We(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WS(t,e,r){return{name:t0(t,e),fields:r.value.mapValue.fields}}function IB(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(c,d){return c.useProto3Json?(We(d===void 0||typeof d=="string"),Xt.fromBase64String(d||"")):(We(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(c){const d=c.code===void 0?Y.UNKNOWN:eI(c.code);return new oe(d,c.message||"")}(o);r=new rI(n,i,a,s||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=uy(t,n.document.name),a=Ln(n.document.updateTime),o=n.document.createTime?Ln(n.document.createTime):we.min(),s=new _r({mapValue:{fields:n.document.fields}}),l=or.newFoundDocument(i,a,o,s),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Kf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=uy(t,n.document),a=n.readTime?Ln(n.readTime):we.min(),o=or.newNoDocument(i,a),s=n.removedTargetIds||[];r=new Kf([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=uy(t,n.document),a=n.removedTargetIds||[];r=new Kf([],a,i,null)}else{if(!("filter"in e))return be();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new wB(i,a),s=n.targetId;r=new tI(s,o)}}return r}function OB(t,e){let r;if(e instanceof gd)r={update:WS(t,e.key,e.value)};else if(e instanceof Xb)r={delete:t0(t,e.key)};else if(e instanceof ka)r={update:WS(t,e.key,e.data),updateMask:UB(e.fieldMask)};else{if(!(e instanceof vB))return be();r={verify:t0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const s=o.transform;if(s instanceof Rh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof vu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof xu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Dh)return{fieldPath:o.field.canonicalString(),increment:s.Pe};throw be()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:jB(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:be()}(t,e.precondition)),r}function RB(t,e){return t&&t.length>0?(We(e!==void 0),t.map(r=>function(i,a){let o=i.updateTime?Ln(i.updateTime):Ln(a);return o.isEqual(we.min())&&(o=Ln(a)),new mB(o,i.transformResults||[])}(r,e))):[]}function DB(t,e){return{documents:[aI(t,e.path)]}}function MB(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=aI(t,i);const a=function(c){if(c.length!==0)return lI(Sn.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Ko(p.field),direction:VB(p.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const s=Zv(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:i}}function $B(t){let e=NB(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){We(n===1);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(f){const p=sI(f);return p instanceof Sn&&$N(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(g){return new yu(Yo(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(r.orderBy));let s=null;r.limit&&(s=function(f){let p;return p=typeof f=="object"?f.value:f,cm(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Oh(m,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Oh(m,p)}(r.endAt)),rB(e,i,o,a,s,"F",l,c)}function LB(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function sI(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Yo(r.unaryFilter.field);return Et.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Yo(r.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Yo(r.unaryFilter.field);return Et.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yo(r.unaryFilter.field);return Et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(r){return Et.create(Yo(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Sn.create(r.compositeFilter.filters.map(n=>sI(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(r.compositeFilter.op))}(t):be()}function VB(t){return TB[t]}function FB(t){return AB[t]}function BB(t){return PB[t]}function Ko(t){return{fieldPath:t.canonicalString()}}function Yo(t){return qt.fromServerFormat(t.fieldPath)}function lI(t){return t instanceof Et?function(r){if(r.op==="=="){if(jS(r.value))return{unaryFilter:{field:Ko(r.field),op:"IS_NAN"}};if(CS(r.value))return{unaryFilter:{field:Ko(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(jS(r.value))return{unaryFilter:{field:Ko(r.field),op:"IS_NOT_NAN"}};if(CS(r.value))return{unaryFilter:{field:Ko(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(r.field),op:FB(r.op),value:r.value}}}(t):t instanceof Sn?function(r){const n=r.getFilters().map(i=>lI(i));return n.length===1?n[0]:{compositeFilter:{op:BB(r.op),filters:n}}}(t):be()}function UB(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function cI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,r,n,i,a=we.min(),o=we.min(),s=Xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new Qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this.ct=e}}function WB(t){const e=$B({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.un=new qB}addToCollectionParentIndex(e,r){return this.un.add(r),Z.resolve()}getCollectionParents(e,r){return Z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Z.resolve()}deleteFieldIndex(e,r){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,r){return Z.resolve()}getDocumentsMatchingTarget(e,r){return Z.resolve(null)}getIndexType(e,r){return Z.resolve(0)}getFieldIndexes(e,r){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,r){return Z.resolve(ga.min())}getMinOffsetFromCollectionGroup(e,r){return Z.resolve(ga.min())}updateCollectionGroup(e,r,n){return Z.resolve()}updateIndexEntries(e,r){return Z.resolve()}}class qB{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Yt(ot.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fs(0)}static kn(){return new Fs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(){this.changes=new xl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Lc(n.mutation,i,Lr.empty(),Dt.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ae()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ae()){const i=Wa();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let o=bc();return a.forEach((s,l)=>{o=o.insert(s,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Wa();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ae()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{r.set(o,s)})})}computeViews(e,r,n,i){let a=bi();const o=$c(),s=function(){return $c()}();return r.forEach((l,c)=>{const d=n.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ka)?a=a.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Lc(d.mutation,c,d.mutation.getFieldMask(),Dt.now())):o.set(c.key,Lr.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,d)=>o.set(c,d)),r.forEach((c,d)=>{var f;return s.set(c,new KB(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),s))}recalculateAndSaveOverlays(e,r){const n=$c();let i=new mt((o,s)=>o-s),a=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const s of o)s.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let d=n.get(l)||Lr.empty();d=s.applyToLocalView(c,d),n.set(l,d);const f=(i.get(s.batchId)||Ae()).add(l);i=i.insert(s.batchId,f)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,d=l.value,f=qN();d.forEach(p=>{if(!a.has(p)){const m=JN(r.get(p),n.get(p));m!==null&&f.set(p,m),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Z.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):BN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Z.resolve(Wa());let s=-1,l=a;return o.next(c=>Z.forEach(c,(d,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),a.get(d)?Z.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,Ae())).next(d=>({batchId:s,changes:HN(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new he(r)).next(n=>{let i=bc();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=bc();return this.indexManager.getCollectionParents(e,a).next(s=>Z.forEach(s,l=>{const c=function(f,p){return new vl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(o=>{a.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,or.newInvalidDocument(d)))});let s=bc();return o.forEach((l,c)=>{const d=a.get(l);d!==void 0&&Lc(d.mutation,c,Lr.empty(),Dt.now()),dm(r,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(r)),Z.resolve()}getNamedQuery(e,r){return Z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:WB(i.bundledQuery),readTime:Ln(i.readTime)}}(r)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(){this.overlays=new mt(he.comparator),this.Ir=new Map}getOverlay(e,r){return Z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Wa();return Z.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.ht(e,r,a)}),Z.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),Z.resolve()}getOverlaysForCollection(e,r,n){const i=Wa(),a=r.length+1,o=new he(r.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new mt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=a.get(c.largestBatchId);d===null&&(d=Wa(),a=a.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const s=Wa(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>s.set(c,d)),!(s.size()>=i)););return Z.resolve(s)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new bB(r,n));let a=this.Ir.get(r);a===void 0&&(a=Ae(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.Tr=new Yt($t.Er),this.dr=new Yt($t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new $t(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new $t(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new he(new ot([])),n=new $t(r,e),i=new $t(r,e+1),a=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new he(new ot([])),n=new $t(r,e),i=new $t(r,e+1);let a=Ae();return this.dr.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new $t(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class $t{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return he.comparator(e.key,r.key)||Me(e.wr,r.wr)}static Ar(e,r){return Me(e.wr,r.wr)||he.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Yt($t.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xB(a,r,n,i);this.mutationQueue.push(o);for(const s of i)this.br=this.br.add(new $t(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,r){return Z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new $t(r,0),i=new $t(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],o=>{const s=this.Dr(o.wr);a.push(s)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yt(Me);return r.forEach(i=>{const a=new $t(i,0),o=new $t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],s=>{n=n.add(s.wr)})}),Z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;he.isDocumentKey(a)||(a=a.child(""));const o=new $t(new he(a),0);let s=new Yt(Me);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.wr)),!0)},o),Z.resolve(this.Cr(s))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){We(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Z.forEach(r.mutations,i=>{const a=new $t(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new $t(r,0),i=this.br.firstAfterOrEqual(n);return Z.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.Mr=e,this.docs=function(){return new mt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Z.resolve(n?n.document.mutableCopy():or.newInvalidDocument(r))}getEntries(e,r){let n=bi();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():or.newInvalidDocument(i))}),Z.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=bi();const o=r.path,s=new he(o.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||$6(M6(d),n)<=0||(i.has(d.key)||dm(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,r,n,i){be()}Or(e,r){return Z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new tU(this)}getSize(e){return Z.resolve(this.size)}}class tU extends GB{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),Z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.persistence=e,this.Nr=new xl(r=>Gb(r),Kb),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tw,this.targetCount=0,this.kr=Fs.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Fs(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Z.resolve()}updateTargetData(e,r){return this.Kn(r),Z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach((o,s)=>{s.sequenceNumber<=r&&n.get(s.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Z.waitFor(a).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Z.resolve(n)}containsKey(e,r){return Z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,r){this.qr={},this.overlays={},this.Qr=new zb(0),this.Kr=!1,this.Kr=!0,this.$r=new JB,this.referenceDelegate=e(this),this.Ur=new rU(this),this.indexManager=new HB,this.remoteDocumentCache=function(i){return new eU(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new zB(r),this.Gr=new QB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new XB,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new ZB(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ue("MemoryPersistence","Starting transaction:",e);const i=new iU(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,r){return Z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class iU extends V6{constructor(e){super(),this.currentSequenceNumber=e}}class rw{constructor(e){this.persistence=e,this.Jr=new tw,this.Yr=null}static Zr(e){return new rw(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,n=>{const i=he.fromPath(n);return this.ei(e,i).next(a=>{a||r.removeEntry(i,we.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Z.or([()=>Z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Ae(),i=Ae();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new nw(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return H3()?8:F6(ur())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new aU;return this.Xi(e,r,o).next(s=>{if(a.result=s,this.zi)return this.es(e,r,o,s.size)})}).next(()=>a.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(rc()<=Pe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Go(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(rc()<=Pe.DEBUG&&ue("QueryEngine","Query:",Go(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(rc()<=Pe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Go(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(r))):Z.resolve())}Yi(e,r){if(RS(r))return Z.resolve(null);let n=$n(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Jv(r,null,"F"),n=$n(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=Ae(...a);return this.Ji.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,s);return this.ns(r,c,o,l.readTime)?this.Yi(e,Jv(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,i){return RS(r)||i.isEqual(we.min())?Z.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,i)?Z.resolve(null):(rc()<=Pe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Go(r)),this.rs(e,o,r,D6(i,-1)).next(s=>s))})}ts(e,r){let n=new Yt(zN(e));return r.forEach((i,a)=>{dm(e,a)&&(n=n.add(a))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return rc()<=Pe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Go(r)),this.Ji.getDocumentsMatchingQuery(e,r,ga.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new mt(Me),this._s=new xl(a=>Gb(a),Kb),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function lU(t,e,r,n){return new sU(t,e,r,n)}async function uI(t,e){const r=_e(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],s=[];let l=Ae();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of a){s.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:s}))})})}function cU(t,e){const r=_e(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,d){const f=c.batch,p=f.keys();let m=Z.resolve();return p.forEach(g=>{m=m.next(()=>d.getEntry(l,g)).next(v=>{const y=c.docVersions.get(g);We(y!==null),v.version.compareTo(y)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>s.mutationQueue.removeMutationBatch(l,f))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let l=Ae();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function dI(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function uU(t,e){const r=_e(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const s=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;s.push(r.Ur.removeMatchingKeys(a,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(a,d.addedDocuments,f)));let m=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Xt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),i=i.insert(f,m),function(v,y,x){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&s.push(r.Ur.updateTargetData(a,m))});let l=bi(),c=Ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),s.push(dU(a,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!n.isEqual(we.min())){const d=r.Ur.getLastRemoteSnapshotVersion(a).next(f=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));s.push(d)}return Z.waitFor(s).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(r.os=i,a))}function dU(t,e,r){let n=Ae(),i=Ae();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=bi();return r.forEach((s,l)=>{const c=a.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(we.min())?(e.removeEntry(s,l.readTime),o=o.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(s,l)):ue("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function fU(t,e){const r=_e(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function hU(t,e){const r=_e(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(a=>a?(i=a,Z.resolve(i)):r.Ur.allocateTargetId(n).next(o=>(i=new Qi(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function n0(t,e,r){const n=_e(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!md(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function HS(t,e,r){const n=_e(t);let i=we.min(),a=Ae();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=_e(l),p=f._s.get(d);return p!==void 0?Z.resolve(f.os.get(p)):f.Ur.getTargetData(c,d)}(n,o,$n(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,s.targetId).next(l=>{a=l})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?i:we.min(),r?a:Ae())).next(s=>(pU(n,iB(e),s),{documents:s,Ts:a})))}function pU(t,e,r){let n=t.us.get(e)||we.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class qS{constructor(){this.activeTargetIds=uB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mU{constructor(){this.so=new qS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qS,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function dy(){return pf===null?pf=function(){return 268435456+Math.round(2147483648*Math.random())}():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="WebChannelConnection";class xU extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,o){const s=dy(),l=this.xo(r,n.toUriEncodedString());ue("RestConnection",`Sending RPC '${r}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,a,o),this.No(r,l,c,i).then(d=>(ue("RestConnection",`Received RPC '${r}' ${s}: `,d),d),d=>{throw Ms("RestConnection",`RPC '${r}' ${s} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(r,n,i,a,o,s){return this.Mo(r,n,i,a,o)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),i&&i.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const i=yU[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=dy();return new Promise((o,s)=>{const l=new EN;l.setWithCredentials(!0),l.listenOnce(TN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hf.NO_ERROR:const d=l.getResponseJson();ue(rr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Hf.TIMEOUT:ue(rr,`RPC '${e}' ${a} timed out`),s(new oe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:const f=l.getStatus();if(ue(rr,`RPC '${e}' ${a} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(y){const x=y.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(x)>=0?x:Y.UNKNOWN}(m.status);s(new oe(g,m.message))}else s(new oe(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new oe(Y.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ue(rr,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);ue(rr,`RPC '${e}' ${a} sending request:`,i),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const i=dy(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CN(),s=PN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=a.join("");ue(rr,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const g=new vU({Io:y=>{m?ue(rr,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(p||(ue(rr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ue(rr,`RPC '${e}' stream ${i} sending:`,y),f.send(y))},To:()=>f.close()}),v=(y,x,b)=>{y.listen(x,k=>{try{b(k)}catch(j){setTimeout(()=>{throw j},0)}})};return v(f,xc.EventType.OPEN,()=>{m||(ue(rr,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),v(f,xc.EventType.CLOSE,()=>{m||(m=!0,ue(rr,`RPC '${e}' stream ${i} transport closed`),g.So())}),v(f,xc.EventType.ERROR,y=>{m||(m=!0,Ms(rr,`RPC '${e}' stream ${i} transport errored:`,y),g.So(new oe(Y.UNAVAILABLE,"The operation could not be completed")))}),v(f,xc.EventType.MESSAGE,y=>{var x;if(!m){const b=y.data[0];We(!!b);const k=b,j=k.error||((x=k[0])===null||x===void 0?void 0:x.error);if(j){ue(rr,`RPC '${e}' stream ${i} received error:`,j);const w=j.status;let T=function(P){const N=_t[P];if(N!==void 0)return eI(N)}(w),S=j.message;T===void 0&&(T=Y.INTERNAL,S="Unknown error status: "+w+" with message "+j.message),m=!0,g.So(new oe(T,S)),f.close()}else ue(rr,`RPC '${e}' stream ${i} received:`,b),g.bo(b)}}),v(s,AN.STAT_EVENT,y=>{y.stat===qv.PROXY?ue(rr,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===qv.NOPROXY&&ue(rr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function fy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){return new CB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,r,n,i,a,o,s,l){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fI(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Y.RESOURCE_EXHAUSTED?(xi(r.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new oe(Y.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bU extends hI{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=IB(this.serializer,e),n=function(a){if(!("targetChange"in a))return we.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?Ln(o.readTime):we.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=r0(this.serializer),r.addTarget=function(a,o){let s;const l=o.target;if(s=Qv(l)?{documents:DB(a,l)}:{query:MB(a,l)._t},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=nI(a,o.resumeToken);const c=Zv(a,o.expectedCount);c!==null&&(s.expectedCount=c)}else if(o.snapshotVersion.compareTo(we.min())>0){s.readTime=Mh(a,o.snapshotVersion.toTimestamp());const c=Zv(a,o.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const n=LB(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=r0(this.serializer),r.removeTarget=e,this.a_(r)}}class wU extends hI{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=RB(e.writeResults,e.commitTime),n=Ln(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=r0(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>OB(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new oe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,e0(r,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(Y.UNKNOWN,a.toString())})}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Lo(e,e0(r,n),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kU{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xi(r),this.D_=!1):ue("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{To(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=_e(l);c.L_.add(4),await vd(c),c.q_.set("Unknown"),c.L_.delete(4),await gm(c)}(this))})}),this.q_=new kU(n,i)}}async function gm(t){if(To(t))for(const e of t.B_)await e(!0)}async function vd(t){for(const e of t.B_)await e(!1)}function pI(t,e){const r=_e(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),sw(r)?ow(r):bl(r).r_()&&aw(r,e))}function iw(t,e){const r=_e(t),n=bl(r);r.N_.delete(e),n.r_()&&mI(r,e),r.N_.size===0&&(n.r_()?n.o_():To(r)&&r.q_.set("Unknown"))}function aw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}bl(t).A_(e)}function mI(t,e){t.Q_.xe(e),bl(t).R_(e)}function ow(t){t.Q_=new EB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bl(t).start(),t.q_.v_()}function sw(t){return To(t)&&!bl(t).n_()&&t.N_.size>0}function To(t){return _e(t).L_.size===0}function gI(t){t.Q_=void 0}async function EU(t){t.q_.set("Online")}async function TU(t){t.N_.forEach((e,r)=>{aw(t,e)})}async function AU(t,e){gI(t),sw(t)?(t.q_.M_(e),ow(t)):t.q_.set("Unknown")}async function PU(t,e,r){if(t.q_.set("Online"),e instanceof rI&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.N_.delete(s),i.Q_.removeTarget(s))}(t,e)}catch(n){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $h(t,n)}else if(e instanceof Kf?t.Q_.Ke(e):e instanceof tI?t.Q_.He(e):t.Q_.We(e),!r.isEqual(we.min()))try{const n=await dI(t.localStore);r.compareTo(n)>=0&&await function(a,o){const s=a.Q_.rt(o);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.N_.get(c);d&&a.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),s.targetMismatches.forEach((l,c)=>{const d=a.N_.get(l);if(!d)return;a.N_.set(l,d.withResumeToken(Xt.EMPTY_BYTE_STRING,d.snapshotVersion)),mI(a,l);const f=new Qi(d.target,l,c,d.sequenceNumber);aw(a,f)}),a.remoteSyncer.applyRemoteEvent(s)}(t,r)}catch(n){ue("RemoteStore","Failed to raise snapshot:",n),await $h(t,n)}}async function $h(t,e,r){if(!md(e))throw e;t.L_.add(1),await vd(t),t.q_.set("Offline"),r||(r=()=>dI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await gm(t)})}function yI(t,e){return e().catch(r=>$h(t,r,e))}async function ym(t){const e=_e(t),r=va(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CU(e);)try{const i=await fU(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,jU(e,i)}catch(i){await $h(e,i)}vI(e)&&xI(e)}function CU(t){return To(t)&&t.O_.length<10}function jU(t,e){t.O_.push(e);const r=va(t);r.r_()&&r.V_&&r.m_(e.mutations)}function vI(t){return To(t)&&!va(t).n_()&&t.O_.length>0}function xI(t){va(t).start()}async function NU(t){va(t).p_()}async function IU(t){const e=va(t);for(const r of t.O_)e.m_(r.mutations)}async function OU(t,e,r){const n=t.O_.shift(),i=Jb.from(n,e,r);await yI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ym(t)}async function RU(t,e){e&&va(t).V_&&await async function(n,i){if(function(o){return _B(o)&&o!==Y.ABORTED}(i.code)){const a=n.O_.shift();va(n).s_(),await yI(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ym(n)}}(t,e),vI(t)&&xI(t)}async function KS(t,e){const r=_e(t);r.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const n=To(r);r.L_.add(3),await vd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await gm(r)}async function DU(t,e){const r=_e(t);e?(r.L_.delete(2),await gm(r)):e||(r.L_.add(2),await vd(r),r.q_.set("Unknown"))}function bl(t){return t.K_||(t.K_=function(r,n,i){const a=_e(r);return a.w_(),new bU(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:EU.bind(null,t),Ro:TU.bind(null,t),mo:AU.bind(null,t),d_:PU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),sw(t)?ow(t):t.q_.set("Unknown")):(await t.K_.stop(),gI(t))})),t.K_}function va(t){return t.U_||(t.U_=function(r,n,i){const a=_e(r);return a.w_(),new wU(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NU.bind(null,t),mo:RU.bind(null,t),f_:IU.bind(null,t),g_:OU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ym(t)):(await t.U_.stop(),t.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,s=new lw(e,r,o,i,a);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cw(t,e){if(xi("AsyncQueue",`${e}: ${t}`),md(t))return new oe(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.comparator=e?(r,n)=>e(r,n)||he.comparator(r.key,n.key):(r,n)=>he.comparator(r.key,n.key),this.keyedMap=bc(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new _s(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _s)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _s;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.W_=new mt(he.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Bs{constructor(e,r,n,i,a,o,s,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach(s=>{o.push({type:0,doc:s})}),new Bs(e,r,_s.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $U{constructor(){this.queries=QS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=_e(r),a=i.queries;i.queries=QS(),a.forEach((o,s)=>{for(const l of s.j_)l.onError(n)})})(this,new oe(Y.ABORTED,"Firestore shutting down"))}}function QS(){return new xl(t=>UN(t),um)}async function bI(t,e){const r=_e(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new MU,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const s=cw(o,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(s)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&uw(r)}async function wI(t,e){const r=_e(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function LU(t,e){const r=_e(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const s of o.j_)s.X_(i)&&(n=!0);o.z_=i}}n&&uw(r)}function VU(t,e,r){const n=_e(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function uw(t){t.Y_.forEach(e=>{e.next()})}var i0,XS;(XS=i0||(i0={})).ea="default",XS.Cache="cache";class _I{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Bs(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==i0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.key=e}}class SI{constructor(e){this.key=e}}class FU{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=zN(e),this.Ra=new _s(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new YS,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),m=dm(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;p&&m?p.data.isEqual(m.data)?g!==v&&(n.track({type:3,doc:m}),y=!0):this.ga(p,m)||(n.track({type:2,doc:m}),y=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(s=!0)):!p&&m?(n.track({type:0,doc:m}),y=!0):p&&!m&&(n.track({type:1,doc:p}),y=!0,(l||c)&&(s=!0)),y&&(m?(o=o.add(m),a=v?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:s,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(m,g){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return v(m)-v(g)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),i=i!=null&&i;const s=r&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Bs(this.query,e.Ra,a,o,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new YS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new SI(n))}),this.da.forEach(n=>{e.has(n)||r.push(new kI(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ae();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BU{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class UU{constructor(e){this.key=e,this.va=!1}}class zU{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xl(s=>UN(s),um),this.Ma=new Map,this.xa=new Set,this.Oa=new mt(he.comparator),this.Na=new Map,this.La=new tw,this.Ba={},this.ka=new Map,this.qa=Fs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WU(t,e,r=!0){const n=jI(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await EI(n,e,r,!0),i}async function HU(t,e){const r=jI(t);await EI(r,e,!0,!1)}async function EI(t,e,r,n){const i=await hU(t.localStore,$n(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let s;return n&&(s=await qU(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&pI(t.remoteStore,i),s}async function qU(t,e,r,n,i){t.Ka=(f,p,m)=>async function(v,y,x,b){let k=y.view.ma(x);k.ns&&(k=await HS(v.localStore,y.query,!1).then(({documents:S})=>y.view.ma(S,k)));const j=b&&b.targetChanges.get(y.targetId),w=b&&b.targetMismatches.get(y.targetId)!=null,T=y.view.applyChanges(k,v.isPrimaryClient,j,w);return ZS(v,y.targetId,T.wa),T.snapshot}(t,f,p,m);const a=await HS(t.localStore,e,!0),o=new FU(e,a.Ts),s=o.ma(a.documents),l=yd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=o.applyChanges(s,t.isPrimaryClient,l);ZS(t,r,c.wa);const d=new BU(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function GU(t,e,r){const n=_e(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter(o=>!um(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await n0(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&iw(n.remoteStore,i.targetId),a0(n,i.targetId)}).catch(pd)):(a0(n,i.targetId),await n0(n.localStore,i.targetId,!0))}async function KU(t,e){const r=_e(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),iw(r.remoteStore,n.targetId))}async function YU(t,e,r){const n=r9(t);try{const i=await function(o,s){const l=_e(o),c=Dt.now(),d=s.reduce((m,g)=>m.add(g.key),Ae());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=bi(),v=Ae();return l.cs.getEntries(m,d).next(y=>{g=y,g.forEach((x,b)=>{b.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(y=>{f=y;const x=[];for(const b of s){const k=yB(b,f.get(b.key).overlayedDocument);k!=null&&x.push(new ka(b.key,k,RN(k.value.mapValue),wn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,s)}).next(y=>{p=y;const x=y.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,y.batchId,x)})}).then(()=>({batchId:p.batchId,changes:HN(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,s,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new mt(Me)),c=c.insert(s,l),o.Ba[o.currentUser.toKey()]=c}(n,i.batchId,r),await xd(n,i.changes),await ym(n.remoteStore)}catch(i){const a=cw(i,"Failed to persist write");r.reject(a)}}async function TI(t,e){const r=_e(t);try{const n=await uU(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Na.get(a);o&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?We(o.va):i.removedDocuments.size>0&&(We(o.va),o.va=!1))}),await xd(r,n,e)}catch(n){await pd(n)}}function JS(t,e,r){const n=_e(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((a,o)=>{const s=o.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const l=_e(o);l.onlineState=s;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.j_)p.Z_(s)&&(c=!0)}),c&&uw(l)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function QU(t,e,r){const n=_e(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let o=new mt(he.comparator);o=o.insert(a,or.newNoDocument(a,we.min()));const s=Ae().add(a),l=new pm(we.min(),new Map,new mt(Me),o,s);await TI(n,l),n.Oa=n.Oa.remove(a),n.Na.delete(e),dw(n)}else await n0(n.localStore,e,!1).then(()=>a0(n,e,r)).catch(pd)}async function XU(t,e){const r=_e(t),n=e.batch.batchId;try{const i=await cU(r.localStore,e);PI(r,n,null),AI(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await xd(r,i)}catch(i){await pd(i)}}async function JU(t,e,r){const n=_e(t);try{const i=await function(o,s){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,s).next(f=>(We(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(n.localStore,e);PI(n,e,r),AI(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await xd(n,i)}catch(i){await pd(i)}}function AI(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function PI(t,e,r){const n=_e(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function a0(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||CI(t,n)})}function CI(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(iw(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),dw(t))}function ZS(t,e,r){for(const n of r)n instanceof kI?(t.La.addReference(n.key,e),ZU(t,n)):n instanceof SI?(ue("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||CI(t,n.key)):be()}function ZU(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ue("SyncEngine","New document in limbo: "+r),t.xa.add(n),dw(t))}function dw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new he(ot.fromString(e)),n=t.qa.next();t.Na.set(n,new UU(r)),t.Oa=t.Oa.insert(r,n),pI(t.remoteStore,new Qi($n(Yb(r.path)),n,"TargetPurposeLimboResolution",zb.oe))}}async function xd(t,e,r){const n=_e(t),i=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((s,l)=>{o.push(n.Ka(l,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=nw.Wi(l.targetId,c);a.push(f)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(l,c){const d=_e(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Z.forEach(c,p=>Z.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>Z.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!md(f))throw f;ue("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.os.get(p),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);d.os=d.os.insert(p,v)}}}(n.localStore,a))}async function e9(t,e){const r=_e(t);if(!r.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const n=await uI(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(s=>{s.forEach(l=>{l.reject(new oe(Y.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await xd(r,n.hs)}}function t9(t,e){const r=_e(t),n=r.Na.get(e);if(n&&n.va)return Ae().add(n.key);{let i=Ae();const a=r.Ma.get(e);if(!a)return i;for(const o of a){const s=r.Fa.get(o);i=i.unionWith(s.view.Va)}return i}}function jI(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QU.bind(null,e),e.Ca.d_=LU.bind(null,e.eventManager),e.Ca.$a=VU.bind(null,e.eventManager),e}function r9(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JU.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return lU(this.persistence,new oU,e.initialUser,this.serializer)}Ga(e){return new nU(rw.Zr,this.serializer)}Wa(e){return new mU}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class o0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>JS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,this.syncEngine),await DU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $U}()}createDatastore(e){const r=mm(e.databaseInfo.databaseId),n=function(a){return new xU(a)}(e.databaseInfo);return function(a,o,s,l){return new _U(a,o,s,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,o,s){return new SU(n,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,r=>JS(this.syncEngine,r,0),function(){return GS.D()?new GS:new gU}())}createSyncEngine(e,r){return function(i,a,o,s,l,c,d){const f=new zU(i,a,o,s,l,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=_e(i);ue("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await vd(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}o0.provider={build:()=>new o0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=NN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{ue("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=cw(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hy(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await uI(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await i9(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>KS(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>KS(e.remoteStore,i)),t._onlineComponents=e}async function i9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await hy(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===Y.FAILED_PRECONDITION||i.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Ms("Error using user provided cache. Falling back to memory cache: "+r),await hy(t,new Lh)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await hy(t,new Lh);return t._offlineComponents}async function II(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await eE(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await eE(t,new o0))),t._onlineComponents}function a9(t){return II(t).then(e=>e.syncEngine)}async function OI(t){const e=await II(t),r=e.eventManager;return r.onListen=WU.bind(null,e.syncEngine),r.onUnlisten=GU.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=HU.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=KU.bind(null,e.syncEngine),r}function o9(t,e,r={}){const n=new li;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const d=new NI({next:p=>{d.Za(),o.enqueueAndForget(()=>wI(a,f));const m=p.docs.has(s);!m&&p.fromCache?c.reject(new oe(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new oe(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new _I(Yb(s.path),d,{includeMetadataChanges:!0,_a:!0});return bI(a,f)}(await OI(t),t.asyncQueue,e,r,n)),n.promise}function s9(t,e,r={}){const n=new li;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const d=new NI({next:p=>{d.Za(),o.enqueueAndForget(()=>wI(a,f)),p.fromCache&&l.source==="server"?c.reject(new oe(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new _I(s,d,{includeMetadataChanges:!0,_a:!0});return bI(a,f)}(await OI(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t,e,r){if(!r)throw new oe(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function l9(t,e,r,n){if(e===!0&&n===!0)throw new oe(Y.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function rE(t){if(!he.isDocumentKey(t))throw new oe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nE(t){if(he.isDocumentKey(t))throw new oe(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vm(t);throw new oe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RI((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new oe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new oe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new oe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new T6;switch(n.type){case"firstParty":return new j6(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new oe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=tE.get(r);n&&(ue("ComponentProvider","Removing Datastore"),tE.delete(r),n.terminate())}(this),Promise.resolve()}}function c9(t,e,r,n={}){var i;const a=(t=Un(t,xm))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let s,l;if(typeof n.mockUserToken=="string")s=n.mockUserToken,l=ir.MOCK_USER;else{s=L3(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new oe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ir(c)}t._authCredentials=new A6(new jN(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class gr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class ca extends Ao{constructor(e,r,n){super(e,r,Yb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new he(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function ua(t,e,...r){if(t=Pt(t),DI("collection","path",e),t instanceof xm){const n=ot.fromString(e,...r);return nE(n),new ca(t,null,n)}{if(!(t instanceof gr||t instanceof ca))throw new oe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ot.fromString(e,...r));return nE(n),new ca(t.firestore,null,n)}}function yr(t,e,...r){if(t=Pt(t),arguments.length===1&&(e=NN.newId()),DI("doc","path",e),t instanceof xm){const n=ot.fromString(e,...r);return rE(n),new gr(t,null,new he(n))}{if(!(t instanceof gr||t instanceof ca))throw new oe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ot.fromString(e,...r));return rE(n),new gr(t.firestore,t instanceof ca?t.converter:null,new he(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fI(this,"async_queue_retry"),this.Vu=()=>{const n=fy();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=fy();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=fy();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new li;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!md(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(n);throw xi("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=lw.createAndSchedule(this,e,r,n,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class wl extends xm{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new aE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aE(e),this._firestoreClient=void 0,await e}}}function u9(t,e){const r=typeof t=="object"?t:Lj(),n=typeof t=="string"?t:"(default)",i=Ib(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=M3("firestore");a&&c9(i,...a)}return i}function fw(t){if(t._terminated)throw new oe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||d9(t),t._firestoreClient}function d9(t){var e,r,n;const i=t._freezeSettings(),a=function(s,l,c,d){return new z6(s,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,RI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new n9(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Us(Xt.fromBase64String(e))}catch(r){throw new oe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Us(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new oe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new oe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new oe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=/^__.*__$/;class h9{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,r,this.fieldTransforms):new gd(e,this.data,r,this.fieldTransforms)}}class MI{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ka(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function $I(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class gw{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($I(this.Cu)&&f9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class p9{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||mm(e)}Qu(e,r,n,i=!1){return new gw({Cu:e,methodName:r,qu:n,path:qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yw(t){const e=t._freezeSettings(),r=mm(t._databaseId);return new p9(t._databaseId,!!e.ignoreUndefinedProperties,r)}function m9(t,e,r,n,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);vw("Data must be an object, but it was:",o,n);const s=LI(n,o);let l,c;if(a.merge)l=new Lr(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const f of a.mergeFields){const p=s0(e,f,r);if(!o.contains(p))throw new oe(Y.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FI(d,p)||d.push(p)}l=new Lr(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new h9(new _r(s),l,c)}class wm extends hw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wm}}function g9(t,e,r,n){const i=t.Qu(1,e,r);vw("Data must be an object, but it was:",i,n);const a=[],o=_r.empty();Eo(n,(l,c)=>{const d=xw(e,l,r);c=Pt(c);const f=i.Nu(d);if(c instanceof wm)a.push(d);else{const p=bd(c,f);p!=null&&(a.push(d),o.set(d,p))}});const s=new Lr(a);return new MI(o,s,i.fieldTransforms)}function y9(t,e,r,n,i,a){const o=t.Qu(1,e,r),s=[s0(e,n,r)],l=[i];if(a.length%2!=0)throw new oe(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)s.push(s0(e,a[p])),l.push(a[p+1]);const c=[],d=_r.empty();for(let p=s.length-1;p>=0;--p)if(!FI(c,s[p])){const m=s[p];let g=l[p];g=Pt(g);const v=o.Nu(m);if(g instanceof wm)c.push(m);else{const y=bd(g,v);y!=null&&(c.push(m),d.set(m,y))}}const f=new Lr(c);return new MI(d,f,o.fieldTransforms)}function v9(t,e,r,n=!1){return bd(r,t.Qu(n?4:3,e))}function bd(t,e){if(VI(t=Pt(t)))return vw("Unsupported field value:",e,t),LI(t,e);if(t instanceof hw)return function(n,i){if(!$I(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const s of n){let l=bd(s,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=Pt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dB(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Dt.fromDate(n);return{timestampValue:Mh(i.serializer,a)}}if(n instanceof Dt){const a=new Dt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Mh(i.serializer,a)}}if(n instanceof pw)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Us)return{bytesValue:nI(i.serializer,n._byteString)};if(n instanceof gr){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ew(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof mw)return function(o,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw s.Bu("VectorValues must only contain numeric values.");return Qb(s.serializer,l)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${vm(n)}`)}(t,e)}function LI(t,e){const r={};return IN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(n,i)=>{const a=bd(i,e.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function VI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof pw||t instanceof Us||t instanceof gr||t instanceof hw||t instanceof mw)}function vw(t,e,r){if(!VI(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=vm(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function s0(t,e,r){if((e=Pt(e))instanceof bm)return e._internalPath;if(typeof e=="string")return xw(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,r)}const x9=new RegExp("[~\\*/\\[\\]]");function xw(t,e,r){if(e.search(x9)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new bm(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Vh(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new oe(Y.INVALID_ARGUMENT,s+t+l)}function FI(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(_m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class b9 extends BI{data(){return super.data()}}function _m(t,e){return typeof e=="string"?xw(t,e):e instanceof bm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bw{}class UI extends bw{}function ww(t,e,...r){let n=[];e instanceof bw&&n.push(e),n=n.concat(r),function(a){const o=a.filter(l=>l instanceof _w).length,s=a.filter(l=>l instanceof km).length;if(o>1||o>0&&s>0)throw new oe(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class km extends UI{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new km(e,r,n)}_apply(e){const r=this._parse(e);return zI(e._query,r),new Ao(e.firestore,e.converter,Xv(e._query,r))}_parse(e){const r=yw(e.firestore);return function(a,o,s,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lE(f,d);const m=[];for(const g of f)m.push(sE(l,a,g));p={arrayValue:{values:m}}}else p=sE(l,a,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lE(f,d),p=v9(s,o,f,d==="in"||d==="not-in");return Et.create(c,d,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function oE(t,e,r){const n=e,i=_m("where",t);return km._create(i,n,r)}class _w extends bw{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new _w(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Sn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const l of s)zI(o,l),o=Xv(o,l)}(e._query,r),new Ao(e.firestore,e.converter,Xv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kw extends UI{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new kw(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new oe(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new oe(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(a,o)}(e._query,this._field,this._direction);return new Ao(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new vl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function Sw(t,e="asc"){const r=e,n=_m("orderBy",t);return kw._create(n,r)}function sE(t,e,r){if(typeof(r=Pt(r))=="string"){if(r==="")throw new oe(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BN(e)&&r.indexOf("/")!==-1)throw new oe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ot.fromString(r));if(!he.isDocumentKey(n))throw new oe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return PS(t,new he(n))}if(r instanceof gr)return PS(t,r._key);throw new oe(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(r)}.`)}function lE(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zI(t,e){const r=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new oe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class _9{convertValue(e,r="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Eo(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>xt(o.doubleValue));return new mw(a)}convertGeoPoint(e){return new pw(xt(e.latitude),xt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Hb(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const r=ya(e);return new Dt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ot.fromString(e);We(cI(n));const i=new mu(n.get(1),n.get(3)),a=new he(n.popFirst(5));return i.isEqual(r)||xi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WI extends BI{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(_m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Yf extends WI{data(e={}){return super.data(e)}}class S9{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new _c(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Yf(this._firestore,this._userDataWriter,n.key,n,new _c(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new oe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const l=new Yf(i._firestore,i._userDataWriter,s.doc.key,s.doc,new _c(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const l=new Yf(i._firestore,i._userDataWriter,s.doc.key,s.doc,new _c(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return s.type!==0&&(c=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),d=o.indexOf(s.doc.key)),{type:E9(s.type),doc:l,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function E9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){t=Un(t,gr);const e=Un(t.firestore,wl);return o9(fw(e),t._key).then(r=>A9(e,t,r))}class HI extends _9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Us(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,r)}}function ci(t){t=Un(t,Ao);const e=Un(t.firestore,wl),r=fw(e),n=new HI(e);return w9(t._query),s9(r,t._query).then(i=>new S9(e,n,t,i))}function Po(t,e,r){t=Un(t,gr);const n=Un(t.firestore,wl),i=k9(t.converter,e,r);return Tw(n,[m9(yw(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,wn.none())])}function T9(t,e,r,...n){t=Un(t,gr);const i=Un(t.firestore,wl),a=yw(i);let o;return o=typeof(e=Pt(e))=="string"||e instanceof bm?y9(a,"updateDoc",t._key,e,r,n):g9(a,"updateDoc",t._key,e),Tw(i,[o.toMutation(t._key,wn.exists(!0))])}function Ha(t){return Tw(Un(t.firestore,wl),[new Xb(t._key,wn.none())])}function Tw(t,e){return function(n,i){const a=new li;return n.asyncQueue.enqueueAndForget(async()=>YU(await a9(n),i,a)),a.promise}(fw(t),e)}function A9(t,e,r){const n=r.docs.get(e._key),i=new HI(t);return new WI(t,i,e._key,n,new _c(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){yl=i})(ml),Ds(new lo("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),s=new wl(new P6(n.getProvider("auth-internal")),new I6(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(c.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:r},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),la(kS,"4.7.3",e),la(kS,"4.7.3","esm2017")})();const P9={apiKey:"AIzaSyBpNAS-1SX5twhOrRsEIiMOJ8IHCbHb1To",authDomain:"habit-tracker-38191.firebaseapp.com",projectId:"habit-tracker-38191",storageBucket:"habit-tracker-38191.firebasestorage.app",messagingSenderId:"1063271198740",appId:"1:1063271198740:web:b7b4aa4085ee57974bb701"},qI=$j(P9),Sr=_6(qI),ft=u9(qI),C9="modulepreload",j9=function(t){return"/"+t},cE={},N9=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=j9(l),l in cE)return;cE[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":C9,c||(f.as="script"),f.crossOrigin="",f.href=l,s&&f.setAttribute("nonce",s),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})},I9=async(t,e,r)=>{try{const i=(await aF(Sr,t,e)).user;return await hN(i),await Po(yr(ft,"users",i.uid),{name:r,email:t,emailVerified:!1,createdAt:new Date().toISOString()}),i}catch(n){throw n}},O9=async()=>{try{const t=Sr.currentUser;if(!t)throw new Error("No user logged in");if(t.emailVerified)throw new Error("Email is already verified");return await hN(t),!0}catch(t){throw t}},uE=async()=>{try{const t=Sr.currentUser;return t?(await Kj(t),Sr.currentUser):null}catch(t){throw t}},R9=async(t,e)=>{try{return(await oF(Sr,t,e)).user}catch(r){throw r}},dE=async()=>{try{const t=Sr.currentUser;if(t)try{const e=new Date().toISOString(),r=yr(ft,"users",t.uid);await Po(r,{lastLogin:e},{merge:!0})}catch{}await uF(Sr)}catch(t){throw t}},D9=async t=>{try{await iF(Sr,t)}catch(e){throw e}},M9=async t=>{try{const e=Sr.currentUser;if(!e)throw new Error("No user logged in");const{deleteAllUserData:r}=await N9(async()=>{const{deleteAllUserData:n}=await Promise.resolve().then(()=>F9);return{deleteAllUserData:n}},void 0);await r(t),await dF(e)}catch(e){throw e}},GI=R.createContext(null),$9=({children:t})=>{const[e,r]=R.useState(null),[n,i]=R.useState(!0),[a,o]=R.useState(null);R.useEffect(()=>cF(Sr,async c=>{if(c)try{await uE(),r(Sr.currentUser)}catch{r(c)}else r(null);i(!1)},c=>{o(c),i(!1)}),[]);const s=async()=>{try{i(!0),await uE();const l=Sr.currentUser;r(l||null)}catch{const c=Sr.currentUser;r(c)}finally{setTimeout(()=>{i(!1)},100)}};return u.jsx(GI.Provider,{value:{user:e,loading:n,error:a,refreshUser:s},children:t})},br=()=>{const t=R.useContext(GI);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},KI=R.createContext(),L9=({children:t})=>{const[e,r]=R.useState(()=>{if(typeof window>"u")return!1;const a=localStorage.getItem("theme");return a!==null?a==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});R.useEffect(()=>{const a=e?"dark":"light";localStorage.setItem("theme",a),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const n=R.useCallback(()=>{r(a=>!a)},[]),i={isDark:e,toggleTheme:n};return u.jsx(KI.Provider,{value:i,children:t})},Cr=()=>{const t=R.useContext(KI);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},kc=async(t,e,r)=>{try{const n=yr(ft,`habits/${t}/items`,e);await Po(n,r,{merge:!0})}catch(n){throw n}},YI=async t=>{try{const e=ua(ft,`habits/${t}/items`);let r;try{const i=ww(e,Sw("order","asc"));r=await ci(i)}catch(i){console.warn("Could not order habits by order field, fetching all habits:",i),r=await ci(e)}const n=r.docs.map(i=>({id:i.id,...i.data()}));return n.forEach((i,a)=>{i.order===void 0&&(i.order=a)}),n.sort((i,a)=>(i.order||0)-(a.order||0)),n}catch(e){throw e}},QI=async(t,e)=>{try{await Ha(yr(ft,`habits/${t}/items`,e))}catch(r){throw r}},mo=async(t,e,r)=>{try{const n=yr(ft,`dailyLogs/${t}/logs`,e),i={...r,date:e};await Po(n,i,{merge:!0})}catch(n){throw n}},XI=async(t,e)=>{try{const r=yr(ft,`dailyLogs/${t}/logs`,e),n=await Ew(r);return n.exists()?n.data():null}catch(r){throw r}},go=async(t,e,r)=>{try{const n=ua(ft,`dailyLogs/${t}/logs`),i=ww(n,oE("date",">=",e),oE("date","<=",r),Sw("date","asc"));return(await ci(i)).docs.map(s=>({...s.data()}))}catch(n){throw n}},Sm=async t=>{try{const e=yr(ft,"users",t),r=await Ew(e);return r.exists()?r.data():null}catch(e){throw e}},Fh=async(t,e)=>{try{const r=yr(ft,"users",t);await T9(r,e)}catch(r){throw r}},Qf=async(t,e,r)=>{try{if(!t||!e)throw new Error("User ID and Todo ID are required");const n=yr(ft,`todos/${t}/items`,e);await Po(n,r,{merge:!0})}catch(n){throw n}},JI=async t=>{try{const e=ua(ft,`todos/${t}/items`),r=ww(e,Sw("createdAt","desc"));return(await ci(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){try{const r=ua(ft,`todos/${t}/items`);return(await ci(r)).docs.map(a=>({id:a.id,...a.data()})).sort((a,o)=>{const s=a.createdAt?new Date(a.createdAt).getTime():0;return(o.createdAt?new Date(o.createdAt).getTime():0)-s})}catch{throw e}}},ZI=async(t,e)=>{try{await Ha(yr(ft,`todos/${t}/items`,e))}catch(r){throw r}},eO=async(t,e,r)=>{try{const n=yr(ft,`customCategories/${t}/categories`,e);await Po(n,r,{merge:!0})}catch(n){throw n}},tO=async t=>{try{const e=ua(ft,`customCategories/${t}/categories`);return(await ci(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw e}},rO=async(t,e)=>{try{await Ha(yr(ft,`customCategories/${t}/categories`,e))}catch(r){throw r}},V9=async t=>{try{try{const e=ua(ft,`habits/${t}/items`),r=await ci(e);if(!r.empty){const n=r.docs.map(i=>Ha(i.ref));await Promise.all(n)}}catch(e){console.error("Error deleting habits:",e)}try{const e=ua(ft,`dailyLogs/${t}/logs`),r=await ci(e);if(!r.empty){const n=r.docs.map(i=>Ha(i.ref));await Promise.all(n)}}catch(e){console.error("Error deleting daily logs:",e)}try{const e=ua(ft,`customCategories/${t}/categories`),r=await ci(e);if(!r.empty){const n=r.docs.map(i=>Ha(i.ref));await Promise.all(n)}}catch(e){console.error("Error deleting categories:",e)}try{await Ha(yr(ft,"users",t))}catch(e){console.error("Error deleting user document:",e)}}catch(e){throw e}},F9=Object.freeze(Object.defineProperty({__proto__:null,deleteAllUserData:V9,deleteCustomCategory:rO,deleteHabit:QI,deleteTodo:ZI,getCustomCategories:tO,getDailyLog:XI,getDailyLogsByDateRange:go,getUserData:Sm,getUserHabits:YI,getUserTodos:JI,saveCustomCategory:eO,saveDailyLog:mo,saveHabit:kc,saveTodo:Qf,updateUserData:Fh},Symbol.toStringTag,{value:"Module"})),B9=t=>{const e=t.replace("#",""),r=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,i=parseInt(e.substring(4,6),16)/255,[a,o,s]=[r,n,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*a+.7152*o+.0722*s},nO=(t,e=null)=>{e===null&&typeof window<"u"&&(e=document.documentElement.classList.contains("dark"));const r=B9(t),n=e?.1:.9,i=.15,a=r*i+n*(1-i);return a>.6?e?"#E5E7EB":"#1F2937":a<.4?e?"#F3F4F6":"#FFFFFF":e?"#D1D5DB":"#374151"},U9=(t,e=.15)=>{const r=t.replace("#","");parseInt(r.substring(0,2),16),parseInt(r.substring(2,4),16),parseInt(r.substring(4,6),16);const n=Math.round(e*255).toString(16).padStart(2,"0");return`#${r}${n}`},z9=(t,e=.2)=>{const r=t.replace("#",""),n=Math.max(0,parseInt(r.substring(0,2),16)*(1-e)),i=Math.max(0,parseInt(r.substring(2,4),16)*(1-e)),a=Math.max(0,parseInt(r.substring(4,6),16)*(1-e));return`#${Math.round(n).toString(16).padStart(2,"0")}${Math.round(i).toString(16).padStart(2,"0")}${Math.round(a).toString(16).padStart(2,"0")}`},l0={health:{id:"health",label:"Health",bgColor:"#FEE2E2",textColor:"#DC2626",borderColor:"#EF4444"},productivity:{id:"productivity",label:"Productivity",bgColor:"#DBEAFE",textColor:"#1D4ED8",borderColor:"#3B82F6"},learning:{id:"learning",label:"Learning",bgColor:"#FCD34D",textColor:"#B45309",borderColor:"#FBBF24"},fitness:{id:"fitness",label:"Fitness",bgColor:"#BBFBEE",textColor:"#0D9488",borderColor:"#14B8A6"},mindfulness:{id:"mindfulness",label:"Mindfulness",bgColor:"#F3E8FF",textColor:"#6B21A8",borderColor:"#A855F7"},social:{id:"social",label:"Social",bgColor:"#FCE7F3",textColor:"#BE185D",borderColor:"#EC4899"},other:{id:"other",label:"Other",bgColor:"#E5E7EB",textColor:"#4B5563",borderColor:"#9CA3AF"}},Aw=Object.values(l0),Pw=(t,e=null)=>{if(e){const r=e.find(n=>n.id===t);if(r)return r}return l0[t]||l0.other},Vc=(t,e=null,r=null)=>{const n=Pw(t,e);r===null&&typeof window<"u"&&(r=document.documentElement.classList.contains("dark"));let i=n.textColor;if(n.isCustom){let a=n.bgColor;a.length===9&&(a=a.substring(0,7)),i=nO(a,r)}return{bg:n.bgColor,text:i,border:n.borderColor}},W9=()=>{const{user:t}=br(),[e,r]=R.useState([]),[n,i]=R.useState([]),[a,o]=R.useState(!0),[s,l]=R.useState(null);R.useEffect(()=>{if(!t){r([]),i([]),o(!1);return}(async()=>{try{o(!0);const[g,v]=await Promise.all([tO(t.uid),Sm(t.uid)]);r(g||[]),i((v==null?void 0:v.hiddenCategories)||[])}catch(g){l(g.message),console.error("Error fetching categories:",g)}finally{o(!1)}})()},[t]);const c=R.useCallback(async m=>{if(t)try{const g=`custom_${Date.now()}`,v={...m,id:g,isCustom:!0};return await eO(t.uid,g,v),r([...e,v]),v}catch(g){throw l(g.message),g}},[t,e]),d=R.useCallback(async m=>{if(t)try{if(e.some(v=>v.id===m))await rO(t.uid,m),r(e.filter(v=>v.id!==m));else{const v=[...n,m];await Fh(t.uid,{hiddenCategories:v}),i(v)}}catch(g){throw l(g.message),g}},[t,e,n]),f=R.useCallback(async m=>{if(t)try{const g=n.filter(v=>v!==m);await Fh(t.uid,{hiddenCategories:g}),i(g)}catch(g){throw l(g.message),g}},[t,n]);return{categories:R.useMemo(()=>{const m=Aw.filter(v=>!n.includes(v.id)),g=new Map;return m.forEach(v=>{g.set(v.id,v)}),e.forEach(v=>{g.has(v.id)||g.set(v.id,v)}),Array.from(g.values())},[e,n]),customCategories:e,hiddenPredefinedCategories:n,loading:a,error:s,createCategory:c,removeCategory:d,restoreCategory:f}},iO=R.createContext(null),H9=({children:t})=>{const e=W9();return u.jsx(iO.Provider,{value:e,children:t})},Cw=()=>{const t=R.useContext(iO);if(!t)throw new Error("useCategories must be used within a CategoriesProvider");return t},q9=()=>{const t=Sj(),[e,r]=R.useState(""),[n,i]=R.useState(""),[a,o]=R.useState(""),[s,l]=R.useState(!1),[c,d]=R.useState(""),[f,p]=R.useState(!1),[m,g]=R.useState({}),v=w=>w.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)?"":"Please enter a valid email address":"Email is required",y=(w,T=!1)=>{if(!w)return"Password is required";if(T){if(w.length<6)return"Password must be at least 6 characters";if(w.length>128)return"Password must be less than 128 characters"}return""},x=w=>w.trim()?w.trim().length<2?"Name must be at least 2 characters":w.trim().length>50?"Name must be less than 50 characters":/^[a-zA-Z\s'-]+$/.test(w.trim())?"":"Name can only contain letters, spaces, hyphens, and apostrophes":"Name is required",b=()=>{const w={};if(s){const E=x(a);E&&(w.name=E)}const T=v(e);T&&(w.email=T);const S=y(n,s);return S&&(w.password=S),g(w),Object.keys(w).length===0},k=async w=>{if(w.preventDefault(),d(""),g({}),!!b()){p(!0);try{if(s)await I9(e,n,a.trim()),t("/dashboard");else{const T=await R9(e,n);T&&T.emailVerified,t("/dashboard")}}catch(T){let S="Authentication failed. Please try again.",E={};if(T.code)switch(T.code){case"auth/invalid-email":S="Please enter a valid email address",E={email:"Please enter a valid email address"};break;case"auth/invalid-credential":case"auth/user-not-found":S="User not found. Please check your email address or create a new account.",E={email:"User not found"};break;case"auth/wrong-password":S="Incorrect password. Please try again.",E={password:"Incorrect password"};break;case"auth/user-disabled":S="This account has been disabled. Please contact support.";break;case"auth/email-already-in-use":S="An account with this email already exists. Please sign in instead.",E={email:"This email is already registered"};break;case"auth/weak-password":S="Password is too weak. Please use a stronger password with at least 6 characters.",E={password:"Password is too weak"};break;case"auth/operation-not-allowed":S="This sign-in method is not enabled. Please contact support.";break;case"auth/network-request-failed":S="Network error. Please check your internet connection and try again.";break;case"auth/too-many-requests":S="Too many failed attempts. Please try again later or reset your password.";break;case"auth/quota-exceeded":S="Service temporarily unavailable. Please try again later.";break;case"auth/requires-recent-login":S="For security, please sign out and sign in again before making this change.";break;case"auth/invalid-argument":S="Invalid information provided. Please check your input and try again.";break;case"auth/invalid-user-token":case"auth/user-token-expired":S="Your session has expired. Please sign in again.";break;case"auth/account-exists-with-different-credential":S="An account already exists with a different sign-in method.";break;case"auth/credential-already-in-use":S="This credential is already associated with a different account.";break;default:const P=T.message||"";P.toLowerCase().includes("password")?(S="Invalid password. Please check your password and try again.",E={password:"Invalid password"}):P.toLowerCase().includes("email")?(S="Invalid email address. Please check your email and try again.",E={email:"Invalid email"}):P.toLowerCase().includes("network")||P.toLowerCase().includes("connection")?S="Connection error. Please check your internet and try again.":S="Authentication failed. Please check your credentials and try again."}else{const P=T.message||"";P.toLowerCase().includes("network")||P.toLowerCase().includes("fetch")?S="Network error. Please check your internet connection.":P.toLowerCase().includes("timeout")?S="Request timed out. Please try again.":S="An unexpected error occurred. Please try again."}d(S),Object.keys(E).length>0&&g(E)}finally{p(!1)}}},j=(w,T)=>{switch(m[w]&&g({...m,[w]:""}),d(""),w){case"name":o(T);break;case"email":r(T);break;case"password":i(T);break}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-bg-light to-white dark:from-dark-bg dark:to-dark-surface flex",children:[u.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary via-primary to-primary/90 flex-col items-center justify-center p-12 text-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-10 right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-20 left-10 w-32 h-32 bg-white/10 rounded-full blur-3xl"}),u.jsxs("div",{className:"relative z-10 text-center space-y-6",children:[u.jsx("div",{className:"text-6xl font-bold",children:""}),u.jsx("h2",{className:"text-4xl font-bold",children:"Build Better Habits"}),u.jsx("p",{className:"text-lg opacity-90 leading-relaxed max-w-sm",children:"Track your daily progress, visualize your achievements, and transform your life one day at a time."}),u.jsxs("div",{className:"pt-8 space-y-4",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"text-2xl",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"font-semibold",children:"Smart Analytics"}),u.jsx("p",{className:"text-sm opacity-80",children:"Track daily, weekly, and yearly progress"})]})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"text-2xl",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"font-semibold",children:"Mood Tracking"}),u.jsx("p",{className:"text-sm opacity-80",children:"Monitor your mood, energy, and focus daily"})]})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"text-2xl",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"font-semibold",children:"Goal Tracking"}),u.jsx("p",{className:"text-sm opacity-80",children:"Create and manage unlimited habits"})]})]})]})]})]}),u.jsx("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6 lg:p-12 dark:bg-dark-bg",children:u.jsxs("div",{className:"w-full max-w-sm",children:[u.jsxs("div",{className:"mb-10 lg:hidden text-center",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-2xl mb-4",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"Habit"}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray text-sm",children:"Build better habits, transform your life"})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-xl p-8 sm:p-10",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-text-dark dark:text-dark-text",children:s?"Create your account":"Welcome back"}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray text-sm mt-2",children:s?"Start building better habits today":"Sign in to continue your journey"})]}),c&&u.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 rounded-lg",children:u.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:c})}),u.jsxs("form",{onSubmit:k,className:"space-y-5",children:[s&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Full Name"}),u.jsx("input",{type:"text",value:a,onChange:w=>j("name",w.target.value),onBlur:()=>{const w=x(a);w&&g({...m,name:w})},placeholder:"John Doe",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition ${m.name?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-primary/20"} dark:bg-gray-800 dark:text-dark-text`}),m.name&&u.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Email Address"}),u.jsx("input",{type:"email",value:e,onChange:w=>j("email",w.target.value),onBlur:()=>{const w=v(e);w&&g({...m,email:w})},placeholder:"you@example.com",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition ${m.email?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-primary/20"} dark:bg-gray-800 dark:text-dark-text`}),m.email&&u.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.email})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:["Password",s&&u.jsx("span",{className:"text-xs font-normal text-text-gray dark:text-dark-gray ml-2",children:"(min. 6 characters)"})]}),u.jsx("input",{type:"password",value:n,onChange:w=>j("password",w.target.value),onBlur:()=>{const w=y(n,s);w&&g({...m,password:w})},placeholder:"",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition ${m.password?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-600 focus:border-primary focus:ring-primary/20"} dark:bg-gray-800 dark:text-dark-text`}),m.password&&u.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:m.password})]}),u.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary hover:bg-primary/90 text-white font-semibold py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed mt-8 shadow-md hover:shadow-lg",children:f?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"Creating account...":"Signing in..."]}):s?"Create Account":"Sign In"})]}),u.jsxs("div",{className:"my-6 flex items-center gap-3",children:[u.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),u.jsx("span",{className:"text-text-gray dark:text-dark-gray text-xs font-medium",children:"OR"}),u.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("p",{className:"text-text-gray dark:text-dark-gray text-sm",children:s?"Already have an account?":"Don't have an account?"}),u.jsx("button",{type:"button",onClick:()=>{l(!s),d(""),g({}),r(""),i(""),o("")},className:"text-primary hover:text-primary/80 font-semibold transition text-sm",children:s?"Sign in instead":"Create an account"})]})]}),u.jsx("p",{className:"text-center text-xs text-text-gray dark:text-dark-gray mt-8",children:"By signing up, you agree to our Terms of Service"})]})})]})},G9=(t,e)=>{if(!e||Object.keys(e).length===0)return{currentStreak:0,bestStreak:0,streakDates:[]};const r=Object.entries(e).filter(([d,f])=>f.habits&&f.habits[t]===!0).map(([d,f])=>d).sort();if(r.length===0)return{currentStreak:0,bestStreak:0,streakDates:[]};let n=0,i=0,a=1;r[0];for(let d=0;d<r.length;d++){if(d===0)continue;const f=new Date(r[d-1]),m=new Date(r[d])-f;Math.floor(m/(1e3*60*60*24))===1?a++:(a>i&&(i=a),a=1,r[d])}a>i&&(i=a);const o=new Date;o.setHours(0,0,0,0);const s=new Date(r[r.length-1]);s.setHours(0,0,0,0);const l=o-s;if(Math.floor(l/(1e3*60*60*24))<=1){n=1;for(let d=r.length-2;d>=0;d--){const f=new Date(r[d]),p=new Date(r[d+1]);if(f.setHours(0,0,0,0),p.setHours(0,0,0,0),Math.floor((p-f)/(1e3*60*60*24))===1)n++;else break}}else n=0;return{currentStreak:n,bestStreak:Math.max(i,n),streakDates:r.slice(-n)}},Em=t=>{const{user:e}=br(),[r,n]=R.useState([]),[i,a]=R.useState(null),[o,s]=R.useState(!0),[l,c]=R.useState(null);R.useEffect(()=>{if(!e){s(!1);return}(async()=>{try{s(!0);const b=await YI(e.uid),k=new Date;k.setFullYear(k.getFullYear()-1);const j=k.toISOString().split("T")[0],T=new Date().toISOString().split("T")[0],S=await go(e.uid,j,T),E={};(S||[]).forEach(N=>{N&&N.date&&(E[N.date]=N)});const P=b.map(N=>{const I=G9(N.id,E);return{...N,currentStreak:I.currentStreak,bestStreak:I.bestStreak}});n(P)}catch(b){c(b.message)}finally{s(!1)}})()},[e]),R.useEffect(()=>{if(!e||!t)return;(async()=>{try{const b=await XI(e.uid,t);a(b||{date:t,habits:{},mood:3,energy:3,focus:3})}catch(b){c(b.message)}})()},[e,t]);const d=R.useCallback(async(x,b=null)=>{if(!(!e||!i))try{const k=i.habits[x],j=k===!0||typeof k=="object"&&(k==null?void 0:k.completed)===!0;let w;j?w=!1:b?w=b:w=!0;const T={...i,habits:{...i.habits,[x]:w}};await mo(e.uid,t,T),a(T)}catch(k){c(k.message)}},[e,i,t]),f=R.useCallback(async(x,b)=>{if(!(!e||!i))try{const k={...i,[x]:b};await mo(e.uid,t,k),a(k)}catch(k){c(k.message)}},[e,i,t]),p=R.useCallback(async(x,b="other",k="",j="",w={})=>{if(e)try{const T=Date.now().toString(),S={name:x,category:b,emoji:k||"",notes:j||"",active:!0,archived:!1,createdAt:new Date().toISOString(),frequency:w.frequency||"daily",schedule:w.schedule||{daysOfWeek:[0,1,2,3,4,5,6]},reminderEnabled:w.reminderEnabled||!1,reminderTime:w.reminderTime||null,quantityTracking:w.quantityTracking||null,timeTracking:w.timeTracking||null,difficulty:w.difficulty||"medium",goal:w.goal||null};return n(E=>{const P=E.length,N={id:T,...S,order:P};return kc(e.uid,T,{...S,order:P}).catch(I=>{console.error("Error saving habit:",I)}),[...E,N]}),T}catch(T){c(T.message)}},[e]),m=R.useCallback(async(x,b)=>{if(e)try{await kc(e.uid,x,b),n(r.map(k=>k.id===x?{...k,...b}:k))}catch(k){c(k.message)}},[e,r]),g=R.useCallback(async x=>{if(e)try{await kc(e.uid,x,{archived:!0,active:!1}),n(r.map(b=>b.id===x?{...b,archived:!0,active:!1}:b))}catch(b){c(b.message)}},[e,r]),v=R.useCallback(async x=>{if(e)try{await kc(e.uid,x,{archived:!1,active:!0}),n(r.map(b=>b.id===x?{...b,archived:!1,active:!0}:b))}catch(b){c(b.message)}},[e,r]),y=R.useCallback(async x=>{if(e)try{await QI(e.uid,x),n(r.filter(b=>b.id!==x))}catch(b){c(b.message)}},[e,r]);return{habits:r,dailyLog:i,loading:o,error:l,toggleHabit:d,updateDailyMetric:f,createHabit:p,removeHabit:y,updateHabit:m,archiveHabit:g,unarchiveHabit:v}},Tm=()=>{const{user:t}=br(),[e,r]=R.useState("default"),[n,i]=R.useState({browserEnabled:!1,emailEnabled:!1,reminderTime:"09:00",weeklySummary:!1,streakWarnings:!0});R.useEffect(()=>{"Notification"in window&&r(Notification.permission)},[]),R.useEffect(()=>{(async()=>{if(t)try{const d=await Sm(t.uid);d!=null&&d.notificationSettings&&i(d.notificationSettings)}catch(d){console.error("Error loading notification settings:",d)}})()},[t]);const a=R.useCallback(async()=>{if(!("Notification"in window))return{success:!1,error:"Browser does not support notifications"};if(Notification.permission==="granted")return r("granted"),{success:!0};if(Notification.permission==="denied")return{success:!1,error:"Notifications are blocked. Please enable them in browser settings."};try{const c=await Notification.requestPermission();return r(c),c==="granted"?{success:!0}:{success:!1,error:"Notification permission denied"}}catch(c){return{success:!1,error:c.message}}},[]),o=R.useCallback((c,d={})=>{if(!("Notification"in window)||Notification.permission!=="granted"||!n.browserEnabled)return!1;try{const f=new Notification(c,{tag:"habit-reminder",requireInteraction:!1,...d});return setTimeout(()=>{f.close()},5e3),!0}catch(f){return console.error("Error sending notification:",f),!1}},[n.browserEnabled]),s=R.useCallback(async c=>{if(t)try{const d={...n,...c};return i(d),await Fh(t.uid,{notificationSettings:d}),{success:!0}}catch(d){return console.error("Error updating notification settings:",d),{success:!1,error:d.message}}},[t,n]),l=R.useCallback((c,d,f)=>{if(!n.browserEnabled)return null;let p,m;arguments.length===3?(p=d,m=f):(p=c,m=d);const[g,v]=m.split(":").map(Number),y=new Date,x=new Date;x.setHours(g,v,0,0),x<=y&&x.setDate(x.getDate()+1);const b=x.getTime()-y.getTime(),k=setTimeout(()=>{o(`Time for: ${p}`,{body:`Don't forget to complete "${p}" today!`,data:{habitId:typeof c=="string"&&arguments.length===3?c:null,habitName:p,type:"reminder"}}),l(c,p,m)},b);return{reminderDate:x,timeoutId:k}},[n.browserEnabled,o]);return{notificationPermission:e,notificationSettings:n,requestPermission:a,sendBrowserNotification:o,updateNotificationSettings:s,scheduleHabitReminder:l}};class K9{constructor(){this.scheduledReminders=new Map,this.checkInterval=null,this.sentRemindersToday=new Set}scheduleReminder(e,r,n,i){this.cancelReminder(e);const a=()=>{const[o,s]=n.split(":").map(Number),l=new Date,c=new Date;c.setHours(o,s,0,0),c.setSeconds(0),c.setMilliseconds(0),c<=l&&c.setDate(c.getDate()+1);const d=c.getTime()-l.getTime(),f=setTimeout(()=>{i&&i(e,r),a()},d);this.scheduledReminders.set(e,f)};a()}cancelReminder(e){const r=this.scheduledReminders.get(e);r&&(clearTimeout(r),this.scheduledReminders.delete(e))}cancelAll(){this.scheduledReminders.forEach(e=>{clearTimeout(e)}),this.scheduledReminders.clear()}startDailyCheck(e,r,n){if(this.checkInterval&&clearInterval(this.checkInterval),this.cancelAll(),!(r!=null&&r.browserEnabled)){console.log("[Reminder] Browser notifications are disabled");return}console.log(`[Reminder] Starting daily check for ${e.length} habits`),e.forEach(i=>{i.reminderEnabled&&i.reminderTime&&i.active&&!i.archived?(console.log(`[Reminder] Scheduling reminder for "${i.name}" at ${i.reminderTime}`),this.scheduleReminderForHabit(i,r,n)):console.log(`[Reminder] Skipping "${i.name}":`,{reminderEnabled:i.reminderEnabled,reminderTime:i.reminderTime,active:i.active,archived:i.archived})}),this.checkInterval=setInterval(()=>{if(!(r!=null&&r.browserEnabled))return;const i=new Date,a=i.getHours(),o=i.getMinutes(),s=i.getSeconds(),l=`${String(a).padStart(2,"0")}:${String(o).padStart(2,"0")}`;s===0&&console.log(`[Reminder]  Minute check at ${l}`),e.forEach(c=>{if(c.reminderEnabled&&c.reminderTime&&c.active&&!c.archived){const[d,f]=c.reminderTime.split(":").map(Number);if(`${String(d).padStart(2,"0")}${String(f).padStart(2,"0")}`,a===d&&o===f&&s===0){console.log(`[Reminder]  Time match found for "${c.name}" at ${l}`);const m=this.shouldRemindToday(c,i);if(console.log(`[Reminder] Should remind today: ${m} (frequency: ${c.frequency||"daily"})`),m){const g=`${c.id}-${i.toDateString()}`;!this.sentRemindersToday||!this.sentRemindersToday.has(g)?(console.log(`[Reminder]  Triggering reminder for "${c.name}" at ${l}`),n(`Time for: ${c.name}`,{body:`Don't forget to complete "${c.name}" today!`,data:{habitId:c.id,habitName:c.name,type:"reminder"}}),this.sentRemindersToday||(this.sentRemindersToday=new Set),this.sentRemindersToday.add(g),console.log(`[Reminder]  Reminder sent and tracked for "${c.name}"`)):console.log(`[Reminder]  Already sent reminder for "${c.name}" today`)}else console.log(`[Reminder]  "${c.name}" not scheduled for today (frequency: ${c.frequency||"daily"})`)}}})},6e4)}scheduleReminderForHabit(e,r,n){if(!e.reminderEnabled||!e.reminderTime||!(r!=null&&r.browserEnabled)){console.log(`[Reminder] Cannot schedule "${e.name}":`,{reminderEnabled:e.reminderEnabled,reminderTime:e.reminderTime,browserEnabled:r==null?void 0:r.browserEnabled});return}this.cancelReminder(e.id);const i=()=>{const[a,o]=e.reminderTime.split(":").map(Number),s=new Date,l=new Date;l.setHours(a,o,0,0),l.setSeconds(0),l.setMilliseconds(0);const c=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(`[Reminder] Current time: ${s.toLocaleString()} (${c})`),console.log(`[Reminder] Reminder time set for: ${a}:${String(o).padStart(2,"0")}`),l<=s&&(console.log(`[Reminder] Reminder time (${l.toLocaleString()}) has passed, scheduling for tomorrow`),l.setDate(l.getDate()+1));const d=this.shouldRemindOnDate(e,l);if(!d){let g=new Date(l),v=0;for(;!this.shouldRemindOnDate(e,g)&&v<7;)g.setDate(g.getDate()+1),v++;l.setTime(g.getTime()),console.log(`[Reminder] Habit not scheduled for that day, found next valid day: ${l.toLocaleString()}`)}const f=l.getTime()-s.getTime(),p=Math.round(f/1e3/60),m=Math.round(p/60);if(f>0&&f<7*24*60*60*1e3){console.log(`[Reminder]  Scheduled reminder for "${e.name}"`),console.log(`[Reminder]   - Scheduled time: ${l.toLocaleString()} (${c})`),console.log(`[Reminder]   - Time until reminder: ${m}h ${p%60}m (${p} minutes)`),console.log(`[Reminder]   - Frequency: ${e.frequency||"daily"}`),console.log(`[Reminder]   - Should remind on scheduled date: ${d}`);const g=setTimeout(()=>{const v=new Date;console.log(`[Reminder]  Timeout fired for "${e.name}" at ${v.toLocaleString()}`);const y=this.shouldRemindToday(e,v);console.log(`[Reminder] Should remind now: ${y}`),y?(console.log(`[Reminder]  Sending reminder for "${e.name}"`),n(`Time for: ${e.name}`,{body:`Don't forget to complete "${e.name}" today!`,data:{habitId:e.id,habitName:e.name,type:"reminder"}})):console.log(`[Reminder] Skipping reminder for "${e.name}" - not scheduled for today`),i()},f);this.scheduledReminders.set(e.id,g)}else console.warn(`[Reminder]  Could not schedule reminder for "${e.name}": invalid time`,{timeUntilReminder:f,reminderDate:l.toLocaleString(),minutesUntilReminder:p})};i()}shouldRemindOnDate(e,r=new Date){const n=r.getDay();return e.frequency==="daily"?!0:e.frequency==="weekly"||e.frequency==="custom"?((e.schedule||{}).daysOfWeek||[]).includes(n):!1}shouldRemindToday(e,r=new Date){const n=r.getDay();return e.frequency==="daily"?!0:e.frequency==="weekly"||e.frequency==="custom"?((e.schedule||{}).daysOfWeek||[]).includes(n):!1}stopDailyCheck(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.cancelAll();const e=new Date,r=new Date(e);r.setHours(24,0,0,0);const n=r.getTime()-e.getTime();setTimeout(()=>{this.sentRemindersToday=new Set},n)}getScheduledReminders(e=[]){const r=[];return this.scheduledReminders.forEach((n,i)=>{const a=e.find(o=>o.id===i);a&&r.push({habitId:i,habitName:a.name,reminderTime:a.reminderTime,frequency:a.frequency})}),r}logScheduledReminders(e=[]){console.log("[Reminder] ====== SCHEDULED REMINDERS ======");const r=this.getScheduledReminders(e);r.length===0?console.log("[Reminder] No reminders currently scheduled"):r.forEach(({habitName:n,reminderTime:i,frequency:a})=>{console.log(`[Reminder] - "${n}" at ${i} (${a||"daily"})`)}),console.log(`[Reminder] Total scheduled: ${r.length}`),console.log(`[Reminder] Minute check interval: ${this.checkInterval?"Active":"Inactive"}`),console.log("[Reminder] ====================================")}}const ks=new K9,aO=({percentage:t=0,radius:e=60,color:r="#6AA84F",strokeWidth:n=8})=>{const i=2*Math.PI*e,a=i-t/100*i,o=e*2+n*2;return u.jsxs("div",{className:"relative inline-block",style:{width:o,height:o},children:[u.jsxs("svg",{width:o,height:o,className:"transform -rotate-90",children:[u.jsx("circle",{cx:e+n,cy:e+n,r:e,fill:"none",stroke:"#EEF2E9",className:"dark:stroke-gray-700",strokeWidth:n,strokeLinecap:"round"}),u.jsx("circle",{cx:e+n,cy:e+n,r:e,fill:"none",stroke:r,strokeWidth:n,strokeDasharray:i,strokeDashoffset:a,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.5s ease, stroke 0.3s"}})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsxs("span",{className:"text-lg sm:text-2xl font-semibold text-text-dark dark:text-dark-text",children:[Math.round(t),"%"]})})]})},fE=({day:t,date:e,completedHabits:r,totalHabits:n,onClick:i,isToday:a=!1,isSelected:o=!1,currentStreak:s=0,bestStreak:l=0})=>{const c=n>0?Math.round(r/n*100):0,d=s>=100?"":s>=30?"":s>=7?"":null,f=o||a;return u.jsxs("div",{onClick:i,className:`rounded-lg overflow-hidden cursor-pointer transition-all duration-150 ${f?"shadow-lg ring-2 ring-primary":"shadow-sm hover:shadow-md"}`,children:[u.jsxs("div",{className:`${f?"bg-primary text-white":"bg-white dark:bg-dark-surface"} p-3 text-center relative border-b border-gray-200 dark:border-gray-700 rounded-t-lg`,children:[u.jsx("div",{className:`text-sm font-semibold ${!f&&"dark:text-dark-text"}`,children:t}),u.jsx("div",{className:`text-xs ${f?"opacity-90":"text-text-gray dark:text-dark-gray"}`,children:e})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-4 flex flex-col items-center gap-3 border border-t-0 border-gray-100 dark:border-gray-700",children:[u.jsx(aO,{percentage:c,radius:44,color:"#6AA84F",strokeWidth:8}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray text-center",children:[r," of ",n," habits"]}),u.jsx("div",{className:"w-full pt-2 border-t border-gray-100 dark:border-gray-700 flex flex-col items-center gap-2",children:s>0?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:d||""}),u.jsxs("span",{className:"text-sm font-semibold text-primary",children:[s," day",s>1?"s":""]})]}):u.jsx("div",{className:"text-xs text-text-gray dark:text-dark-gray",children:"No streak yet"})})]})]})};function oO(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=oO(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Re(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=oO(t))&&(n&&(n+=" "),n+=e);return n}var Y9=Array.isArray,jr=Y9,Q9=typeof Hd=="object"&&Hd&&Hd.Object===Object&&Hd,sO=Q9,X9=sO,J9=typeof self=="object"&&self&&self.Object===Object&&self,Z9=X9||J9||Function("return this")(),Wn=Z9,e8=Wn,t8=e8.Symbol,wd=t8,hE=wd,lO=Object.prototype,r8=lO.hasOwnProperty,n8=lO.toString,nc=hE?hE.toStringTag:void 0;function i8(t){var e=r8.call(t,nc),r=t[nc];try{t[nc]=void 0;var n=!0}catch{}var i=n8.call(t);return n&&(e?t[nc]=r:delete t[nc]),i}var a8=i8,o8=Object.prototype,s8=o8.toString;function l8(t){return s8.call(t)}var c8=l8,pE=wd,u8=a8,d8=c8,f8="[object Null]",h8="[object Undefined]",mE=pE?pE.toStringTag:void 0;function p8(t){return t==null?t===void 0?h8:f8:mE&&mE in Object(t)?u8(t):d8(t)}var Ci=p8;function m8(t){return t!=null&&typeof t=="object"}var ji=m8,g8=Ci,y8=ji,v8="[object Symbol]";function x8(t){return typeof t=="symbol"||y8(t)&&g8(t)==v8}var _l=x8,b8=jr,w8=_l,_8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k8=/^\w*$/;function S8(t,e){if(b8(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||w8(t)?!0:k8.test(t)||!_8.test(t)||e!=null&&t in Object(e)}var jw=S8;function E8(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Sa=E8;const kl=Qe(Sa);var T8=Ci,A8=Sa,P8="[object AsyncFunction]",C8="[object Function]",j8="[object GeneratorFunction]",N8="[object Proxy]";function I8(t){if(!A8(t))return!1;var e=T8(t);return e==C8||e==j8||e==P8||e==N8}var Nw=I8;const Se=Qe(Nw);var O8=Wn,R8=O8["__core-js_shared__"],D8=R8,py=D8,gE=function(){var t=/[^.]+$/.exec(py&&py.keys&&py.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function M8(t){return!!gE&&gE in t}var $8=M8,L8=Function.prototype,V8=L8.toString;function F8(t){if(t!=null){try{return V8.call(t)}catch{}try{return t+""}catch{}}return""}var cO=F8,B8=Nw,U8=$8,z8=Sa,W8=cO,H8=/[\\^$.*+?()[\]{}|]/g,q8=/^\[object .+?Constructor\]$/,G8=Function.prototype,K8=Object.prototype,Y8=G8.toString,Q8=K8.hasOwnProperty,X8=RegExp("^"+Y8.call(Q8).replace(H8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function J8(t){if(!z8(t)||U8(t))return!1;var e=B8(t)?X8:q8;return e.test(W8(t))}var Z8=J8;function e7(t,e){return t==null?void 0:t[e]}var t7=e7,r7=Z8,n7=t7;function i7(t,e){var r=n7(t,e);return r7(r)?r:void 0}var Co=i7,a7=Co,o7=a7(Object,"create"),Am=o7,yE=Am;function s7(){this.__data__=yE?yE(null):{},this.size=0}var l7=s7;function c7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var u7=c7,d7=Am,f7="__lodash_hash_undefined__",h7=Object.prototype,p7=h7.hasOwnProperty;function m7(t){var e=this.__data__;if(d7){var r=e[t];return r===f7?void 0:r}return p7.call(e,t)?e[t]:void 0}var g7=m7,y7=Am,v7=Object.prototype,x7=v7.hasOwnProperty;function b7(t){var e=this.__data__;return y7?e[t]!==void 0:x7.call(e,t)}var w7=b7,_7=Am,k7="__lodash_hash_undefined__";function S7(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_7&&e===void 0?k7:e,this}var E7=S7,T7=l7,A7=u7,P7=g7,C7=w7,j7=E7;function Sl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Sl.prototype.clear=T7;Sl.prototype.delete=A7;Sl.prototype.get=P7;Sl.prototype.has=C7;Sl.prototype.set=j7;var N7=Sl;function I7(){this.__data__=[],this.size=0}var O7=I7;function R7(t,e){return t===e||t!==t&&e!==e}var Iw=R7,D7=Iw;function M7(t,e){for(var r=t.length;r--;)if(D7(t[r][0],e))return r;return-1}var Pm=M7,$7=Pm,L7=Array.prototype,V7=L7.splice;function F7(t){var e=this.__data__,r=$7(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():V7.call(e,r,1),--this.size,!0}var B7=F7,U7=Pm;function z7(t){var e=this.__data__,r=U7(e,t);return r<0?void 0:e[r][1]}var W7=z7,H7=Pm;function q7(t){return H7(this.__data__,t)>-1}var G7=q7,K7=Pm;function Y7(t,e){var r=this.__data__,n=K7(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Q7=Y7,X7=O7,J7=B7,Z7=W7,ez=G7,tz=Q7;function El(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}El.prototype.clear=X7;El.prototype.delete=J7;El.prototype.get=Z7;El.prototype.has=ez;El.prototype.set=tz;var Cm=El,rz=Co,nz=Wn,iz=rz(nz,"Map"),Ow=iz,vE=N7,az=Cm,oz=Ow;function sz(){this.size=0,this.__data__={hash:new vE,map:new(oz||az),string:new vE}}var lz=sz;function cz(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var uz=cz,dz=uz;function fz(t,e){var r=t.__data__;return dz(e)?r[typeof e=="string"?"string":"hash"]:r.map}var jm=fz,hz=jm;function pz(t){var e=hz(this,t).delete(t);return this.size-=e?1:0,e}var mz=pz,gz=jm;function yz(t){return gz(this,t).get(t)}var vz=yz,xz=jm;function bz(t){return xz(this,t).has(t)}var wz=bz,_z=jm;function kz(t,e){var r=_z(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Sz=kz,Ez=lz,Tz=mz,Az=vz,Pz=wz,Cz=Sz;function Tl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Tl.prototype.clear=Ez;Tl.prototype.delete=Tz;Tl.prototype.get=Az;Tl.prototype.has=Pz;Tl.prototype.set=Cz;var Rw=Tl,uO=Rw,jz="Expected a function";function Dw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(jz);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Dw.Cache||uO),r}Dw.Cache=uO;var dO=Dw;const Nz=Qe(dO);var Iz=dO,Oz=500;function Rz(t){var e=Iz(t,function(n){return r.size===Oz&&r.clear(),n}),r=e.cache;return e}var Dz=Rz,Mz=Dz,$z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lz=/\\(\\)?/g,Vz=Mz(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace($z,function(r,n,i,a){e.push(i?a.replace(Lz,"$1"):n||r)}),e}),Fz=Vz;function Bz(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Mw=Bz,xE=wd,Uz=Mw,zz=jr,Wz=_l,bE=xE?xE.prototype:void 0,wE=bE?bE.toString:void 0;function fO(t){if(typeof t=="string")return t;if(zz(t))return Uz(t,fO)+"";if(Wz(t))return wE?wE.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Hz=fO,qz=Hz;function Gz(t){return t==null?"":qz(t)}var hO=Gz,Kz=jr,Yz=jw,Qz=Fz,Xz=hO;function Jz(t,e){return Kz(t)?t:Yz(t,e)?[t]:Qz(Xz(t))}var pO=Jz,Zz=_l;function eW(t){if(typeof t=="string"||Zz(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Nm=eW,tW=pO,rW=Nm;function nW(t,e){e=tW(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[rW(e[r++])];return r&&r==n?t:void 0}var $w=nW,iW=$w;function aW(t,e,r){var n=t==null?void 0:iW(t,e);return n===void 0?r:n}var mO=aW;const Jr=Qe(mO);function oW(t){return t==null}var sW=oW;const Ee=Qe(sW);var lW=Ci,cW=jr,uW=ji,dW="[object String]";function fW(t){return typeof t=="string"||!cW(t)&&uW(t)&&lW(t)==dW}var hW=fW;const yo=Qe(hW);var gO={exports:{}},He={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw=Symbol.for("react.element"),Vw=Symbol.for("react.portal"),Im=Symbol.for("react.fragment"),Om=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),Dm=Symbol.for("react.provider"),Mm=Symbol.for("react.context"),pW=Symbol.for("react.server_context"),$m=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Vm=Symbol.for("react.suspense_list"),Fm=Symbol.for("react.memo"),Bm=Symbol.for("react.lazy"),mW=Symbol.for("react.offscreen"),yO;yO=Symbol.for("react.module.reference");function nn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Lw:switch(t=t.type,t){case Im:case Rm:case Om:case Lm:case Vm:return t;default:switch(t=t&&t.$$typeof,t){case pW:case Mm:case $m:case Bm:case Fm:case Dm:return t;default:return e}}case Vw:return e}}}He.ContextConsumer=Mm;He.ContextProvider=Dm;He.Element=Lw;He.ForwardRef=$m;He.Fragment=Im;He.Lazy=Bm;He.Memo=Fm;He.Portal=Vw;He.Profiler=Rm;He.StrictMode=Om;He.Suspense=Lm;He.SuspenseList=Vm;He.isAsyncMode=function(){return!1};He.isConcurrentMode=function(){return!1};He.isContextConsumer=function(t){return nn(t)===Mm};He.isContextProvider=function(t){return nn(t)===Dm};He.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lw};He.isForwardRef=function(t){return nn(t)===$m};He.isFragment=function(t){return nn(t)===Im};He.isLazy=function(t){return nn(t)===Bm};He.isMemo=function(t){return nn(t)===Fm};He.isPortal=function(t){return nn(t)===Vw};He.isProfiler=function(t){return nn(t)===Rm};He.isStrictMode=function(t){return nn(t)===Om};He.isSuspense=function(t){return nn(t)===Lm};He.isSuspenseList=function(t){return nn(t)===Vm};He.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Im||t===Rm||t===Om||t===Lm||t===Vm||t===mW||typeof t=="object"&&t!==null&&(t.$$typeof===Bm||t.$$typeof===Fm||t.$$typeof===Dm||t.$$typeof===Mm||t.$$typeof===$m||t.$$typeof===yO||t.getModuleId!==void 0)};He.typeOf=nn;gO.exports=He;var gW=gO.exports,yW=Ci,vW=ji,xW="[object Number]";function bW(t){return typeof t=="number"||vW(t)&&yW(t)==xW}var vO=bW;const wW=Qe(vO);var _W=vO;function kW(t){return _W(t)&&t!=+t}var SW=kW;const _d=Qe(SW);var vn=function(e){return e===0?0:e>0?1:-1},qa=function(e){return yo(e)&&e.indexOf("%")===e.length-1},ie=function(e){return wW(e)&&!_d(e)},EW=function(e){return Ee(e)},Rt=function(e){return ie(e)||yo(e)},TW=0,kd=function(e){var r=++TW;return"".concat(e||"").concat(r)},vo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ie(e)&&!yo(e))return n;var a;if(qa(e)){var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return _d(a)&&(a=n),i&&a>r&&(a=r),a},qi=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},AW=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},gn=function(e,r){return ie(e)&&ie(r)?function(n){return e+n*(r-e)}:function(){return r}};function Bh(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Jr(n,e))===r})}var PW=function(e,r){return ie(e)&&ie(r)?e-r:yo(e)&&yo(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Ss(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function c0(t){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c0(t)}var CW=["viewBox","children"],jW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_E=["points","pathLength"],my={svg:CW,polygon:_E,polyline:_E},Fw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Uh=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(R.isValidElement(e)&&(n=e.props),!kl(n))return null;var i={};return Object.keys(n).forEach(function(a){Fw.includes(a)&&(i[a]=r||function(o){return n[a](n,o)})}),i},NW=function(e,r,n){return function(i){return e(r,n,i),null}},zh=function(e,r,n){if(!kl(e)||c0(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];Fw.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=NW(o,r,n))}),i},IW=["children"],OW=["children"];function kE(t,e){if(t==null)return{};var r=RW(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function RW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}var SE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ui=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},EE=null,gy=null,Bw=function t(e){if(e===EE&&Array.isArray(gy))return gy;var r=[];return R.Children.forEach(e,function(n){Ee(n)||(gW.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),gy=r,EE=e,r};function Zr(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return ui(i)}):n=[ui(e)],Bw(t).forEach(function(i){var a=Jr(i,"type.displayName")||Jr(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function Dr(t,e){var r=Zr(t,e);return r&&r[0]}var TE=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!ie(n)||n<=0||!ie(i)||i<=0)},DW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],MW=function(e){return e&&e.type&&yo(e.type)&&DW.indexOf(e.type)>=0},$W=function(e){return e&&u0(e)==="object"&&"clipDot"in e},LW=function(e,r,n,i){var a,o=(a=my==null?void 0:my[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Se(e)&&(i&&o.includes(r)||jW.includes(r))||n&&Fw.includes(r)},Ce=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(R.isValidElement(e)&&(i=e.props),!kl(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;LW((s=i)===null||s===void 0?void 0:s[o],o,r,n)&&(a[o]=i[o])}),a},d0=function t(e,r){if(e===r)return!0;var n=R.Children.count(e);if(n!==R.Children.count(r))return!1;if(n===0)return!0;if(n===1)return AE(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],o=r[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!AE(a,o))return!1}return!0},AE=function(e,r){if(Ee(e)&&Ee(r))return!0;if(!Ee(e)&&!Ee(r)){var n=e.props||{},i=n.children,a=kE(n,IW),o=r.props||{},s=o.children,l=kE(o,OW);return i&&s?Ss(a,l)&&d0(i,s):!i&&!s?Ss(a,l):!1}return!1},PE=function(e,r){var n=[],i={};return Bw(e).forEach(function(a,o){if(MW(a))n.push(a);else if(a){var s=ui(a.type),l=r[s]||{},c=l.handler,d=l.once;if(c&&(!d||!i[s])){var f=c(a,s,o);n.push(f),i[s]=!0}}}),n},VW=function(e){var r=e&&e.type;return r&&SE[r]?SE[r]:null},FW=function(e,r){return Bw(r).indexOf(e)},BW=["children","width","height","viewBox","className","style","title","desc"];function f0(){return f0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f0.apply(this,arguments)}function UW(t,e){if(t==null)return{};var r=zW(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function h0(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,o=t.style,s=t.title,l=t.desc,c=UW(t,BW),d=i||{width:r,height:n,x:0,y:0},f=Re("recharts-surface",a);return V.createElement("svg",f0({},Ce(c,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),V.createElement("title",null,s),V.createElement("desc",null,l),e)}var WW=["children","className"];function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p0.apply(this,arguments)}function HW(t,e){if(t==null)return{};var r=qW(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var wt=V.forwardRef(function(t,e){var r=t.children,n=t.className,i=HW(t,WW),a=Re("recharts-layer",n);return V.createElement("g",p0({className:a},Ce(i,!0),{ref:e}),r)}),di=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function GW(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(i);++n<i;)a[n]=t[n+e];return a}var KW=GW,YW=KW;function QW(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:YW(t,e,r)}var XW=QW,JW="\\ud800-\\udfff",ZW="\\u0300-\\u036f",eH="\\ufe20-\\ufe2f",tH="\\u20d0-\\u20ff",rH=ZW+eH+tH,nH="\\ufe0e\\ufe0f",iH="\\u200d",aH=RegExp("["+iH+JW+rH+nH+"]");function oH(t){return aH.test(t)}var xO=oH;function sH(t){return t.split("")}var lH=sH,bO="\\ud800-\\udfff",cH="\\u0300-\\u036f",uH="\\ufe20-\\ufe2f",dH="\\u20d0-\\u20ff",fH=cH+uH+dH,hH="\\ufe0e\\ufe0f",pH="["+bO+"]",m0="["+fH+"]",g0="\\ud83c[\\udffb-\\udfff]",mH="(?:"+m0+"|"+g0+")",wO="[^"+bO+"]",_O="(?:\\ud83c[\\udde6-\\uddff]){2}",kO="[\\ud800-\\udbff][\\udc00-\\udfff]",gH="\\u200d",SO=mH+"?",EO="["+hH+"]?",yH="(?:"+gH+"(?:"+[wO,_O,kO].join("|")+")"+EO+SO+")*",vH=EO+SO+yH,xH="(?:"+[wO+m0+"?",m0,_O,kO,pH].join("|")+")",bH=RegExp(g0+"(?="+g0+")|"+xH+vH,"g");function wH(t){return t.match(bH)||[]}var _H=wH,kH=lH,SH=xO,EH=_H;function TH(t){return SH(t)?EH(t):kH(t)}var AH=TH,PH=XW,CH=xO,jH=AH,NH=hO;function IH(t){return function(e){e=NH(e);var r=CH(e)?jH(e):void 0,n=r?r[0]:e.charAt(0),i=r?PH(r,1).join(""):e.slice(1);return n[t]()+i}}var OH=IH,RH=OH,DH=RH("toUpperCase"),MH=DH;const Um=Qe(MH);function Je(t){return function(){return t}}const TO=Math.cos,Wh=Math.sin,En=Math.sqrt,Hh=Math.PI,zm=2*Hh,y0=Math.PI,v0=2*y0,La=1e-6,$H=v0-La;function AO(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function LH(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return AO;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class VH{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?AO:LH(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=n-e,c=i-r,d=o-e,f=s-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(p>La)if(!(Math.abs(f*l-c*d)>La)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,g=i-s,v=l*l+c*c,y=m*m+g*g,x=Math.sqrt(v),b=Math.sqrt(p),k=a*Math.tan((y0-Math.acos((v+p-y)/(2*x*b)))/2),j=k/b,w=k/x;Math.abs(j-1)>La&&this._append`L${e+j*d},${r+j*f}`,this._append`A${a},${a},0,0,${+(f*m>d*g)},${this._x1=e+w*l},${this._y1=r+w*c}`}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),l=n*Math.sin(i),c=e+s,d=r+l,f=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>La||Math.abs(this._y1-d)>La)&&this._append`L${c},${d}`,n&&(p<0&&(p=p%v0+v0),p>$H?this._append`A${n},${n},0,1,${f},${e-s},${r-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=d}`:p>La&&this._append`A${n},${n},0,${+(p>=y0)},${f},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Uw(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new VH(e)}function zw(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function PO(t){this._context=t}PO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Wm(t){return new PO(t)}function CO(t){return t[0]}function jO(t){return t[1]}function NO(t,e){var r=Je(!0),n=null,i=Wm,a=null,o=Uw(s);t=typeof t=="function"?t:t===void 0?CO:Je(t),e=typeof e=="function"?e:e===void 0?jO:Je(e);function s(l){var c,d=(l=zw(l)).length,f,p=!1,m;for(n==null&&(a=i(m=o())),c=0;c<=d;++c)!(c<d&&r(f=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(f,c,l),+e(f,c,l));if(m)return a=null,m+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Je(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Je(+l),s):e},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Je(!!l),s):r},s.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),s):i},s.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),s):n},s}function mf(t,e,r){var n=null,i=Je(!0),a=null,o=Wm,s=null,l=Uw(c);t=typeof t=="function"?t:t===void 0?CO:Je(+t),e=typeof e=="function"?e:Je(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?jO:Je(+r);function c(f){var p,m,g,v=(f=zw(f)).length,y,x=!1,b,k=new Array(v),j=new Array(v);for(a==null&&(s=o(b=l())),p=0;p<=v;++p){if(!(p<v&&i(y=f[p],p,f))===x)if(x=!x)m=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=p-1;g>=m;--g)s.point(k[g],j[g]);s.lineEnd(),s.areaEnd()}x&&(k[p]=+t(y,p,f),j[p]=+e(y,p,f),s.point(n?+n(y,p,f):k[p],r?+r(y,p,f):j[p]))}if(b)return s=null,b+""||null}function d(){return NO().defined(i).curve(o).context(a)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Je(+f),n=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Je(+f),c):t},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Je(+f),c):n},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Je(+f),r=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Je(+f),c):e},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Je(+f),c):r},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(r)},c.lineX1=function(){return d().x(n).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Je(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),c):o},c.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),c):a},c}class IO{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function FH(t){return new IO(t,!0)}function BH(t){return new IO(t,!1)}const Ww={draw(t,e){const r=En(e/Hh);t.moveTo(r,0),t.arc(0,0,r,0,zm)}},UH={draw(t,e){const r=En(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},OO=En(1/3),zH=OO*2,WH={draw(t,e){const r=En(e/zH),n=r*OO;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},HH={draw(t,e){const r=En(e),n=-r/2;t.rect(n,n,r,r)}},qH=.8908130915292852,RO=Wh(Hh/10)/Wh(7*Hh/10),GH=Wh(zm/10)*RO,KH=-TO(zm/10)*RO,YH={draw(t,e){const r=En(e*qH),n=GH*r,i=KH*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=zm*a/5,s=TO(o),l=Wh(o);t.lineTo(l*r,-s*r),t.lineTo(s*n-l*i,l*n+s*i)}t.closePath()}},yy=En(3),QH={draw(t,e){const r=-En(e/(yy*3));t.moveTo(0,r*2),t.lineTo(-yy*r,-r),t.lineTo(yy*r,-r),t.closePath()}},Wr=-.5,Hr=En(3)/2,x0=1/En(12),XH=(x0/2+1)*3,JH={draw(t,e){const r=En(e/XH),n=r/2,i=r*x0,a=n,o=r*x0+r,s=-a,l=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Wr*n-Hr*i,Hr*n+Wr*i),t.lineTo(Wr*a-Hr*o,Hr*a+Wr*o),t.lineTo(Wr*s-Hr*l,Hr*s+Wr*l),t.lineTo(Wr*n+Hr*i,Wr*i-Hr*n),t.lineTo(Wr*a+Hr*o,Wr*o-Hr*a),t.lineTo(Wr*s+Hr*l,Wr*l-Hr*s),t.closePath()}};function ZH(t,e){let r=null,n=Uw(i);t=typeof t=="function"?t:Je(t||Ww),e=typeof e=="function"?e:Je(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Je(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Je(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function qh(){}function Gh(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function DO(t){this._context=t}DO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eq(t){return new DO(t)}function MO(t){this._context=t}MO.prototype={areaStart:qh,areaEnd:qh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Gh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tq(t){return new MO(t)}function $O(t){this._context=t}$O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Gh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rq(t){return new $O(t)}function LO(t){this._context=t}LO.prototype={areaStart:qh,areaEnd:qh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nq(t){return new LO(t)}function CE(t){return t<0?-1:1}function jE(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(CE(a)+CE(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function NE(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function vy(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,i+s*e,a-s,o-s*r,a,o)}function Kh(t){this._context=t}Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vy(this,this._t0,NE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,vy(this,NE(this,r=jE(this,t,e)),r);break;default:vy(this,this._t0,r=jE(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function VO(t){this._context=new FO(t)}(VO.prototype=Object.create(Kh.prototype)).point=function(t,e){Kh.prototype.point.call(this,e,t)};function FO(t){this._context=t}FO.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function iq(t){return new Kh(t)}function aq(t){return new VO(t)}function BO(t){this._context=t}BO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=IE(t),i=IE(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function IE(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function oq(t){return new BO(t)}function Hm(t,e){this._context=t,this._t=e}Hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function sq(t){return new Hm(t,.5)}function lq(t){return new Hm(t,0)}function cq(t){return new Hm(t,1)}function zs(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,s=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function b0(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function uq(t,e){return t[e]}function dq(t){const e=[];return e.key=t,e}function fq(){var t=Je([]),e=b0,r=zs,n=uq;function i(a){var o=Array.from(t.apply(this,arguments),dq),s,l=o.length,c=-1,d;for(const f of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(f,o[s].key,c,a)]).data=f;for(s=0,d=zw(e(o));s<l;++s)o[d[s]].index=s;return r(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Je(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Je(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?b0:typeof a=="function"?a:Je(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??zs,i):r},i}function hq(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}zs(t,e)}}function pq(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,s=0;o<i;++o)s+=t[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}zs(t,e)}}function mq(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var s=0,l=0,c=0;s<o;++s){for(var d=t[e[s]],f=d[n][1]||0,p=d[n-1][1]||0,m=(f-p)/2,g=0;g<s;++g){var v=t[e[g]],y=v[n][1]||0,x=v[n-1][1]||0;m+=y-x}l+=f,c+=m*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,zs(t,e)}}function bu(t){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(t)}var gq=["type","size","sizeType"];function w0(){return w0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w0.apply(this,arguments)}function OE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OE(Object(r),!0).forEach(function(n){yq(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yq(t,e,r){return e=vq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vq(t){var e=xq(t,"string");return bu(e)=="symbol"?e:e+""}function xq(t,e){if(bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bq(t,e){if(t==null)return{};var r=wq(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wq(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var UO={symbolCircle:Ww,symbolCross:UH,symbolDiamond:WH,symbolSquare:HH,symbolStar:YH,symbolTriangle:QH,symbolWye:JH},_q=Math.PI/180,kq=function(e){var r="symbol".concat(Um(e));return UO[r]||Ww},Sq=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*_q;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Eq=function(e,r){UO["symbol".concat(Um(e))]=r},Hw=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=bq(e,gq),c=RE(RE({},l),{},{type:n,size:a,sizeType:s}),d=function(){var y=kq(n),x=ZH().type(y).size(Sq(a,s,n));return x()},f=c.className,p=c.cx,m=c.cy,g=Ce(c,!0);return p===+p&&m===+m&&a===+a?V.createElement("path",w0({},g,{className:Re("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:d()})):null};Hw.registerSymbol=Eq;function Ws(t){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ws(t)}function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_0.apply(this,arguments)}function DE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DE(Object(r),!0).forEach(function(n){wu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Aq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WO(n.key),n)}}function Cq(t,e,r){return e&&Pq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jq(t,e,r){return e=Yh(e),Nq(t,zO()?Reflect.construct(e,r||[],Yh(t).constructor):e.apply(t,r))}function Nq(t,e){if(e&&(Ws(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iq(t)}function Iq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zO=function(){return!!t})()}function Yh(t){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yh(t)}function Oq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k0(t,e)}function k0(t,e){return k0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},k0(t,e)}function wu(t,e,r){return e=WO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WO(t){var e=Rq(t,"string");return Ws(e)=="symbol"?e:e+""}function Rq(t,e){if(Ws(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ws(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qr=32,qw=function(t){function e(){return Aq(this,e),jq(this,e,arguments)}return Oq(e,t),Cq(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=qr/2,o=qr/6,s=qr/3,l=n.inactive?i:n.color;if(n.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:qr,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(qr,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return V.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(qr/8,"h").concat(qr,"v").concat(qr*3/4,"h").concat(-qr,"z"),className:"recharts-legend-icon"});if(V.isValidElement(n.legendIcon)){var c=Tq({},n);return delete c.legendIcon,V.cloneElement(n.legendIcon,c)}return V.createElement(Hw,{fill:l,cx:a,cy:a,size:qr,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,d={x:0,y:0,width:qr,height:qr},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,g){var v=m.formatter||l,y=Re(wu(wu({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Se(m.value)?null:m.value;di(!Se(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?c:m.color;return V.createElement("li",_0({className:y,style:f,key:"legend-item-".concat(g)},zh(n.props,m,g)),V.createElement(h0,{width:o,height:o,viewBox:d,style:p},n.renderIcon(m)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v?v(x,m,g):x))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,o=n.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(R.PureComponent);wu(qw,"displayName","Legend");wu(qw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dq=Cm;function Mq(){this.__data__=new Dq,this.size=0}var $q=Mq;function Lq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Vq=Lq;function Fq(t){return this.__data__.get(t)}var Bq=Fq;function Uq(t){return this.__data__.has(t)}var zq=Uq,Wq=Cm,Hq=Ow,qq=Rw,Gq=200;function Kq(t,e){var r=this.__data__;if(r instanceof Wq){var n=r.__data__;if(!Hq||n.length<Gq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qq(n)}return r.set(t,e),this.size=r.size,this}var Yq=Kq,Qq=Cm,Xq=$q,Jq=Vq,Zq=Bq,eG=zq,tG=Yq;function Al(t){var e=this.__data__=new Qq(t);this.size=e.size}Al.prototype.clear=Xq;Al.prototype.delete=Jq;Al.prototype.get=Zq;Al.prototype.has=eG;Al.prototype.set=tG;var HO=Al,rG="__lodash_hash_undefined__";function nG(t){return this.__data__.set(t,rG),this}var iG=nG;function aG(t){return this.__data__.has(t)}var oG=aG,sG=Rw,lG=iG,cG=oG;function Qh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new sG;++e<r;)this.add(t[e])}Qh.prototype.add=Qh.prototype.push=lG;Qh.prototype.has=cG;var qO=Qh;function uG(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var GO=uG;function dG(t,e){return t.has(e)}var KO=dG,fG=qO,hG=GO,pG=KO,mG=1,gG=2;function yG(t,e,r,n,i,a){var o=r&mG,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(t),d=a.get(e);if(c&&d)return c==e&&d==t;var f=-1,p=!0,m=r&gG?new fG:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var g=t[f],v=e[f];if(n)var y=o?n(v,g,f,e,t,a):n(g,v,f,t,e,a);if(y!==void 0){if(y)continue;p=!1;break}if(m){if(!hG(e,function(x,b){if(!pG(m,b)&&(g===x||i(g,x,r,n,a)))return m.push(b)})){p=!1;break}}else if(!(g===v||i(g,v,r,n,a))){p=!1;break}}return a.delete(t),a.delete(e),p}var YO=yG,vG=Wn,xG=vG.Uint8Array,bG=xG;function wG(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var _G=wG;function kG(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Gw=kG,ME=wd,$E=bG,SG=Iw,EG=YO,TG=_G,AG=Gw,PG=1,CG=2,jG="[object Boolean]",NG="[object Date]",IG="[object Error]",OG="[object Map]",RG="[object Number]",DG="[object RegExp]",MG="[object Set]",$G="[object String]",LG="[object Symbol]",VG="[object ArrayBuffer]",FG="[object DataView]",LE=ME?ME.prototype:void 0,xy=LE?LE.valueOf:void 0;function BG(t,e,r,n,i,a,o){switch(r){case FG:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case VG:return!(t.byteLength!=e.byteLength||!a(new $E(t),new $E(e)));case jG:case NG:case RG:return SG(+t,+e);case IG:return t.name==e.name&&t.message==e.message;case DG:case $G:return t==e+"";case OG:var s=TG;case MG:var l=n&PG;if(s||(s=AG),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;n|=CG,o.set(t,e);var d=EG(s(t),s(e),n,i,a,o);return o.delete(t),d;case LG:if(xy)return xy.call(t)==xy.call(e)}return!1}var UG=BG;function zG(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var QO=zG,WG=QO,HG=jr;function qG(t,e,r){var n=e(t);return HG(t)?n:WG(n,r(t))}var GG=qG;function KG(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var YG=KG;function QG(){return[]}var XG=QG,JG=YG,ZG=XG,eK=Object.prototype,tK=eK.propertyIsEnumerable,VE=Object.getOwnPropertySymbols,rK=VE?function(t){return t==null?[]:(t=Object(t),JG(VE(t),function(e){return tK.call(t,e)}))}:ZG,nK=rK;function iK(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var aK=iK,oK=Ci,sK=ji,lK="[object Arguments]";function cK(t){return sK(t)&&oK(t)==lK}var uK=cK,FE=uK,dK=ji,XO=Object.prototype,fK=XO.hasOwnProperty,hK=XO.propertyIsEnumerable,pK=FE(function(){return arguments}())?FE:function(t){return dK(t)&&fK.call(t,"callee")&&!hK.call(t,"callee")},Kw=pK,Xh={exports:{}};function mK(){return!1}var gK=mK;Xh.exports;(function(t,e){var r=Wn,n=gK,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||n;t.exports=c})(Xh,Xh.exports);var JO=Xh.exports,yK=9007199254740991,vK=/^(?:0|[1-9]\d*)$/;function xK(t,e){var r=typeof t;return e=e??yK,!!e&&(r=="number"||r!="symbol"&&vK.test(t))&&t>-1&&t%1==0&&t<e}var Yw=xK,bK=9007199254740991;function wK(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bK}var Qw=wK,_K=Ci,kK=Qw,SK=ji,EK="[object Arguments]",TK="[object Array]",AK="[object Boolean]",PK="[object Date]",CK="[object Error]",jK="[object Function]",NK="[object Map]",IK="[object Number]",OK="[object Object]",RK="[object RegExp]",DK="[object Set]",MK="[object String]",$K="[object WeakMap]",LK="[object ArrayBuffer]",VK="[object DataView]",FK="[object Float32Array]",BK="[object Float64Array]",UK="[object Int8Array]",zK="[object Int16Array]",WK="[object Int32Array]",HK="[object Uint8Array]",qK="[object Uint8ClampedArray]",GK="[object Uint16Array]",KK="[object Uint32Array]",it={};it[FK]=it[BK]=it[UK]=it[zK]=it[WK]=it[HK]=it[qK]=it[GK]=it[KK]=!0;it[EK]=it[TK]=it[LK]=it[AK]=it[VK]=it[PK]=it[CK]=it[jK]=it[NK]=it[IK]=it[OK]=it[RK]=it[DK]=it[MK]=it[$K]=!1;function YK(t){return SK(t)&&kK(t.length)&&!!it[_K(t)]}var QK=YK;function XK(t){return function(e){return t(e)}}var ZO=XK,Jh={exports:{}};Jh.exports;(function(t,e){var r=sO,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Jh,Jh.exports);var JK=Jh.exports,ZK=QK,eY=ZO,BE=JK,UE=BE&&BE.isTypedArray,tY=UE?eY(UE):ZK,eR=tY,rY=aK,nY=Kw,iY=jr,aY=JO,oY=Yw,sY=eR,lY=Object.prototype,cY=lY.hasOwnProperty;function uY(t,e){var r=iY(t),n=!r&&nY(t),i=!r&&!n&&aY(t),a=!r&&!n&&!i&&sY(t),o=r||n||i||a,s=o?rY(t.length,String):[],l=s.length;for(var c in t)(e||cY.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||oY(c,l)))&&s.push(c);return s}var dY=uY,fY=Object.prototype;function hY(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||fY;return t===r}var pY=hY;function mY(t,e){return function(r){return t(e(r))}}var tR=mY,gY=tR,yY=gY(Object.keys,Object),vY=yY,xY=pY,bY=vY,wY=Object.prototype,_Y=wY.hasOwnProperty;function kY(t){if(!xY(t))return bY(t);var e=[];for(var r in Object(t))_Y.call(t,r)&&r!="constructor"&&e.push(r);return e}var SY=kY,EY=Nw,TY=Qw;function AY(t){return t!=null&&TY(t.length)&&!EY(t)}var Sd=AY,PY=dY,CY=SY,jY=Sd;function NY(t){return jY(t)?PY(t):CY(t)}var qm=NY,IY=GG,OY=nK,RY=qm;function DY(t){return IY(t,RY,OY)}var MY=DY,zE=MY,$Y=1,LY=Object.prototype,VY=LY.hasOwnProperty;function FY(t,e,r,n,i,a){var o=r&$Y,s=zE(t),l=s.length,c=zE(e),d=c.length;if(l!=d&&!o)return!1;for(var f=l;f--;){var p=s[f];if(!(o?p in e:VY.call(e,p)))return!1}var m=a.get(t),g=a.get(e);if(m&&g)return m==e&&g==t;var v=!0;a.set(t,e),a.set(e,t);for(var y=o;++f<l;){p=s[f];var x=t[p],b=e[p];if(n)var k=o?n(b,x,p,e,t,a):n(x,b,p,t,e,a);if(!(k===void 0?x===b||i(x,b,r,n,a):k)){v=!1;break}y||(y=p=="constructor")}if(v&&!y){var j=t.constructor,w=e.constructor;j!=w&&"constructor"in t&&"constructor"in e&&!(typeof j=="function"&&j instanceof j&&typeof w=="function"&&w instanceof w)&&(v=!1)}return a.delete(t),a.delete(e),v}var BY=FY,UY=Co,zY=Wn,WY=UY(zY,"DataView"),HY=WY,qY=Co,GY=Wn,KY=qY(GY,"Promise"),YY=KY,QY=Co,XY=Wn,JY=QY(XY,"Set"),rR=JY,ZY=Co,eQ=Wn,tQ=ZY(eQ,"WeakMap"),rQ=tQ,S0=HY,E0=Ow,T0=YY,A0=rR,P0=rQ,nR=Ci,Pl=cO,WE="[object Map]",nQ="[object Object]",HE="[object Promise]",qE="[object Set]",GE="[object WeakMap]",KE="[object DataView]",iQ=Pl(S0),aQ=Pl(E0),oQ=Pl(T0),sQ=Pl(A0),lQ=Pl(P0),Va=nR;(S0&&Va(new S0(new ArrayBuffer(1)))!=KE||E0&&Va(new E0)!=WE||T0&&Va(T0.resolve())!=HE||A0&&Va(new A0)!=qE||P0&&Va(new P0)!=GE)&&(Va=function(t){var e=nR(t),r=e==nQ?t.constructor:void 0,n=r?Pl(r):"";if(n)switch(n){case iQ:return KE;case aQ:return WE;case oQ:return HE;case sQ:return qE;case lQ:return GE}return e});var cQ=Va,by=HO,uQ=YO,dQ=UG,fQ=BY,YE=cQ,QE=jr,XE=JO,hQ=eR,pQ=1,JE="[object Arguments]",ZE="[object Array]",gf="[object Object]",mQ=Object.prototype,eT=mQ.hasOwnProperty;function gQ(t,e,r,n,i,a){var o=QE(t),s=QE(e),l=o?ZE:YE(t),c=s?ZE:YE(e);l=l==JE?gf:l,c=c==JE?gf:c;var d=l==gf,f=c==gf,p=l==c;if(p&&XE(t)){if(!XE(e))return!1;o=!0,d=!1}if(p&&!d)return a||(a=new by),o||hQ(t)?uQ(t,e,r,n,i,a):dQ(t,e,l,r,n,i,a);if(!(r&pQ)){var m=d&&eT.call(t,"__wrapped__"),g=f&&eT.call(e,"__wrapped__");if(m||g){var v=m?t.value():t,y=g?e.value():e;return a||(a=new by),i(v,y,r,n,a)}}return p?(a||(a=new by),fQ(t,e,r,n,i,a)):!1}var yQ=gQ,vQ=yQ,tT=ji;function iR(t,e,r,n,i){return t===e?!0:t==null||e==null||!tT(t)&&!tT(e)?t!==t&&e!==e:vQ(t,e,r,n,iR,i)}var Xw=iR,xQ=HO,bQ=Xw,wQ=1,_Q=2;function kQ(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var l=s[0],c=t[l],d=s[1];if(o&&s[2]){if(c===void 0&&!(l in t))return!1}else{var f=new xQ;if(n)var p=n(c,d,l,t,e,f);if(!(p===void 0?bQ(d,c,wQ|_Q,n,f):p))return!1}}return!0}var SQ=kQ,EQ=Sa;function TQ(t){return t===t&&!EQ(t)}var aR=TQ,AQ=aR,PQ=qm;function CQ(t){for(var e=PQ(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,AQ(i)]}return e}var jQ=CQ;function NQ(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var oR=NQ,IQ=SQ,OQ=jQ,RQ=oR;function DQ(t){var e=OQ(t);return e.length==1&&e[0][2]?RQ(e[0][0],e[0][1]):function(r){return r===t||IQ(r,t,e)}}var MQ=DQ;function $Q(t,e){return t!=null&&e in Object(t)}var LQ=$Q,VQ=pO,FQ=Kw,BQ=jr,UQ=Yw,zQ=Qw,WQ=Nm;function HQ(t,e,r){e=VQ(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=WQ(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&zQ(i)&&UQ(o,i)&&(BQ(t)||FQ(t)))}var qQ=HQ,GQ=LQ,KQ=qQ;function YQ(t,e){return t!=null&&KQ(t,e,GQ)}var QQ=YQ,XQ=Xw,JQ=mO,ZQ=QQ,eX=jw,tX=aR,rX=oR,nX=Nm,iX=1,aX=2;function oX(t,e){return eX(t)&&tX(e)?rX(nX(t),e):function(r){var n=JQ(r,t);return n===void 0&&n===e?ZQ(r,t):XQ(e,n,iX|aX)}}var sX=oX;function lX(t){return t}var Cl=lX;function cX(t){return function(e){return e==null?void 0:e[t]}}var uX=cX,dX=$w;function fX(t){return function(e){return dX(e,t)}}var hX=fX,pX=uX,mX=hX,gX=jw,yX=Nm;function vX(t){return gX(t)?pX(yX(t)):mX(t)}var xX=vX,bX=MQ,wX=sX,_X=Cl,kX=jr,SX=xX;function EX(t){return typeof t=="function"?t:t==null?_X:typeof t=="object"?kX(t)?wX(t[0],t[1]):bX(t):SX(t)}var Ea=EX;function TX(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var sR=TX;function AX(t){return t!==t}var PX=AX;function CX(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var jX=CX,NX=sR,IX=PX,OX=jX;function RX(t,e,r){return e===e?OX(t,e,r):NX(t,IX,r)}var DX=RX,MX=DX;function $X(t,e){var r=t==null?0:t.length;return!!r&&MX(t,e,0)>-1}var LX=$X;function VX(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var FX=VX;function BX(){}var UX=BX,wy=rR,zX=UX,WX=Gw,HX=1/0,qX=wy&&1/WX(new wy([,-0]))[1]==HX?function(t){return new wy(t)}:zX,GX=qX,KX=qO,YX=LX,QX=FX,XX=KO,JX=GX,ZX=Gw,eJ=200;function tJ(t,e,r){var n=-1,i=YX,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=QX;else if(a>=eJ){var c=e?null:JX(t);if(c)return ZX(c);o=!1,i=XX,l=new KX}else l=e?[]:s;e:for(;++n<a;){var d=t[n],f=e?e(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;e&&l.push(f),s.push(d)}else i(l,f,r)||(l!==s&&l.push(f),s.push(d))}return s}var rJ=tJ,nJ=Ea,iJ=rJ;function aJ(t,e){return t&&t.length?iJ(t,nJ(e)):[]}var oJ=aJ;const rT=Qe(oJ);function lR(t,e,r){return e===!0?rT(t,r):Se(e)?rT(t,e):t}function Hs(t){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hs(t)}var sJ=["ref"];function nT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nT(Object(r),!0).forEach(function(n){Gm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uR(n.key),n)}}function cJ(t,e,r){return e&&iT(t.prototype,e),r&&iT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uJ(t,e,r){return e=Zh(e),dJ(t,cR()?Reflect.construct(e,r||[],Zh(t).constructor):e.apply(t,r))}function dJ(t,e){if(e&&(Hs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fJ(t)}function fJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cR=function(){return!!t})()}function Zh(t){return Zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zh(t)}function hJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C0(t,e)}function C0(t,e){return C0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},C0(t,e)}function Gm(t,e,r){return e=uR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uR(t){var e=pJ(t,"string");return Hs(e)=="symbol"?e:e+""}function pJ(t,e){if(Hs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mJ(t,e){if(t==null)return{};var r=gJ(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yJ(t){return t.value}function vJ(t,e){if(V.isValidElement(t))return V.cloneElement(t,e);if(typeof t=="function")return V.createElement(t,e);e.ref;var r=mJ(e,sJ);return V.createElement(qw,r)}var aT=1,Es=function(t){function e(){var r;lJ(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=uJ(this,e,[].concat(i)),Gm(r,"lastBoundingBox",{width:-1,height:-1}),r}return hJ(e,t),cJ(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>aT||Math.abs(i.height-this.lastBoundingBox.height)>aT)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Kn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,d=i.chartHeight,f,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();f={left:((c||0)-m.width)/2}}else f=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var g=this.getBBoxSnapshot();p={top:((d||0)-g.height)/2}}else p=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Kn(Kn({},f),p)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,d=i.payload,f=Kn(Kn({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return V.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},vJ(a,Kn(Kn({},this.props),{},{payload:lR(d,c,yJ)})))}}],[{key:"getWithHeight",value:function(n,i){var a=Kn(Kn({},this.defaultProps),n.props),o=a.layout;return o==="vertical"&&ie(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])}(R.PureComponent);Gm(Es,"displayName","Legend");Gm(Es,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var oT=wd,xJ=Kw,bJ=jr,sT=oT?oT.isConcatSpreadable:void 0;function wJ(t){return bJ(t)||xJ(t)||!!(sT&&t&&t[sT])}var _J=wJ,kJ=QO,SJ=_J;function dR(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=SJ),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?dR(s,e-1,r,n,i):kJ(i,s):n||(i[i.length]=s)}return i}var fR=dR;function EJ(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[t?s:++i];if(r(a[l],l,a)===!1)break}return e}}var TJ=EJ,AJ=TJ,PJ=AJ(),CJ=PJ,jJ=CJ,NJ=qm;function IJ(t,e){return t&&jJ(t,e,NJ)}var hR=IJ,OJ=Sd;function RJ(t,e){return function(r,n){if(r==null)return r;if(!OJ(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}var DJ=RJ,MJ=hR,$J=DJ,LJ=$J(MJ),Jw=LJ,VJ=Jw,FJ=Sd;function BJ(t,e){var r=-1,n=FJ(t)?Array(t.length):[];return VJ(t,function(i,a,o){n[++r]=e(i,a,o)}),n}var pR=BJ;function UJ(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var zJ=UJ,lT=_l;function WJ(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,a=lT(t),o=e!==void 0,s=e===null,l=e===e,c=lT(e);if(!s&&!c&&!a&&t>e||a&&o&&l&&!s&&!c||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!c&&t<e||c&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0}var HJ=WJ,qJ=HJ;function GJ(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var l=qJ(i[n],a[n]);if(l){if(n>=s)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return t.index-e.index}var KJ=GJ,_y=Mw,YJ=$w,QJ=Ea,XJ=pR,JJ=zJ,ZJ=ZO,eZ=KJ,tZ=Cl,rZ=jr;function nZ(t,e,r){e.length?e=_y(e,function(a){return rZ(a)?function(o){return YJ(o,a.length===1?a[0]:a)}:a}):e=[tZ];var n=-1;e=_y(e,ZJ(QJ));var i=XJ(t,function(a,o,s){var l=_y(e,function(c){return c(a)});return{criteria:l,index:++n,value:a}});return JJ(i,function(a,o){return eZ(a,o,r)})}var iZ=nZ;function aZ(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var oZ=aZ,sZ=oZ,cT=Math.max;function lZ(t,e,r){return e=cT(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=cT(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),sZ(t,this,s)}}var cZ=lZ;function uZ(t){return function(){return t}}var dZ=uZ,fZ=Co,hZ=function(){try{var t=fZ(Object,"defineProperty");return t({},"",{}),t}catch{}}(),mR=hZ,pZ=dZ,uT=mR,mZ=Cl,gZ=uT?function(t,e){return uT(t,"toString",{configurable:!0,enumerable:!1,value:pZ(e),writable:!0})}:mZ,yZ=gZ,vZ=800,xZ=16,bZ=Date.now;function wZ(t){var e=0,r=0;return function(){var n=bZ(),i=xZ-(n-r);if(r=n,i>0){if(++e>=vZ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var _Z=wZ,kZ=yZ,SZ=_Z,EZ=SZ(kZ),TZ=EZ,AZ=Cl,PZ=cZ,CZ=TZ;function jZ(t,e){return CZ(PZ(t,e,AZ),t+"")}var NZ=jZ,IZ=Iw,OZ=Sd,RZ=Yw,DZ=Sa;function MZ(t,e,r){if(!DZ(r))return!1;var n=typeof e;return(n=="number"?OZ(r)&&RZ(e,r.length):n=="string"&&e in r)?IZ(r[e],t):!1}var Km=MZ,$Z=fR,LZ=iZ,VZ=NZ,dT=Km,FZ=VZ(function(t,e){if(t==null)return[];var r=e.length;return r>1&&dT(t,e[0],e[1])?e=[]:r>2&&dT(e[0],e[1],e[2])&&(e=[e[0]]),LZ(t,$Z(e,1),[])}),BZ=FZ;const Zw=Qe(BZ);function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(t)}function j0(){return j0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j0.apply(this,arguments)}function UZ(t,e){return qZ(t)||HZ(t,e)||WZ(t,e)||zZ()}function zZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WZ(t,e){if(t){if(typeof t=="string")return fT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fT(t,e)}}function fT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HZ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function qZ(t){if(Array.isArray(t))return t}function hT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ky(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(r),!0).forEach(function(n){GZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GZ(t,e,r){return e=KZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KZ(t){var e=YZ(t,"string");return _u(e)=="symbol"?e:e+""}function YZ(t,e){if(_u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QZ(t){return Array.isArray(t)&&Rt(t[0])&&Rt(t[1])?t.join(" ~ "):t}var XZ=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,d=e.payload,f=e.formatter,p=e.itemSorter,m=e.wrapperClassName,g=e.labelClassName,v=e.label,y=e.labelFormatter,x=e.accessibilityLayer,b=x===void 0?!1:x,k=function(){if(d&&d.length){var O={padding:0,margin:0},A=(p?Zw(d,p):d).map(function($,L){if($.type==="none")return null;var U=ky({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},s),z=$.formatter||f||QZ,M=$.value,F=$.name,B=M,K=F;if(z&&B!=null&&K!=null){var H=z(M,F,$,L,d);if(Array.isArray(H)){var ee=UZ(H,2);B=ee[0],K=ee[1]}else B=H}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:U},Rt(K)?V.createElement("span",{className:"recharts-tooltip-item-name"},K):null,Rt(K)?V.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,V.createElement("span",{className:"recharts-tooltip-item-value"},B),V.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:O},A)}return null},j=ky({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=ky({margin:0},c),T=!Ee(v),S=T?v:"",E=Re("recharts-default-tooltip",m),P=Re("recharts-tooltip-label",g);T&&y&&d!==void 0&&d!==null&&(S=y(v,d));var N=b?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",j0({className:E,style:j},N),V.createElement("p",{className:P,style:w},V.isValidElement(S)?S:"".concat(S)),k())};function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(t)}function yf(t,e,r){return e=JZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JZ(t){var e=ZZ(t,"string");return ku(e)=="symbol"?e:e+""}function ZZ(t,e){if(ku(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ic="recharts-tooltip-wrapper",eee={visibility:"hidden"};function tee(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Re(ic,yf(yf(yf(yf({},"".concat(ic,"-right"),ie(r)&&e&&ie(e.x)&&r>=e.x),"".concat(ic,"-left"),ie(r)&&e&&ie(e.x)&&r<e.x),"".concat(ic,"-bottom"),ie(n)&&e&&ie(e.y)&&n>=e.y),"".concat(ic,"-top"),ie(n)&&e&&ie(e.y)&&n<e.y))}function pT(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(a&&ie(a[n]))return a[n];var d=r[n]-s-i,f=r[n]+i;if(e[n])return o[n]?d:f;if(o[n]){var p=d,m=l[n];return p<m?Math.max(f,l[n]):Math.max(d,l[n])}var g=f+s,v=l[n]+c;return g>v?Math.max(d,l[n]):Math.max(f,l[n])}function ree(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function nee(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,d,f;return o.height>0&&o.width>0&&r?(d=pT({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=pT({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=ree({translateX:d,translateY:f,useTranslate3d:s})):c=eee,{cssProperties:c,cssClasses:tee({translateX:d,translateY:f,coordinate:r})}}function qs(t){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(t)}function mT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mT(Object(r),!0).forEach(function(n){I0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yR(n.key),n)}}function oee(t,e,r){return e&&aee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function see(t,e,r){return e=ep(e),lee(t,gR()?Reflect.construct(e,r||[],ep(t).constructor):e.apply(t,r))}function lee(t,e){if(e&&(qs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cee(t)}function cee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gR=function(){return!!t})()}function ep(t){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ep(t)}function uee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N0(t,e)}function N0(t,e){return N0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},N0(t,e)}function I0(t,e,r){return e=yR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yR(t){var e=dee(t,"string");return qs(e)=="symbol"?e:e+""}function dee(t,e){if(qs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yT=1,fee=function(t){function e(){var r;iee(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=see(this,e,[].concat(i)),I0(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),I0(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&c!==void 0?c:0}})}}),r}return uee(e,t),oee(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>yT||Math.abs(n.height-this.state.lastBoundingBox.height)>yT)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,d=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,m=i.offset,g=i.position,v=i.reverseDirection,y=i.useTranslate3d,x=i.viewBox,b=i.wrapperStyle,k=nee({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),j=k.cssClasses,w=k.cssProperties,T=gT(gT({transition:p&&a?"transform ".concat(s,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return V.createElement("div",{tabIndex:-1,className:j,style:T,ref:function(E){n.wrapperNode=E}},c)}}])}(R.PureComponent),hee=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:hee()};function Gs(t){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(t)}function vT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(r),!0).forEach(function(n){e_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xR(n.key),n)}}function gee(t,e,r){return e&&mee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yee(t,e,r){return e=tp(e),vee(t,vR()?Reflect.construct(e,r||[],tp(t).constructor):e.apply(t,r))}function vee(t,e){if(e&&(Gs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xee(t)}function xee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vR=function(){return!!t})()}function tp(t){return tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tp(t)}function bee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O0(t,e)}function O0(t,e){return O0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},O0(t,e)}function e_(t,e,r){return e=xR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xR(t){var e=wee(t,"string");return Gs(e)=="symbol"?e:e+""}function wee(t,e){if(Gs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _ee(t){return t.dataKey}function kee(t,e){return V.isValidElement(t)?V.cloneElement(t,e):typeof t=="function"?V.createElement(t,e):V.createElement(XZ,e)}var hr=function(t){function e(){return pee(this,e),yee(this,e,arguments)}return bee(e,t),gee(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,d=i.coordinate,f=i.filterNull,p=i.isAnimationActive,m=i.offset,g=i.payload,v=i.payloadUniqBy,y=i.position,x=i.reverseDirection,b=i.useTranslate3d,k=i.viewBox,j=i.wrapperStyle,w=g??[];f&&w.length&&(w=lR(g.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),v,_ee));var T=w.length>0;return V.createElement(fee,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:p,active:a,coordinate:d,hasPayload:T,offset:m,position:y,reverseDirection:x,useTranslate3d:b,viewBox:k,wrapperStyle:j},kee(c,xT(xT({},this.props),{},{payload:w})))}}])}(R.PureComponent);e_(hr,"displayName","Tooltip");e_(hr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var See=Wn,Eee=function(){return See.Date.now()},Tee=Eee,Aee=/\s/;function Pee(t){for(var e=t.length;e--&&Aee.test(t.charAt(e)););return e}var Cee=Pee,jee=Cee,Nee=/^\s+/;function Iee(t){return t&&t.slice(0,jee(t)+1).replace(Nee,"")}var Oee=Iee,Ree=Oee,bT=Sa,Dee=_l,wT=NaN,Mee=/^[-+]0x[0-9a-f]+$/i,$ee=/^0b[01]+$/i,Lee=/^0o[0-7]+$/i,Vee=parseInt;function Fee(t){if(typeof t=="number")return t;if(Dee(t))return wT;if(bT(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=bT(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ree(t);var r=$ee.test(t);return r||Lee.test(t)?Vee(t.slice(2),r?2:8):Mee.test(t)?wT:+t}var bR=Fee,Bee=Sa,Sy=Tee,_T=bR,Uee="Expected a function",zee=Math.max,Wee=Math.min;function Hee(t,e,r){var n,i,a,o,s,l,c=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(Uee);e=_T(e)||0,Bee(r)&&(d=!!r.leading,f="maxWait"in r,a=f?zee(_T(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p);function m(T){var S=n,E=i;return n=i=void 0,c=T,o=t.apply(E,S),o}function g(T){return c=T,s=setTimeout(x,e),d?m(T):o}function v(T){var S=T-l,E=T-c,P=e-S;return f?Wee(P,a-E):P}function y(T){var S=T-l,E=T-c;return l===void 0||S>=e||S<0||f&&E>=a}function x(){var T=Sy();if(y(T))return b(T);s=setTimeout(x,v(T))}function b(T){return s=void 0,p&&n?m(T):(n=i=void 0,o)}function k(){s!==void 0&&clearTimeout(s),c=0,n=l=i=s=void 0}function j(){return s===void 0?o:b(Sy())}function w(){var T=Sy(),S=y(T);if(n=arguments,i=this,l=T,S){if(s===void 0)return g(l);if(f)return clearTimeout(s),s=setTimeout(x,e),m(l)}return s===void 0&&(s=setTimeout(x,e)),o}return w.cancel=k,w.flush=j,w}var qee=Hee,Gee=qee,Kee=Sa,Yee="Expected a function";function Qee(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Yee);return Kee(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Gee(t,e,{leading:n,maxWait:e,trailing:i})}var Xee=Qee;const wR=Qe(Xee);function Su(t){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(t)}function kT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kT(Object(r),!0).forEach(function(n){Jee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jee(t,e,r){return e=Zee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zee(t){var e=ete(t,"string");return Su(e)=="symbol"?e:e+""}function ete(t,e){if(Su(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tte(t,e){return ate(t)||ite(t,e)||nte(t,e)||rte()}function rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nte(t,e){if(t){if(typeof t=="string")return ST(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ST(t,e)}}function ST(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ite(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function ate(t){if(Array.isArray(t))return t}var cs=R.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,o=a===void 0?"100%":a,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,d=c===void 0?0:c,f=t.minHeight,p=t.maxHeight,m=t.children,g=t.debounce,v=g===void 0?0:g,y=t.id,x=t.className,b=t.onResize,k=t.style,j=k===void 0?{}:k,w=R.useRef(null),T=R.useRef();T.current=b,R.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=R.useState({containerWidth:i.width,containerHeight:i.height}),E=tte(S,2),P=E[0],N=E[1],I=R.useCallback(function(A,$){N(function(L){var U=Math.round(A),z=Math.round($);return L.containerWidth===U&&L.containerHeight===z?L:{containerWidth:U,containerHeight:z}})},[]);R.useEffect(function(){var A=function(F){var B,K=F[0].contentRect,H=K.width,ee=K.height;I(H,ee),(B=T.current)===null||B===void 0||B.call(T,H,ee)};v>0&&(A=wR(A,v,{trailing:!0,leading:!1}));var $=new ResizeObserver(A),L=w.current.getBoundingClientRect(),U=L.width,z=L.height;return I(U,z),$.observe(w.current),function(){$.disconnect()}},[I,v]);var O=R.useMemo(function(){var A=P.containerWidth,$=P.containerHeight;if(A<0||$<0)return null;di(qa(o)||qa(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),di(!r||r>0,"The aspect(%s) must be greater than zero.",r);var L=qa(o)?A:o,U=qa(l)?$:l;r&&r>0&&(L?U=L/r:U&&(L=U*r),p&&U>p&&(U=p)),di(L>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,U,o,l,d,f,r);var z=!Array.isArray(m)&&ui(m.type).endsWith("Chart");return V.Children.map(m,function(M){return V.isValidElement(M)?R.cloneElement(M,vf({width:L,height:U},z?{style:vf({height:"100%",width:"100%",maxHeight:U,maxWidth:L},M.props.style)}:{})):M})},[r,m,l,p,f,d,P,o]);return V.createElement("div",{id:y?"".concat(y):void 0,className:Re("recharts-responsive-container",x),style:vf(vf({},j),{},{width:o,height:l,minWidth:d,minHeight:f,maxHeight:p}),ref:w},O)}),t_=function(e){return null};t_.displayName="Cell";function Eu(t){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eu(t)}function ET(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function R0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(r),!0).forEach(function(n){ote(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ET(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ote(t,e,r){return e=ste(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ste(t){var e=lte(t,"string");return Eu(e)=="symbol"?e:e+""}function lte(t,e){if(Eu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bo={widthCache:{},cacheCount:0},cte=2e3,ute={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TT="recharts_measurement_span";function dte(t){var e=R0({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Fc=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||jl.isSsr)return{width:0,height:0};var n=dte(r),i=JSON.stringify({text:e,copyStyle:n});if(Bo.widthCache[i])return Bo.widthCache[i];try{var a=document.getElementById(TT);a||(a=document.createElement("span"),a.setAttribute("id",TT),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=R0(R0({},ute),n);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Bo.widthCache[i]=l,++Bo.cacheCount>cte&&(Bo.cacheCount=0,Bo.widthCache={}),l}catch{return{width:0,height:0}}},fte=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Tu(t){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(t)}function rp(t,e){return gte(t)||mte(t,e)||pte(t,e)||hte()}function hte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pte(t,e){if(t){if(typeof t=="string")return AT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AT(t,e)}}function AT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function gte(t){if(Array.isArray(t))return t}function yte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xte(n.key),n)}}function vte(t,e,r){return e&&PT(t.prototype,e),r&&PT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xte(t){var e=bte(t,"string");return Tu(e)=="symbol"?e:e+""}function bte(t,e){if(Tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wte=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_te=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_R={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kte=Object.keys(_R),us="NaN";function Ste(t,e){return t*_R[e]}var xf=function(){function t(e,r){yte(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!wte.test(r)&&(this.num=NaN,this.unit=""),kte.includes(r)&&(this.num=Ste(e,r),this.unit="px")}return vte(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=_te.exec(r))!==null&&n!==void 0?n:[],a=rp(i,3),o=a[1],s=a[2];return new t(parseFloat(o),s??"")}}])}();function kR(t){if(t.includes(us))return us;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=CT.exec(e))!==null&&r!==void 0?r:[],i=rp(n,4),a=i[1],o=i[2],s=i[3],l=xf.parse(a??""),c=xf.parse(s??""),d=o==="*"?l.multiply(c):l.divide(c);if(d.isNaN())return us;e=e.replace(CT,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=jT.exec(e))!==null&&f!==void 0?f:[],m=rp(p,4),g=m[1],v=m[2],y=m[3],x=xf.parse(g??""),b=xf.parse(y??""),k=v==="+"?x.add(b):x.subtract(b);if(k.isNaN())return us;e=e.replace(jT,k.toString())}return e}var NT=/\(([^()]*)\)/;function Ete(t){for(var e=t;e.includes("(");){var r=NT.exec(e),n=rp(r,2),i=n[1];e=e.replace(NT,kR(i))}return e}function Tte(t){var e=t.replace(/\s+/g,"");return e=Ete(e),e=kR(e),e}function Ate(t){try{return Tte(t)}catch{return us}}function Ey(t){var e=Ate(t.slice(5,-1));return e===us?"":e}var Pte=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Cte=["dx","dy","angle","className","breakAll"];function D0(){return D0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D0.apply(this,arguments)}function IT(t,e){if(t==null)return{};var r=jte(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jte(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function OT(t,e){return Rte(t)||Ote(t,e)||Ite(t,e)||Nte()}function Nte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(t,e){if(t){if(typeof t=="string")return RT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RT(t,e)}}function RT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ote(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Rte(t){if(Array.isArray(t))return t}var SR=/[ \f\n\r\t\v\u2028\u2029]+/,ER=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];Ee(r)||(n?a=r.toString().split(""):a=r.toString().split(SR));var o=a.map(function(l){return{word:l,width:Fc(l,i).width}}),s=n?0:Fc("",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Dte=function(e,r,n,i,a){var o=e.maxLines,s=e.children,l=e.style,c=e.breakAll,d=ie(o),f=s,p=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(U,z){var M=z.word,F=z.width,B=U[U.length-1];if(B&&(i==null||a||B.width+F+n<Number(i)))B.words.push(M),B.width+=F+n;else{var K={words:[M],width:F};U.push(K)}return U},[])},m=p(r),g=function(L){return L.reduce(function(U,z){return U.width>z.width?U:z})};if(!d)return m;for(var v="",y=function(L){var U=f.slice(0,L),z=ER({breakAll:c,style:l,children:U+v}).wordsWithComputedWidth,M=p(z),F=M.length>o||g(M).width>Number(i);return[F,M]},x=0,b=f.length-1,k=0,j;x<=b&&k<=f.length-1;){var w=Math.floor((x+b)/2),T=w-1,S=y(T),E=OT(S,2),P=E[0],N=E[1],I=y(w),O=OT(I,1),A=O[0];if(!P&&!A&&(x=w+1),P&&A&&(b=w-1),!P&&A){j=N;break}k++}return j||m},DT=function(e){var r=Ee(e)?[]:e.toString().split(SR);return[{words:r}]},Mte=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((r||n)&&!jl.isSsr){var l,c,d=ER({breakAll:o,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;l=f,c=p}else return DT(i);return Dte({breakAll:o,children:i,maxLines:s,style:a},l,c,r,n)}return DT(i)},MT="#808080",np=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,m=p===void 0?"start":p,g=e.verticalAnchor,v=g===void 0?"end":g,y=e.fill,x=y===void 0?MT:y,b=IT(e,Pte),k=R.useMemo(function(){return Mte({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),j=b.dx,w=b.dy,T=b.angle,S=b.className,E=b.breakAll,P=IT(b,Cte);if(!Rt(n)||!Rt(a))return null;var N=n+(ie(j)?j:0),I=a+(ie(w)?w:0),O;switch(v){case"start":O=Ey("calc(".concat(c,")"));break;case"middle":O=Ey("calc(".concat((k.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:O=Ey("calc(".concat(k.length-1," * -").concat(s,")"));break}var A=[];if(f){var $=k[0].width,L=b.width;A.push("scale(".concat((ie(L)?L/$:1)/$,")"))}return T&&A.push("rotate(".concat(T,", ").concat(N,", ").concat(I,")")),A.length&&(P.transform=A.join(" ")),V.createElement("text",D0({},Ce(P,!0),{x:N,y:I,className:Re("recharts-text",S),textAnchor:m,fill:x.includes("url")?MT:x}),k.map(function(U,z){var M=U.words.join(E?"":" ");return V.createElement("tspan",{x:N,dy:z===0?O:s,key:"".concat(M,"-").concat(z)},M)}))};function da(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $te(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r_(t){let e,r,n;t.length!==2?(e=da,r=(s,l)=>da(t(s),l),n=(s,l)=>t(s)-l):(e=t===da||t===$te?t:Lte,r=t,n=t);function i(s,l,c=0,d=s.length){if(c<d){if(e(l,l)!==0)return d;do{const f=c+d>>>1;r(s[f],l)<0?c=f+1:d=f}while(c<d)}return c}function a(s,l,c=0,d=s.length){if(c<d){if(e(l,l)!==0)return d;do{const f=c+d>>>1;r(s[f],l)<=0?c=f+1:d=f}while(c<d)}return c}function o(s,l,c=0,d=s.length){const f=i(s,l,c,d-1);return f>c&&n(s[f-1],l)>-n(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function Lte(){return 0}function TR(t){return t===null?NaN:+t}function*Vte(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Fte=r_(da),Ed=Fte.right;r_(TR).center;class $T extends Map{constructor(e,r=zte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(LT(this,e))}has(e){return super.has(LT(this,e))}set(e,r){return super.set(Bte(this,e),r)}delete(e){return super.delete(Ute(this,e))}}function LT({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Bte({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Ute({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function zte(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Wte(t=da){if(t===da)return AR;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function AR(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Hte=Math.sqrt(50),qte=Math.sqrt(10),Gte=Math.sqrt(2);function ip(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=Hte?10:a>=qte?5:a>=Gte?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=r&&r<2?ip(t,e,r*2):[s,l,c]}function M0(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?ip(e,t,r):ip(t,e,r);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(n)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function $0(t,e,r){return e=+e,t=+t,r=+r,ip(t,e,r)[2]}function L0(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?$0(e,t,r):$0(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function VT(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function FT(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function PR(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?AR:Wte(i);n>r;){if(n-r>600){const l=n-r+1,c=e-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(r,Math.floor(e-c*f/l+p)),g=Math.min(n,Math.floor(e+(l-c)*f/l+p));PR(t,e,m,g,i)}const a=t[e];let o=r,s=n;for(ac(t,r,e),i(t[n],a)>0&&ac(t,r,n);o<s;){for(ac(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[r],a)===0?ac(t,r,s):(++s,ac(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function ac(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Kte(t,e,r){if(t=Float64Array.from(Vte(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return FT(t);if(e>=1)return VT(t);var n,i=(n-1)*e,a=Math.floor(i),o=VT(PR(t,a).subarray(0,a+1)),s=FT(t.subarray(a+1));return o+(s-o)*(i-a)}}function Yte(t,e,r=TR){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),s=+r(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Qte(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function an(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ni(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const V0=Symbol("implicit");function n_(){var t=new $T,e=[],r=[],n=V0;function i(a){let o=t.get(a);if(o===void 0){if(n!==V0)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new $T;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return n_(e,r).unknown(n)},an.apply(i,arguments),i}function Au(){var t=n_().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,s=!1,l=0,c=0,d=.5;delete t.unknown;function f(){var p=e().length,m=i<n,g=m?i:n,v=m?n:i;a=(v-g)/Math.max(1,p-l+c*2),s&&(a=Math.floor(a)),g+=(v-g-a*(p-l))*d,o=a*(1-l),s&&(g=Math.round(g),o=Math.round(o));var y=Qte(p).map(function(x){return g+a*x});return r(m?y.reverse():y)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(p){return arguments.length?(s=!!p,f()):s},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return Au(e(),[n,i]).round(s).paddingInner(l).paddingOuter(c).align(d)},an.apply(f(),arguments)}function CR(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return CR(e())},t}function Bc(){return CR(Au.apply(null,arguments).paddingInner(1))}function i_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function jR(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Td(){}var Pu=.7,ap=1/Pu,Ts="\\s*([+-]?\\d+)\\s*",Cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xte=/^#([0-9a-f]{3,8})$/,Jte=new RegExp(`^rgb\\(${Ts},${Ts},${Ts}\\)$`),Zte=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),ere=new RegExp(`^rgba\\(${Ts},${Ts},${Ts},${Cu}\\)$`),tre=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Cu}\\)$`),rre=new RegExp(`^hsl\\(${Cu},${Vn},${Vn}\\)$`),nre=new RegExp(`^hsla\\(${Cu},${Vn},${Vn},${Cu}\\)$`),BT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i_(Td,ju,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:UT,formatHex:UT,formatHex8:ire,formatHsl:are,formatRgb:zT,toString:zT});function UT(){return this.rgb().formatHex()}function ire(){return this.rgb().formatHex8()}function are(){return NR(this).formatHsl()}function zT(){return this.rgb().formatRgb()}function ju(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Xte.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?WT(e):r===3?new Er(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?bf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?bf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Jte.exec(t))?new Er(e[1],e[2],e[3],1):(e=Zte.exec(t))?new Er(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ere.exec(t))?bf(e[1],e[2],e[3],e[4]):(e=tre.exec(t))?bf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rre.exec(t))?GT(e[1],e[2]/100,e[3]/100,1):(e=nre.exec(t))?GT(e[1],e[2]/100,e[3]/100,e[4]):BT.hasOwnProperty(t)?WT(BT[t]):t==="transparent"?new Er(NaN,NaN,NaN,0):null}function WT(t){return new Er(t>>16&255,t>>8&255,t&255,1)}function bf(t,e,r,n){return n<=0&&(t=e=r=NaN),new Er(t,e,r,n)}function ore(t){return t instanceof Td||(t=ju(t)),t?(t=t.rgb(),new Er(t.r,t.g,t.b,t.opacity)):new Er}function F0(t,e,r,n){return arguments.length===1?ore(t):new Er(t,e,r,n??1)}function Er(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}i_(Er,F0,jR(Td,{brighter(t){return t=t==null?ap:Math.pow(ap,t),new Er(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pu:Math.pow(Pu,t),new Er(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Er(to(this.r),to(this.g),to(this.b),op(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HT,formatHex:HT,formatHex8:sre,formatRgb:qT,toString:qT}));function HT(){return`#${Ga(this.r)}${Ga(this.g)}${Ga(this.b)}`}function sre(){return`#${Ga(this.r)}${Ga(this.g)}${Ga(this.b)}${Ga((isNaN(this.opacity)?1:this.opacity)*255)}`}function qT(){const t=op(this.opacity);return`${t===1?"rgb(":"rgba("}${to(this.r)}, ${to(this.g)}, ${to(this.b)}${t===1?")":`, ${t})`}`}function op(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function to(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ga(t){return t=to(t),(t<16?"0":"")+t.toString(16)}function GT(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new yn(t,e,r,n)}function NR(t){if(t instanceof yn)return new yn(t.h,t.s,t.l,t.opacity);if(t instanceof Td||(t=ju(t)),!t)return new yn;if(t instanceof yn)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new yn(o,s,l,t.opacity)}function lre(t,e,r,n){return arguments.length===1?NR(t):new yn(t,e,r,n??1)}function yn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}i_(yn,lre,jR(Td,{brighter(t){return t=t==null?ap:Math.pow(ap,t),new yn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pu:Math.pow(Pu,t),new yn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Er(Ty(t>=240?t-240:t+120,i,n),Ty(t,i,n),Ty(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new yn(KT(this.h),wf(this.s),wf(this.l),op(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=op(this.opacity);return`${t===1?"hsl(":"hsla("}${KT(this.h)}, ${wf(this.s)*100}%, ${wf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function KT(t){return t=(t||0)%360,t<0?t+360:t}function wf(t){return Math.max(0,Math.min(1,t||0))}function Ty(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const a_=t=>()=>t;function cre(t,e){return function(r){return t+r*e}}function ure(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function dre(t){return(t=+t)==1?IR:function(e,r){return r-e?ure(e,r,t):a_(isNaN(e)?r:e)}}function IR(t,e){var r=e-t;return r?cre(t,r):a_(isNaN(t)?e:t)}const YT=function t(e){var r=dre(e);function n(i,a){var o=r((i=F0(i)).r,(a=F0(a)).r),s=r(i.g,a.g),l=r(i.b,a.b),c=IR(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=s(d),i.b=l(d),i.opacity=c(d),i+""}}return n.gamma=t,n}(1);function fre(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function hre(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pre(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=Nl(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function mre(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function sp(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function gre(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Nl(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var B0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ay=new RegExp(B0.source,"g");function yre(t){return function(){return t}}function vre(t){return function(e){return t(e)+""}}function xre(t,e){var r=B0.lastIndex=Ay.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(n=B0.exec(t))&&(i=Ay.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:sp(n,i)})),r=Ay.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?vre(l[0].x):yre(e):(e=l.length,function(c){for(var d=0,f;d<e;++d)s[(f=l[d]).i]=f.x(c);return s.join("")})}function Nl(t,e){var r=typeof e,n;return e==null||r==="boolean"?a_(e):(r==="number"?sp:r==="string"?(n=ju(e))?(e=n,YT):xre:e instanceof ju?YT:e instanceof Date?mre:hre(e)?fre:Array.isArray(e)?pre:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gre:sp)(t,e)}function o_(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function bre(t,e){e===void 0&&(e=t,t=Nl);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[s](o-s)}}function wre(t){return function(){return t}}function lp(t){return+t}var QT=[0,1];function pr(t){return t}function U0(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:wre(isNaN(e)?NaN:.5)}function _re(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function kre(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=U0(i,n),a=r(o,a)):(n=U0(n,i),a=r(a,o)),function(s){return a(n(s))}}function Sre(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=U0(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(s){var l=Ed(t,s,1,n)-1;return a[l](i[l](s))}}function Ad(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ym(){var t=QT,e=QT,r=Nl,n,i,a,o=pr,s,l,c;function d(){var p=Math.min(t.length,e.length);return o!==pr&&(o=_re(t[0],t[p-1])),s=p>2?Sre:kre,l=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=s(t.map(n),e,r)))(n(o(p)))}return f.invert=function(p){return o(i((c||(c=s(e,t.map(n),sp)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,lp),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),r=o_,d()},f.clamp=function(p){return arguments.length?(o=p?!0:pr,d()):o!==pr},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return n=p,i=m,d()}}function s_(){return Ym()(pr,pr)}function Ere(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cp(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ks(t){return t=cp(Math.abs(t)),t?t[1]:NaN}function Tre(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Are(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Pre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nu(t){if(!(e=Pre.exec(t)))throw new Error("invalid format: "+t);var e;return new l_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nu.prototype=l_.prototype;function l_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}l_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cre(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var OR;function jre(t,e){var r=cp(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(OR=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+cp(t,Math.max(0,e+a-1))[0]}function XT(t,e){var r=cp(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const JT={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ere,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>XT(t*100,e),r:XT,s:jre,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ZT(t){return t}var eA=Array.prototype.map,tA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nre(t){var e=t.grouping===void 0||t.thousands===void 0?ZT:Tre(eA.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ZT:Are(eA.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Nu(f);var p=f.fill,m=f.align,g=f.sign,v=f.symbol,y=f.zero,x=f.width,b=f.comma,k=f.precision,j=f.trim,w=f.type;w==="n"?(b=!0,w="g"):JT[w]||(k===void 0&&(k=12),j=!0,w="g"),(y||p==="0"&&m==="=")&&(y=!0,p="0",m="=");var T=v==="$"?r:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=v==="$"?n:/[%p]/.test(w)?o:"",E=JT[w],P=/[defgprs%]/.test(w);k=k===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function N(I){var O=T,A=S,$,L,U;if(w==="c")A=E(I)+A,I="";else{I=+I;var z=I<0||1/I<0;if(I=isNaN(I)?l:E(Math.abs(I),k),j&&(I=Cre(I)),z&&+I==0&&g!=="+"&&(z=!1),O=(z?g==="("?g:s:g==="-"||g==="("?"":g)+O,A=(w==="s"?tA[8+OR/3]:"")+A+(z&&g==="("?")":""),P){for($=-1,L=I.length;++$<L;)if(U=I.charCodeAt($),48>U||U>57){A=(U===46?i+I.slice($+1):I.slice($))+A,I=I.slice(0,$);break}}}b&&!y&&(I=e(I,1/0));var M=O.length+I.length+A.length,F=M<x?new Array(x-M+1).join(p):"";switch(b&&y&&(I=e(F+I,F.length?x-A.length:1/0),F=""),m){case"<":I=O+I+A+F;break;case"=":I=O+F+I+A;break;case"^":I=F.slice(0,M=F.length>>1)+O+I+A+F.slice(M);break;default:I=F+O+I+A;break}return a(I)}return N.toString=function(){return f+""},N}function d(f,p){var m=c((f=Nu(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ks(p)/3)))*3,v=Math.pow(10,-g),y=tA[8+g/3];return function(x){return m(v*x)+y}}return{format:c,formatPrefix:d}}var _f,c_,RR;Ire({thousands:",",grouping:[3],currency:["$",""]});function Ire(t){return _f=Nre(t),c_=_f.format,RR=_f.formatPrefix,_f}function Ore(t){return Math.max(0,-Ks(Math.abs(t)))}function Rre(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ks(e)/3)))*3-Ks(Math.abs(t)))}function Dre(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ks(e)-Ks(t))+1}function DR(t,e,r,n){var i=L0(t,e,r),a;switch(n=Nu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=Rre(i,o))&&(n.precision=a),RR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Dre(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Ore(i))&&(n.precision=a-(n.type==="%")*2);break}}return c_(n)}function Ta(t){var e=t.domain;return t.ticks=function(r){var n=e();return M0(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return DR(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],s=n[a],l,c,d=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);d-- >0;){if(c=$0(o,s,r),c===l)return n[i]=o,n[a]=s,e(n);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function up(){var t=s_();return t.copy=function(){return Ad(t,up())},an.apply(t,arguments),Ta(t)}function MR(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,lp),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return MR(t).unknown(e)},t=arguments.length?Array.from(t,lp):[0,1],Ta(r)}function $R(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function rA(t){return Math.log(t)}function nA(t){return Math.exp(t)}function Mre(t){return-Math.log(-t)}function $re(t){return-Math.exp(-t)}function Lre(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vre(t){return t===10?Lre:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Fre(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function iA(t){return(e,r)=>-t(-e,r)}function u_(t){const e=t(rA,nA),r=e.domain;let n=10,i,a;function o(){return i=Fre(n),a=Vre(n),r()[0]<0?(i=iA(i),a=iA(a),t(Mre,$re)):t(rA,nA),e}return e.base=function(s){return arguments.length?(n=+s,o()):n},e.domain=function(s){return arguments.length?(r(s),o()):r()},e.ticks=s=>{const l=r();let c=l[0],d=l[l.length-1];const f=d<c;f&&([c,d]=[d,c]);let p=i(c),m=i(d),g,v;const y=s==null?10:+s;let x=[];if(!(n%1)&&m-p<y){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(g=1;g<n;++g)if(v=p<0?g/a(-p):g*a(p),!(v<c)){if(v>d)break;x.push(v)}}else for(;p<=m;++p)for(g=n-1;g>=1;--g)if(v=p>0?g/a(-p):g*a(p),!(v<c)){if(v>d)break;x.push(v)}x.length*2<y&&(x=M0(c,d,y))}else x=M0(p,m,Math.min(m-p,y)).map(a);return f?x.reverse():x},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Nu(l)).precision==null&&(l.trim=!0),l=c_(l)),s===1/0)return l;const c=Math.max(1,n*s/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=c?l(d):""}},e.nice=()=>r($R(r(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function LR(){const t=u_(Ym()).domain([1,10]);return t.copy=()=>Ad(t,LR()).base(t.base()),an.apply(t,arguments),t}function aA(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function oA(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function d_(t){var e=1,r=t(aA(e),oA(e));return r.constant=function(n){return arguments.length?t(aA(e=+n),oA(e)):e},Ta(r)}function VR(){var t=d_(Ym());return t.copy=function(){return Ad(t,VR()).constant(t.constant())},an.apply(t,arguments)}function sA(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Bre(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ure(t){return t<0?-t*t:t*t}function f_(t){var e=t(pr,pr),r=1;function n(){return r===1?t(pr,pr):r===.5?t(Bre,Ure):t(sA(r),sA(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Ta(e)}function h_(){var t=f_(Ym());return t.copy=function(){return Ad(t,h_()).exponent(t.exponent())},an.apply(t,arguments),t}function zre(){return h_.apply(null,arguments).exponent(.5)}function lA(t){return Math.sign(t)*t*t}function Wre(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function FR(){var t=s_(),e=[0,1],r=!1,n;function i(a){var o=Wre(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(lA(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,lp)).map(lA)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return FR(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},an.apply(i,arguments),Ta(i)}function BR(){var t=[],e=[],r=[],n;function i(){var o=0,s=Math.max(1,e.length);for(r=new Array(s-1);++o<s;)r[o-1]=Yte(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?n:e[Ed(r,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(da),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return BR().domain(t).range(e).unknown(n)},an.apply(a,arguments)}function UR(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[Ed(n,l,0,r)]:a}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,n[0]]:c>=r?[n[r-1],e]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return UR().domain([t,e]).range(i).unknown(a)},an.apply(Ta(o),arguments)}function zR(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Ed(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zR().domain(t).range(e).unknown(r)},an.apply(i,arguments)}const Py=new Date,Cy=new Date;function Mt(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return l},i.filter=a=>Mt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(Py.setTime(+a),Cy.setTime(+o),t(Py),t(Cy),Math.floor(r(Py,Cy))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const dp=Mt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);dp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Mt(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):dp);dp.range;const ni=1e3,Qr=ni*60,ii=Qr*60,wi=ii*24,p_=wi*7,cA=wi*30,jy=wi*365,Ka=Mt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ni)},(t,e)=>(e-t)/ni,t=>t.getUTCSeconds());Ka.range;const m_=Mt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ni)},(t,e)=>{t.setTime(+t+e*Qr)},(t,e)=>(e-t)/Qr,t=>t.getMinutes());m_.range;const g_=Mt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Qr)},(t,e)=>(e-t)/Qr,t=>t.getUTCMinutes());g_.range;const y_=Mt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ni-t.getMinutes()*Qr)},(t,e)=>{t.setTime(+t+e*ii)},(t,e)=>(e-t)/ii,t=>t.getHours());y_.range;const v_=Mt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ii)},(t,e)=>(e-t)/ii,t=>t.getUTCHours());v_.range;const Pd=Mt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qr)/wi,t=>t.getDate()-1);Pd.range;const Qm=Mt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wi,t=>t.getUTCDate()-1);Qm.range;const WR=Mt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wi,t=>Math.floor(t/wi));WR.range;function jo(t){return Mt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Qr)/p_)}const Xm=jo(0),fp=jo(1),Hre=jo(2),qre=jo(3),Ys=jo(4),Gre=jo(5),Kre=jo(6);Xm.range;fp.range;Hre.range;qre.range;Ys.range;Gre.range;Kre.range;function No(t){return Mt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/p_)}const Jm=No(0),hp=No(1),Yre=No(2),Qre=No(3),Qs=No(4),Xre=No(5),Jre=No(6);Jm.range;hp.range;Yre.range;Qre.range;Qs.range;Xre.range;Jre.range;const x_=Mt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());x_.range;const b_=Mt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());b_.range;const _i=Mt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());_i.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});_i.range;const ki=Mt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ki.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ki.range;function HR(t,e,r,n,i,a){const o=[[Ka,1,ni],[Ka,5,5*ni],[Ka,15,15*ni],[Ka,30,30*ni],[a,1,Qr],[a,5,5*Qr],[a,15,15*Qr],[a,30,30*Qr],[i,1,ii],[i,3,3*ii],[i,6,6*ii],[i,12,12*ii],[n,1,wi],[n,2,2*wi],[r,1,p_],[e,1,cA],[e,3,3*cA],[t,1,jy]];function s(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const m=f&&typeof f.range=="function"?f:l(c,d,f),g=m?m.range(c,+d+1):[];return p?g.reverse():g}function l(c,d,f){const p=Math.abs(d-c)/f,m=r_(([,,y])=>y).right(o,p);if(m===o.length)return t.every(L0(c/jy,d/jy,f));if(m===0)return dp.every(Math.max(L0(c,d,f),1));const[g,v]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return g.every(v)}return[s,l]}const[Zre,ene]=HR(ki,b_,Jm,WR,v_,g_),[tne,rne]=HR(_i,x_,Xm,Pd,y_,m_);function Ny(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Iy(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function oc(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function nne(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=sc(i),d=lc(i),f=sc(a),p=lc(a),m=sc(o),g=lc(o),v=sc(s),y=lc(s),x=sc(l),b=lc(l),k={a:z,A:M,b:F,B,c:null,d:mA,e:mA,f:Tne,g:Mne,G:Lne,H:kne,I:Sne,j:Ene,L:qR,m:Ane,M:Pne,p:K,q:H,Q:vA,s:xA,S:Cne,u:jne,U:Nne,V:Ine,w:One,W:Rne,x:null,X:null,y:Dne,Y:$ne,Z:Vne,"%":yA},j={a:ee,A:ce,b:xe,B:qe,c:null,d:gA,e:gA,f:zne,g:Zne,G:tie,H:Fne,I:Bne,j:Une,L:KR,m:Wne,M:Hne,p:et,q:Ne,Q:vA,s:xA,S:qne,u:Gne,U:Kne,V:Yne,w:Qne,W:Xne,x:null,X:null,y:Jne,Y:eie,Z:rie,"%":yA},w={a:N,A:I,b:O,B:A,c:$,d:hA,e:hA,f:xne,g:fA,G:dA,H:pA,I:pA,j:mne,L:vne,m:pne,M:gne,p:P,q:hne,Q:wne,s:_ne,S:yne,u:lne,U:cne,V:une,w:sne,W:dne,x:L,X:U,y:fA,Y:dA,Z:fne,"%":bne};k.x=T(r,k),k.X=T(n,k),k.c=T(e,k),j.x=T(r,j),j.X=T(n,j),j.c=T(e,j);function T(re,pe){return function(ye){var Q=[],Fe=-1,ke=0,Be=re.length,J,me,tt;for(ye instanceof Date||(ye=new Date(+ye));++Fe<Be;)re.charCodeAt(Fe)===37&&(Q.push(re.slice(ke,Fe)),(me=uA[J=re.charAt(++Fe)])!=null?J=re.charAt(++Fe):me=J==="e"?" ":"0",(tt=pe[J])&&(J=tt(ye,me)),Q.push(J),ke=Fe+1);return Q.push(re.slice(ke,Fe)),Q.join("")}}function S(re,pe){return function(ye){var Q=oc(1900,void 0,1),Fe=E(Q,re,ye+="",0),ke,Be;if(Fe!=ye.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(pe&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(ke=Iy(oc(Q.y,0,1)),Be=ke.getUTCDay(),ke=Be>4||Be===0?hp.ceil(ke):hp(ke),ke=Qm.offset(ke,(Q.V-1)*7),Q.y=ke.getUTCFullYear(),Q.m=ke.getUTCMonth(),Q.d=ke.getUTCDate()+(Q.w+6)%7):(ke=Ny(oc(Q.y,0,1)),Be=ke.getDay(),ke=Be>4||Be===0?fp.ceil(ke):fp(ke),ke=Pd.offset(ke,(Q.V-1)*7),Q.y=ke.getFullYear(),Q.m=ke.getMonth(),Q.d=ke.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),Be="Z"in Q?Iy(oc(Q.y,0,1)).getUTCDay():Ny(oc(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(Be+5)%7:Q.w+Q.U*7-(Be+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,Iy(Q)):Ny(Q)}}function E(re,pe,ye,Q){for(var Fe=0,ke=pe.length,Be=ye.length,J,me;Fe<ke;){if(Q>=Be)return-1;if(J=pe.charCodeAt(Fe++),J===37){if(J=pe.charAt(Fe++),me=w[J in uA?pe.charAt(Fe++):J],!me||(Q=me(re,ye,Q))<0)return-1}else if(J!=ye.charCodeAt(Q++))return-1}return Q}function P(re,pe,ye){var Q=c.exec(pe.slice(ye));return Q?(re.p=d.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function N(re,pe,ye){var Q=m.exec(pe.slice(ye));return Q?(re.w=g.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function I(re,pe,ye){var Q=f.exec(pe.slice(ye));return Q?(re.w=p.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function O(re,pe,ye){var Q=x.exec(pe.slice(ye));return Q?(re.m=b.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function A(re,pe,ye){var Q=v.exec(pe.slice(ye));return Q?(re.m=y.get(Q[0].toLowerCase()),ye+Q[0].length):-1}function $(re,pe,ye){return E(re,e,pe,ye)}function L(re,pe,ye){return E(re,r,pe,ye)}function U(re,pe,ye){return E(re,n,pe,ye)}function z(re){return o[re.getDay()]}function M(re){return a[re.getDay()]}function F(re){return l[re.getMonth()]}function B(re){return s[re.getMonth()]}function K(re){return i[+(re.getHours()>=12)]}function H(re){return 1+~~(re.getMonth()/3)}function ee(re){return o[re.getUTCDay()]}function ce(re){return a[re.getUTCDay()]}function xe(re){return l[re.getUTCMonth()]}function qe(re){return s[re.getUTCMonth()]}function et(re){return i[+(re.getUTCHours()>=12)]}function Ne(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var pe=T(re+="",k);return pe.toString=function(){return re},pe},parse:function(re){var pe=S(re+="",!1);return pe.toString=function(){return re},pe},utcFormat:function(re){var pe=T(re+="",j);return pe.toString=function(){return re},pe},utcParse:function(re){var pe=S(re+="",!0);return pe.toString=function(){return re},pe}}}var uA={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,ine=/^%/,ane=/[\\^$*+?|[\]().{}]/g;function $e(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function one(t){return t.replace(ane,"\\$&")}function sc(t){return new RegExp("^(?:"+t.map(one).join("|")+")","i")}function lc(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function sne(t,e,r){var n=Bt.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function lne(t,e,r){var n=Bt.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function cne(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function une(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function dne(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function dA(t,e,r){var n=Bt.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function fA(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function fne(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function hne(t,e,r){var n=Bt.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function pne(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function hA(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function mne(t,e,r){var n=Bt.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function pA(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function gne(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function yne(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function vne(t,e,r){var n=Bt.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function xne(t,e,r){var n=Bt.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function bne(t,e,r){var n=ine.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function wne(t,e,r){var n=Bt.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function _ne(t,e,r){var n=Bt.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function mA(t,e){return $e(t.getDate(),e,2)}function kne(t,e){return $e(t.getHours(),e,2)}function Sne(t,e){return $e(t.getHours()%12||12,e,2)}function Ene(t,e){return $e(1+Pd.count(_i(t),t),e,3)}function qR(t,e){return $e(t.getMilliseconds(),e,3)}function Tne(t,e){return qR(t,e)+"000"}function Ane(t,e){return $e(t.getMonth()+1,e,2)}function Pne(t,e){return $e(t.getMinutes(),e,2)}function Cne(t,e){return $e(t.getSeconds(),e,2)}function jne(t){var e=t.getDay();return e===0?7:e}function Nne(t,e){return $e(Xm.count(_i(t)-1,t),e,2)}function GR(t){var e=t.getDay();return e>=4||e===0?Ys(t):Ys.ceil(t)}function Ine(t,e){return t=GR(t),$e(Ys.count(_i(t),t)+(_i(t).getDay()===4),e,2)}function One(t){return t.getDay()}function Rne(t,e){return $e(fp.count(_i(t)-1,t),e,2)}function Dne(t,e){return $e(t.getFullYear()%100,e,2)}function Mne(t,e){return t=GR(t),$e(t.getFullYear()%100,e,2)}function $ne(t,e){return $e(t.getFullYear()%1e4,e,4)}function Lne(t,e){var r=t.getDay();return t=r>=4||r===0?Ys(t):Ys.ceil(t),$e(t.getFullYear()%1e4,e,4)}function Vne(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$e(e/60|0,"0",2)+$e(e%60,"0",2)}function gA(t,e){return $e(t.getUTCDate(),e,2)}function Fne(t,e){return $e(t.getUTCHours(),e,2)}function Bne(t,e){return $e(t.getUTCHours()%12||12,e,2)}function Une(t,e){return $e(1+Qm.count(ki(t),t),e,3)}function KR(t,e){return $e(t.getUTCMilliseconds(),e,3)}function zne(t,e){return KR(t,e)+"000"}function Wne(t,e){return $e(t.getUTCMonth()+1,e,2)}function Hne(t,e){return $e(t.getUTCMinutes(),e,2)}function qne(t,e){return $e(t.getUTCSeconds(),e,2)}function Gne(t){var e=t.getUTCDay();return e===0?7:e}function Kne(t,e){return $e(Jm.count(ki(t)-1,t),e,2)}function YR(t){var e=t.getUTCDay();return e>=4||e===0?Qs(t):Qs.ceil(t)}function Yne(t,e){return t=YR(t),$e(Qs.count(ki(t),t)+(ki(t).getUTCDay()===4),e,2)}function Qne(t){return t.getUTCDay()}function Xne(t,e){return $e(hp.count(ki(t)-1,t),e,2)}function Jne(t,e){return $e(t.getUTCFullYear()%100,e,2)}function Zne(t,e){return t=YR(t),$e(t.getUTCFullYear()%100,e,2)}function eie(t,e){return $e(t.getUTCFullYear()%1e4,e,4)}function tie(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Qs(t):Qs.ceil(t),$e(t.getUTCFullYear()%1e4,e,4)}function rie(){return"+0000"}function yA(){return"%"}function vA(t){return+t}function xA(t){return Math.floor(+t/1e3)}var Uo,QR,XR;nie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nie(t){return Uo=nne(t),QR=Uo.format,Uo.parse,XR=Uo.utcFormat,Uo.utcParse,Uo}function iie(t){return new Date(t)}function aie(t){return t instanceof Date?+t:+new Date(+t)}function w_(t,e,r,n,i,a,o,s,l,c){var d=s_(),f=d.invert,p=d.domain,m=c(".%L"),g=c(":%S"),v=c("%I:%M"),y=c("%I %p"),x=c("%a %d"),b=c("%b %d"),k=c("%B"),j=c("%Y");function w(T){return(l(T)<T?m:s(T)<T?g:o(T)<T?v:a(T)<T?y:n(T)<T?i(T)<T?x:b:r(T)<T?k:j)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?p(Array.from(T,aie)):p().map(iie)},d.ticks=function(T){var S=p();return t(S[0],S[S.length-1],T??10)},d.tickFormat=function(T,S){return S==null?w:c(S)},d.nice=function(T){var S=p();return(!T||typeof T.range!="function")&&(T=e(S[0],S[S.length-1],T??10)),T?p($R(S,T)):d},d.copy=function(){return Ad(d,w_(t,e,r,n,i,a,o,s,l,c))},d}function oie(){return an.apply(w_(tne,rne,_i,x_,Xm,Pd,y_,m_,Ka,QR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sie(){return an.apply(w_(Zre,ene,ki,b_,Jm,Qm,v_,g_,Ka,XR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zm(){var t=0,e=1,r,n,i,a,o=pr,s=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-r)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),c):[t,e]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(o=f,c):o};function d(f){return function(p){var m,g;return arguments.length?([m,g]=p,o=f(m,g),c):[o(0),o(1)]}}return c.range=d(Nl),c.rangeRound=d(o_),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),c}}function Aa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function JR(){var t=Ta(Zm()(pr));return t.copy=function(){return Aa(t,JR())},Ni.apply(t,arguments)}function ZR(){var t=u_(Zm()).domain([1,10]);return t.copy=function(){return Aa(t,ZR()).base(t.base())},Ni.apply(t,arguments)}function eD(){var t=d_(Zm());return t.copy=function(){return Aa(t,eD()).constant(t.constant())},Ni.apply(t,arguments)}function __(){var t=f_(Zm());return t.copy=function(){return Aa(t,__()).exponent(t.exponent())},Ni.apply(t,arguments)}function lie(){return __.apply(null,arguments).exponent(.5)}function tD(){var t=[],e=pr;function r(n){if(n!=null&&!isNaN(n=+n))return e((Ed(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(da),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Kte(t,a/n))},r.copy=function(){return tD(e).domain(t)},Ni.apply(r,arguments)}function eg(){var t=0,e=.5,r=1,n=1,i,a,o,s,l,c=pr,d,f=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+d(v))-a)*(n*v<n*a?s:l),c(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([t,e,r]=v,i=d(t=+t),a=d(e=+e),o=d(r=+r),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),n=a<i?-1:1,m):[t,e,r]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(c=v,m):c};function g(v){return function(y){var x,b,k;return arguments.length?([x,b,k]=y,c=bre(v,[x,b,k]),m):[c(0),c(.5),c(1)]}}return m.range=g(Nl),m.rangeRound=g(o_),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return d=v,i=v(t),a=v(e),o=v(r),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),n=a<i?-1:1,m}}function rD(){var t=Ta(eg()(pr));return t.copy=function(){return Aa(t,rD())},Ni.apply(t,arguments)}function nD(){var t=u_(eg()).domain([.1,1,10]);return t.copy=function(){return Aa(t,nD()).base(t.base())},Ni.apply(t,arguments)}function iD(){var t=d_(eg());return t.copy=function(){return Aa(t,iD()).constant(t.constant())},Ni.apply(t,arguments)}function k_(){var t=f_(eg());return t.copy=function(){return Aa(t,k_()).exponent(t.exponent())},Ni.apply(t,arguments)}function cie(){return k_.apply(null,arguments).exponent(.5)}const bA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Au,scaleDiverging:rD,scaleDivergingLog:nD,scaleDivergingPow:k_,scaleDivergingSqrt:cie,scaleDivergingSymlog:iD,scaleIdentity:MR,scaleImplicit:V0,scaleLinear:up,scaleLog:LR,scaleOrdinal:n_,scalePoint:Bc,scalePow:h_,scaleQuantile:BR,scaleQuantize:UR,scaleRadial:FR,scaleSequential:JR,scaleSequentialLog:ZR,scaleSequentialPow:__,scaleSequentialQuantile:tD,scaleSequentialSqrt:lie,scaleSequentialSymlog:eD,scaleSqrt:zre,scaleSymlog:VR,scaleThreshold:zR,scaleTime:oie,scaleUtc:sie,tickFormat:DR},Symbol.toStringTag,{value:"Module"}));var uie=_l;function die(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(o!=null&&(s===void 0?o===o&&!uie(o):r(o,s)))var s=o,l=a}return l}var aD=die;function fie(t,e){return t>e}var hie=fie,pie=aD,mie=hie,gie=Cl;function yie(t){return t&&t.length?pie(t,gie,mie):void 0}var vie=yie;const tg=Qe(vie);function xie(t,e){return t<e}var bie=xie,wie=aD,_ie=bie,kie=Cl;function Sie(t){return t&&t.length?wie(t,kie,_ie):void 0}var Eie=Sie;const rg=Qe(Eie);var Tie=Mw,Aie=Ea,Pie=pR,Cie=jr;function jie(t,e){var r=Cie(t)?Tie:Pie;return r(t,Aie(e))}var Nie=jie,Iie=fR,Oie=Nie;function Rie(t,e){return Iie(Oie(t,e),1)}var Die=Rie;const Mie=Qe(Die);var $ie=Xw;function Lie(t,e){return $ie(t,e)}var Vie=Lie;const ng=Qe(Vie);var Il=1e9,Fie={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},E_,ct=!0,rn="[DecimalError] ",ro=rn+"Invalid argument: ",S_=rn+"Exponent out of range: ",Ol=Math.floor,Fa=Math.pow,Bie=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,Lt=1e7,at=7,oD=9007199254740991,pp=Ol(oD/at),le={};le.absoluteValue=le.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};le.comparedTo=le.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};le.decimalPlaces=le.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*at;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};le.dividedBy=le.div=function(t){return fi(this,new this.constructor(t))};le.dividedToIntegerBy=le.idiv=function(t){var e=this,r=e.constructor;return Ye(fi(e,new r(t),0,1),r.precision)};le.equals=le.eq=function(t){return!this.cmp(t)};le.exponent=function(){return At(this)};le.greaterThan=le.gt=function(t){return this.cmp(t)>0};le.greaterThanOrEqualTo=le.gte=function(t){return this.cmp(t)>=0};le.isInteger=le.isint=function(){return this.e>this.d.length-2};le.isNegative=le.isneg=function(){return this.s<0};le.isPositive=le.ispos=function(){return this.s>0};le.isZero=function(){return this.s===0};le.lessThan=le.lt=function(t){return this.cmp(t)<0};le.lessThanOrEqualTo=le.lte=function(t){return this.cmp(t)<1};le.logarithm=le.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Mr))throw Error(rn+"NaN");if(r.s<1)throw Error(rn+(r.s?"NaN":"-Infinity"));return r.eq(Mr)?new n(0):(ct=!1,e=fi(Iu(r,a),Iu(t,a),a),ct=!0,Ye(e,i))};le.minus=le.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cD(e,t):sD(e,(t.s=-t.s,t))};le.modulo=le.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(rn+"NaN");return r.s?(ct=!1,e=fi(r,t,0,1).times(t),ct=!0,r.minus(e)):Ye(new n(r),i)};le.naturalExponential=le.exp=function(){return lD(this)};le.naturalLogarithm=le.ln=function(){return Iu(this)};le.negated=le.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};le.plus=le.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sD(e,t):cD(e,(t.s=-t.s,t))};le.precision=le.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ro+t);if(e=At(i)+1,n=i.d.length-1,r=n*at+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};le.squareRoot=le.sqrt=function(){var t,e,r,n,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(rn+"NaN")}for(t=At(s),ct=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=jn(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Ol((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=o=r+3;;)if(a=n,n=a.plus(fi(s,a,o+2)).times(.5),jn(a.d).slice(0,o)===(e=jn(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Ye(a,r+1,0),a.times(a).eq(s)){n=a;break}}else if(e!="9999")break;o+=4}return ct=!0,Ye(n,r)};le.times=le.mul=function(t){var e,r,n,i,a,o,s,l,c,d=this,f=d.constructor,p=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,l=p.length,c=m.length,l<c&&(a=p,p=m,m=a,o=l,l=c,c=o),a=[],o=l+c,n=o;n--;)a.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+m[n]*p[i-n-1]+e,a[i--]=s%Lt|0,e=s/Lt|0;a[i]=(a[i]+e)%Lt|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,ct?Ye(t,f.precision):t};le.toDecimalPlaces=le.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(zn(t,0,Il),e===void 0?e=n.rounding:zn(e,0,8),Ye(r,t+At(r)+1,e))};le.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=xo(n,!0):(zn(t,0,Il),e===void 0?e=i.rounding:zn(e,0,8),n=Ye(new i(n),t+1,e),r=xo(n,!0,t+1)),r};le.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?xo(i):(zn(t,0,Il),e===void 0?e=a.rounding:zn(e,0,8),n=Ye(new a(i),t+At(i)+1,e),r=xo(n.abs(),!1,t+At(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};le.toInteger=le.toint=function(){var t=this,e=t.constructor;return Ye(new e(t),At(t)+1,e.rounding)};le.toNumber=function(){return+this};le.toPower=le.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,c=12,d=+(t=new l(t));if(!t.s)return new l(Mr);if(s=new l(s),!s.s){if(t.s<1)throw Error(rn+"Infinity");return s}if(s.eq(Mr))return s;if(n=l.precision,t.eq(Mr))return Ye(s,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=s.s,o){if((r=d<0?-d:d)<=oD){for(i=new l(Mr),e=Math.ceil(n/at+4),ct=!1;r%2&&(i=i.times(s),_A(i.d,e)),r=Ol(r/2),r!==0;)s=s.times(s),_A(s.d,e);return ct=!0,t.s<0?new l(Mr).div(i):Ye(i,n)}}else if(a<0)throw Error(rn+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,ct=!1,i=t.times(Iu(s,n+c)),ct=!0,i=lD(i),i.s=a,i};le.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=At(i),n=xo(i,r<=a.toExpNeg||r>=a.toExpPos)):(zn(t,1,Il),e===void 0?e=a.rounding:zn(e,0,8),i=Ye(new a(i),t,e),r=At(i),n=xo(i,t<=r||r<=a.toExpNeg,t)),n};le.toSignificantDigits=le.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(zn(t,1,Il),e===void 0?e=n.rounding:zn(e,0,8)),Ye(new n(r),t,e)};le.toString=le.valueOf=le.val=le.toJSON=le[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=At(t),r=t.constructor;return xo(t,e<=r.toExpNeg||e>=r.toExpPos)};function sD(t,e){var r,n,i,a,o,s,l,c,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),ct?Ye(e,f):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(n=l,a=-a,s=c.length):(n=c,i=o,s=l.length),o=Math.ceil(f/at),s=o>s?o+1:s+1,a>s&&(a=s,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,n=c,c=l,l=n),r=0;a;)r=(l[--a]=l[a]+c[a]+r)/Lt|0,l[a]%=Lt;for(r&&(l.unshift(r),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,ct?Ye(e,f):e}function zn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(ro+t)}function jn(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=at-n.length,r&&(a+=Vi(r)),a+=n;o=t[e],n=o+"",r=at-n.length,r&&(a+=Vi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var fi=function(){function t(n,i){var a,o=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+o,n[s]=a%Lt|0,o=a/Lt|0;return o&&n.unshift(o),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*Lt+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var s,l,c,d,f,p,m,g,v,y,x,b,k,j,w,T,S,E,P=n.constructor,N=n.s==i.s?1:-1,I=n.d,O=i.d;if(!n.s)return new P(n);if(!i.s)throw Error(rn+"Division by zero");for(l=n.e-i.e,S=O.length,w=I.length,m=new P(N),g=m.d=[],c=0;O[c]==(I[c]||0);)++c;if(O[c]>(I[c]||0)&&--l,a==null?b=a=P.precision:o?b=a+(At(n)-At(i))+1:b=a,b<0)return new P(0);if(b=b/at+2|0,c=0,S==1)for(d=0,O=O[0],b++;(c<w||d)&&b--;c++)k=d*Lt+(I[c]||0),g[c]=k/O|0,d=k%O|0;else{for(d=Lt/(O[0]+1)|0,d>1&&(O=t(O,d),I=t(I,d),S=O.length,w=I.length),j=S,v=I.slice(0,S),y=v.length;y<S;)v[y++]=0;E=O.slice(),E.unshift(0),T=O[0],O[1]>=Lt/2&&++T;do d=0,s=e(O,v,S,y),s<0?(x=v[0],S!=y&&(x=x*Lt+(v[1]||0)),d=x/T|0,d>1?(d>=Lt&&(d=Lt-1),f=t(O,d),p=f.length,y=v.length,s=e(f,v,p,y),s==1&&(d--,r(f,S<p?E:O,p))):(d==0&&(s=d=1),f=O.slice()),p=f.length,p<y&&f.unshift(0),r(v,f,y),s==-1&&(y=v.length,s=e(O,v,S,y),s<1&&(d++,r(v,S<y?E:O,y))),y=v.length):s===0&&(d++,v=[0]),g[c++]=d,s&&v[0]?v[y++]=I[j]||0:(v=[I[j]],y=1);while((j++<w||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=l,Ye(m,o?a+At(m)+1:a)}}();function lD(t,e){var r,n,i,a,o,s,l=0,c=0,d=t.constructor,f=d.precision;if(At(t)>16)throw Error(S_+At(t));if(!t.s)return new d(Mr);for(ct=!1,s=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(n=Math.log(Fa(2,c))/Math.LN10*2+5|0,s+=n,r=i=a=new d(Mr),d.precision=s;;){if(i=Ye(i.times(t),s),r=r.times(++l),o=a.plus(fi(i,r,s)),jn(o.d).slice(0,s)===jn(a.d).slice(0,s)){for(;c--;)a=Ye(a.times(a),s);return d.precision=f,e==null?(ct=!0,Ye(a,f)):a}a=o}}function At(t){for(var e=t.e*at,r=t.d[0];r>=10;r/=10)e++;return e}function Oy(t,e,r){if(e>t.LN10.sd())throw ct=!0,r&&(t.precision=r),Error(rn+"LN10 precision limit exceeded");return Ye(new t(t.LN10),e)}function Vi(t){for(var e="";t--;)e+="0";return e}function Iu(t,e){var r,n,i,a,o,s,l,c,d,f=1,p=10,m=t,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error(rn+(m.s?"NaN":"-Infinity"));if(m.eq(Mr))return new v(0);if(e==null?(ct=!1,c=y):c=e,m.eq(10))return e==null&&(ct=!0),Oy(v,c);if(c+=p,v.precision=c,r=jn(g),n=r.charAt(0),a=At(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=jn(m.d),n=r.charAt(0),f++;a=At(m),n>1?(m=new v("0."+r),a++):m=new v(n+"."+r.slice(1))}else return l=Oy(v,c+2,y).times(a+""),m=Iu(new v(n+"."+r.slice(1)),c-p).plus(l),v.precision=y,e==null?(ct=!0,Ye(m,y)):m;for(s=o=m=fi(m.minus(Mr),m.plus(Mr),c),d=Ye(m.times(m),c),i=3;;){if(o=Ye(o.times(d),c),l=s.plus(fi(o,new v(i),c)),jn(l.d).slice(0,c)===jn(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(Oy(v,c+2,y).times(a+""))),s=fi(s,new v(f),c),v.precision=y,e==null?(ct=!0,Ye(s,y)):s;s=l,i+=2}}function wA(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Ol(r/at),t.d=[],n=(r+1)%at,r<0&&(n+=at),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=at;n<i;)t.d.push(+e.slice(n,n+=at));e=e.slice(n),n=at-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),ct&&(t.e>pp||t.e<-pp))throw Error(S_+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ye(t,e,r){var n,i,a,o,s,l,c,d,f=t.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=at,i=e,c=f[d=0];else{if(d=Math.ceil((n+1)/at),a=f.length,d>=a)return t;for(c=a=f[d],o=1;a>=10;a/=10)o++;n%=at,i=n-at+o}if(r!==void 0&&(a=Fa(10,o-i-1),s=c/a%10|0,l=e<0||f[d+1]!==void 0||c%a,l=r<4?(s||l)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?i>0?c/Fa(10,o-i):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return l?(a=At(t),f.length=1,e=e-a-1,f[0]=Fa(10,(at-e%at)%at),t.e=Ol(-e/at)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Fa(10,at-n),f[d]=i>0?(c/Fa(10,o-i)%Fa(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==Lt&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=Lt)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(ct&&(t.e>pp||t.e<-pp))throw Error(S_+At(t));return t}function cD(t,e){var r,n,i,a,o,s,l,c,d,f,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),ct?Ye(e,m):e;if(l=t.d,f=e.d,n=e.e,c=t.e,l=l.slice(),o=c-n,o){for(d=o<0,d?(r=l,o=-o,s=f.length):(r=f,n=c,s=l.length),i=Math.max(Math.ceil(m/at),s)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=l.length,s=f.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}o=0}for(d&&(r=l,l=f,f=r,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Lt-1;--l[a],l[i]+=Lt}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,ct?Ye(e,m):e):new p(0)}function xo(t,e,r){var n,i=At(t),a=jn(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Vi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Vi(-i-1)+a,r&&(n=r-o)>0&&(a+=Vi(n))):i>=o?(a+=Vi(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Vi(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Vi(n))),t.s<0?"-"+a:a}function _A(t,e){if(t.length>e)return t.length=e,!0}function uD(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ro+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return wA(o,a.toString())}else if(typeof a!="string")throw Error(ro+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Bie.test(a))wA(o,a);else throw Error(ro+a)}if(i.prototype=le,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uD,i.config=i.set=Uie,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Uie(t){if(!t||typeof t!="object")throw Error(rn+"Object expected");var e,r,n,i=["precision",1,Il,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Ol(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(ro+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ro+r+": "+n);return this}var E_=uD(Fie);Mr=new E_(1);const Ge=E_;function zie(t){return Gie(t)||qie(t)||Hie(t)||Wie()}function Wie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hie(t,e){if(t){if(typeof t=="string")return z0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z0(t,e)}}function qie(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Gie(t){if(Array.isArray(t))return z0(t)}function z0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Kie=function(e){return e},dD={},fD=function(e){return e===dD},kA=function(e){return function r(){return arguments.length===0||arguments.length===1&&fD(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Yie=function t(e,r){return e===1?r:kA(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==dD}).length;return o>=e?r.apply(void 0,i):t(e-o,kA(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=i.map(function(f){return fD(f)?l.shift():f});return r.apply(void 0,zie(d).concat(l))}))})},ig=function(e){return Yie(e.length,e)},W0=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},Qie=ig(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Xie=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Kie;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},H0=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hD=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r&&a.every(function(s,l){return s===r[l]})||(r=a,n=e.apply(void 0,a)),n}};function Jie(t){var e;return t===0?e=1:e=Math.floor(new Ge(t).abs().log(10).toNumber())+1,e}function Zie(t,e,r){for(var n=new Ge(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var eae=ig(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),tae=ig(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),rae=ig(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const ag={rangeStep:Zie,getDigitCount:Jie,interpolateNumber:eae,uninterpolateNumber:tae,uninterpolateTruncation:rae};function q0(t){return aae(t)||iae(t)||pD(t)||nae()}function nae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iae(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aae(t){if(Array.isArray(t))return G0(t)}function Ou(t,e){return lae(t)||sae(t,e)||pD(t,e)||oae()}function oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pD(t,e){if(t){if(typeof t=="string")return G0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G0(t,e)}}function G0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sae(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw a}}return r}}function lae(t){if(Array.isArray(t))return t}function mD(t){var e=Ou(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function gD(t,e,r){if(t.lte(0))return new Ge(0);var n=ag.getDigitCount(t.toNumber()),i=new Ge(10).pow(n),a=t.div(i),o=n!==1?.05:.1,s=new Ge(Math.ceil(a.div(o).toNumber())).add(r).mul(o),l=s.mul(i);return e?l:new Ge(Math.ceil(l))}function cae(t,e,r){var n=1,i=new Ge(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new Ge(10).pow(ag.getDigitCount(t)-1),i=new Ge(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Ge(Math.floor(t)))}else t===0?i=new Ge(Math.floor((e-1)/2)):r||(i=new Ge(Math.floor(t)));var o=Math.floor((e-1)/2),s=Xie(Qie(function(l){return i.add(new Ge(l-o).mul(n)).toNumber()}),W0);return s(0,e)}function yD(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Ge(0),tickMin:new Ge(0),tickMax:new Ge(0)};var a=gD(new Ge(e).sub(t).div(r-1),n,i),o;t<=0&&e>=0?o=new Ge(0):(o=new Ge(t).add(e).div(2),o=o.sub(new Ge(o).mod(a)));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new Ge(e).sub(o).div(a).toNumber()),c=s+l+1;return c>r?yD(t,e,r,n,i+1):(c<r&&(l=e>0?l+(r-c):l,s=e>0?s:s+(r-c)),{step:a,tickMin:o.sub(new Ge(s).mul(a)),tickMax:o.add(new Ge(l).mul(a))})}function uae(t){var e=Ou(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=mD([r,n]),l=Ou(s,2),c=l[0],d=l[1];if(c===-1/0||d===1/0){var f=d===1/0?[c].concat(q0(W0(0,i-1).map(function(){return 1/0}))):[].concat(q0(W0(0,i-1).map(function(){return-1/0})),[d]);return r>n?H0(f):f}if(c===d)return cae(c,i,a);var p=yD(c,d,o,a),m=p.step,g=p.tickMin,v=p.tickMax,y=ag.rangeStep(g,v.add(new Ge(.1).mul(m)),m);return r>n?H0(y):y}function dae(t,e){var r=Ou(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=mD([n,i]),s=Ou(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var d=Math.max(e,2),f=gD(new Ge(c).sub(l).div(d-1),a,0),p=[].concat(q0(ag.rangeStep(new Ge(l),new Ge(c).sub(new Ge(.99).mul(f)),f)),[c]);return n>i?H0(p):p}var fae=hD(uae),hae=hD(dae),pae="Invariant failed";function bo(t,e){throw new Error(pae)}var mae=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xs(t){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(t)}function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mp.apply(this,arguments)}function gae(t,e){return bae(t)||xae(t,e)||vae(t,e)||yae()}function yae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vae(t,e){if(t){if(typeof t=="string")return SA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SA(t,e)}}function SA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xae(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function bae(t){if(Array.isArray(t))return t}function wae(t,e){if(t==null)return{};var r=_ae(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _ae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bD(n.key),n)}}function Eae(t,e,r){return e&&Sae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tae(t,e,r){return e=gp(e),Aae(t,vD()?Reflect.construct(e,r||[],gp(t).constructor):e.apply(t,r))}function Aae(t,e){if(e&&(Xs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pae(t)}function Pae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vD=function(){return!!t})()}function gp(t){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gp(t)}function Cae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K0(t,e)}function K0(t,e){return K0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},K0(t,e)}function xD(t,e,r){return e=bD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bD(t){var e=jae(t,"string");return Xs(e)=="symbol"?e:e+""}function jae(t,e){if(Xs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cd=function(t){function e(){return kae(this,e),Tae(this,e,arguments)}return Cae(e,t),Eae(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,o=n.width,s=n.dataKey,l=n.data,c=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,p=wae(n,mae),m=Ce(p,!1);this.props.direction==="x"&&d.type!=="number"&&bo();var g=l.map(function(v){var y=c(v,s),x=y.x,b=y.y,k=y.value,j=y.errorVal;if(!j)return null;var w=[],T,S;if(Array.isArray(j)){var E=gae(j,2);T=E[0],S=E[1]}else T=S=j;if(a==="vertical"){var P=d.scale,N=b+i,I=N+o,O=N-o,A=P(k-T),$=P(k+S);w.push({x1:$,y1:I,x2:$,y2:O}),w.push({x1:A,y1:N,x2:$,y2:N}),w.push({x1:A,y1:I,x2:A,y2:O})}else if(a==="horizontal"){var L=f.scale,U=x+i,z=U-o,M=U+o,F=L(k-T),B=L(k+S);w.push({x1:z,y1:B,x2:M,y2:B}),w.push({x1:U,y1:F,x2:U,y2:B}),w.push({x1:z,y1:F,x2:M,y2:F})}return V.createElement(wt,mp({className:"recharts-errorBar",key:"bar-".concat(w.map(function(K){return"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))},m),w.map(function(K){return V.createElement("line",mp({},K,{key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))}))});return V.createElement(wt,{className:"recharts-errorBars"},g)}}])}(V.Component);xD(Cd,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});xD(Cd,"displayName","ErrorBar");function Ru(t){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(t)}function EA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(r),!0).forEach(function(n){Nae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nae(t,e,r){return e=Iae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iae(t){var e=Oae(t,"string");return Ru(e)=="symbol"?e:e+""}function Oae(t,e){if(Ru(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wD=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Dr(r,Es);if(!o)return null;var s=Es.defaultProps,l=s!==void 0?Ra(Ra({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(n||[]).reduce(function(d,f){var p=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(v){return{type:o.props.iconType||p.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):c=(n||[]).map(function(d){var f=d.item,p=f.type.defaultProps,m=p!==void 0?Ra(Ra({},p),f.props):{},g=m.dataKey,v=m.name,y=m.legendType,x=m.hide;return{inactive:x,dataKey:g,type:l.iconType||y||"square",color:T_(f),value:v||g,payload:m}}),Ra(Ra(Ra({},l),Es.getWithHeight(o,i)),{},{payload:c,item:o})};function Du(t){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(t)}function TA(t){return $ae(t)||Mae(t)||Dae(t)||Rae()}function Rae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dae(t,e){if(t){if(typeof t=="string")return Y0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y0(t,e)}}function Mae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ae(t){if(Array.isArray(t))return Y0(t)}function Y0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function AA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AA(Object(r),!0).forEach(function(n){As(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function As(t,e,r){return e=Lae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lae(t){var e=Vae(t,"string");return Du(e)=="symbol"?e:e+""}function Vae(t,e){if(Du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Br(t,e,r){return Ee(t)||Ee(e)?r:Rt(e)?Jr(t,e,r):Se(e)?e(t):r}function Uc(t,e,r,n){var i=Mie(t,function(s){return Br(s,e)});if(r==="number"){var a=i.filter(function(s){return ie(s)||parseFloat(s)});return a.length?[rg(a),tg(a)]:[1/0,-1/0]}var o=n?i.filter(function(s){return!Ee(s)}):i;return o.map(function(s){return Rt(s)||s instanceof Date?s:""})}var Fae=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var d=c>0?i[c-1].coordinate:i[s-1].coordinate,f=i[c].coordinate,p=c>=s-1?i[0].coordinate:i[c+1].coordinate,m=void 0;if(vn(f-d)!==vn(p-f)){var g=[];if(vn(p-f)===vn(l[1]-l[0])){m=p;var v=f+l[1]-l[0];g[0]=Math.min(v,(v+d)/2),g[1]=Math.max(v,(v+d)/2)}else{m=d;var y=p+l[1]-l[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>x[0]&&e<=x[1]||e>=g[0]&&e<=g[1]){o=i[c].index;break}}else{var b=Math.min(d,p),k=Math.max(d,p);if(e>(b+f)/2&&e<=(k+f)/2){o=i[c].index;break}}}else for(var j=0;j<s;j++)if(j===0&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<s-1&&e>(n[j].coordinate+n[j-1].coordinate)/2&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j===s-1&&e>(n[j].coordinate+n[j-1].coordinate)/2){o=n[j].index;break}return o},T_=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?vt(vt({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},Bae=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var d=a[s[l]].stackGroups,f=Object.keys(d),p=0,m=f.length;p<m;p++){var g=d[f[p]],v=g.items,y=g.cateAxisId,x=v.filter(function(S){return ui(S.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,k=b!==void 0?vt(vt({},b),x[0].props):x[0].props,j=k.barSize,w=k[y];o[w]||(o[w]=[]);var T=Ee(j)?r:j;o[w].push({item:x[0],stackList:x.slice(1),barSize:Ee(T)?void 0:vo(T,n,0)})}}return o},Uae=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var c=vo(r,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=i/l,g=o.reduce(function(j,w){return j+w.barSize||0},0);g+=(l-1)*c,g>=i&&(g-=(l-1)*c,c=0),g>=i&&m>0&&(p=!0,m*=.9,g=l*m);var v=(i-g)/2>>0,y={offset:v-c,size:0};d=o.reduce(function(j,w){var T={item:w.item,position:{offset:y.offset+y.size+c,size:p?m:w.barSize}},S=[].concat(TA(j),[T]);return y=S[S.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:y})}),S},f)}else{var x=vo(n,i,0,!0);i-2*x-(l-1)*c<=0&&(c=0);var b=(i-2*x-(l-1)*c)/l;b>1&&(b>>=0);var k=s===+s?Math.min(b,s):b;d=o.reduce(function(j,w,T){var S=[].concat(TA(j),[{item:w.item,position:{offset:x+(b+c)*T+(b-k)/2,size:k}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:S[S.length-1].position})}),S},f)}return d},zae=function(e,r,n,i){var a=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),c=wD({children:a,legendWidth:l});if(c){var d=i||{},f=d.width,p=d.height,m=c.align,g=c.verticalAlign,v=c.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&ie(e[m]))return vt(vt({},e),{},As({},m,e[m]+(f||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&ie(e[g]))return vt(vt({},e),{},As({},g,e[g]+(p||0)))}return e},Wae=function(e,r,n){return Ee(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},_D=function(e,r,n,i,a){var o=r.props.children,s=Zr(o,Cd).filter(function(c){return Wae(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,d){var f=Br(d,n);if(Ee(f))return c;var p=Array.isArray(f)?[rg(f),tg(f)]:[f,f],m=l.reduce(function(g,v){var y=Br(d,v,0),x=p[0]-Math.abs(Array.isArray(y)?y[0]:y),b=p[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],c[0]),Math.max(m[1],c[1])]},[1/0,-1/0])}return null},Hae=function(e,r,n,i,a){var o=r.map(function(s){return _D(e,s,n,a,i)}).filter(function(s){return!Ee(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},kD=function(e,r,n,i,a){var o=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&_D(e,l,c,i)||Uc(e,c,n,a)});if(n==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var d=0,f=c.length;d<f;d++)s[c[d]]||(s[c[d]]=!0,l.push(c[d]));return l},[])},SD=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},ED=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===r&&(a=!0),l.coordinate===n&&(o=!0),l.coordinate});return a||s.push(r),o||s.push(n),s},ai=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?vn(s[0]-s[1])*2*c:c,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=a?a.indexOf(f):f;return{coordinate:i(p)+c,value:f,offset:c}});return d.filter(function(f){return!_d(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+c,value:f,index:p,offset:c}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,p){return{coordinate:i(f)+c,value:a?a[f]:f,index:p,offset:c}})},Ry=new WeakMap,kf=function(e,r){if(typeof r!="function")return e;Ry.has(e)||Ry.set(e,new WeakMap);var n=Ry.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},qae=function(e,r,n){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Au(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:up(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Bc(),realScaleType:"point"}:a==="category"?{scale:Au(),realScaleType:"band"}:{scale:up(),realScaleType:"linear"};if(yo(i)){var l="scale".concat(Um(i));return{scale:(bA[l]||Bc)(),realScaleType:bA[l]?l:"point"}}return Se(i)?{scale:i}:{scale:Bc(),realScaleType:"point"}},PA=1e-4,Gae=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-PA,o=Math.max(i[0],i[1])+PA,s=e(r[0]),l=e(r[n-1]);(s<a||s>o||l<a||l>o)&&e.domain([r[0],r[n-1]])}},Kae=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},Yae=function(e,r){if(!r||r.length!==2||!ie(r[0])||!ie(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!ie(e[0])||e[0]<n)&&(a[0]=n),(!ie(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},Qae=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,o=0,s=0;s<r;++s){var l=_d(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=a,e[s][n][1]=a+l,a=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+l,o=e[s][n][1])}},Xae=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,o=0;o<r;++o){var s=_d(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},Jae={sign:Qae,expand:hq,none:zs,silhouette:pq,wiggle:mq,positive:Xae},Zae=function(e,r,n){var i=r.map(function(s){return s.props.dataKey}),a=Jae[n],o=fq().keys(i).value(function(s,l){return+Br(s,l,0)}).order(b0).offset(a);return o(e)},eoe=function(e,r,n,i,a,o){if(!e)return null;var s=o?r.reverse():r,l={},c=s.reduce(function(f,p){var m,g=(m=p.type)!==null&&m!==void 0&&m.defaultProps?vt(vt({},p.type.defaultProps),p.props):p.props,v=g.stackId,y=g.hide;if(y)return f;var x=g[n],b=f[x]||{hasStack:!1,stackGroups:{}};if(Rt(v)){var k=b.stackGroups[v]||{numericAxisId:n,cateAxisId:i,items:[]};k.items.push(p),b.hasStack=!0,b.stackGroups[v]=k}else b.stackGroups[kd("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[p]};return vt(vt({},f),{},As({},x,b))},l),d={};return Object.keys(c).reduce(function(f,p){var m=c[p];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,y){var x=m.stackGroups[y];return vt(vt({},v),{},As({},y,{numericAxisId:n,cateAxisId:i,items:x.items,stackedData:Zae(e,x.items,a)}))},g)}return vt(vt({},f),{},As({},p,m))},d)},toe=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var d=fae(c,a,s);return e.domain([rg(d),tg(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),p=hae(f,a,s);return{niceTicks:p}}return null};function CA(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ee(i[e.dataKey])){var s=Bh(r,"value",i[e.dataKey]);if(s)return s.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Br(i,Ee(o)?e.dataKey:o);return Ee(l)?null:e.scale(l)}var jA=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var l=Br(o,r.dataKey,r.domain[s]);return Ee(l)?null:r.scale(l)-a/2+i},roe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},noe=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?vt(vt({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Rt(a)){var o=r[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},ioe=function(e){return e.reduce(function(r,n){return[rg(n.concat([r[0]]).filter(ie)),tg(n.concat([r[1]]).filter(ie))]},[1/0,-1/0])},TD=function(e,r,n){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(c,d){var f=ioe(d.slice(r,n+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},NA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Q0=function(e,r,n){if(Se(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(ie(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(NA.test(e[0])){var a=+NA.exec(e[0])[1];i[0]=r[0]-a}else Se(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(ie(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(IA.test(e[1])){var o=+IA.exec(e[1])[1];i[1]=r[1]+o}else Se(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},yp=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=Zw(r,function(f){return f.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],d=a[s-1];o=Math.min((c.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},OA=function(e,r,n){return!e||!e.length||ng(e,Jr(n,"type.defaultProps.domain"))?r:e},AD=function(e,r){var n=e.type.defaultProps?vt(vt({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,c=n.chartType,d=n.hide;return vt(vt({},Ce(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:T_(e),value:Br(r,i),type:l,payload:r,chartType:c,hide:d})};function Mu(t){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(t)}function RA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RA(Object(r),!0).forEach(function(n){aoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aoe(t,e,r){return e=ooe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ooe(t){var e=soe(t,"string");return Mu(e)=="symbol"?e:e+""}function soe(t,e){if(Mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vp=Math.PI/180,loe=function(e){return e*180/Math.PI},Gt=function(e,r,n,i){return{x:e+Math.cos(-vp*i)*n,y:r+Math.sin(-vp*i)*n}},coe=function(e,r){var n=e.x,i=e.y,a=r.x,o=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-o,2))},uoe=function(e,r){var n=e.x,i=e.y,a=r.cx,o=r.cy,s=coe({x:n,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(n-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:loe(c),angleInRadian:c}},doe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return{startAngle:r-o*360,endAngle:n-o*360}},foe=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},MA=function(e,r){var n=e.x,i=e.y,a=uoe({x:n,y:i},r),o=a.radius,s=a.angle,l=r.innerRadius,c=r.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var d=doe(r),f=d.startAngle,p=d.endAngle,m=s,g;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;g=m>=p&&m<=f}return g?DA(DA({},r),{},{radius:o,angle:foe(m,r)}):null};function $u(t){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$u(t)}var hoe=["offset"];function poe(t){return voe(t)||yoe(t)||goe(t)||moe()}function moe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function goe(t,e){if(t){if(typeof t=="string")return X0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X0(t,e)}}function yoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function voe(t){if(Array.isArray(t))return X0(t)}function X0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xoe(t,e){if(t==null)return{};var r=boe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function boe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(r),!0).forEach(function(n){woe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function woe(t,e,r){return e=_oe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _oe(t){var e=koe(t,"string");return $u(e)=="symbol"?e:e+""}function koe(t,e){if($u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lu.apply(this,arguments)}var Soe=function(e){var r=e.value,n=e.formatter,i=Ee(e.children)?r:e.children;return Se(n)?n(i):i},Eoe=function(e,r){var n=vn(r-e),i=Math.min(Math.abs(r-e),360);return n*i},Toe=function(e,r,n){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,c=l.cx,d=l.cy,f=l.innerRadius,p=l.outerRadius,m=l.startAngle,g=l.endAngle,v=l.clockWise,y=(f+p)/2,x=Eoe(m,g),b=x>=0?1:-1,k,j;i==="insideStart"?(k=m+b*o,j=v):i==="insideEnd"?(k=g-b*o,j=!v):i==="end"&&(k=g+b*o,j=v),j=x<=0?j:!j;var w=Gt(c,d,y,k),T=Gt(c,d,y,k+(j?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(j?0:1,`,
    `).concat(T.x,",").concat(T.y),E=Ee(e.id)?kd("recharts-radial-line-"):e.id;return V.createElement("text",Lu({},n,{dominantBaseline:"central",className:Re("recharts-radial-bar-label",s)}),V.createElement("defs",null,V.createElement("path",{id:E,d:S})),V.createElement("textPath",{xlinkHref:"#".concat(E)},r))},Aoe=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,d=a.startAngle,f=a.endAngle,p=(d+f)/2;if(i==="outside"){var m=Gt(o,s,c+n,p),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,x=Gt(o,s,y,p),b=x.x,k=x.y;return{x:b,y:k,textAnchor:"middle",verticalAnchor:"middle"}},Poe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,o=r,s=o.x,l=o.y,c=o.width,d=o.height,f=d>=0?1:-1,p=f*i,m=f>0?"end":"start",g=f>0?"start":"end",v=c>=0?1:-1,y=v*i,x=v>0?"end":"start",b=v>0?"start":"end";if(a==="top"){var k={x:s+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:m};return Nt(Nt({},k),n?{height:Math.max(l-n.y,0),width:c}:{})}if(a==="bottom"){var j={x:s+c/2,y:l+d+p,textAnchor:"middle",verticalAnchor:g};return Nt(Nt({},j),n?{height:Math.max(n.y+n.height-(l+d),0),width:c}:{})}if(a==="left"){var w={x:s-y,y:l+d/2,textAnchor:x,verticalAnchor:"middle"};return Nt(Nt({},w),n?{width:Math.max(w.x-n.x,0),height:d}:{})}if(a==="right"){var T={x:s+c+y,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return Nt(Nt({},T),n?{width:Math.max(n.x+n.width-T.x,0),height:d}:{})}var S=n?{width:c,height:d}:{};return a==="insideLeft"?Nt({x:s+y,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},S):a==="insideRight"?Nt({x:s+c-y,y:l+d/2,textAnchor:x,verticalAnchor:"middle"},S):a==="insideTop"?Nt({x:s+c/2,y:l+p,textAnchor:"middle",verticalAnchor:g},S):a==="insideBottom"?Nt({x:s+c/2,y:l+d-p,textAnchor:"middle",verticalAnchor:m},S):a==="insideTopLeft"?Nt({x:s+y,y:l+p,textAnchor:b,verticalAnchor:g},S):a==="insideTopRight"?Nt({x:s+c-y,y:l+p,textAnchor:x,verticalAnchor:g},S):a==="insideBottomLeft"?Nt({x:s+y,y:l+d-p,textAnchor:b,verticalAnchor:m},S):a==="insideBottomRight"?Nt({x:s+c-y,y:l+d-p,textAnchor:x,verticalAnchor:m},S):kl(a)&&(ie(a.x)||qa(a.x))&&(ie(a.y)||qa(a.y))?Nt({x:s+vo(a.x,c),y:l+vo(a.y,d),textAnchor:"end",verticalAnchor:"end"},S):Nt({x:s+c/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},Coe=function(e){return"cx"in e&&ie(e.cx)};function sr(t){var e=t.offset,r=e===void 0?5:e,n=xoe(t,hoe),i=Nt({offset:r},n),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,d=i.className,f=d===void 0?"":d,p=i.textBreakAll;if(!a||Ee(s)&&Ee(l)&&!R.isValidElement(c)&&!Se(c))return null;if(R.isValidElement(c))return R.cloneElement(c,i);var m;if(Se(c)){if(m=R.createElement(c,i),R.isValidElement(m))return m}else m=Soe(i);var g=Coe(a),v=Ce(i,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Toe(i,m,v);var y=g?Aoe(i):Poe(i);return V.createElement(np,Lu({className:Re("recharts-label",f)},v,y,{breakAll:p}),m)}sr.displayName="Label";var PD=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,m=e.top,g=e.left,v=e.width,y=e.height,x=e.clockWise,b=e.labelViewBox;if(b)return b;if(ie(v)&&ie(y)){if(ie(f)&&ie(p))return{x:f,y:p,width:v,height:y};if(ie(m)&&ie(g))return{x:m,y:g,width:v,height:y}}return ie(f)&&ie(p)?{x:f,y:p,width:0,height:0}:ie(r)&&ie(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:d||l||s||0,clockWise:x}:e.viewBox?e.viewBox:{}},joe=function(e,r){return e?e===!0?V.createElement(sr,{key:"label-implicit",viewBox:r}):Rt(e)?V.createElement(sr,{key:"label-implicit",viewBox:r,value:e}):R.isValidElement(e)?e.type===sr?R.cloneElement(e,{key:"label-implicit",viewBox:r}):V.createElement(sr,{key:"label-implicit",content:e,viewBox:r}):Se(e)?V.createElement(sr,{key:"label-implicit",content:e,viewBox:r}):kl(e)?V.createElement(sr,Lu({viewBox:r},e,{key:"label-implicit"})):null:null},Noe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=PD(e),o=Zr(i,sr).map(function(l,c){return R.cloneElement(l,{viewBox:r||a,key:"label-".concat(c)})});if(!n)return o;var s=joe(e.label,r||a);return[s].concat(poe(o))};sr.parseViewBox=PD;sr.renderCallByParent=Noe;function Ioe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Ooe=Ioe;const Roe=Qe(Ooe);function Vu(t){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(t)}var Doe=["valueAccessor"],Moe=["data","dataKey","clockWise","id","textBreakAll"];function $oe(t){return Boe(t)||Foe(t)||Voe(t)||Loe()}function Loe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Voe(t,e){if(t){if(typeof t=="string")return J0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J0(t,e)}}function Foe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Boe(t){if(Array.isArray(t))return J0(t)}function J0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xp(){return xp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xp.apply(this,arguments)}function LA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function VA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LA(Object(r),!0).forEach(function(n){Uoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uoe(t,e,r){return e=zoe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zoe(t){var e=Woe(t,"string");return Vu(e)=="symbol"?e:e+""}function Woe(t,e){if(Vu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FA(t,e){if(t==null)return{};var r=Hoe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hoe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qoe=function(e){return Array.isArray(e.value)?Roe(e.value):e.value};function fa(t){var e=t.valueAccessor,r=e===void 0?qoe:e,n=FA(t,Doe),i=n.data,a=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,c=FA(n,Moe);return!i||!i.length?null:V.createElement(wt,{className:"recharts-label-list"},i.map(function(d,f){var p=Ee(a)?r(d,f):Br(d&&d.payload,a),m=Ee(s)?{}:{id:"".concat(s,"-").concat(f)};return V.createElement(sr,xp({},Ce(d,!0),c,m,{parentViewBox:d.parentViewBox,value:p,textBreakAll:l,viewBox:sr.parseViewBox(Ee(o)?d:VA(VA({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}fa.displayName="LabelList";function Goe(t,e){return t?t===!0?V.createElement(fa,{key:"labelList-implicit",data:e}):V.isValidElement(t)||Se(t)?V.createElement(fa,{key:"labelList-implicit",data:e,content:t}):kl(t)?V.createElement(fa,xp({data:e},t,{key:"labelList-implicit"})):null:null}function Koe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Zr(n,fa).map(function(o,s){return R.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!r)return i;var a=Goe(t.label,e);return[a].concat($oe(i))}fa.renderCallByParent=Koe;function Fu(t){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(t)}function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z0.apply(this,arguments)}function BA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function UA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BA(Object(r),!0).forEach(function(n){Yoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yoe(t,e,r){return e=Qoe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qoe(t){var e=Xoe(t,"string");return Fu(e)=="symbol"?e:e+""}function Xoe(t,e){if(Fu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Joe=function(e,r){var n=vn(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Sf=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,d=l*(s?1:-1)+i,f=Math.asin(l/d)/vp,p=c?a:a+o*f,m=Gt(r,n,d,p),g=Gt(r,n,i,p),v=c?a-o*f:a,y=Gt(r,n,d*Math.cos(f*vp),v);return{center:m,circleTangency:g,lineTangency:y,theta:f}},CD=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=Joe(o,s),c=o+l,d=Gt(r,n,a,o),f=Gt(r,n,a,c),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=Gt(r,n,i,o),g=Gt(r,n,i,c);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},Zoe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,d=e.endAngle,f=vn(d-c),p=Sf({cx:r,cy:n,radius:a,angle:c,sign:f,cornerRadius:o,cornerIsExternal:l}),m=p.circleTangency,g=p.lineTangency,v=p.theta,y=Sf({cx:r,cy:n,radius:a,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:l}),x=y.circleTangency,b=y.lineTangency,k=y.theta,j=l?Math.abs(c-d):Math.abs(c-d)-v-k;if(j<0)return s?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):CD({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d});var w="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var T=Sf({cx:r,cy:n,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),S=T.circleTangency,E=T.lineTangency,P=T.theta,N=Sf({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),I=N.circleTangency,O=N.lineTangency,A=N.theta,$=l?Math.abs(c-d):Math.abs(c-d)-P-A;if($<0&&o===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},ese={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jD=function(e){var r=UA(UA({},ese),e),n=r.cx,i=r.cy,a=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,p=r.className;if(o<a||d===f)return null;var m=Re("recharts-sector",p),g=o-a,v=vo(s,g,0,!0),y;return v>0&&Math.abs(d-f)<360?y=Zoe({cx:n,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:f}):y=CD({cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:d,endAngle:f}),V.createElement("path",Z0({},Ce(r,!0),{className:m,d:y,role:"img"}))};function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(t)}function ex(){return ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ex.apply(this,arguments)}function zA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zA(Object(r),!0).forEach(function(n){tse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tse(t,e,r){return e=rse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rse(t){var e=nse(t,"string");return Bu(e)=="symbol"?e:e+""}function nse(t,e){if(Bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HA={curveBasisClosed:tq,curveBasisOpen:rq,curveBasis:eq,curveBumpX:FH,curveBumpY:BH,curveLinearClosed:nq,curveLinear:Wm,curveMonotoneX:iq,curveMonotoneY:aq,curveNatural:oq,curveStep:sq,curveStepAfter:cq,curveStepBefore:lq},Ef=function(e){return e.x===+e.x&&e.y===+e.y},cc=function(e){return e.x},uc=function(e){return e.y},ise=function(e,r){if(Se(e))return e;var n="curve".concat(Um(e));return(n==="curveMonotone"||n==="curveBump")&&r?HA["".concat(n).concat(r==="vertical"?"Y":"X")]:HA[n]||Wm},ase=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,d=ise(n,s),f=c?a.filter(function(v){return Ef(v)}):a,p;if(Array.isArray(o)){var m=c?o.filter(function(v){return Ef(v)}):o,g=f.map(function(v,y){return WA(WA({},v),{},{base:m[y]})});return s==="vertical"?p=mf().y(uc).x1(cc).x0(function(v){return v.base.x}):p=mf().x(cc).y1(uc).y0(function(v){return v.base.y}),p.defined(Ef).curve(d),p(g)}return s==="vertical"&&ie(o)?p=mf().y(uc).x1(cc).x0(o):ie(o)?p=mf().x(cc).y1(uc).y0(o):p=NO().x(cc).y(uc),p.defined(Ef).curve(d),p(f)},tx=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?ase(e):i;return R.createElement("path",ex({},Ce(e,!1),Uh(e),{className:Re("recharts-curve",r),d:o,ref:a}))},ND={exports:{}},ose="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sse=ose,lse=sse;function ID(){}function OD(){}OD.resetWarningCache=ID;var cse=function(){function t(n,i,a,o,s,l){if(l!==lse){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:OD,resetWarningCache:ID};return r.PropTypes=r,r};ND.exports=cse();var use=ND.exports;const Ve=Qe(use),{getOwnPropertyNames:dse,getOwnPropertySymbols:fse}=Object,{hasOwnProperty:hse}=Object.prototype;function Dy(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function Tf(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:a}=i,o=a.get(r),s=a.get(n);if(o&&s)return o===n&&s===r;a.set(r,n),a.set(n,r);const l=t(r,n,i);return a.delete(r),a.delete(n),l}}function pse(t){return t!=null?t[Symbol.toStringTag]:void 0}function qA(t){return dse(t).concat(fse(t))}const mse=Object.hasOwn||((t,e)=>hse.call(t,e));function Io(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const gse="__v",yse="__o",vse="_owner",{getOwnPropertyDescriptor:GA,keys:KA}=Object;function xse(t,e){return t.byteLength===e.byteLength&&bp(new Uint8Array(t),new Uint8Array(e))}function bse(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function wse(t,e){return t.byteLength===e.byteLength&&bp(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function _se(t,e){return Io(t.getTime(),e.getTime())}function kse(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Sse(t,e){return t===e}function YA(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.entries();let o,s,l=0;for(;(o=a.next())&&!o.done;){const c=e.entries();let d=!1,f=0;for(;(s=c.next())&&!s.done;){if(i[f]){f++;continue}const p=o.value,m=s.value;if(r.equals(p[0],m[0],l,f,t,e,r)&&r.equals(p[1],m[1],p[0],m[0],t,e,r)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}const Ese=Io;function Tse(t,e,r){const n=KA(t);let i=n.length;if(KA(e).length!==i)return!1;for(;i-- >0;)if(!RD(t,e,r,n[i]))return!1;return!0}function dc(t,e,r){const n=qA(t);let i=n.length;if(qA(e).length!==i)return!1;let a,o,s;for(;i-- >0;)if(a=n[i],!RD(t,e,r,a)||(o=GA(t,a),s=GA(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function Ase(t,e){return Io(t.valueOf(),e.valueOf())}function Pse(t,e){return t.source===e.source&&t.flags===e.flags}function QA(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.values();let o,s;for(;(o=a.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(s=l.next())&&!s.done;){if(!i[d]&&r.equals(o.value,s.value,o.value,s.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function bp(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Cse(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function RD(t,e,r,n){return(n===vse||n===yse||n===gse)&&(t.$$typeof||e.$$typeof)?!0:mse(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const jse="[object ArrayBuffer]",Nse="[object Arguments]",Ise="[object Boolean]",Ose="[object DataView]",Rse="[object Date]",Dse="[object Error]",Mse="[object Map]",$se="[object Number]",Lse="[object Object]",Vse="[object RegExp]",Fse="[object Set]",Bse="[object String]",Use={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},zse="[object URL]",Wse=Object.prototype.toString;function Hse({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:g}){return function(y,x,b){if(y===x)return!0;if(y==null||x==null)return!1;const k=typeof y;if(k!==typeof x)return!1;if(k!=="object")return k==="number"?s(y,x,b):k==="function"?a(y,x,b):!1;const j=y.constructor;if(j!==x.constructor)return!1;if(j===Object)return l(y,x,b);if(Array.isArray(y))return e(y,x,b);if(j===Date)return n(y,x,b);if(j===RegExp)return d(y,x,b);if(j===Map)return o(y,x,b);if(j===Set)return f(y,x,b);const w=Wse.call(y);if(w===Rse)return n(y,x,b);if(w===Vse)return d(y,x,b);if(w===Mse)return o(y,x,b);if(w===Fse)return f(y,x,b);if(w===Lse)return typeof y.then!="function"&&typeof x.then!="function"&&l(y,x,b);if(w===zse)return m(y,x,b);if(w===Dse)return i(y,x,b);if(w===Nse)return l(y,x,b);if(Use[w])return p(y,x,b);if(w===jse)return t(y,x,b);if(w===Ose)return r(y,x,b);if(w===Ise||w===$se||w===Bse)return c(y,x,b);if(g){let T=g[w];if(!T){const S=pse(y);S&&(T=g[S])}if(T)return T(y,x,b)}return!1}}function qse({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:xse,areArraysEqual:r?dc:bse,areDataViewsEqual:wse,areDatesEqual:_se,areErrorsEqual:kse,areFunctionsEqual:Sse,areMapsEqual:r?Dy(YA,dc):YA,areNumbersEqual:Ese,areObjectsEqual:r?dc:Tse,arePrimitiveWrappersEqual:Ase,areRegExpsEqual:Pse,areSetsEqual:r?Dy(QA,dc):QA,areTypedArraysEqual:r?Dy(bp,dc):bp,areUrlsEqual:Cse,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Tf(n.areArraysEqual),a=Tf(n.areMapsEqual),o=Tf(n.areObjectsEqual),s=Tf(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:s})}return n}function Gse(t){return function(e,r,n,i,a,o,s){return t(e,r,s)}}function Kse({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(s,l){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(s,l,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(s,l){return e(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(s,l){return e(s,l,a)}}const Yse=Pa();Pa({strict:!0});Pa({circular:!0});Pa({circular:!0,strict:!0});Pa({createInternalComparator:()=>Io});Pa({strict:!0,createInternalComparator:()=>Io});Pa({circular:!0,createInternalComparator:()=>Io});Pa({circular:!0,createInternalComparator:()=>Io,strict:!0});function Pa(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,a=qse(t),o=Hse(a),s=r?r(o):Gse(o);return Kse({circular:e,comparator:o,createState:n,equals:s,strict:i})}function Qse(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function XA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):Qse(i)};requestAnimationFrame(n)}function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(t)}function Xse(t){return tle(t)||ele(t)||Zse(t)||Jse()}function Jse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zse(t,e){if(t){if(typeof t=="string")return JA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JA(t,e)}}function JA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ele(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tle(t){if(Array.isArray(t))return t}function rle(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,s=Xse(o),l=s[0],c=s.slice(1);if(typeof l=="number"){XA(i.bind(null,c),l);return}i(l),XA(i.bind(null,c));return}rx(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Uu(t){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uu(t)}function ZA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZA(Object(r),!0).forEach(function(n){DD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DD(t,e,r){return e=nle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nle(t){var e=ile(t,"string");return Uu(e)==="symbol"?e:String(e)}function ile(t,e){if(Uu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ale=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},ole=function(e){return e},sle=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},zc=function(e,r){return Object.keys(r).reduce(function(n,i){return e2(e2({},n),{},DD({},i,e(i,r[i])))},{})},t2=function(e,r,n){return e.map(function(i){return"".concat(sle(i)," ").concat(r,"ms ").concat(n)}).join(",")};function lle(t,e){return dle(t)||ule(t,e)||MD(t,e)||cle()}function cle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ule(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function dle(t){if(Array.isArray(t))return t}function fle(t){return mle(t)||ple(t)||MD(t)||hle()}function hle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MD(t,e){if(t){if(typeof t=="string")return nx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nx(t,e)}}function ple(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mle(t){if(Array.isArray(t))return nx(t)}function nx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var wp=1e-4,$D=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},LD=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},r2=function(e,r){return function(n){var i=$D(e,r);return LD(i,n)}},gle=function(e,r){return function(n){var i=$D(e,r),a=[].concat(fle(i.map(function(o,s){return o*s}).slice(1)),[0]);return LD(a,n)}},n2=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=lle(c,4);i=d[0],a=d[1],o=d[2],s=d[3]}}}var f=r2(i,o),p=r2(a,s),m=gle(i,o),g=function(x){return x>1?1:x<0?0:x},v=function(x){for(var b=x>1?1:x,k=b,j=0;j<8;++j){var w=f(k)-b,T=m(k);if(Math.abs(w-b)<wp||T<wp)return p(k);k=g(k-w/T)}return p(k)};return v.isStepper=!1,v},yle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(d,f,p){var m=-(d-f)*n,g=p*a,v=p+(m-g)*s/1e3,y=p*s/1e3+d;return Math.abs(y-f)<wp&&Math.abs(v)<wp?[f,0]:[y,v]};return l.isStepper=!0,l.dt=s,l},vle=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return n2(i);case"spring":return yle();default:if(i.split("(")[0]==="cubic-bezier")return n2(i)}return typeof i=="function"?i:null};function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(t)}function i2(t){return wle(t)||ble(t)||VD(t)||xle()}function xle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ble(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wle(t){if(Array.isArray(t))return ax(t)}function a2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a2(Object(r),!0).forEach(function(n){ix(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ix(t,e,r){return e=_le(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _le(t){var e=kle(t,"string");return zu(e)==="symbol"?e:String(e)}function kle(t,e){if(zu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sle(t,e){return Ale(t)||Tle(t,e)||VD(t,e)||Ele()}function Ele(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VD(t,e){if(t){if(typeof t=="string")return ax(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ax(t,e)}}function ax(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tle(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Ale(t){if(Array.isArray(t))return t}var _p=function(e,r,n){return e+(r-e)*n},ox=function(e){var r=e.from,n=e.to;return r!==n},Ple=function t(e,r,n){var i=zc(function(a,o){if(ox(o)){var s=e(o.from,o.to,o.velocity),l=Sle(s,2),c=l[0],d=l[1];return zt(zt({},o),{},{from:c,velocity:d})}return o},r);return n<1?zc(function(a,o){return ox(o)?zt(zt({},o),{},{velocity:_p(o.velocity,i[a].velocity,n),from:_p(o.from,i[a].from,n)}):o},r):t(e,i,n-1)};const Cle=function(t,e,r,n,i){var a=ale(t,e),o=a.reduce(function(y,x){return zt(zt({},y),{},ix({},x,[t[x],e[x]]))},{}),s=a.reduce(function(y,x){return zt(zt({},y),{},ix({},x,{from:t[x],velocity:0,to:e[x]}))},{}),l=-1,c,d,f=function(){return null},p=function(){return zc(function(x,b){return b.from},s)},m=function(){return!Object.values(s).filter(ox).length},g=function(x){c||(c=x);var b=x-c,k=b/r.dt;s=Ple(r,s,k),i(zt(zt(zt({},t),e),p())),c=x,m()||(l=requestAnimationFrame(f))},v=function(x){d||(d=x);var b=(x-d)/n,k=zc(function(w,T){return _p.apply(void 0,i2(T).concat([r(b)]))},o);if(i(zt(zt(zt({},t),e),k)),b<1)l=requestAnimationFrame(f);else{var j=zc(function(w,T){return _p.apply(void 0,i2(T).concat([r(1)]))},o);i(zt(zt(zt({},t),e),j))}};return f=r.isStepper?g:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Js(t){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(t)}var jle=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Nle(t,e){if(t==null)return{};var r=Ile(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ile(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function My(t){return Mle(t)||Dle(t)||Rle(t)||Ole()}function Ole(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rle(t,e){if(t){if(typeof t=="string")return sx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sx(t,e)}}function Dle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mle(t){if(Array.isArray(t))return sx(t)}function sx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function un(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o2(Object(r),!0).forEach(function(n){Sc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sc(t,e,r){return e=FD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lle(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FD(n.key),n)}}function Vle(t,e,r){return e&&Lle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FD(t){var e=Fle(t,"string");return Js(e)==="symbol"?e:String(e)}function Fle(t,e){if(Js(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Js(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ble(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lx(t,e)}function lx(t,e){return lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lx(t,e)}function Ule(t){var e=zle();return function(){var n=kp(t),i;if(e){var a=kp(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return cx(this,i)}}function cx(t,e){if(e&&(Js(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ux(t)}function ux(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kp(t){return kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kp(t)}var Si=function(t){Ble(r,t);var e=Ule(r);function r(n,i){var a;$le(this,r),a=e.call(this,n,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,d=o.to,f=o.steps,p=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(ux(a)),a.changeStyle=a.changeStyle.bind(ux(a)),!s||m<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),cx(a);if(f&&f.length)a.state={style:f[0].style};else if(c){if(typeof p=="function")return a.state={style:c},cx(a);a.state={style:l?Sc({},l,c):c}}else a.state={style:{}};return a}return Vle(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,d=a.to,f=a.from,p=this.state.style;if(s){if(!o){var m={style:l?Sc({},l,d):d};this.state&&p&&(l&&p[l]!==d||!l&&p!==d)&&this.setState(m);return}if(!(Yse(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||c?f:i.to;if(this.state&&p){var y={style:l?Sc({},l,v):v};(l&&p[l]!==v||!l&&p!==v)&&this.setState(y)}this.runAnimation(un(un({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,d=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,m=Cle(o,s,vle(c),l,this.changeStyle),g=function(){a.stopJSAnimation=m()};this.manager.start([p,d,g,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],d=c.style,f=c.duration,p=f===void 0?0:f,m=function(v,y,x){if(x===0)return v;var b=y.duration,k=y.easing,j=k===void 0?"ease":k,w=y.style,T=y.properties,S=y.onAnimationEnd,E=x>0?o[x-1]:y,P=T||Object.keys(w);if(typeof j=="function"||j==="spring")return[].concat(My(v),[a.runJSAnimation.bind(a,{from:E.style,to:w,duration:b,easing:j}),b]);var N=t2(P,b,j),I=un(un(un({},E.style),w),{},{transition:N});return[].concat(My(v),[I,b,S]).filter(ole)};return this.manager.start([l].concat(My(o.reduce(m,[d,Math.max(p,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=rle());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,m=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof c=="function"||typeof m=="function"||c==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var v=s?Sc({},s,l):l,y=t2(Object.keys(v),o,c);g.start([d,a,un(un({},v),{},{transition:y}),o,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Nle(i,jle),c=R.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!s||c===0||o<=0)return a;var f=function(m){var g=m.props,v=g.style,y=v===void 0?{}:v,x=g.className,b=R.cloneElement(m,un(un({},l),{},{style:un(un({},y),d),className:x}));return b};return c===1?f(R.Children.only(a)):V.createElement("div",null,R.Children.map(a,function(p){return f(p)}))}}]),r}(R.PureComponent);Si.displayName="Animate";Si.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Si.propTypes={from:Ve.oneOfType([Ve.object,Ve.string]),to:Ve.oneOfType([Ve.object,Ve.string]),attributeName:Ve.string,duration:Ve.number,begin:Ve.number,easing:Ve.oneOfType([Ve.string,Ve.func]),steps:Ve.arrayOf(Ve.shape({duration:Ve.number.isRequired,style:Ve.object.isRequired,easing:Ve.oneOfType([Ve.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ve.func]),properties:Ve.arrayOf("string"),onAnimationEnd:Ve.func})),children:Ve.oneOfType([Ve.node,Ve.func]),isActive:Ve.bool,canBegin:Ve.bool,onAnimationEnd:Ve.func,shouldReAnimate:Ve.bool,onAnimationStart:Ve.func,onAnimationReStart:Ve.func};function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function Sp(){return Sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sp.apply(this,arguments)}function Wle(t,e){return Kle(t)||Gle(t,e)||qle(t,e)||Hle()}function Hle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qle(t,e){if(t){if(typeof t=="string")return s2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s2(t,e)}}function s2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gle(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Kle(t){if(Array.isArray(t))return t}function l2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function c2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l2(Object(r),!0).forEach(function(n){Yle(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yle(t,e,r){return e=Qle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qle(t){var e=Xle(t,"string");return Wu(e)=="symbol"?e:e+""}function Xle(t,e){if(Wu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u2=function(e,r,n,i,a){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,d;if(o>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=a[p]>o?o:a[p];d="M".concat(e,",").concat(r+s*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(r)),d+="L ".concat(e+n-l*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(r+s*f[1])),d+="L ".concat(e+n,",").concat(r+i-s*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+n-l*f[2],",").concat(r+i)),d+="L ".concat(e+l*f[3],",").concat(r+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(r+i-s*f[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var g=Math.min(o,a);d="M ".concat(e,",").concat(r+s*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+l*g,",").concat(r,`
            L `).concat(e+n-l*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+n,",").concat(r+s*g,`
            L `).concat(e+n,",").concat(r+i-s*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+n-l*g,",").concat(r+i,`
            L `).concat(e+l*g,",").concat(r+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(r+i-s*g," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},Jle=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),d=Math.max(a,a+s),f=Math.min(o,o+l),p=Math.max(o,o+l);return n>=c&&n<=d&&i>=f&&i<=p}return!1},Zle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},A_=function(e){var r=c2(c2({},Zle),e),n=R.useRef(),i=R.useState(-1),a=Wle(i,2),o=a[0],s=a[1];R.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&s(j)}catch{}},[]);var l=r.x,c=r.y,d=r.width,f=r.height,p=r.radius,m=r.className,g=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(l!==+l||c!==+c||d!==+d||f!==+f||d===0||f===0)return null;var k=Re("recharts-rectangle",m);return b?V.createElement(Si,{canBegin:o>0,from:{width:d,height:f,x:l,y:c},to:{width:d,height:f,x:l,y:c},duration:v,animationEasing:g,isActive:b},function(j){var w=j.width,T=j.height,S=j.x,E=j.y;return V.createElement(Si,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:x,easing:g},V.createElement("path",Sp({},Ce(r,!0),{className:k,d:u2(S,E,w,T,p),ref:n})))}):V.createElement("path",Sp({},Ce(r,!0),{className:k,d:u2(l,c,d,f,p)}))};function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dx.apply(this,arguments)}var P_=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,o=Re("recharts-dot",a);return r===+r&&n===+n&&i===+i?R.createElement("circle",dx({},Ce(e,!1),Uh(e),{className:o,cx:r,cy:n,r:i})):null};function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hu(t)}var ece=["x","y","top","left","width","height","className"];function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fx.apply(this,arguments)}function d2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d2(Object(r),!0).forEach(function(n){rce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rce(t,e,r){return e=nce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nce(t){var e=ice(t,"string");return Hu(e)=="symbol"?e:e+""}function ice(t,e){if(Hu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ace(t,e){if(t==null)return{};var r=oce(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function oce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var sce=function(e,r,n,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},lce=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,c=l===void 0?0:l,d=e.width,f=d===void 0?0:d,p=e.height,m=p===void 0?0:p,g=e.className,v=ace(e,ece),y=tce({x:n,y:a,top:s,left:c,width:f,height:m},v);return!ie(n)||!ie(a)||!ie(f)||!ie(m)||!ie(s)||!ie(c)?null:V.createElement("path",fx({},Ce(y,!0),{className:Re("recharts-cross",g),d:sce(n,a,f,m,s,c)}))},cce=tR,uce=cce(Object.getPrototypeOf,Object),dce=uce,fce=Ci,hce=dce,pce=ji,mce="[object Object]",gce=Function.prototype,yce=Object.prototype,BD=gce.toString,vce=yce.hasOwnProperty,xce=BD.call(Object);function bce(t){if(!pce(t)||fce(t)!=mce)return!1;var e=hce(t);if(e===null)return!0;var r=vce.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&BD.call(r)==xce}var wce=bce;const _ce=Qe(wce);var kce=Ci,Sce=ji,Ece="[object Boolean]";function Tce(t){return t===!0||t===!1||Sce(t)&&kce(t)==Ece}var Ace=Tce;const Pce=Qe(Ace);function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(t)}function Ep(){return Ep=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ep.apply(this,arguments)}function Cce(t,e){return Oce(t)||Ice(t,e)||Nce(t,e)||jce()}function jce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nce(t,e){if(t){if(typeof t=="string")return f2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f2(t,e)}}function f2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ice(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Oce(t){if(Array.isArray(t))return t}function h2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function p2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h2(Object(r),!0).forEach(function(n){Rce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rce(t,e,r){return e=Dce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dce(t){var e=Mce(t,"string");return qu(e)=="symbol"?e:e+""}function Mce(t,e){if(qu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m2=function(e,r,n,i,a){var o=n-i,s;return s="M ".concat(e,",").concat(r),s+="L ".concat(e+n,",").concat(r),s+="L ".concat(e+n-o/2,",").concat(r+a),s+="L ".concat(e+n-o/2-i,",").concat(r+a),s+="L ".concat(e,",").concat(r," Z"),s},$ce={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lce=function(e){var r=p2(p2({},$ce),e),n=R.useRef(),i=R.useState(-1),a=Cce(i,2),o=a[0],s=a[1];R.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var k=n.current.getTotalLength();k&&s(k)}catch{}},[]);var l=r.x,c=r.y,d=r.upperWidth,f=r.lowerWidth,p=r.height,m=r.className,g=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isUpdateAnimationActive;if(l!==+l||c!==+c||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var b=Re("recharts-trapezoid",m);return x?V.createElement(Si,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:c},to:{upperWidth:d,lowerWidth:f,height:p,x:l,y:c},duration:v,animationEasing:g,isActive:x},function(k){var j=k.upperWidth,w=k.lowerWidth,T=k.height,S=k.x,E=k.y;return V.createElement(Si,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:g},V.createElement("path",Ep({},Ce(r,!0),{className:b,d:m2(S,E,j,w,T),ref:n})))}):V.createElement("g",null,V.createElement("path",Ep({},Ce(r,!0),{className:b,d:m2(l,c,d,f,p)})))},Vce=["option","shapeType","propTransformer","activeClassName","isActive"];function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(t)}function Fce(t,e){if(t==null)return{};var r=Bce(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function g2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(r),!0).forEach(function(n){Uce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uce(t,e,r){return e=zce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zce(t){var e=Wce(t,"string");return Gu(e)=="symbol"?e:e+""}function Wce(t,e){if(Gu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hce(t,e){return Tp(Tp({},e),t)}function qce(t,e){return t==="symbols"}function y2(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return V.createElement(A_,r);case"trapezoid":return V.createElement(Lce,r);case"sector":return V.createElement(jD,r);case"symbols":if(qce(e))return V.createElement(Hw,r);break;default:return null}}function Gce(t){return R.isValidElement(t)?t.props:t}function Kce(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Hce:n,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,s=t.isActive,l=Fce(t,Vce),c;if(R.isValidElement(e))c=R.cloneElement(e,Tp(Tp({},l),Gce(e)));else if(Se(e))c=e(l);else if(_ce(e)&&!Pce(e)){var d=i(e,l);c=V.createElement(y2,{shapeType:r,elementProps:d})}else{var f=l;c=V.createElement(y2,{shapeType:r,elementProps:f})}return s?V.createElement(wt,{className:o},c):c}function og(t,e){return e!=null&&"trapezoids"in t.props}function sg(t,e){return e!=null&&"sectors"in t.props}function Ku(t,e){return e!=null&&"points"in t.props}function Yce(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function Qce(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Xce(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function Jce(t,e){var r;return og(t,e)?r=Yce:sg(t,e)?r=Qce:Ku(t,e)&&(r=Xce),r}function Zce(t,e){var r;return og(t,e)?r="trapezoids":sg(t,e)?r="sectors":Ku(t,e)&&(r="points"),r}function eue(t,e){if(og(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(sg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ku(t,e)?e.payload:{}}function tue(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=Zce(r,e),a=eue(r,e),o=n.filter(function(l,c){var d=ng(a,l),f=r.props[i].filter(function(g){var v=Jce(r,e);return v(g,e)}),p=r.props[i].indexOf(f[f.length-1]),m=c===p;return d&&m}),s=n.indexOf(o[o.length-1]);return s}var rue=Math.ceil,nue=Math.max;function iue(t,e,r,n){for(var i=-1,a=nue(rue((e-t)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=t,t+=r;return o}var aue=iue,oue=bR,v2=1/0,sue=17976931348623157e292;function lue(t){if(!t)return t===0?t:0;if(t=oue(t),t===v2||t===-v2){var e=t<0?-1:1;return e*sue}return t===t?t:0}var UD=lue,cue=aue,uue=Km,$y=UD;function due(t){return function(e,r,n){return n&&typeof n!="number"&&uue(e,r,n)&&(r=n=void 0),e=$y(e),r===void 0?(r=e,e=0):r=$y(r),n=n===void 0?e<r?1:-1:$y(n),cue(e,r,n,t)}}var fue=due,hue=fue,pue=hue(),mue=pue;const Ap=Qe(mue);function Yu(t){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(t)}function x2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function b2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(r),!0).forEach(function(n){zD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zD(t,e,r){return e=gue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gue(t){var e=yue(t,"string");return Yu(e)=="symbol"?e:e+""}function yue(t,e){if(Yu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vue=["Webkit","Moz","O","ms"],xue=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=vue.reduce(function(a,o){return b2(b2({},a),{},zD({},o+n,r))},{});return i[e]=r,i};function Zs(t){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(t)}function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pp.apply(this,arguments)}function w2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ly(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(r),!0).forEach(function(n){Or(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HD(n.key),n)}}function wue(t,e,r){return e&&_2(t.prototype,e),r&&_2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _ue(t,e,r){return e=Cp(e),kue(t,WD()?Reflect.construct(e,r||[],Cp(t).constructor):e.apply(t,r))}function kue(t,e){if(e&&(Zs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sue(t)}function Sue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WD=function(){return!!t})()}function Cp(t){return Cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cp(t)}function Eue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hx(t,e)}function hx(t,e){return hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hx(t,e)}function Or(t,e,r){return e=HD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HD(t){var e=Tue(t,"string");return Zs(e)=="symbol"?e:e+""}function Tue(t,e){if(Zs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Aue=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=Bc().domain(Ap(0,l)).range([a,a+o-s]),d=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:d}},k2=function(e){return e.changedTouches&&!!e.changedTouches.length},el=function(t){function e(r){var n;return bue(this,e),n=_ue(this,e,[r]),Or(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Or(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Or(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),n.detachDragEndListener()}),Or(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Or(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Or(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Or(n,"handleSlideDragStart",function(i){var a=k2(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Eue(e,t),wue(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,d=c.length-1,f=Math.min(i,a),p=Math.max(i,a),m=e.getIndexInRange(o,f),g=e.getIndexInRange(o,p);return{startIndex:m-m%l,endIndex:g===d?d:g-g%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=Br(a[n],s,n);return Se(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,d=l.width,f=l.travellerWidth,p=l.startIndex,m=l.endIndex,g=l.onChange,v=n.pageX-a;v>0?v=Math.min(v,c+d-f-s,c+d-f-o):v<0&&(v=Math.max(v,c-o,c-s));var y=this.getIndex({startX:o+v,endX:s+v});(y.startIndex!==p||y.endIndex!==m)&&g&&g(y),this.setState({startX:o+v,endX:s+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=k2(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],d=this.props,f=d.x,p=d.width,m=d.travellerWidth,g=d.onChange,v=d.gap,y=d.data,x={startX:this.state.startX,endX:this.state.endX},b=n.pageX-a;b>0?b=Math.min(b,f+p-m-c):b<0&&(b=Math.max(b,f-c)),x[o]=c+b;var k=this.getIndex(x),j=k.startIndex,w=k.endIndex,T=function(){var E=y.length-1;return o==="startX"&&(s>l?j%v===0:w%v===0)||s<l&&w===E||o==="endX"&&(s>l?w%v===0:j%v===0)||s>l&&w===E};this.setState(Or(Or({},o,c+b),"brushMoveStartX",n.pageX),function(){g&&T()&&g(k)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,d=this.state[i],f=s.indexOf(d);if(f!==-1){var p=f+n;if(!(p===-1||p>=s.length)){var m=s[p];i==="startX"&&m>=c||i==="endX"&&m<=l||this.setState(Or({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,o=n.width,s=n.height,l=n.fill,c=n.stroke;return V.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,o=n.width,s=n.height,l=n.data,c=n.children,d=n.padding,f=R.Children.only(c);return f?V.cloneElement(f,{x:i,y:a,width:o,height:s,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,o,s=this,l=this.props,c=l.y,d=l.travellerWidth,f=l.height,p=l.traveller,m=l.ariaLabel,g=l.data,v=l.startIndex,y=l.endIndex,x=Math.max(n,this.props.x),b=Ly(Ly({},Ce(this.props,!1)),{},{x,y:c,width:d,height:f}),k=m||"Min value: ".concat((a=g[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=g[y])===null||o===void 0?void 0:o.name);return V.createElement(wt,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),s.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,b))}},{key:"renderSlide",value:function(n,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,d=Math.min(n,i)+c,f=Math.max(Math.abs(i-n)-c,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:o,width:f,height:s})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,c=n.stroke,d=this.state,f=d.startX,p=d.endX,m=5,g={pointerEvents:"none",fill:c};return V.createElement(wt,{className:"recharts-brush-texts"},V.createElement(np,Pp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:o+s/2},g),this.getTextOfTick(i)),V.createElement(np,Pp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+l+m,y:o+s/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,o=n.children,s=n.x,l=n.y,c=n.width,d=n.height,f=n.alwaysShowText,p=this.state,m=p.startX,g=p.endX,v=p.isTextActive,y=p.isSlideMoving,x=p.isTravellerMoving,b=p.isTravellerFocused;if(!i||!i.length||!ie(s)||!ie(l)||!ie(c)||!ie(d)||c<=0||d<=0)return null;var k=Re("recharts-brush",a),j=V.Children.count(o)===1,w=xue("userSelect","none");return V.createElement(wt,{className:k,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||y||x||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,o=n.width,s=n.height,l=n.stroke,c=Math.floor(a+s/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),V.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return V.isValidElement(n)?a=V.cloneElement(n,i):Se(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,o=n.width,s=n.x,l=n.travellerWidth,c=n.updateId,d=n.startIndex,f=n.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return Ly({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?Aue({data:a,width:o,x:s,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var p=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>i?s=l:o=l}return i>=n[s]?s:o}}])}(R.PureComponent);Or(el,"displayName","Brush");Or(el,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Pue=Jw;function Cue(t,e){var r;return Pue(t,function(n,i,a){return r=e(n,i,a),!r}),!!r}var jue=Cue,Nue=GO,Iue=Ea,Oue=jue,Rue=jr,Due=Km;function Mue(t,e,r){var n=Rue(t)?Nue:Oue;return r&&Due(t,e,r)&&(e=void 0),n(t,Iue(e))}var $ue=Mue;const Lue=Qe($ue);var Fn=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},S2=mR;function Vue(t,e,r){e=="__proto__"&&S2?S2(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Fue=Vue,Bue=Fue,Uue=hR,zue=Ea;function Wue(t,e){var r={};return e=zue(e),Uue(t,function(n,i,a){Bue(r,i,e(n,i,a))}),r}var Hue=Wue;const que=Qe(Hue);function Gue(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var Kue=Gue,Yue=Jw;function Que(t,e){var r=!0;return Yue(t,function(n,i,a){return r=!!e(n,i,a),r}),r}var Xue=Que,Jue=Kue,Zue=Xue,ede=Ea,tde=jr,rde=Km;function nde(t,e,r){var n=tde(t)?Jue:Zue;return r&&rde(t,e,r)&&(e=void 0),n(t,ede(e))}var ide=nde;const qD=Qe(ide);var ade=["x","y"];function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(t)}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},px.apply(this,arguments)}function E2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E2(Object(r),!0).forEach(function(n){ode(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ode(t,e,r){return e=sde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sde(t){var e=lde(t,"string");return Qu(e)=="symbol"?e:e+""}function lde(t,e){if(Qu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cde(t,e){if(t==null)return{};var r=ude(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ude(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dde(t,e){var r=t.x,n=t.y,i=cde(t,ade),a="".concat(r),o=parseInt(a,10),s="".concat(n),l=parseInt(s,10),c="".concat(e.height||i.height),d=parseInt(c,10),f="".concat(e.width||i.width),p=parseInt(f,10);return fc(fc(fc(fc(fc({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function T2(t){return V.createElement(Kce,px({shapeType:"rectangle",propTransformer:dde,activeClassName:"recharts-active-bar"},t))}var fde=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=ie(n)||EW(n);return a?e(n,i):(a||bo(),r)}},hde=["value","background"],GD;function tl(t){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(t)}function pde(t,e){if(t==null)return{};var r=mde(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mde(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function jp(){return jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jp.apply(this,arguments)}function A2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A2(Object(r),!0).forEach(function(n){Xi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YD(n.key),n)}}function yde(t,e,r){return e&&P2(t.prototype,e),r&&P2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vde(t,e,r){return e=Np(e),xde(t,KD()?Reflect.construct(e,r||[],Np(t).constructor):e.apply(t,r))}function xde(t,e){if(e&&(tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bde(t)}function bde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KD=function(){return!!t})()}function Np(t){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Np(t)}function wde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mx(t,e)}function mx(t,e){return mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mx(t,e)}function Xi(t,e,r){return e=YD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YD(t){var e=_de(t,"string");return tl(e)=="symbol"?e:e+""}function _de(t,e){if(tl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ca=function(t){function e(){var r;gde(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=vde(this,e,[].concat(i)),Xi(r,"state",{isAnimationFinished:!1}),Xi(r,"id",kd("recharts-bar-")),Xi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Xi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return wde(e,t),yde(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,d=Ce(this.props,!1);return n&&n.map(function(f,p){var m=p===l,g=m?c:o,v=kt(kt(kt({},d),f),{},{isActive:m,option:g,index:p,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return V.createElement(wt,jp({className:"recharts-bar-rectangle"},zh(i.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),V.createElement(T2,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state.prevData;return V.createElement(Si,{begin:l,duration:c,isActive:s,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=a.map(function(y,x){var b=p&&p[x];if(b){var k=gn(b.x,y.x),j=gn(b.y,y.y),w=gn(b.width,y.width),T=gn(b.height,y.height);return kt(kt({},y),{},{x:k(g),y:j(g),width:w(g),height:T(g)})}if(o==="horizontal"){var S=gn(0,y.height),E=S(g);return kt(kt({},y),{},{y:y.y+y.height-E,height:E})}var P=gn(0,y.width),N=P(g);return kt(kt({},y),{},{width:N})});return V.createElement(wt,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!ng(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=Ce(this.props.background,!1);return a.map(function(c,d){c.value;var f=c.background,p=pde(c,hde);if(!f)return null;var m=kt(kt(kt(kt(kt({},p),{},{fill:"#eee"},f),l),zh(n.props,c,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return V.createElement(T2,jp({key:"background-bar-".concat(d),option:n.props.background,isActive:d===s},m))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,d=a.children,f=Zr(d,Cd);if(!f)return null;var p=c==="vertical"?o[0].height/2:o[0].width/2,m=function(y,x){var b=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:b,errorVal:Br(y,x)}},g={clipPath:n?"url(#clipPath-".concat(i,")"):null};return V.createElement(wt,g,f.map(function(v){return V.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,o=n.className,s=n.xAxis,l=n.yAxis,c=n.left,d=n.top,f=n.width,p=n.height,m=n.isAnimationActive,g=n.background,v=n.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,x=Re("recharts-bar",o),b=s&&s.allowDataOverflow,k=l&&l.allowDataOverflow,j=b||k,w=Ee(v)?this.id:v;return V.createElement(wt,{className:x},b||k?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(w)},V.createElement("rect",{x:b?c:c-f/2,y:k?d:d-p/2,width:b?f:f*2,height:k?p:p*2}))):null,V.createElement(wt,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(w,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,w),(!m||y)&&fa.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(R.PureComponent);GD=Ca;Xi(Ca,"displayName","Bar");Xi(Ca,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xi(Ca,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,m=Kae(n,r);if(!m)return null;var g=e.layout,v=r.type.defaultProps,y=v!==void 0?kt(kt({},v),r.props):r.props,x=y.dataKey,b=y.children,k=y.minPointSize,j=g==="horizontal"?o:a,w=c?j.scale.domain():null,T=roe({numericAxis:j}),S=Zr(b,t_),E=f.map(function(P,N){var I,O,A,$,L,U;c?I=Yae(c[d+N],w):(I=Br(P,x),Array.isArray(I)||(I=[T,I]));var z=fde(k,GD.defaultProps.minPointSize)(I[1],N);if(g==="horizontal"){var M,F=[o.scale(I[0]),o.scale(I[1])],B=F[0],K=F[1];O=jA({axis:a,ticks:s,bandSize:i,offset:m.offset,entry:P,index:N}),A=(M=K??B)!==null&&M!==void 0?M:void 0,$=m.size;var H=B-K;if(L=Number.isNaN(H)?0:H,U={x:O,y:o.y,width:$,height:o.height},Math.abs(z)>0&&Math.abs(L)<Math.abs(z)){var ee=vn(L||z)*(Math.abs(z)-Math.abs(L));A-=ee,L+=ee}}else{var ce=[a.scale(I[0]),a.scale(I[1])],xe=ce[0],qe=ce[1];if(O=xe,A=jA({axis:o,ticks:l,bandSize:i,offset:m.offset,entry:P,index:N}),$=qe-xe,L=m.size,U={x:a.x,y:A,width:a.width,height:L},Math.abs(z)>0&&Math.abs($)<Math.abs(z)){var et=vn($||z)*(Math.abs(z)-Math.abs($));$+=et}}return kt(kt(kt({},P),{},{x:O,y:A,width:$,height:L,value:c?I:I[1],payload:P,background:U},S&&S[N]&&S[N].props),{},{tooltipPayload:[AD(r,P)],tooltipPosition:{x:O+$/2,y:A+L/2}})});return kt({data:E,layout:g},p)});function Xu(t){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xu(t)}function kde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QD(n.key),n)}}function Sde(t,e,r){return e&&C2(t.prototype,e),r&&C2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function j2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j2(Object(r),!0).forEach(function(n){lg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lg(t,e,r){return e=QD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QD(t){var e=Ede(t,"string");return Xu(e)=="symbol"?e:e+""}function Ede(t,e){if(Xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XD=function(e,r,n,i,a){var o=e.width,s=e.height,l=e.layout,c=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},p=!!Dr(c,Ca);return d.reduce(function(m,g){var v=r[g],y=v.orientation,x=v.domain,b=v.padding,k=b===void 0?{}:b,j=v.mirror,w=v.reversed,T="".concat(y).concat(j?"Mirror":""),S,E,P,N,I;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var O=x[1]-x[0],A=1/0,$=v.categoricalDomain.sort(PW);if($.forEach(function(ce,xe){xe>0&&(A=Math.min((ce||0)-($[xe-1]||0),A))}),Number.isFinite(A)){var L=A/O,U=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(S=L*U/2),v.padding==="no-gap"){var z=vo(e.barCategoryGap,L*U),M=L*U/2;S=M-z-(M-z)/U*z}}}i==="xAxis"?E=[n.left+(k.left||0)+(S||0),n.left+n.width-(k.right||0)-(S||0)]:i==="yAxis"?E=l==="horizontal"?[n.top+n.height-(k.bottom||0),n.top+(k.top||0)]:[n.top+(k.top||0)+(S||0),n.top+n.height-(k.bottom||0)-(S||0)]:E=v.range,w&&(E=[E[1],E[0]]);var F=qae(v,a,p),B=F.scale,K=F.realScaleType;B.domain(x).range(E),Gae(B);var H=toe(B,hn(hn({},v),{},{realScaleType:K}));i==="xAxis"?(I=y==="top"&&!j||y==="bottom"&&j,P=n.left,N=f[T]-I*v.height):i==="yAxis"&&(I=y==="left"&&!j||y==="right"&&j,P=f[T]-I*v.width,N=n.top);var ee=hn(hn(hn({},v),H),{},{realScaleType:K,x:P,y:N,scale:B,width:i==="xAxis"?n.width:v.width,height:i==="yAxis"?n.height:v.height});return ee.bandSize=yp(ee,H),!v.hide&&i==="xAxis"?f[T]+=(I?-1:1)*ee.height:v.hide||(f[T]+=(I?-1:1)*ee.width),hn(hn({},m),{},lg({},g,ee))},{})},JD=function(e,r){var n=e.x,i=e.y,a=r.x,o=r.y;return{x:Math.min(n,a),y:Math.min(i,o),width:Math.abs(a-n),height:Math.abs(o-i)}},Tde=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return JD({x:r,y:n},{x:i,y:a})},ZD=function(){function t(e){kde(this,t),this.scale=e}return Sde(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();lg(ZD,"EPS",1e-4);var C_=function(e){var r=Object.keys(e).reduce(function(n,i){return hn(hn({},n),{},lg({},i,ZD.create(e[i])))},{});return hn(hn({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return que(i,function(l,c){return r[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return qD(i,function(a,o){return r[o].isInRange(a)})}})};function Ade(t){return(t%180+180)%180}var Pde=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Ade(i),o=a*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},Cde=Ea,jde=Sd,Nde=qm;function Ide(t){return function(e,r,n){var i=Object(e);if(!jde(e)){var a=Cde(r);e=Nde(e),r=function(s){return a(i[s],s,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}}var Ode=Ide,Rde=UD;function Dde(t){var e=Rde(t),r=e%1;return e===e?r?e-r:e:0}var Mde=Dde,$de=sR,Lde=Ea,Vde=Mde,Fde=Math.max;function Bde(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Vde(r);return i<0&&(i=Fde(n+i,0)),$de(t,Lde(e),i)}var Ude=Bde,zde=Ode,Wde=Ude,Hde=zde(Wde),qde=Hde;const Gde=Qe(qde);var Kde=Nz(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),j_=R.createContext(void 0),N_=R.createContext(void 0),eM=R.createContext(void 0),tM=R.createContext({}),rM=R.createContext(void 0),nM=R.createContext(0),iM=R.createContext(0),N2=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,d=Kde(a);return V.createElement(j_.Provider,{value:n},V.createElement(N_.Provider,{value:i},V.createElement(tM.Provider,{value:a},V.createElement(eM.Provider,{value:d},V.createElement(rM.Provider,{value:o},V.createElement(nM.Provider,{value:c},V.createElement(iM.Provider,{value:l},s)))))))},Yde=function(){return R.useContext(rM)},aM=function(e){var r=R.useContext(j_);r==null&&bo();var n=r[e];return n==null&&bo(),n},Qde=function(){var e=R.useContext(j_);return qi(e)},Xde=function(){var e=R.useContext(N_),r=Gde(e,function(n){return qD(n.domain,Number.isFinite)});return r||qi(e)},oM=function(e){var r=R.useContext(N_);r==null&&bo();var n=r[e];return n==null&&bo(),n},Jde=function(){var e=R.useContext(eM);return e},Zde=function(){return R.useContext(tM)},I_=function(){return R.useContext(iM)},O_=function(){return R.useContext(nM)};function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(t)}function efe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lM(n.key),n)}}function rfe(t,e,r){return e&&tfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nfe(t,e,r){return e=Ip(e),ife(t,sM()?Reflect.construct(e,r||[],Ip(t).constructor):e.apply(t,r))}function ife(t,e){if(e&&(rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return afe(t)}function afe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sM=function(){return!!t})()}function Ip(t){return Ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ip(t)}function ofe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gx(t,e)}function gx(t,e){return gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gx(t,e)}function I2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function O2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(r),!0).forEach(function(n){R_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R_(t,e,r){return e=lM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lM(t){var e=sfe(t,"string");return rl(e)=="symbol"?e:e+""}function sfe(t,e){if(rl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lfe(t,e){return ffe(t)||dfe(t,e)||ufe(t,e)||cfe()}function cfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ufe(t,e){if(t){if(typeof t=="string")return R2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R2(t,e)}}function R2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function ffe(t){if(Array.isArray(t))return t}function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yx.apply(this,arguments)}var hfe=function(e,r){var n;return V.isValidElement(e)?n=V.cloneElement(e,r):Se(e)?n=e(r):n=V.createElement("line",yx({},r,{className:"recharts-reference-line-line"})),n},pfe=function(e,r,n,i,a,o,s,l,c){var d=a.x,f=a.y,p=a.width,m=a.height;if(n){var g=c.y,v=e.y.apply(g,{position:o});if(Fn(c,"discard")&&!e.y.isInRange(v))return null;var y=[{x:d+p,y:v},{x:d,y:v}];return l==="left"?y.reverse():y}if(r){var x=c.x,b=e.x.apply(x,{position:o});if(Fn(c,"discard")&&!e.x.isInRange(b))return null;var k=[{x:b,y:f+m},{x:b,y:f}];return s==="top"?k.reverse():k}if(i){var j=c.segment,w=j.map(function(T){return e.apply(T,{position:o})});return Fn(c,"discard")&&Lue(w,function(T){return!e.isInRange(T)})?null:w}return null};function mfe(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,s=t.className,l=t.alwaysShow,c=Yde(),d=aM(i),f=oM(a),p=Jde();if(!c||!p)return null;di(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=C_({x:d.scale,y:f.scale}),g=Rt(e),v=Rt(r),y=n&&n.length===2,x=pfe(m,g,v,y,p,t.position,d.orientation,f.orientation,t);if(!x)return null;var b=lfe(x,2),k=b[0],j=k.x,w=k.y,T=b[1],S=T.x,E=T.y,P=Fn(t,"hidden")?"url(#".concat(c,")"):void 0,N=O2(O2({clipPath:P},Ce(t,!0)),{},{x1:j,y1:w,x2:S,y2:E});return V.createElement(wt,{className:Re("recharts-reference-line",s)},hfe(o,N),sr.renderCallByParent(t,Tde({x1:j,y1:w,x2:S,y2:E})))}var D_=function(t){function e(){return efe(this,e),nfe(this,e,arguments)}return ofe(e,t),rfe(e,[{key:"render",value:function(){return V.createElement(mfe,this.props)}}])}(V.Component);R_(D_,"displayName","ReferenceLine");R_(D_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function vx(){return vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vx.apply(this,arguments)}function nl(t){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(t)}function D2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function M2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(r),!0).forEach(function(n){cg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uM(n.key),n)}}function vfe(t,e,r){return e&&yfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xfe(t,e,r){return e=Op(e),bfe(t,cM()?Reflect.construct(e,r||[],Op(t).constructor):e.apply(t,r))}function bfe(t,e){if(e&&(nl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wfe(t)}function wfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cM=function(){return!!t})()}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Op(t)}function _fe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xx(t,e)}function xx(t,e){return xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xx(t,e)}function cg(t,e,r){return e=uM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uM(t){var e=kfe(t,"string");return nl(e)=="symbol"?e:e+""}function kfe(t,e){if(nl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sfe=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,o=C_({x:i.scale,y:a.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return Fn(e,"discard")&&!o.isInRange(s)?null:s},ug=function(t){function e(){return gfe(this,e),xfe(this,e,arguments)}return _fe(e,t),vfe(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,c=Rt(i),d=Rt(a);if(di(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!d)return null;var f=Sfe(this.props);if(!f)return null;var p=f.x,m=f.y,g=this.props,v=g.shape,y=g.className,x=Fn(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=M2(M2({clipPath:x},Ce(this.props,!0)),{},{cx:p,cy:m});return V.createElement(wt,{className:Re("recharts-reference-dot",y)},e.renderDot(v,b),sr.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])}(V.Component);cg(ug,"displayName","ReferenceDot");cg(ug,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});cg(ug,"renderDot",function(t,e){var r;return V.isValidElement(t)?r=V.cloneElement(t,e):Se(t)?r=t(e):r=V.createElement(P_,vx({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function bx(){return bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bx.apply(this,arguments)}function il(t){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},il(t)}function $2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function L2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$2(Object(r),!0).forEach(function(n){dg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Efe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fM(n.key),n)}}function Afe(t,e,r){return e&&Tfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pfe(t,e,r){return e=Rp(e),Cfe(t,dM()?Reflect.construct(e,r||[],Rp(t).constructor):e.apply(t,r))}function Cfe(t,e){if(e&&(il(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jfe(t)}function jfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dM=function(){return!!t})()}function Rp(t){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rp(t)}function Nfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wx(t,e)}function wx(t,e){return wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wx(t,e)}function dg(t,e,r){return e=fM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fM(t){var e=Ife(t,"string");return il(e)=="symbol"?e:e+""}function Ife(t,e){if(il(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ofe=function(e,r,n,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var p=C_({x:d.scale,y:f.scale}),m={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(l,{position:"start"}):p.y.rangeMin},g={x:r?p.x.apply(s,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(c,{position:"end"}):p.y.rangeMax};return Fn(a,"discard")&&(!p.isInRange(m)||!p.isInRange(g))?null:JD(m,g)},fg=function(t){function e(){return Efe(this,e),Pfe(this,e,arguments)}return Nfe(e,t),Afe(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,o=n.y1,s=n.y2,l=n.className,c=n.alwaysShow,d=n.clipPathId;di(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Rt(i),p=Rt(a),m=Rt(o),g=Rt(s),v=this.props.shape;if(!f&&!p&&!m&&!g&&!v)return null;var y=Ofe(f,p,m,g,this.props);if(!y&&!v)return null;var x=Fn(this.props,"hidden")?"url(#".concat(d,")"):void 0;return V.createElement(wt,{className:Re("recharts-reference-area",l)},e.renderRect(v,L2(L2({clipPath:x},Ce(this.props,!0)),y)),sr.renderCallByParent(this.props,y))}}])}(V.Component);dg(fg,"displayName","ReferenceArea");dg(fg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});dg(fg,"renderRect",function(t,e){var r;return V.isValidElement(t)?r=V.cloneElement(t,e):Se(t)?r=t(e):r=V.createElement(A_,bx({},e,{className:"recharts-reference-area-rect"})),r});function hM(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function Rfe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Pde(n,r)}function Dfe(t,e,r){var n=r==="width",i=t.x,a=t.y,o=t.width,s=t.height;return e===1?{start:n?i:a,end:n?i+o:a+s}:{start:n?i+o:a+s,end:n?i:a}}function Dp(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function Mfe(t,e){return hM(t,e+1)}function $fe(t,e,r,n,i){for(var a=(n||[]).slice(),o=e.start,s=e.end,l=0,c=1,d=o,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:hM(n,c)};var v=l,y,x=function(){return y===void 0&&(y=r(g,v)),y},b=g.coordinate,k=l===0||Dp(t,b,x,d,s);k||(l=0,d=o,c+=1),k&&(d=b+t*(x()/2+i),l+=c)},p;c<=a.length;)if(p=f(),p)return p.v;return[]}function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(t)}function V2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V2(Object(r),!0).forEach(function(n){Lfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lfe(t,e,r){return e=Vfe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vfe(t){var e=Ffe(t,"string");return Ju(e)=="symbol"?e:e+""}function Ffe(t,e){if(Ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bfe(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,s=e.start,l=e.end,c=function(p){var m=a[p],g,v=function(){return g===void 0&&(g=r(m,p)),g};if(p===o-1){var y=t*(m.coordinate+t*v()/2-l);a[p]=m=nr(nr({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else a[p]=m=nr(nr({},m),{},{tickCoord:m.coordinate});var x=Dp(t,m.tickCoord,v,s,l);x&&(l=m.tickCoord-t*(v()/2+i),a[p]=nr(nr({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)c(d);return a}function Ufe(t,e,r,n,i,a){var o=(n||[]).slice(),s=o.length,l=e.start,c=e.end;if(a){var d=n[s-1],f=r(d,s-1),p=t*(d.coordinate+t*f/2-c);o[s-1]=d=nr(nr({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var m=Dp(t,d.tickCoord,function(){return f},l,c);m&&(c=d.tickCoord-t*(f/2+i),o[s-1]=nr(nr({},d),{},{isShow:!0}))}for(var g=a?s-1:s,v=function(b){var k=o[b],j,w=function(){return j===void 0&&(j=r(k,b)),j};if(b===0){var T=t*(k.coordinate-t*w()/2-l);o[b]=k=nr(nr({},k),{},{tickCoord:T<0?k.coordinate-T*t:k.coordinate})}else o[b]=k=nr(nr({},k),{},{tickCoord:k.coordinate});var S=Dp(t,k.tickCoord,w,l,c);S&&(l=k.tickCoord+t*(w()/2+i),o[b]=nr(nr({},k),{},{isShow:!0}))},y=0;y<g;y++)v(y);return o}function M_(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!n)return[];if(ie(l)||jl.isSsr)return Mfe(i,typeof l=="number"&&ie(l)?l:0);var p=[],m=s==="top"||s==="bottom"?"width":"height",g=d&&m==="width"?Fc(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=function(k,j){var w=Se(c)?c(k.value,j):k.value;return m==="width"?Rfe(Fc(w,{fontSize:e,letterSpacing:r}),g,f):Fc(w,{fontSize:e,letterSpacing:r})[m]},y=i.length>=2?vn(i[1].coordinate-i[0].coordinate):1,x=Dfe(a,y,m);return l==="equidistantPreserveStart"?$fe(y,x,v,i,o):(l==="preserveStart"||l==="preserveStartEnd"?p=Ufe(y,x,v,i,o,l==="preserveStartEnd"):p=Bfe(y,x,v,i,o),p.filter(function(b){return b.isShow}))}var zfe=["viewBox"],Wfe=["viewBox"],Hfe=["ticks"];function al(t){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},al(t)}function ds(){return ds=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ds.apply(this,arguments)}function F2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(r),!0).forEach(function(n){$_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vy(t,e){if(t==null)return{};var r=qfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mM(n.key),n)}}function Kfe(t,e,r){return e&&B2(t.prototype,e),r&&B2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yfe(t,e,r){return e=Mp(e),Qfe(t,pM()?Reflect.construct(e,r||[],Mp(t).constructor):e.apply(t,r))}function Qfe(t,e){if(e&&(al(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xfe(t)}function Xfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pM=function(){return!!t})()}function Mp(t){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mp(t)}function Jfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_x(t,e)}function _x(t,e){return _x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_x(t,e)}function $_(t,e,r){return e=mM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mM(t){var e=Zfe(t,"string");return al(e)=="symbol"?e:e+""}function Zfe(t,e){if(al(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(al(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rl=function(t){function e(r){var n;return Gfe(this,e),n=Yfe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Jfe(e,t),Kfe(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,o=Vy(n,zfe),s=this.props,l=s.viewBox,c=Vy(s,Wfe);return!Ss(a,l)||!Ss(o,c)||!Ss(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,d=i.tickSize,f=i.mirror,p=i.tickMargin,m,g,v,y,x,b,k=f?-1:1,j=n.tickSize||d,w=ie(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":m=g=n.coordinate,y=o+ +!f*l,v=y-k*j,b=v-k*p,x=w;break;case"left":v=y=n.coordinate,g=a+ +!f*s,m=g-k*j,x=m-k*p,b=w;break;case"right":v=y=n.coordinate,g=a+ +f*s,m=g+k*j,x=m+k*p,b=w;break;default:m=g=n.coordinate,y=o+ +f*l,v=y+k*j,b=v+k*p,x=w;break}return{line:{x1:m,y1:v,x2:g,y2:y},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,o=n.width,s=n.height,l=n.orientation,c=n.mirror,d=n.axisLine,f=jt(jt(jt({},Ce(this.props,!1)),Ce(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!c||l==="bottom"&&c);f=jt(jt({},f),{},{x1:i,y1:a+p*s,x2:i+o,y2:a+p*s})}else{var m=+(l==="left"&&!c||l==="right"&&c);f=jt(jt({},f),{},{x1:i+m*o,y1:a,x2:i+m*o,y2:a+s})}return V.createElement("line",ds({},f,{className:Re("recharts-cartesian-axis-line",Jr(d,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,d=s.tick,f=s.tickFormatter,p=s.unit,m=M_(jt(jt({},this.props),{},{ticks:n}),i,a),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=Ce(this.props,!1),x=Ce(d,!1),b=jt(jt({},y),{},{fill:"none"},Ce(l,!1)),k=m.map(function(j,w){var T=o.getTickLineCoord(j),S=T.line,E=T.tick,P=jt(jt(jt(jt({textAnchor:g,verticalAnchor:v},y),{},{stroke:"none",fill:c},x),E),{},{index:w,payload:j,visibleTicksCount:m.length,tickFormatter:f});return V.createElement(wt,ds({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},zh(o.props,j,w)),l&&V.createElement("line",ds({},b,S,{className:Re("recharts-cartesian-axis-tick-line",Jr(l,"className"))})),d&&e.renderTickItem(d,P,"".concat(Se(f)?f(j.value,w):j.value).concat(p||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},k)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,d=i.hide;if(d)return null;var f=this.props,p=f.ticks,m=Vy(f,Hfe),g=p;return Se(l)&&(g=p&&p.length>0?l(this.props):l(m)),o<=0||s<=0||!g||!g.length?null:V.createElement(wt,{className:Re("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),sr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var o,s=Re(i.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(n)?o=V.cloneElement(n,jt(jt({},i),{},{className:s})):Se(n)?o=n(jt(jt({},i),{},{className:s})):o=V.createElement(np,ds({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(R.Component);$_(Rl,"displayName","CartesianAxis");$_(Rl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ehe=["x1","y1","x2","y2","key"],the=["offset"];function wo(t){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(t)}function U2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U2(Object(r),!0).forEach(function(n){rhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rhe(t,e,r){return e=nhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nhe(t){var e=ihe(t,"string");return wo(e)=="symbol"?e:e+""}function ihe(t,e){if(wo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ya.apply(this,arguments)}function z2(t,e){if(t==null)return{};var r=ahe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ahe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var ohe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return V.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gM(t,e){var r;if(V.isValidElement(t))r=V.cloneElement(t,e);else if(Se(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=z2(e,ehe),c=Ce(l,!1);c.offset;var d=z2(c,the);r=V.createElement("line",Ya({},d,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:s}))}return r}function she(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=lr(lr({},t),{},{x1:e,y1:s,x2:e+r,y2:s,key:"line-".concat(l),index:l});return gM(i,c)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function lhe(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=lr(lr({},t),{},{x1:s,y1:e,x2:s,y2:e+r,key:"line-".concat(l),index:l});return gM(i,c)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function che(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,o=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var d=s.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==d[0]&&d.unshift(0);var f=d.map(function(p,m){var g=!d[m+1],v=g?i+o-p:d[m+1]-p;if(v<=0)return null;var y=m%e.length;return V.createElement("rect",{key:"react-".concat(m),y:p,x:n,height:v,width:a,stroke:"none",fill:e[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function uhe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!r||!n||!n.length)return null;var d=c.map(function(p){return Math.round(p+a-a)}).sort(function(p,m){return p-m});a!==d[0]&&d.unshift(0);var f=d.map(function(p,m){var g=!d[m+1],v=g?a+s-p:d[m+1]-p;if(v<=0)return null;var y=m%n.length;return V.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:v,height:l,stroke:"none",fill:n[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var dhe=function(e,r){var n=e.xAxis,i=e.width,a=e.height,o=e.offset;return ED(M_(lr(lr(lr({},Rl.defaultProps),n),{},{ticks:ai(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,r)},fhe=function(e,r){var n=e.yAxis,i=e.width,a=e.height,o=e.offset;return ED(M_(lr(lr(lr({},Rl.defaultProps),n),{},{ticks:ai(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,r)},zo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Qa(t){var e,r,n,i,a,o,s=I_(),l=O_(),c=Zde(),d=lr(lr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:zo.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:zo.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:zo.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:zo.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:zo.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:zo.verticalFill,x:ie(t.x)?t.x:c.left,y:ie(t.y)?t.y:c.top,width:ie(t.width)?t.width:c.width,height:ie(t.height)?t.height:c.height}),f=d.x,p=d.y,m=d.width,g=d.height,v=d.syncWithTicks,y=d.horizontalValues,x=d.verticalValues,b=Qde(),k=Xde();if(!ie(m)||m<=0||!ie(g)||g<=0||!ie(f)||f!==+f||!ie(p)||p!==+p)return null;var j=d.verticalCoordinatesGenerator||dhe,w=d.horizontalCoordinatesGenerator||fhe,T=d.horizontalPoints,S=d.verticalPoints;if((!T||!T.length)&&Se(w)){var E=y&&y.length,P=w({yAxis:k?lr(lr({},k),{},{ticks:E?y:k.ticks}):void 0,width:s,height:l,offset:c},E?!0:v);di(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(wo(P),"]")),Array.isArray(P)&&(T=P)}if((!S||!S.length)&&Se(j)){var N=x&&x.length,I=j({xAxis:b?lr(lr({},b),{},{ticks:N?x:b.ticks}):void 0,width:s,height:l,offset:c},N?!0:v);di(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(wo(I),"]")),Array.isArray(I)&&(S=I)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(ohe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),V.createElement(she,Ya({},d,{offset:c,horizontalPoints:T,xAxis:b,yAxis:k})),V.createElement(lhe,Ya({},d,{offset:c,verticalPoints:S,xAxis:b,yAxis:k})),V.createElement(che,Ya({},d,{horizontalPoints:T})),V.createElement(uhe,Ya({},d,{verticalPoints:S})))}Qa.displayName="CartesianGrid";var hhe=["type","layout","connectNulls","ref"],phe=["key"];function ol(t){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ol(t)}function W2(t,e){if(t==null)return{};var r=mhe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wc.apply(this,arguments)}function H2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ir(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H2(Object(r),!0).forEach(function(n){pn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wo(t){return xhe(t)||vhe(t)||yhe(t)||ghe()}function ghe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yhe(t,e){if(t){if(typeof t=="string")return kx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kx(t,e)}}function vhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xhe(t){if(Array.isArray(t))return kx(t)}function kx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vM(n.key),n)}}function whe(t,e,r){return e&&q2(t.prototype,e),r&&q2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _he(t,e,r){return e=$p(e),khe(t,yM()?Reflect.construct(e,r||[],$p(t).constructor):e.apply(t,r))}function khe(t,e){if(e&&(ol(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return She(t)}function She(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yM=function(){return!!t})()}function $p(t){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(t)}function Ehe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sx(t,e)}function Sx(t,e){return Sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Sx(t,e)}function pn(t,e,r){return e=vM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vM(t){var e=The(t,"string");return ol(e)=="symbol"?e:e+""}function The(t,e){if(ol(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ha=function(t){function e(){var r;bhe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=_he(this,e,[].concat(i)),pn(r,"state",{isAnimationFinished:!0,totalLength:0}),pn(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),pn(r,"getStrokeDasharray",function(o,s,l){var c=l.reduce(function(x,b){return x+b});if(!c)return r.generateSimpleStrokeDasharray(s,o);for(var d=Math.floor(o/c),f=o%c,p=s-o,m=[],g=0,v=0;g<l.length;v+=l[g],++g)if(v+l[g]>f){m=[].concat(Wo(l.slice(0,g)),[f-v]);break}var y=m.length%2===0?[0,p]:[p];return[].concat(Wo(e.repeat(l,d)),Wo(m),y).map(function(x){return"".concat(x,"px")}).join(", ")}),pn(r,"id",kd("recharts-line-")),pn(r,"pathRef",function(o){r.mainCurve=o}),pn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),pn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Ehe(e,t),whe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,s=a.xAxis,l=a.yAxis,c=a.layout,d=a.children,f=Zr(d,Cd);if(!f)return null;var p=function(v,y){return{x:v.x,y:v.y,value:v.value,errorVal:Br(v.payload,y)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return V.createElement(wt,m,f.map(function(g){return V.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,d=s.dataKey,f=Ce(this.props,!1),p=Ce(l,!0),m=c.map(function(v,y){var x=Ir(Ir(Ir({key:"dot-".concat(y),r:3},f),p),{},{index:y,cx:v.x,cy:v.y,value:v.value,dataKey:d,payload:v.payload,points:c});return e.renderDotItem(l,x)}),g={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return V.createElement(wt,Wc({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,i,a,o){var s=this.props,l=s.type,c=s.layout,d=s.connectNulls;s.ref;var f=W2(s,hhe),p=Ir(Ir(Ir({},Ce(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:n},o),{},{type:l,layout:c,connectNulls:d});return V.createElement(tx,Wc({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var a=this,o=this.props,s=o.points,l=o.strokeDasharray,c=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,p=o.animationEasing,m=o.animationId,g=o.animateNewValues,v=o.width,y=o.height,x=this.state,b=x.prevPoints,k=x.totalLength;return V.createElement(Si,{begin:d,duration:f,isActive:c,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var w=j.t;if(b){var T=b.length/s.length,S=s.map(function(O,A){var $=Math.floor(A*T);if(b[$]){var L=b[$],U=gn(L.x,O.x),z=gn(L.y,O.y);return Ir(Ir({},O),{},{x:U(w),y:z(w)})}if(g){var M=gn(v*2,O.x),F=gn(y/2,O.y);return Ir(Ir({},O),{},{x:M(w),y:F(w)})}return Ir(Ir({},O),{},{x:O.x,y:O.y})});return a.renderCurveStatically(S,n,i)}var E=gn(0,k),P=E(w),N;if(l){var I="".concat(l).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});N=a.getStrokeDasharray(P,k,I)}else N=a.generateSimpleStrokeDasharray(k,P);return a.renderCurveStatically(s,n,i,{strokeDasharray:N})})}},{key:"renderCurve",value:function(n,i){var a=this.props,o=a.points,s=a.isAnimationActive,l=this.state,c=l.prevPoints,d=l.totalLength;return s&&o&&o.length&&(!c&&d>0||!ng(c,o))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(o,n,i)}},{key:"render",value:function(){var n,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,c=i.xAxis,d=i.yAxis,f=i.top,p=i.left,m=i.width,g=i.height,v=i.isAnimationActive,y=i.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,b=s.length===1,k=Re("recharts-line",l),j=c&&c.allowDataOverflow,w=d&&d.allowDataOverflow,T=j||w,S=Ee(y)?this.id:y,E=(n=Ce(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},P=E.r,N=P===void 0?3:P,I=E.strokeWidth,O=I===void 0?2:I,A=$W(o)?o:{},$=A.clipDot,L=$===void 0?!0:$,U=N*2+O;return V.createElement(wt,{className:k},j||w?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(S)},V.createElement("rect",{x:j?p:p-m/2,y:w?f:f-g/2,width:j?m:m*2,height:w?g:g*2})),!L&&V.createElement("clipPath",{id:"clipPath-dots-".concat(S)},V.createElement("rect",{x:p-U/2,y:f-U/2,width:m+U,height:g+U}))):null,!b&&this.renderCurve(T,S),this.renderErrorBar(T,S),(b||o)&&this.renderDots(T,L,S),(!v||x)&&fa.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var a=n.length%2!==0?[].concat(Wo(n),[0]):n,o=[],s=0;s<i;++s)o=[].concat(Wo(o),Wo(a));return o}},{key:"renderDotItem",value:function(n,i){var a;if(V.isValidElement(n))a=V.cloneElement(n,i);else if(Se(n))a=n(i);else{var o=i.key,s=W2(i,phe),l=Re("recharts-line-dot",typeof n!="boolean"?n.className:"");a=V.createElement(P_,Wc({key:o},s,{className:l}))}return a}}])}(R.PureComponent);pn(ha,"displayName","Line");pn(ha,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});pn(ha,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,d=e.layout,f=l.map(function(p,m){var g=Br(p,o);return d==="horizontal"?{x:CA({axis:r,ticks:i,bandSize:s,entry:p,index:m}),y:Ee(g)?null:n.scale(g),value:g,payload:p}:{x:Ee(g)?null:r.scale(g),y:CA({axis:n,ticks:a,bandSize:s,entry:p,index:m}),value:g,payload:p}});return Ir({points:f,layout:d},c)});function sl(t){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(t)}function Ahe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Phe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wM(n.key),n)}}function Che(t,e,r){return e&&Phe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jhe(t,e,r){return e=Lp(e),Nhe(t,xM()?Reflect.construct(e,r||[],Lp(t).constructor):e.apply(t,r))}function Nhe(t,e){if(e&&(sl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ihe(t)}function Ihe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xM=function(){return!!t})()}function Lp(t){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lp(t)}function Ohe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ex(t,e)}function Ex(t,e){return Ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ex(t,e)}function bM(t,e,r){return e=wM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wM(t){var e=Rhe(t,"string");return sl(e)=="symbol"?e:e+""}function Rhe(t,e){if(sl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Tx(){return Tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tx.apply(this,arguments)}function Dhe(t){var e=t.xAxisId,r=I_(),n=O_(),i=aM(e);return i==null?null:R.createElement(Rl,Tx({},i,{className:Re("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ai(o,!0)}}))}var Nn=function(t){function e(){return Ahe(this,e),jhe(this,e,arguments)}return Ohe(e,t),Che(e,[{key:"render",value:function(){return R.createElement(Dhe,this.props)}}])}(R.Component);bM(Nn,"displayName","XAxis");bM(Nn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ll(t){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(t)}function Mhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $he(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SM(n.key),n)}}function Lhe(t,e,r){return e&&$he(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vhe(t,e,r){return e=Vp(e),Fhe(t,_M()?Reflect.construct(e,r||[],Vp(t).constructor):e.apply(t,r))}function Fhe(t,e){if(e&&(ll(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bhe(t)}function Bhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_M=function(){return!!t})()}function Vp(t){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vp(t)}function Uhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ax(t,e)}function Ax(t,e){return Ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ax(t,e)}function kM(t,e,r){return e=SM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SM(t){var e=zhe(t,"string");return ll(e)=="symbol"?e:e+""}function zhe(t,e){if(ll(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Px(){return Px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Px.apply(this,arguments)}var Whe=function(e){var r=e.yAxisId,n=I_(),i=O_(),a=oM(r);return a==null?null:R.createElement(Rl,Px({},a,{className:Re("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return ai(s,!0)}}))},In=function(t){function e(){return Mhe(this,e),Vhe(this,e,arguments)}return Uhe(e,t),Lhe(e,[{key:"render",value:function(){return R.createElement(Whe,this.props)}}])}(R.Component);kM(In,"displayName","YAxis");kM(In,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function G2(t){return Khe(t)||Ghe(t)||qhe(t)||Hhe()}function Hhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qhe(t,e){if(t){if(typeof t=="string")return Cx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cx(t,e)}}function Ghe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Khe(t){if(Array.isArray(t))return Cx(t)}function Cx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var jx=function(e,r,n,i,a){var o=Zr(e,D_),s=Zr(e,ug),l=[].concat(G2(o),G2(s)),c=Zr(e,fg),d="".concat(i,"Id"),f=i[0],p=r;if(l.length&&(p=l.reduce(function(v,y){if(y.props[d]===n&&Fn(y.props,"extendDomain")&&ie(y.props[f])){var x=y.props[f];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},p)),c.length){var m="".concat(f,"1"),g="".concat(f,"2");p=c.reduce(function(v,y){if(y.props[d]===n&&Fn(y.props,"extendDomain")&&ie(y.props[m])&&ie(y.props[g])){var x=y.props[m],b=y.props[g];return[Math.min(v[0],x,b),Math.max(v[1],x,b)]}return v},p)}return a&&a.length&&(p=a.reduce(function(v,y){return ie(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},p)),p},EM={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function a(l,c,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,p),g=r?r+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)e.call(d,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},s.prototype.listeners=function(c){var d=r?r+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,g=new Array(m);p<m;p++)g[p]=f[p].fn;return g},s.prototype.listenerCount=function(c){var d=r?r+c:c,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,d,f,p,m,g){var v=r?r+c:c;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,b,k;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,p),!0;case 5:return y.fn.call(y.context,d,f,p,m),!0;case 6:return y.fn.call(y.context,d,f,p,m,g),!0}for(k=1,b=new Array(x-1);k<x;k++)b[k-1]=arguments[k];y.fn.apply(y.context,b)}else{var j=y.length,w;for(k=0;k<j;k++)switch(y[k].once&&this.removeListener(c,y[k].fn,void 0,!0),x){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,d);break;case 3:y[k].fn.call(y[k].context,d,f);break;case 4:y[k].fn.call(y[k].context,d,f,p);break;default:if(!b)for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];y[k].fn.apply(y[k].context,b)}}return!0},s.prototype.on=function(c,d,f){return a(this,c,d,f,!1)},s.prototype.once=function(c,d,f){return a(this,c,d,f,!0)},s.prototype.removeListener=function(c,d,f,p){var m=r?r+c:c;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!p||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var v=0,y=[],x=g.length;v<x;v++)(g[v].fn!==d||p&&!g[v].once||f&&g[v].context!==f)&&y.push(g[v]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},s.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(EM);var Yhe=EM.exports;const Qhe=Qe(Yhe);var Fy=new Qhe,By="recharts.syncMouseEvents";function Zu(t){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(t)}function Xhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TM(n.key),n)}}function Zhe(t,e,r){return e&&Jhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uy(t,e,r){return e=TM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TM(t){var e=epe(t,"string");return Zu(e)=="symbol"?e:e+""}function epe(t,e){if(Zu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tpe=function(){function t(){Xhe(this,t),Uy(this,"activeIndex",0),Uy(this,"coordinateList",[]),Uy(this,"layout","horizontal")}return Zhe(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,o=r.container,s=o===void 0?null:o,l=r.layout,c=l===void 0?null:l,d=r.offset,f=d===void 0?null:d,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=a+l+c,p=o+this.offset.top+s/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function rpe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&ie(n)&&ie(i))return!0}return!1}function npe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function AM(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,o=Gt(e,r,n,i),s=Gt(e,r,n,a);return{points:[o,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function ipe(t,e,r){var n,i,a,o;if(t==="horizontal")n=e.x,a=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,d=e.outerRadius,f=e.angle,p=Gt(s,l,c,f),m=Gt(s,l,d,f);n=p.x,i=p.y,a=m.x,o=m.y}else return AM(e);return[{x:n,y:i},{x:a,y:o}]}function ed(t){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(t)}function K2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Af(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K2(Object(r),!0).forEach(function(n){ape(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ape(t,e,r){return e=ope(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ope(t){var e=spe(t,"string");return ed(e)=="symbol"?e:e+""}function spe(t,e){if(ed(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lpe(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!a||!o||p!=="ScatterChart"&&i!=="axis")return null;var g,v=tx;if(p==="ScatterChart")g=o,v=lce;else if(p==="BarChart")g=npe(f,o,l,d),v=A_;else if(f==="radial"){var y=AM(o),x=y.cx,b=y.cy,k=y.radius,j=y.startAngle,w=y.endAngle;g={cx:x,cy:b,startAngle:j,endAngle:w,innerRadius:k,outerRadius:k},v=jD}else g={points:ipe(f,o,l)},v=tx;var T=Af(Af(Af(Af({stroke:"#ccc",pointerEvents:"none"},l),g),Ce(m,!1)),{},{payload:s,payloadIndex:c,className:Re("recharts-tooltip-cursor",m.className)});return R.isValidElement(m)?R.cloneElement(m,T):R.createElement(v,T)}var cpe=["item"],upe=["children","className","width","height","style","compact","title","desc"];function cl(t){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(t)}function fs(){return fs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fs.apply(this,arguments)}function Y2(t,e){return hpe(t)||fpe(t,e)||CM(t,e)||dpe()}function dpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fpe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function hpe(t){if(Array.isArray(t))return t}function Q2(t,e){if(t==null)return{};var r=ppe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ppe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function mpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jM(n.key),n)}}function ype(t,e,r){return e&&gpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vpe(t,e,r){return e=Fp(e),xpe(t,PM()?Reflect.construct(e,r||[],Fp(t).constructor):e.apply(t,r))}function xpe(t,e){if(e&&(cl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bpe(t)}function bpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PM=function(){return!!t})()}function Fp(t){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fp(t)}function wpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nx(t,e)}function Nx(t,e){return Nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nx(t,e)}function ul(t){return Spe(t)||kpe(t)||CM(t)||_pe()}function _pe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CM(t,e){if(t){if(typeof t=="string")return Ix(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ix(t,e)}}function kpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Spe(t){if(Array.isArray(t))return Ix(t)}function Ix(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X2(Object(r),!0).forEach(function(n){ge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ge(t,e,r){return e=jM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jM(t){var e=Epe(t,"string");return cl(e)=="symbol"?e:e+""}function Epe(t,e){if(cl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tpe={xAxis:["bottom","top"],yAxis:["left","right"]},Ape={width:"100%",height:"100%"},NM={x:0,y:0};function Pf(t){return t}var Ppe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Cpe=function(e,r,n,i){var a=r.find(function(d){return d&&d.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return G(G(G({},i),Gt(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return G(G(G({},i),Gt(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return NM},hg=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(ul(s),ul(c)):s},[]);return o.length>0?o:e&&e.length&&ie(i)&&ie(a)?e.slice(i,a+1):[]};function IM(t){return t==="number"?[0,"auto"]:void 0}var Ox=function(e,r,n,i){var a=e.graphicalItems,o=e.tooltipAxis,s=hg(r,e);return n<0||!a||!a.length||n>=s.length?null:a.reduce(function(l,c){var d,f=(d=c.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?s:f;p=Bh(m,o.dataKey,i)}else p=f&&f[n]||s[n];return p?[].concat(ul(l),[AD(c,p)]):l},[])},J2=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},o=Ppe(a,n),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,d=Fae(o,s,c,l);if(d>=0&&c){var f=c[d]&&c[d].value,p=Ox(e,r,d,f),m=Cpe(n,s,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},jpe=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,m=SD(d,a);return n.reduce(function(g,v){var y,x=v.type.defaultProps!==void 0?G(G({},v.type.defaultProps),v.props):v.props,b=x.type,k=x.dataKey,j=x.allowDataOverflow,w=x.allowDuplicatedCategory,T=x.scale,S=x.ticks,E=x.includeHidden,P=x[o];if(g[P])return g;var N=hg(e.data,{graphicalItems:i.filter(function(H){var ee,ce=o in H.props?H.props[o]:(ee=H.type.defaultProps)===null||ee===void 0?void 0:ee[o];return ce===P}),dataStartIndex:l,dataEndIndex:c}),I=N.length,O,A,$;rpe(x.domain,j,b)&&(O=Q0(x.domain,null,j),m&&(b==="number"||T!=="auto")&&($=Uc(N,k,"category")));var L=IM(b);if(!O||O.length===0){var U,z=(U=x.domain)!==null&&U!==void 0?U:L;if(k){if(O=Uc(N,k,b),b==="category"&&m){var M=AW(O);w&&M?(A=O,O=Ap(0,I)):w||(O=OA(z,O,v).reduce(function(H,ee){return H.indexOf(ee)>=0?H:[].concat(ul(H),[ee])},[]))}else if(b==="category")w?O=O.filter(function(H){return H!==""&&!Ee(H)}):O=OA(z,O,v).reduce(function(H,ee){return H.indexOf(ee)>=0||ee===""||Ee(ee)?H:[].concat(ul(H),[ee])},[]);else if(b==="number"){var F=Hae(N,i.filter(function(H){var ee,ce,xe=o in H.props?H.props[o]:(ee=H.type.defaultProps)===null||ee===void 0?void 0:ee[o],qe="hide"in H.props?H.props.hide:(ce=H.type.defaultProps)===null||ce===void 0?void 0:ce.hide;return xe===P&&(E||!qe)}),k,a,d);F&&(O=F)}m&&(b==="number"||T!=="auto")&&($=Uc(N,k,"category"))}else m?O=Ap(0,I):s&&s[P]&&s[P].hasStack&&b==="number"?O=p==="expand"?[0,1]:TD(s[P].stackGroups,l,c):O=kD(N,i.filter(function(H){var ee=o in H.props?H.props[o]:H.type.defaultProps[o],ce="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return ee===P&&(E||!ce)}),b,d,!0);if(b==="number")O=jx(f,O,P,a,S),z&&(O=Q0(z,O,j));else if(b==="category"&&z){var B=z,K=O.every(function(H){return B.indexOf(H)>=0});K&&(O=B)}}return G(G({},g),{},ge({},P,G(G({},x),{},{axisType:a,domain:O,categoricalDomain:$,duplicateDomain:A,originalDomain:(y=x.domain)!==null&&y!==void 0?y:L,isCategorical:m,layout:d})))},{})},Npe=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,d=e.layout,f=e.children,p=hg(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),m=p.length,g=SD(d,a),v=-1;return n.reduce(function(y,x){var b=x.type.defaultProps!==void 0?G(G({},x.type.defaultProps),x.props):x.props,k=b[o],j=IM("number");if(!y[k]){v++;var w;return g?w=Ap(0,m):s&&s[k]&&s[k].hasStack?(w=TD(s[k].stackGroups,l,c),w=jx(f,w,k,a)):(w=Q0(j,kD(p,n.filter(function(T){var S,E,P=o in T.props?T.props[o]:(S=T.type.defaultProps)===null||S===void 0?void 0:S[o],N="hide"in T.props?T.props.hide:(E=T.type.defaultProps)===null||E===void 0?void 0:E.hide;return P===k&&!N}),"number",d),i.defaultProps.allowDataOverflow),w=jx(f,w,k,a)),G(G({},y),{},ge({},k,G(G({axisType:a},i.defaultProps),{},{hide:!0,orientation:Jr(Tpe,"".concat(a,".").concat(v%2),null),domain:w,originalDomain:j,isCategorical:g,layout:d})))}return y},{})},Ipe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,d=e.children,f="".concat(i,"Id"),p=Zr(d,a),m={};return p&&p.length?m=jpe(e,{axes:p,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(m=Npe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),m},Ope=function(e){var r=qi(e),n=ai(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Zw(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:yp(r,n)}},Z2=function(e){var r=e.children,n=e.defaultShowTooltip,i=Dr(r,el),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Rpe=function(e){return!e||!e.length?!1:e.some(function(r){var n=ui(r&&r.type);return n&&n.indexOf("Bar")>=0})},eP=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Dpe=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,c=n.width,d=n.height,f=n.children,p=n.margin||{},m=Dr(f,el),g=Dr(f,Es),v=Object.keys(l).reduce(function(w,T){var S=l[T],E=S.orientation;return!S.mirror&&!S.hide?G(G({},w),{},ge({},E,w[E]+S.width)):w},{left:p.left||0,right:p.right||0}),y=Object.keys(o).reduce(function(w,T){var S=o[T],E=S.orientation;return!S.mirror&&!S.hide?G(G({},w),{},ge({},E,Jr(w,"".concat(E))+S.height)):w},{top:p.top||0,bottom:p.bottom||0}),x=G(G({},y),v),b=x.bottom;m&&(x.bottom+=m.props.height||el.defaultProps.height),g&&r&&(x=zae(x,i,n,r));var k=c-x.left-x.right,j=d-x.top-x.bottom;return G(G({brushBottom:b},x),{},{width:Math.max(k,0),height:Math.max(j,0)})},Mpe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},OM=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(x,b){var k=b.graphicalItems,j=b.stackGroups,w=b.offset,T=b.updateId,S=b.dataStartIndex,E=b.dataEndIndex,P=x.barSize,N=x.layout,I=x.barGap,O=x.barCategoryGap,A=x.maxBarSize,$=eP(N),L=$.numericAxisName,U=$.cateAxisName,z=Rpe(k),M=[];return k.forEach(function(F,B){var K=hg(x.data,{graphicalItems:[F],dataStartIndex:S,dataEndIndex:E}),H=F.type.defaultProps!==void 0?G(G({},F.type.defaultProps),F.props):F.props,ee=H.dataKey,ce=H.maxBarSize,xe=H["".concat(L,"Id")],qe=H["".concat(U,"Id")],et={},Ne=l.reduce(function(de,fe){var Ie=b["".concat(fe.axisType,"Map")],Xe=H["".concat(fe.axisType,"Id")];Ie&&Ie[Xe]||fe.axisType==="zAxis"||bo();var ut=Ie[Xe];return G(G({},de),{},ge(ge({},fe.axisType,ut),"".concat(fe.axisType,"Ticks"),ai(ut)))},et),re=Ne[U],pe=Ne["".concat(U,"Ticks")],ye=j&&j[xe]&&j[xe].hasStack&&noe(F,j[xe].stackGroups),Q=ui(F.type).indexOf("Bar")>=0,Fe=yp(re,pe),ke=[],Be=z&&Bae({barSize:P,stackGroups:j,totalSize:Mpe(Ne,U)});if(Q){var J,me,tt=Ee(ce)?A:ce,X=(J=(me=yp(re,pe,!0))!==null&&me!==void 0?me:tt)!==null&&J!==void 0?J:0;ke=Uae({barGap:I,barCategoryGap:O,bandSize:X!==Fe?X:Fe,sizeList:Be[qe],maxBarSize:tt}),X!==Fe&&(ke=ke.map(function(de){return G(G({},de),{},{position:G(G({},de.position),{},{offset:de.position.offset-X/2})})}))}var ae=F&&F.type&&F.type.getComposedData;ae&&M.push({props:G(G({},ae(G(G({},Ne),{},{displayedData:K,props:x,dataKey:ee,item:F,bandSize:Fe,barPosition:ke,offset:w,stackedData:ye,layout:N,dataStartIndex:S,dataEndIndex:E}))),{},ge(ge(ge({key:F.key||"item-".concat(B)},L,Ne[L]),U,Ne[U]),"animationId",T)),childIndex:FW(F,x.children),item:F})}),M},m=function(x,b){var k=x.props,j=x.dataStartIndex,w=x.dataEndIndex,T=x.updateId;if(!TE({props:k}))return null;var S=k.children,E=k.layout,P=k.stackOffset,N=k.data,I=k.reverseStackOrder,O=eP(E),A=O.numericAxisName,$=O.cateAxisName,L=Zr(S,n),U=eoe(N,L,"".concat(A,"Id"),"".concat($,"Id"),P,I),z=l.reduce(function(H,ee){var ce="".concat(ee.axisType,"Map");return G(G({},H),{},ge({},ce,Ipe(k,G(G({},ee),{},{graphicalItems:L,stackGroups:ee.axisType===A&&U,dataStartIndex:j,dataEndIndex:w}))))},{}),M=Dpe(G(G({},z),{},{props:k,graphicalItems:L}),b==null?void 0:b.legendBBox);Object.keys(z).forEach(function(H){z[H]=d(k,z[H],M,H.replace("Map",""),r)});var F=z["".concat($,"Map")],B=Ope(F),K=p(k,G(G({},z),{},{dataStartIndex:j,dataEndIndex:w,updateId:T,graphicalItems:L,stackGroups:U,offset:M}));return G(G({formattedGraphicalItems:K,graphicalItems:L,offset:M,stackGroups:U},B),z)},g=function(y){function x(b){var k,j,w;return mpe(this,x),w=vpe(this,x,[b]),ge(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ge(w,"accessibilityManager",new tpe),ge(w,"handleLegendBBoxUpdate",function(T){if(T){var S=w.state,E=S.dataStartIndex,P=S.dataEndIndex,N=S.updateId;w.setState(G({legendBBox:T},m({props:w.props,dataStartIndex:E,dataEndIndex:P,updateId:N},G(G({},w.state),{},{legendBBox:T}))))}}),ge(w,"handleReceiveSyncEvent",function(T,S,E){if(w.props.syncId===T){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(S)}}),ge(w,"handleBrushChange",function(T){var S=T.startIndex,E=T.endIndex;if(S!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var P=w.state.updateId;w.setState(function(){return G({dataStartIndex:S,dataEndIndex:E},m({props:w.props,dataStartIndex:S,dataEndIndex:E,updateId:P},w.state))}),w.triggerSyncEvent({dataStartIndex:S,dataEndIndex:E})}}),ge(w,"handleMouseEnter",function(T){var S=w.getMouseInfo(T);if(S){var E=G(G({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var P=w.props.onMouseEnter;Se(P)&&P(E,T)}}),ge(w,"triggeredAfterMouseMove",function(T){var S=w.getMouseInfo(T),E=S?G(G({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var P=w.props.onMouseMove;Se(P)&&P(E,T)}),ge(w,"handleItemMouseEnter",function(T){w.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),ge(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),ge(w,"handleMouseMove",function(T){T.persist(),w.throttleTriggeredAfterMouseMove(T)}),ge(w,"handleMouseLeave",function(T){w.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var E=w.props.onMouseLeave;Se(E)&&E(S,T)}),ge(w,"handleOuterEvent",function(T){var S=VW(T),E=Jr(w.props,"".concat(S));if(S&&Se(E)){var P,N;/.*touch.*/i.test(S)?N=w.getMouseInfo(T.changedTouches[0]):N=w.getMouseInfo(T),E((P=N)!==null&&P!==void 0?P:{},T)}}),ge(w,"handleClick",function(T){var S=w.getMouseInfo(T);if(S){var E=G(G({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var P=w.props.onClick;Se(P)&&P(E,T)}}),ge(w,"handleMouseDown",function(T){var S=w.props.onMouseDown;if(Se(S)){var E=w.getMouseInfo(T);S(E,T)}}),ge(w,"handleMouseUp",function(T){var S=w.props.onMouseUp;if(Se(S)){var E=w.getMouseInfo(T);S(E,T)}}),ge(w,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),ge(w,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&w.handleMouseDown(T.changedTouches[0])}),ge(w,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&w.handleMouseUp(T.changedTouches[0])}),ge(w,"handleDoubleClick",function(T){var S=w.props.onDoubleClick;if(Se(S)){var E=w.getMouseInfo(T);S(E,T)}}),ge(w,"handleContextMenu",function(T){var S=w.props.onContextMenu;if(Se(S)){var E=w.getMouseInfo(T);S(E,T)}}),ge(w,"triggerSyncEvent",function(T){w.props.syncId!==void 0&&Fy.emit(By,w.props.syncId,T,w.eventEmitterSymbol)}),ge(w,"applySyncEvent",function(T){var S=w.props,E=S.layout,P=S.syncMethod,N=w.state.updateId,I=T.dataStartIndex,O=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)w.setState(G({dataStartIndex:I,dataEndIndex:O},m({props:w.props,dataStartIndex:I,dataEndIndex:O,updateId:N},w.state)));else if(T.activeTooltipIndex!==void 0){var A=T.chartX,$=T.chartY,L=T.activeTooltipIndex,U=w.state,z=U.offset,M=U.tooltipTicks;if(!z)return;if(typeof P=="function")L=P(M,T);else if(P==="value"){L=-1;for(var F=0;F<M.length;F++)if(M[F].value===T.activeLabel){L=F;break}}var B=G(G({},z),{},{x:z.left,y:z.top}),K=Math.min(A,B.x+B.width),H=Math.min($,B.y+B.height),ee=M[L]&&M[L].value,ce=Ox(w.state,w.props.data,L),xe=M[L]?{x:E==="horizontal"?M[L].coordinate:K,y:E==="horizontal"?H:M[L].coordinate}:NM;w.setState(G(G({},T),{},{activeLabel:ee,activeCoordinate:xe,activePayload:ce,activeTooltipIndex:L}))}else w.setState(T)}),ge(w,"renderCursor",function(T){var S,E=w.state,P=E.isTooltipActive,N=E.activeCoordinate,I=E.activePayload,O=E.offset,A=E.activeTooltipIndex,$=E.tooltipAxisBandSize,L=w.getTooltipEventType(),U=(S=T.props.active)!==null&&S!==void 0?S:P,z=w.props.layout,M=T.key||"_recharts-cursor";return V.createElement(lpe,{key:M,activeCoordinate:N,activePayload:I,activeTooltipIndex:A,chartName:r,element:T,isActive:U,layout:z,offset:O,tooltipAxisBandSize:$,tooltipEventType:L})}),ge(w,"renderPolarAxis",function(T,S,E){var P=Jr(T,"type.axisType"),N=Jr(w.state,"".concat(P,"Map")),I=T.type.defaultProps,O=I!==void 0?G(G({},I),T.props):T.props,A=N&&N[O["".concat(P,"Id")]];return R.cloneElement(T,G(G({},A),{},{className:Re(P,A.className),key:T.key||"".concat(S,"-").concat(E),ticks:ai(A,!0)}))}),ge(w,"renderPolarGrid",function(T){var S=T.props,E=S.radialLines,P=S.polarAngles,N=S.polarRadius,I=w.state,O=I.radiusAxisMap,A=I.angleAxisMap,$=qi(O),L=qi(A),U=L.cx,z=L.cy,M=L.innerRadius,F=L.outerRadius;return R.cloneElement(T,{polarAngles:Array.isArray(P)?P:ai(L,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(N)?N:ai($,!0).map(function(B){return B.coordinate}),cx:U,cy:z,innerRadius:M,outerRadius:F,key:T.key||"polar-grid",radialLines:E})}),ge(w,"renderLegend",function(){var T=w.state.formattedGraphicalItems,S=w.props,E=S.children,P=S.width,N=S.height,I=w.props.margin||{},O=P-(I.left||0)-(I.right||0),A=wD({children:E,formattedGraphicalItems:T,legendWidth:O,legendContent:c});if(!A)return null;var $=A.item,L=Q2(A,cpe);return R.cloneElement($,G(G({},L),{},{chartWidth:P,chartHeight:N,margin:I,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),ge(w,"renderTooltip",function(){var T,S=w.props,E=S.children,P=S.accessibilityLayer,N=Dr(E,hr);if(!N)return null;var I=w.state,O=I.isTooltipActive,A=I.activeCoordinate,$=I.activePayload,L=I.activeLabel,U=I.offset,z=(T=N.props.active)!==null&&T!==void 0?T:O;return R.cloneElement(N,{viewBox:G(G({},U),{},{x:U.left,y:U.top}),active:z,label:L,payload:z?$:[],coordinate:A,accessibilityLayer:P})}),ge(w,"renderBrush",function(T){var S=w.props,E=S.margin,P=S.data,N=w.state,I=N.offset,O=N.dataStartIndex,A=N.dataEndIndex,$=N.updateId;return R.cloneElement(T,{key:T.key||"_recharts-brush",onChange:kf(w.handleBrushChange,T.props.onChange),data:P,x:ie(T.props.x)?T.props.x:I.left,y:ie(T.props.y)?T.props.y:I.top+I.height+I.brushBottom-(E.bottom||0),width:ie(T.props.width)?T.props.width:I.width,startIndex:O,endIndex:A,updateId:"brush-".concat($)})}),ge(w,"renderReferenceElement",function(T,S,E){if(!T)return null;var P=w,N=P.clipPathId,I=w.state,O=I.xAxisMap,A=I.yAxisMap,$=I.offset,L=T.type.defaultProps||{},U=T.props,z=U.xAxisId,M=z===void 0?L.xAxisId:z,F=U.yAxisId,B=F===void 0?L.yAxisId:F;return R.cloneElement(T,{key:T.key||"".concat(S,"-").concat(E),xAxis:O[M],yAxis:A[B],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:N})}),ge(w,"renderActivePoints",function(T){var S=T.item,E=T.activePoint,P=T.basePoint,N=T.childIndex,I=T.isRange,O=[],A=S.props.key,$=S.item.type.defaultProps!==void 0?G(G({},S.item.type.defaultProps),S.item.props):S.item.props,L=$.activeDot,U=$.dataKey,z=G(G({index:N,dataKey:U,cx:E.x,cy:E.y,r:4,fill:T_(S.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Ce(L,!1)),Uh(L));return O.push(x.renderActiveDot(L,z,"".concat(A,"-activePoint-").concat(N))),P?O.push(x.renderActiveDot(L,G(G({},z),{},{cx:P.x,cy:P.y}),"".concat(A,"-basePoint-").concat(N))):I&&O.push(null),O}),ge(w,"renderGraphicChild",function(T,S,E){var P=w.filterFormatItem(T,S,E);if(!P)return null;var N=w.getTooltipEventType(),I=w.state,O=I.isTooltipActive,A=I.tooltipAxis,$=I.activeTooltipIndex,L=I.activeLabel,U=w.props.children,z=Dr(U,hr),M=P.props,F=M.points,B=M.isRange,K=M.baseLine,H=P.item.type.defaultProps!==void 0?G(G({},P.item.type.defaultProps),P.item.props):P.item.props,ee=H.activeDot,ce=H.hide,xe=H.activeBar,qe=H.activeShape,et=!!(!ce&&O&&z&&(ee||xe||qe)),Ne={};N!=="axis"&&z&&z.props.trigger==="click"?Ne={onClick:kf(w.handleItemMouseEnter,T.props.onClick)}:N!=="axis"&&(Ne={onMouseLeave:kf(w.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:kf(w.handleItemMouseEnter,T.props.onMouseEnter)});var re=R.cloneElement(T,G(G({},P.props),Ne));function pe(fe){return typeof A.dataKey=="function"?A.dataKey(fe.payload):null}if(et)if($>=0){var ye,Q;if(A.dataKey&&!A.allowDuplicatedCategory){var Fe=typeof A.dataKey=="function"?pe:"payload.".concat(A.dataKey.toString());ye=Bh(F,Fe,L),Q=B&&K&&Bh(K,Fe,L)}else ye=F==null?void 0:F[$],Q=B&&K&&K[$];if(qe||xe){var ke=T.props.activeIndex!==void 0?T.props.activeIndex:$;return[R.cloneElement(T,G(G(G({},P.props),Ne),{},{activeIndex:ke})),null,null]}if(!Ee(ye))return[re].concat(ul(w.renderActivePoints({item:P,activePoint:ye,basePoint:Q,childIndex:$,isRange:B})))}else{var Be,J=(Be=w.getItemByXY(w.state.activeCoordinate))!==null&&Be!==void 0?Be:{graphicalItem:re},me=J.graphicalItem,tt=me.item,X=tt===void 0?T:tt,ae=me.childIndex,de=G(G(G({},P.props),Ne),{},{activeIndex:ae});return[R.cloneElement(X,de),null,null]}return B?[re,null,null]:[re,null]}),ge(w,"renderCustomized",function(T,S,E){return R.cloneElement(T,G(G({key:"recharts-customized-".concat(E)},w.props),w.state))}),ge(w,"renderMap",{CartesianGrid:{handler:Pf,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Pf},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Pf},YAxis:{handler:Pf},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((k=b.id)!==null&&k!==void 0?k:kd("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=wR(w.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),w.state={},w}return wpe(x,y),ype(x,[{key:"componentDidMount",value:function(){var k,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,j=k.children,w=k.data,T=k.height,S=k.layout,E=Dr(j,hr);if(E){var P=E.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var N=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,I=Ox(this.state,w,P,N),O=this.state.tooltipTicks[P].coordinate,A=(this.state.offset.top+T)/2,$=S==="horizontal",L=$?{x:O,y:A}:{y:O,x:A},U=this.state.formattedGraphicalItems.find(function(M){var F=M.item;return F.type.name==="Scatter"});U&&(L=G(G({},L),U.props.points[P].tooltipPosition),I=U.props.points[P].tooltipPayload);var z={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:N,activePayload:I,activeCoordinate:L};this.setState(z),this.renderCursor(E),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var w,T;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(k){d0([Dr(k.children,hr)],[Dr(this.props.children,hr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=Dr(this.props.children,hr);if(k&&typeof k.props.shared=="boolean"){var j=k.props.shared?"axis":"item";return s.indexOf(j)>=0?j:a}return a}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var j=this.container,w=j.getBoundingClientRect(),T=fte(w),S={chartX:Math.round(k.pageX-T.left),chartY:Math.round(k.pageY-T.top)},E=w.width/j.offsetWidth||1,P=this.inRange(S.chartX,S.chartY,E);if(!P)return null;var N=this.state,I=N.xAxisMap,O=N.yAxisMap,A=this.getTooltipEventType(),$=J2(this.state,this.props.data,this.props.layout,P);if(A!=="axis"&&I&&O){var L=qi(I).scale,U=qi(O).scale,z=L&&L.invert?L.invert(S.chartX):null,M=U&&U.invert?U.invert(S.chartY):null;return G(G({},S),{},{xValue:z,yValue:M},$)}return $?G(G({},S),$):null}},{key:"inRange",value:function(k,j){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,S=k/w,E=j/w;if(T==="horizontal"||T==="vertical"){var P=this.state.offset,N=S>=P.left&&S<=P.left+P.width&&E>=P.top&&E<=P.top+P.height;return N?{x:S,y:E}:null}var I=this.state,O=I.angleAxisMap,A=I.radiusAxisMap;if(O&&A){var $=qi(O);return MA({x:S,y:E},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,j=this.getTooltipEventType(),w=Dr(k,hr),T={};w&&j==="axis"&&(w.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Uh(this.props,this.handleOuterEvent);return G(G({},S),T)}},{key:"addListener",value:function(){Fy.on(By,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Fy.removeListener(By,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,j,w){for(var T=this.state.formattedGraphicalItems,S=0,E=T.length;S<E;S++){var P=T[S];if(P.item===k||P.props.key===k.key||j===ui(P.item.type)&&w===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,j=this.state.offset,w=j.left,T=j.top,S=j.height,E=j.width;return V.createElement("defs",null,V.createElement("clipPath",{id:k},V.createElement("rect",{x:w,y:T,height:S,width:E})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function(j,w){var T=Y2(w,2),S=T[0],E=T[1];return G(G({},j),{},ge({},S,E.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function(j,w){var T=Y2(w,2),S=T[0],E=T[1];return G(G({},j),{},ge({},S,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[k])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(k){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[k])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(k){var j=this.state,w=j.formattedGraphicalItems,T=j.activeItem;if(w&&w.length)for(var S=0,E=w.length;S<E;S++){var P=w[S],N=P.props,I=P.item,O=I.type.defaultProps!==void 0?G(G({},I.type.defaultProps),I.props):I.props,A=ui(I.type);if(A==="Bar"){var $=(N.data||[]).find(function(M){return Jle(k,M)});if($)return{graphicalItem:P,payload:$}}else if(A==="RadialBar"){var L=(N.data||[]).find(function(M){return MA(k,M)});if(L)return{graphicalItem:P,payload:L}}else if(og(P,T)||sg(P,T)||Ku(P,T)){var U=tue({graphicalItem:P,activeTooltipItem:T,itemData:O.data}),z=O.activeIndex===void 0?U:O.activeIndex;return{graphicalItem:G(G({},P),{},{childIndex:z}),payload:Ku(P,T)?O.data[U]:P.props.data[U]}}}return null}},{key:"render",value:function(){var k=this;if(!TE(this))return null;var j=this.props,w=j.children,T=j.className,S=j.width,E=j.height,P=j.style,N=j.compact,I=j.title,O=j.desc,A=Q2(j,upe),$=Ce(A,!1);if(N)return V.createElement(N2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(h0,fs({},$,{width:S,height:E,title:I,desc:O}),this.renderClipPath(),PE(w,this.renderMap)));if(this.props.accessibilityLayer){var L,U;$.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,$.role=(U=this.props.role)!==null&&U!==void 0?U:"application",$.onKeyDown=function(M){k.accessibilityManager.keyboardEvent(M)},$.onFocus=function(){k.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return V.createElement(N2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",fs({className:Re("recharts-wrapper",T),style:G({position:"relative",cursor:"default",width:S,height:E},P)},z,{ref:function(F){k.container=F}}),V.createElement(h0,fs({},$,{width:S,height:E,title:I,desc:O,style:Ape}),this.renderClipPath(),PE(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(R.Component);ge(g,"displayName",r),ge(g,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),ge(g,"getDerivedStateFromProps",function(y,x){var b=y.dataKey,k=y.data,j=y.children,w=y.width,T=y.height,S=y.layout,E=y.stackOffset,P=y.margin,N=x.dataStartIndex,I=x.dataEndIndex;if(x.updateId===void 0){var O=Z2(y);return G(G(G({},O),{},{updateId:0},m(G(G({props:y},O),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:k,prevWidth:w,prevHeight:T,prevLayout:S,prevStackOffset:E,prevMargin:P,prevChildren:j})}if(b!==x.prevDataKey||k!==x.prevData||w!==x.prevWidth||T!==x.prevHeight||S!==x.prevLayout||E!==x.prevStackOffset||!Ss(P,x.prevMargin)){var A=Z2(y),$={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},L=G(G({},J2(x,k,S)),{},{updateId:x.updateId+1}),U=G(G(G({},A),$),L);return G(G(G({},U),m(G({props:y},U),x)),{},{prevDataKey:b,prevData:k,prevWidth:w,prevHeight:T,prevLayout:S,prevStackOffset:E,prevMargin:P,prevChildren:j})}if(!d0(j,x.prevChildren)){var z,M,F,B,K=Dr(j,el),H=K&&(z=(M=K.props)===null||M===void 0?void 0:M.startIndex)!==null&&z!==void 0?z:N,ee=K&&(F=(B=K.props)===null||B===void 0?void 0:B.endIndex)!==null&&F!==void 0?F:I,ce=H!==N||ee!==I,xe=!Ee(k),qe=xe&&!ce?x.updateId:x.updateId+1;return G(G({updateId:qe},m(G(G({props:y},x),{},{updateId:qe,dataStartIndex:H,dataEndIndex:ee}),x)),{},{prevChildren:j,dataStartIndex:H,dataEndIndex:ee})}return null}),ge(g,"renderActiveDot",function(y,x,b){var k;return R.isValidElement(y)?k=R.cloneElement(y,x):Se(y)?k=y(x):k=V.createElement(P_,x),V.createElement(wt,{className:"recharts-active-dot",key:b},k)});var v=R.forwardRef(function(x,b){return V.createElement(g,fs({},x,{ref:b}))});return v.displayName=g.displayName,v},Xf=OM({chartName:"LineChart",GraphicalChild:ha,axisComponents:[{axisType:"xAxis",AxisComp:Nn},{axisType:"yAxis",AxisComp:In}],formatAxisMap:XD}),RM=OM({chartName:"BarChart",GraphicalChild:Ca,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Nn},{axisType:"yAxis",AxisComp:In}],formatAxisMap:XD});const $pe=({data:t})=>{const{isDark:e}=Cr(),r=["#6AA84F","#81C784","#A5D6A7","#C8E6C9","#E8F5E9"];return u.jsx("div",{className:"w-full h-64 bg-white dark:bg-dark-surface p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:u.jsx(cs,{width:"100%",height:"100%",children:u.jsxs(RM,{data:t,children:[u.jsx(Qa,{strokeDasharray:"3 3",stroke:e?"#374151":"#E5E7EB"}),u.jsx(Nn,{dataKey:"day",tick:{fontSize:12,fill:e?"#D1D5DB":"#6B7280"},stroke:e?"#9CA3AF":"#6B7280"}),u.jsx(In,{tick:{fontSize:12,fill:e?"#D1D5DB":"#6B7280"},stroke:e?"#9CA3AF":"#6B7280",domain:[0,100]}),u.jsx(hr,{formatter:n=>`${n}%`,contentStyle:{backgroundColor:e?"#111827":"#F3F7F1",border:`1px solid ${e?"#374151":"#6AA84F"}`,borderRadius:"8px",color:e?"#F3F4F6":"#1F2937"}}),u.jsx(Ca,{dataKey:"completion",fill:"#6AA84F",radius:[8,8,0,0],children:t.map((n,i)=>u.jsx(t_,{fill:r[i%r.length]},`cell-${i}`))})]})})})},DM=({mood:t=3,energy:e=3,focus:r=3,onUpdate:n,disabled:i=!1})=>{const[a,o]=R.useState(t),[s,l]=R.useState(e),[c,d]=R.useState(r);V.useEffect(()=>{o(t)},[t]),V.useEffect(()=>{l(e)},[e]),V.useEffect(()=>{d(r)},[r]);const f=y=>{o(y),n("mood",parseInt(y))},p=y=>{l(y),n("energy",parseInt(y))},m=y=>{d(y),n("focus",parseInt(y))},g=y=>["","","","","",""][y]||"",v=y=>y<=2?"text-red-500":y<=3?"text-yellow-500":"text-green-500";return u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700 space-y-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text",children:"Daily Metrics"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Mood"}),u.jsx("span",{className:`text-2xl ${v(a)}`,children:g(a)})]}),u.jsx("input",{type:"range",min:"1",max:"5",value:a,onChange:y=>f(y.target.value),disabled:i,className:`w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none accent-primary ${i?"cursor-not-allowed opacity-50":"cursor-pointer"}`}),u.jsxs("div",{className:"flex justify-between text-xs text-text-gray dark:text-dark-gray",children:[u.jsx("span",{children:"Poor"}),u.jsx("span",{children:"Excellent"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Energy"}),u.jsxs("span",{className:`text-xl font-bold ${v(s)}`,children:[s,"/5"]})]}),u.jsx("input",{type:"range",min:"1",max:"5",value:s,onChange:y=>p(y.target.value),disabled:i,className:`w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none accent-primary ${i?"cursor-not-allowed opacity-50":"cursor-pointer"}`}),u.jsxs("div",{className:"flex justify-between text-xs text-text-gray dark:text-dark-gray",children:[u.jsx("span",{children:"Low"}),u.jsx("span",{children:"High"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Focus"}),u.jsxs("span",{className:`text-xl font-bold ${v(c)}`,children:[c,"/5"]})]}),u.jsx("input",{type:"range",min:"1",max:"5",value:c,onChange:y=>m(y.target.value),disabled:i,className:`w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none accent-primary ${i?"cursor-not-allowed opacity-50":"cursor-pointer"}`}),u.jsxs("div",{className:"flex justify-between text-xs text-text-gray dark:text-dark-gray",children:[u.jsx("span",{children:"Scattered"}),u.jsx("span",{children:"Laser-focused"})]})]})]})},Lpe=()=>{const{user:t}=br(),e=new Date,r=A=>{const $=A.getFullYear(),L=String(A.getMonth()+1).padStart(2,"0"),U=String(A.getDate()).padStart(2,"0");return`${$}-${L}-${U}`},n=r(e),[i,a]=R.useState({}),[o,s]=R.useState({}),[l,c]=R.useState(n),[d,f]=R.useState(()=>{const A=new Date(e);return A.setDate(A.getDate()-A.getDay()),A}),[p,m]=R.useState(!1),{habits:g,dailyLog:v}=Em(l),{notificationSettings:y,sendBrowserNotification:x}=Tm();R.useEffect(()=>(g.length>0&&(y!=null&&y.browserEnabled)&&(ks.startDailyCheck(g,y,x),setTimeout(()=>{ks.logScheduledReminders(g)},1e3)),()=>{ks.stopDailyCheck()}),[g,y==null?void 0:y.browserEnabled,x]);const b=async A=>{var M,F,B,K;if(!t)return;const $=new Date;$.setHours(0,0,0,0);const L=new Date(l);L.setHours(0,0,0,0);const U=i[l]||v,z=((M=U==null?void 0:U.habits)==null?void 0:M[A])===!0||typeof((F=U==null?void 0:U.habits)==null?void 0:F[A])=="object"&&((K=(B=U==null?void 0:U.habits)==null?void 0:B[A])==null?void 0:K.completed)===!0;if(!z&&L>$){alert("Cannot mark future dates as completed. Please select today or a past date.");return}try{const H=i[l]||v||{date:l,habits:{},mood:3,energy:3,focus:3},ee={...H,habits:{...H.habits,[A]:!z}};a(ce=>({...ce,[l]:ee})),s(ce=>({...ce,[l]:ee})),await mo(t.uid,l,ee)}catch{a(ee=>({...ee,[l]:U}))}},k=async(A,$)=>{if(!t)return;const L=r(new Date);if(l>L){alert("Cannot update metrics for future dates. Please select today or a past date.");return}try{const z={...i[l]||v||{date:l,habits:{},mood:3,energy:3,focus:3},[A]:$};await mo(t.uid,l,z),a({...i,[l]:z})}catch{}};R.useEffect(()=>{if(!t)return;(async()=>{const $=new Date(d),L=new Date($);L.setDate(L.getDate()+6);const U=r($),z=r(L);try{const M=await go(t.uid,U,z),F={};M.forEach(B=>{F[B.date]=B}),a(F)}catch{}})()},[t,d]),R.useEffect(()=>{if(!t)return;(async()=>{const $=new Date(e);$.setDate($.getDate()-30);const L=new Date(e);L.setDate(L.getDate()+6);const U=r($),z=r(L);try{const M=await go(t.uid,U,z),F={};M.forEach(B=>{F[B.date]=B}),s(F)}catch{}})()},[t,e]);const j=()=>{if(g.length===0)return 0;let A=0,$=0;for(let L=0;L<7;L++){const U=new Date(d);U.setDate(U.getDate()+L);const z=r(U),M=i[z];M?g.forEach(F=>{var K;$++;const B=(K=M.habits)==null?void 0:K[F.id];(B===!0||typeof B=="object"&&(B==null?void 0:B.completed)===!0)&&A++}):$+=g.length}return $>0?Math.round(A/$*100):0},w=A=>{if(g.length===0)return 0;const $=new Date(A);$.setHours(0,0,0,0);let L=0,U=new Date($);for(;;){const z=r(U),M=o[z]||i[z];let F=!0;if(!M||!M.habits)F=!1;else for(const B of g)if(!M.habits[B.id]){F=!1;break}if(F)L++,U.setDate(U.getDate()-1);else break}return L},T=()=>{const A=[],$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let L=0;L<7;L++){const U=new Date(d);U.setDate(U.getDate()+L);const z=r(U),M=$[U.getDay()],F=U.getDate(),B=i[z];let K=0;B&&g.forEach(ee=>{var xe;const ce=(xe=B.habits)==null?void 0:xe[ee.id];(ce===!0||typeof ce=="object"&&(ce==null?void 0:ce.completed)===!0)&&K++});const H=w(z);A.push({day:M,date:F,dateString:z,completed:K,total:g.length,isToday:z===n,currentStreak:H,bestStreak:0})}return A},S=()=>{const A=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$=[];for(let L=0;L<7;L++){const U=new Date(d);U.setDate(U.getDate()+L);const z=r(U),M=i[z];let F=0;M&&g.length>0&&g.forEach(K=>{M.habits&&M.habits[K.id]&&F++});const B=g.length>0?Math.round(F/g.length*100):0;$.push({day:A[U.getDay()],completion:B})}return $},E=R.useMemo(()=>T(),[i,g,d,n]),P=R.useMemo(()=>S(),[i,g,d]),N=R.useMemo(()=>j(),[i,g,d]),I=E.find(A=>A.dateString===l),O=i[l]||v;return u.jsxs("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg",children:[u.jsx("div",{className:"bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:u.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-5",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-text-dark dark:text-dark-text mb-1",children:"Dashboard"}),u.jsxs("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:["Week of ",d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",new Date(d.getTime()+6*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>{const A=new Date(d);A.setDate(A.getDate()-7),f(A)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"Previous week",children:u.jsx("svg",{className:"w-5 h-5 text-text-gray dark:text-dark-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),u.jsx("input",{type:"date",value:r(d),onChange:A=>{const $=new Date(A.target.value);$.setDate($.getDate()-$.getDay()),f($)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary transition",title:"Select week"}),u.jsx("button",{onClick:()=>{const A=new Date(d);A.setDate(A.getDate()+7),f(A)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"Next week",children:u.jsx("svg",{className:"w-5 h-5 text-text-gray dark:text-dark-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),u.jsx("button",{onClick:()=>{const A=new Date(e);A.setDate(A.getDate()-A.getDay()),f(A),c(n)},className:"px-4 py-2 text-sm font-medium bg-primary hover:bg-primary/90 text-white rounded-lg transition",title:"Go to current week",children:"Today"})]})]})})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-stretch",children:[u.jsx("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx(aO,{percentage:N,radius:68,color:"#6AA84F",strokeWidth:10}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-text-gray dark:text-dark-gray text-sm",children:"This Week"}),u.jsxs("p",{className:"text-text-dark dark:text-dark-text text-xs font-medium",children:[Math.round(N),"% Complete"]})]})]})}),u.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-dark-surface p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Weekly Overview"}),u.jsx($pe,{data:P})]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4",children:"Week Overview"}),u.jsx("div",{className:"hidden md:grid grid-cols-7 gap-2",children:E.map(A=>u.jsx("div",{onClick:()=>c(A.dateString),children:u.jsx(fE,{day:A.day,date:A.date,completedHabits:A.completed,totalHabits:A.total,isToday:A.isToday,isSelected:A.dateString===l,currentStreak:A.currentStreak,bestStreak:A.bestStreak})},A.dateString))}),u.jsx("div",{className:"md:hidden",children:u.jsx("div",{className:"overflow-x-auto py-2",children:u.jsx("div",{className:"flex gap-3 px-2",children:E.map(A=>u.jsx("div",{className:"min-w-[120px]",onClick:()=>c(A.dateString),children:u.jsx(fE,{day:A.day,date:A.date,completedHabits:A.completed,totalHabits:A.total,isToday:A.isToday,isSelected:A.dateString===l,currentStreak:A.currentStreak,bestStreak:A.bestStreak})},A.dateString))})})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsxs("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4",children:["Habits - ",I==null?void 0:I.day," ",I==null?void 0:I.date]}),g.length===0?u.jsx("div",{className:"text-center py-8 text-text-gray dark:text-dark-gray",children:u.jsx("p",{children:"No habits created yet. Go to Habits view to add habits!"})}):u.jsx("div",{className:"space-y-3",children:g.map(A=>{var $;return u.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border border-gray-100 dark:border-gray-700 dark:bg-gray-800",children:[u.jsx("input",{type:"checkbox",checked:O&&O.habits&&(O.habits[A.id]===!0||typeof O.habits[A.id]=="object"&&(($=O.habits[A.id])==null?void 0:$.completed)===!0)||!1,onChange:()=>b(A.id),disabled:(()=>{var M;const L=new Date;L.setHours(0,0,0,0);const U=new Date(l);U.setHours(0,0,0,0);const z=O&&O.habits&&(O.habits[A.id]===!0||typeof O.habits[A.id]=="object"&&((M=O.habits[A.id])==null?void 0:M.completed)===!0);return U>L&&!z})(),className:"w-5 h-5 text-primary rounded cursor-pointer accent-primary disabled:cursor-not-allowed disabled:opacity-50",title:(()=>{var M;const L=new Date;L.setHours(0,0,0,0);const U=new Date(l);U.setHours(0,0,0,0);const z=O&&O.habits&&(O.habits[A.id]===!0||typeof O.habits[A.id]=="object"&&((M=O.habits[A.id])==null?void 0:M.completed)===!0);return U>L&&!z?"Cannot mark future dates as completed":""})()}),u.jsx("span",{className:"text-text-dark dark:text-dark-text font-medium flex-grow",children:A.name})]},A.id)})})]}),u.jsx("div",{children:u.jsx(DM,{mood:(O==null?void 0:O.mood)||3,energy:(O==null?void 0:O.energy)||3,focus:(O==null?void 0:O.focus)||3,onUpdate:k,disabled:l>r(new Date)})})]})]})]})},Vpe=({habit:t,isOpen:e,onClose:r,onComplete:n,existingData:i=null,date:a=null})=>{var g,v,y;const{isDark:o}=Cr(),[s,l]=R.useState((i==null?void 0:i.quantity)||((g=t==null?void 0:t.quantityTracking)==null?void 0:g.target)||1),[c,d]=R.useState((i==null?void 0:i.duration)||0),[f,p]=R.useState((i==null?void 0:i.notes)||"");if(R.useEffect(()=>{var x;e&&(l((i==null?void 0:i.quantity)||((x=t==null?void 0:t.quantityTracking)==null?void 0:x.target)||1),d((i==null?void 0:i.duration)||0),p((i==null?void 0:i.notes)||""))},[e,i,t]),!e||!t)return null;const m=()=>{var b,k;if(a){const j=new Date;j.setHours(0,0,0,0);const w=new Date(a);if(w.setHours(0,0,0,0),w>j){alert("Cannot mark future dates as completed. Please select today or a past date.");return}}const x={completed:!0,quantity:(b=t.quantityTracking)!=null&&b.enabled?parseFloat(s):null,duration:(k=t.timeTracking)!=null&&k.enabled?parseInt(c):null,notes:f.trim()||null,completedAt:new Date().toISOString()};n(x),r()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-2xl p-6 max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-xl font-bold text-text-dark dark:text-dark-text",children:["Complete: ",t.emoji," ",t.name]}),u.jsx("button",{onClick:r,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"space-y-4",children:[((v=t.quantityTracking)==null?void 0:v.enabled)&&u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:["Quantity (",t.quantityTracking.unit||"units",")"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:s,onChange:x=>l(x.target.value),min:"0",step:"0.1",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),u.jsxs("span",{className:"text-sm text-text-gray dark:text-dark-gray",children:["Target: ",t.quantityTracking.target]})]}),parseFloat(s)>=t.quantityTracking.target&&u.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:" Target reached!"})]}),((y=t.timeTracking)==null?void 0:y.enabled)&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:"Duration (minutes)"}),u.jsx("input",{type:"number",value:c,onChange:x=>d(x.target.value),min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:"Notes (Optional)"}),u.jsx("textarea",{value:f,onChange:x=>p(x.target.value),placeholder:"Add notes about this completion...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none"})]}),u.jsxs("div",{className:"flex gap-2 pt-2",children:[u.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-text-dark dark:text-dark-text hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:"Cancel"}),u.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition font-medium",children:"Complete"})]})]})]})})},Fpe=(t,e,r,n)=>{if(!t.goal||!t.goal.enabled)return null;const i=t.goal.target,a=t.goal.period||"week";let o=0;const s=new Date(r);for(;s<=n;){const f=s.toISOString().split("T")[0],p=e[f];if(p&&p.habits&&p.habits[t.id]){const m=p.habits[t.id];(m===!0||typeof m=="object"&&m.completed===!0)&&o++}s.setDate(s.getDate()+1)}const l=Math.min(100,o/i*100),c=Math.max(0,i-o),d=o>=i;return{target:i,completions:o,remaining:c,progress:l,isAchieved:d,period:a}},Bpe=(t,e)=>{const r=[];let n=0,i=0,a=0,o=null;Object.keys(e).sort().forEach(d=>{const f=e[d];if(f&&f.habits&&f.habits[t.id]){const p=f.habits[t.id];if(p===!0||typeof p=="object"&&p.completed===!0){n++;const m=new Date(d);o?Math.floor((m-o)/864e5)===1?i++:(a=Math.max(a,i),i=1):i=1,o=m}}}),a=Math.max(a,i);const l=[{count:1,label:"First Step",icon:""},{count:7,label:"Week Warrior",icon:""},{count:30,label:"Monthly Master",icon:""},{count:50,label:"Half Century",icon:""},{count:100,label:"Century Club",icon:""},{count:200,label:"Double Century",icon:""},{count:365,label:"Year Champion",icon:""}],c=[{streak:3,label:"3-Day Streak",icon:""},{streak:7,label:"Week Streak",icon:""},{streak:14,label:"2-Week Streak",icon:""},{streak:30,label:"Monthly Streak",icon:""},{streak:60,label:"2-Month Streak",icon:""},{streak:100,label:"100-Day Streak",icon:""}];return l.forEach(d=>{n>=d.count&&r.push({type:"completion",...d,achieved:!0,achievedAt:n===d.count?new Date:null})}),c.forEach(d=>{a>=d.streak&&r.push({type:"streak",...d,achieved:!0,achievedAt:null})}),r.sort((d,f)=>d.type!==f.type?d.type==="completion"?-1:1:(d.count||d.streak)-(f.count||f.streak))},Upe=(t,e)=>{Bpe(t,e).filter(p=>p.achieved);let n=0,i=0,a=0,o=null;Object.keys(e).sort().forEach(p=>{const m=e[p];if(m&&m.habits&&m.habits[t.id]){const g=m.habits[t.id];if(g===!0||typeof g=="object"&&g.completed===!0){n++;const v=new Date(p);o?Math.floor((v-o)/864e5)===1?a++:(i=Math.max(i,a),a=1):a=1,o=v}}}),i=Math.max(i,a);const c=[1,7,30,50,100,200,365].find(p=>n<p),f=[3,7,14,30,60,100].find(p=>i<p);if(c&&f){const p=c-n,m=f-i;return p<=m?{type:"completion",count:c,label:`Complete ${c} times`,progress:n,remaining:p}:{type:"streak",streak:f,label:`${f}-day streak`,progress:i,remaining:m}}else{if(c)return{type:"completion",count:c,label:`Complete ${c} times`,progress:n,remaining:c-n};if(f)return{type:"streak",streak:f,label:`${f}-day streak`,progress:i,remaining:f-i}}return null},zpe=({habit:t,dailyLogs:e})=>{var o,s,l;const{isDark:r}=Cr();if(!t)return null;const n=new Date;let i,a;if((o=t.goal)!=null&&o.enabled){const c=t.goal.period||"week";c==="week"?(i=new Date(n),i.setDate(n.getDate()-n.getDay()),a=new Date(i),a.setDate(i.getDate()+6)):c==="month"?(i=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0)):c==="year"&&(i=new Date(n.getFullYear(),0,1),a=new Date(n.getFullYear(),11,31));const d=Fpe(t,e,i,a),f=Upe(t,e);return u.jsxs("div",{className:"mt-3 space-y-3",children:[d&&u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("span",{className:"text-xs font-medium text-text-dark dark:text-dark-text",children:["Goal: ",t.goal.target," times per ",t.goal.period]}),u.jsxs("span",{className:`text-xs font-bold ${d.isAchieved?"text-green-600 dark:text-green-400":"text-primary"}`,children:[d.completions,"/",d.target]})]}),u.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-1",children:u.jsx("div",{className:`h-2 rounded-full transition-all ${d.isAchieved?"bg-green-500 dark:bg-green-400":"bg-primary"}`,style:{width:`${Math.min(100,d.progress)}%`}})}),d.isAchieved?u.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal achieved!"}):u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:[d.remaining," more to go"]})]}),f&&u.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 rounded-lg p-3 border border-primary/20",children:[u.jsx("div",{className:"flex items-center justify-between mb-1",children:u.jsxs("span",{className:"text-xs font-medium text-text-dark dark:text-dark-text flex items-center gap-1",children:[u.jsx("span",{children:""}),"Next Milestone"]})}),u.jsx("p",{className:"text-xs text-text-dark dark:text-dark-text font-semibold mb-1",children:f.label}),u.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:u.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all",style:{width:`${Math.min(100,f.progress/(f.progress+f.remaining)*100)}%`}})}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:[f.remaining," more ",f.type==="completion"?"completions":"days"," needed"]})]}),(((s=t.quantityTracking)==null?void 0:s.enabled)||((l=t.timeTracking)==null?void 0:l.enabled))&&(()=>{var x,b,k;let p=0,m=0,g=0;const v=new Date(i||n),y=new Date(a||n);for(;v<=y;){const j=v.toISOString().split("T")[0],w=e[j];if(w&&w.habits&&w.habits[t.id]){const T=w.habits[t.id];typeof T=="object"&&T.completed&&(T.quantity&&(p+=T.quantity),T.duration&&(m+=T.duration),g++)}v.setDate(v.getDate()+1)}return u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[u.jsxs("p",{className:"text-xs font-medium text-text-dark dark:text-dark-text mb-2",children:["This ",((x=t.goal)==null?void 0:x.period)||"period"," Stats"]}),((b=t.quantityTracking)==null?void 0:b.enabled)&&g>0&&u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:["Avg ",t.quantityTracking.unit,": ",(p/g).toFixed(1)]}),((k=t.timeTracking)==null?void 0:k.enabled)&&g>0&&u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:["Avg Duration: ",Math.round(m/g)," min"]})]})})()]})}return null},Wpe=({habits:t,logs:e,currentMonth:r,onToggleHabit:n,allCategories:i=null,onDeleteHabit:a=null,onArchiveHabit:o=null,onUnarchiveHabit:s=null,onUpdateHabit:l=null,onEditHabit:c=null,newlyCreatedHabits:d=new Set})=>{const{isDark:f}=Cr(),[p,m]=R.useState({}),[g,v]=R.useState(null),[y,x]=R.useState(null),[b,k]=R.useState(""),[j,w]=R.useState({isOpen:!1,habit:null,date:null}),T=M=>new Date(M.getFullYear(),M.getMonth()+1,0).getDate(),S=M=>{m(F=>({...F,[M]:!F[M]}))},E=T(r),P=new Date(r.getFullYear(),r.getMonth(),1).getDay(),N=[...Array(P).fill(null),...Array.from({length:E},(M,F)=>F+1)],I=[];for(let M=0;M<N.length;M+=7){const F=N.slice(M,M+7);for(;F.length<7;)F.push(null);I.push(F)}const O=M=>{const F=new Date(r.getFullYear(),r.getMonth(),M),B=F.getFullYear(),K=String(F.getMonth()+1).padStart(2,"0"),H=String(F.getDate()).padStart(2,"0");return`${B}-${K}-${H}`},A=(M,F)=>{var K,H;if(!F)return!1;const B=(H=(K=e[O(F)])==null?void 0:K.habits)==null?void 0:H[M];return B===!0||typeof B=="object"&&(B==null?void 0:B.completed)===!0},$=(M,F)=>{var K,H;if(!F)return null;const B=(H=(K=e[O(F)])==null?void 0:K.habits)==null?void 0:H[M];return typeof B=="object"?B:null},L=M=>{if(!M)return!1;const F=new Date;F.setHours(0,0,0,0);const B=new Date(r.getFullYear(),r.getMonth(),M);return B.setHours(0,0,0,0),B>F},U=(M,F)=>{var ce,xe;if(!F)return;const B=O(F),K=A(M.id,F),H=new Date;H.setHours(0,0,0,0);const ee=new Date(B);if(ee.setHours(0,0,0,0),!K&&ee>H){alert("Cannot mark future dates as completed. Please select today or a past date.");return}!K&&((ce=M.quantityTracking)!=null&&ce.enabled||(xe=M.timeTracking)!=null&&xe.enabled)?w({isOpen:!0,habit:M,date:B}):n(M.id,B)},z=M=>{j.habit&&j.date&&n(j.habit.id,j.date,M),w({isOpen:!1,habit:null,date:null})};return u.jsxs("div",{className:"space-y-3",children:[t.length===0?u.jsx("div",{className:"text-center py-8 text-text-gray dark:text-dark-gray",children:u.jsx("p",{children:"No habits yet. Create one to get started!"})}):u.jsx(u.Fragment,{children:t.map(M=>{const F=Array.from({length:E},(B,K)=>K+1).filter(B=>A(M.id,B)).length;return u.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-500 ${d.has(M.id)?"border-primary shadow-lg ring-2 ring-primary/20 bg-primary/5 dark:bg-primary/10":"border-gray-200 dark:border-gray-700"}`,children:[u.jsxs("div",{onClick:()=>S(M.id),className:`bg-white dark:bg-dark-surface p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-between border-b border-gray-200 dark:border-gray-700 transition-colors ${d.has(M.id)?"bg-primary/5 dark:bg-primary/10":""}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[M.emoji&&u.jsx("span",{className:"text-xl",children:M.emoji}),u.jsx("h3",{className:"font-semibold text-text-dark dark:text-dark-text",children:M.name}),M.archived&&u.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 text-text-gray dark:text-dark-gray px-2 py-0.5 rounded",children:"Archived"})]}),M.category&&u.jsx("div",{className:"mt-1",children:u.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded inline-block",style:{backgroundColor:Vc(M.category,i,f).bg,color:Vc(M.category,i,f).text,borderLeft:`3px solid ${Vc(M.category,i,f).border}`},children:Pw(M.category,i).label})}),M.notes&&y!==M.id&&u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1 line-clamp-1 cursor-pointer hover:underline",onClick:B=>{B.stopPropagation(),x(M.id),k(M.notes||"")},children:M.notes}),y===M.id&&u.jsxs("div",{className:"mt-1",onClick:B=>B.stopPropagation(),children:[u.jsx("textarea",{value:b,onChange:B=>k(B.target.value),onBlur:()=>{l&&l(M.id,{notes:b}),x(null)},onKeyDown:B=>{B.key==="Enter"&&B.ctrlKey&&(l&&l(M.id,{notes:b}),x(null)),B.key==="Escape"&&(x(null),k(M.notes||""))},className:"w-full text-xs px-2 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded resize-none",rows:2,autoFocus:!0}),u.jsx("p",{className:"text-[10px] text-text-gray dark:text-dark-gray mt-0.5",children:"Press Ctrl+Enter to save, Esc to cancel"})]}),!M.notes&&y!==M.id&&u.jsx("button",{onClick:B=>{B.stopPropagation(),x(M.id),k("")},className:"text-xs text-text-gray dark:text-dark-gray mt-1 hover:text-primary transition",children:"+ Add notes"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-text-gray dark:text-dark-gray text-sm",children:[F,"/",E]}),M.currentStreak>0&&u.jsxs("span",{className:"text-sm text-primary flex items-center gap-1",title:`Current streak: ${M.currentStreak}`,children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-semibold",children:M.currentStreak})]}),M.bestStreak>0&&u.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",title:`Best streak: ${M.bestStreak}`,children:["best: ",M.bestStreak]}),u.jsxs("div",{className:"flex items-center gap-1",children:[o&&!M.archived&&u.jsx("button",{onClick:B=>{B.stopPropagation(),o&&o(M.id)},className:"p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition rounded",title:"Archive habit",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),s&&M.archived&&u.jsx("button",{onClick:B=>{B.stopPropagation(),s&&s(M.id)},className:"p-1 text-primary hover:text-primary/80 transition rounded",title:"Unarchive habit",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),c&&u.jsx("button",{onClick:B=>{B.stopPropagation(),c&&c(M)},className:"p-1 text-blue-500 hover:text-blue-700 dark:hover:text-blue-400 transition rounded",title:"Edit habit",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a&&u.jsx("button",{onClick:B=>{B.stopPropagation(),v(M.id)},className:"ml-2 p-1 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition rounded",title:"Delete habit",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),g===M.id&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-t border-red-200 dark:border-red-800 p-3",children:[u.jsxs("p",{className:"text-sm text-red-800 dark:text-red-300 mb-2",children:['Are you sure you want to delete "',M.name,'"? This action cannot be undone.']}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:B=>{B.stopPropagation(),a&&(a(M.id),v(null))},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition",children:"Delete"}),u.jsx("button",{onClick:B=>{B.stopPropagation(),v(null)},className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-dark dark:text-dark-text text-xs rounded transition",children:"Cancel"})]})]}),p[M.id]&&u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 overflow-x-auto",children:[u.jsx(zpe,{habit:M,dailyLogs:e}),u.jsxs("div",{className:"flex mb-3",children:[u.jsx("div",{className:"w-16 md:w-32 flex-shrink-0"}),u.jsx("div",{className:"flex flex-1 min-w-0",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((B,K)=>u.jsx("div",{className:"flex-1 text-center text-[11px] md:text-xs font-semibold text-text-gray dark:text-dark-gray min-w-0",children:B},K))})]}),I.map((B,K)=>u.jsxs("div",{className:"flex mb-2",children:[u.jsx("div",{className:"w-16 md:w-32 flex-shrink-0"}),u.jsx("div",{className:"flex flex-1 min-w-0",children:B.map((H,ee)=>u.jsx("div",{className:"flex-1 aspect-square flex items-center justify-center min-w-[34px] flex-shrink-0",children:H?u.jsxs("label",{className:`w-full h-full flex flex-col items-center justify-center rounded transition relative ${L(H)&&!A(M.id,H)?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-white dark:hover:bg-gray-700"}`,children:[u.jsx("input",{type:"checkbox",checked:A(M.id,H)||!1,onChange:()=>U(M,H),disabled:L(H)&&!A(M.id,H),className:"w-3 h-3 sm:w-4 sm:h-4 text-primary rounded cursor-pointer accent-primary disabled:cursor-not-allowed disabled:opacity-50 mb-0.5",title:L(H)&&!A(M.id,H)?"Cannot mark future dates as completed":""}),u.jsx("span",{className:`text-[10px] md:text-xs ${L(H)&&!A(M.id,H)?"text-text-gray/50 dark:text-dark-gray/50":"text-text-gray dark:text-dark-gray"}`,children:H}),A(M.id,H)&&(()=>{const ce=$(M.id,H);return ce!=null&&ce.quantity||ce!=null&&ce.duration?u.jsx("span",{className:"absolute top-0 right-0 text-[8px] bg-primary text-white rounded-full w-4 h-4 flex items-center justify-center",children:ce.quantity?"Q":"T"}):null})()]}):u.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded w-full h-full"})},ee))})]},K))]})]},M.id)})}),j.habit&&u.jsx(Vpe,{habit:j.habit,isOpen:j.isOpen,onClose:()=>w({isOpen:!1,habit:null,date:null}),onComplete:z,existingData:j.date?(()=>{var B,K;const M=j.date,F=(K=(B=e[M])==null?void 0:B.habits)==null?void 0:K[j.habit.id];return typeof F=="object"?F:null})():null,date:j.date})]})},Hpe=({month:t,year:e,logs:r,habits:n})=>{const{isDark:i}=Cr(),[a,o]=R.useState(null),[s,l]=R.useState({x:0,y:0}),c=w=>{const T=r[w];if(!T||!n.length)return 0;const S=n.filter(E=>T.habits&&T.habits[E.id]).length;return Math.round(S/n.length*100)},d=w=>i?w===0?"#374151":w<=25?"#7F1D1D":w<=50?"#991B1B":w<=75?"#B91C1C":"#6AA84F":w===0?"#F3F4F6":w<=25?"#FEE2E2":w<=50?"#FECACA":w<=75?"#FCA5A5":"#6AA84F",f=w=>{const T=r[w];return T?n.filter(S=>T.habits&&T.habits[S.id]===!0):[]},p=(w,T)=>{const S=w.currentTarget.getBoundingClientRect();l({x:S.left,y:S.top}),o(T)},m=(w,T)=>new Date(T,w+1,0).getDate(),g=(w,T)=>new Date(T,w,1).getDay(),v=m(t,e),y=g(t,e),x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],b=[];for(let w=0;w<y;w++)b.push(null);for(let w=1;w<=v;w++)b.push(w);const k=w=>{const T=new Date(e,t,w),S=T.getFullYear(),E=String(T.getMonth()+1).padStart(2,"0"),P=String(T.getDate()).padStart(2,"0");return`${S}-${E}-${P}`},j=w=>{const T=new Date;return w===T.getDate()&&t===T.getMonth()&&e===T.getFullYear()};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium",children:[u.jsx("span",{className:"text-text-gray dark:text-dark-gray",children:"Completion:"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d(0)}}),u.jsx("span",{className:"text-text-gray dark:text-dark-gray",children:"0%"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d(25)}}),u.jsx("span",{className:"text-text-gray dark:text-dark-gray",children:"25%"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d(50)}}),u.jsx("span",{className:"text-text-gray dark:text-dark-gray",children:"50%"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d(75)}}),u.jsx("span",{className:"text-text-gray dark:text-dark-gray",children:"75%"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d(100)}}),u.jsx("span",{className:"text-text-gray dark:text-dark-gray",children:"100%"})]})]})]}),u.jsx("div",{className:"bg-white dark:bg-dark-surface rounded-lg border border-gray-200 dark:border-gray-700 p-4 overflow-x-auto",children:u.jsxs("div",{className:"grid grid-cols-7 gap-2 min-w-80",children:[x.map(w=>u.jsx("div",{className:"text-center text-xs font-bold text-text-gray dark:text-dark-gray py-2",children:w},w)),b.map((w,T)=>{const S=w?k(w):null,E=w?c(S):0,P=w?f(S):[],N=w&&j(w);return u.jsx("div",{onMouseEnter:I=>w&&p(I,S),onMouseLeave:()=>o(null),className:`aspect-square rounded-lg p-2 text-center relative transition-all cursor-default ${w?"hover:shadow-md dark:hover:shadow-lg dark:hover:shadow-black/30 border border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800"} ${N?"border-2 border-primary":""}`,style:{backgroundColor:w?d(E):void 0},children:w&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`text-xs font-bold mb-1 ${E===0?"text-text-gray dark:text-dark-gray":i?"text-dark-text":"text-text-dark"}`,children:w}),u.jsxs("div",{className:`text-[10px] font-semibold ${E===0?"text-text-gray dark:text-dark-gray":E===100?"text-white dark:text-white":i?"text-dark-text":"text-primary"}`,children:[E,"%"]}),P.length>0&&u.jsxs("div",{className:"flex justify-center gap-0.5 mt-1 flex-wrap",children:[P.slice(0,3).map(I=>u.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full",title:I.name},I.id)),P.length>3&&u.jsxs("span",{className:"text-[8px] text-text-dark dark:text-dark-text font-bold",children:["+",P.length-3]})]})]})},T)})]})}),a&&u.jsxs("div",{className:"fixed bg-gray-900 text-white px-3 py-2 rounded-lg shadow-lg text-xs max-w-48 z-50 pointer-events-none",style:{left:`${s.x+20}px`,top:`${s.y-40}px`},children:[u.jsx("div",{className:"font-semibold mb-1",children:new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),u.jsxs("div",{className:"text-gray-300 mb-1",children:["Completion: ",c(a),"%"]}),f(a).length>0?u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-300 mb-1",children:"Completed:"}),u.jsx("ul",{className:"list-disc list-inside",children:f(a).map(w=>u.jsx("li",{className:"text-green-300",children:w.name},w.id))})]}):u.jsx("div",{className:"text-gray-400",children:"No habits completed"})]})]})},qpe=[{id:"morning_routine",name:"Morning Routine",emoji:"",category:"productivity",description:"Start your day right",habits:[{name:"Wake up early",emoji:""},{name:"Drink water",emoji:""},{name:"Meditation",emoji:""},{name:"Exercise",emoji:""},{name:"Healthy breakfast",emoji:""}]},{id:"fitness",name:"Fitness Goals",emoji:"",category:"fitness",description:"Build a stronger you",habits:[{name:"Morning workout",emoji:""},{name:"Evening walk",emoji:""},{name:"Stretching",emoji:""},{name:"10k steps",emoji:""}]},{id:"health",name:"Health & Wellness",emoji:"",category:"health",description:"Take care of yourself",habits:[{name:"8 hours sleep",emoji:""},{name:"Drink 8 glasses water",emoji:""},{name:"Take vitamins",emoji:""},{name:"No junk food",emoji:""}]},{id:"learning",name:"Learning & Growth",emoji:"",category:"learning",description:"Never stop learning",habits:[{name:"Read 30 minutes",emoji:""},{name:"Practice coding",emoji:""},{name:"Learn new language",emoji:""},{name:"Watch educational video",emoji:""}]},{id:"mindfulness",name:"Mindfulness",emoji:"",category:"mindfulness",description:"Find your inner peace",habits:[{name:"Meditation",emoji:""},{name:"Journaling",emoji:""},{name:"Gratitude practice",emoji:""},{name:"Deep breathing",emoji:""}]},{id:"productivity",name:"Productivity Boost",emoji:"",category:"productivity",description:"Get things done",habits:[{name:"Plan your day",emoji:""},{name:"Focus time (Pomodoro)",emoji:""},{name:"Review goals",emoji:""},{name:"Declutter workspace",emoji:""}]},{id:"social",name:"Social Connection",emoji:"",category:"social",description:"Stay connected",habits:[{name:"Call family",emoji:""},{name:"Meet a friend",emoji:""},{name:"Help someone",emoji:""},{name:"Social media break",emoji:""}]}],Gpe=({onClose:t,onCreate:e,categories:r=[],onOpenCreateCategory:n,hiddenPredefinedCategories:i=[],restoreCategory:a,onCategoryRestored:o,existingHabits:s=[],editingHabit:l=null,onUpdate:c=null})=>{var Be;const{isDark:d}=Cr(),{notificationSettings:f}=Tm(),p=!!l,m=(f==null?void 0:f.reminderTime)||"09:00",[g,v]=R.useState((l==null?void 0:l.name)||""),[y,x]=R.useState((l==null?void 0:l.category)||"health"),[b,k]=R.useState((l==null?void 0:l.emoji)||""),[j,w]=R.useState((l==null?void 0:l.notes)||""),[T,S]=R.useState(""),[E,P]=R.useState(!1),[N,I]=R.useState(!1),[O,A]=R.useState({current:0,total:0}),[$,L]=R.useState((l==null?void 0:l.frequency)||"daily"),[U,z]=R.useState(((Be=l==null?void 0:l.schedule)==null?void 0:Be.daysOfWeek)||[0,1,2,3,4,5,6]),[M,F]=R.useState((l==null?void 0:l.reminderEnabled)||!1),[B,K]=R.useState((l==null?void 0:l.reminderTime)||m),[H,ee]=R.useState((l==null?void 0:l.quantityTracking)||{enabled:!1,unit:"",target:1}),[ce,xe]=R.useState((l==null?void 0:l.timeTracking)||{enabled:!1}),[qe,et]=R.useState((l==null?void 0:l.difficulty)||"medium"),[Ne,re]=R.useState((l==null?void 0:l.goal)||{enabled:!1,target:7,period:"week"});R.useEffect(()=>{var J;l?(v(l.name||""),x(l.category||"health"),k(l.emoji||""),w(l.notes||""),L(l.frequency||"daily"),z(((J=l.schedule)==null?void 0:J.daysOfWeek)||[0,1,2,3,4,5,6]),F(l.reminderEnabled||!1),K(l.reminderTime||m),ee(l.quantityTracking||{enabled:!1,unit:"",target:1}),xe(l.timeTracking||{enabled:!1}),et(l.difficulty||"medium"),re(l.goal||{enabled:!1,target:7,period:"week"}),P(!1)):(v(""),x("health"),k(""),w(""),L("daily"),z([0,1,2,3,4,5,6]),F(!1),K(m),ee({enabled:!1,unit:"",target:1}),xe({enabled:!1}),et("medium"),re({enabled:!1,target:7,period:"week"}))},[l,m]);const pe=R.useMemo(()=>{const J=new Map;return r.forEach(me=>{me&&me.id&&J.set(me.id,me)}),Array.from(J.values())},[r]),ye=async()=>{if(!g.trim()){S("Habit name is required");return}I(!0),S("");try{const J={name:g.trim(),category:y,emoji:b,notes:j,frequency:$,schedule:{daysOfWeek:$==="daily"?[0,1,2,3,4,5,6]:$==="weekly"?U:[]},reminderEnabled:M,reminderTime:M?B:null,quantityTracking:H.enabled?H:null,timeTracking:ce.enabled?ce:null,difficulty:qe,goal:Ne.enabled?Ne:null};p&&c?await c(l.id,J):await e(J),p||(v(""),x("health"),k(""),w(""),L("daily"),z([0,1,2,3,4,5,6]),F(!1),K(m),ee({enabled:!1,unit:"",target:1}),xe({enabled:!1}),et("medium"),re({enabled:!1,target:7,period:"week"}),S("")),await new Promise(me=>setTimeout(me,100)),t()}catch(J){S(J.message)}finally{I(!1)}},Q=async J=>{I(!0),S("");try{const me=J.habits.filter(ae=>!s.some(de=>de.name.toLowerCase().trim()===ae.name.toLowerCase().trim()&&de.category===J.category&&!de.archived));if(me.length===0){S("All habits from this template already exist"),I(!1);return}if(A({current:0,total:me.length}),i.includes(J.category)&&a)try{await a(J.category),o&&o(J.category);let ae=0;for(;ae<20&&(await new Promise(fe=>setTimeout(fe,50)),!r.some(fe=>fe.id===J.category));)ae++}catch(ae){console.error("Error restoring category:",ae),S(`Error restoring category: ${ae.message}`),I(!1);return}else o&&o(J.category);let tt=0,X=0;for(let ae=0;ae<me.length;ae++){const de=me[ae];try{await e({name:de.name,category:J.category,emoji:de.emoji,notes:"",frequency:"daily",schedule:{daysOfWeek:[0,1,2,3,4,5,6]},reminderEnabled:!1,reminderTime:null,quantityTracking:null,timeTracking:null,difficulty:"medium",goal:null}),tt++,A({current:ae+1,total:me.length}),await new Promise(fe=>setTimeout(fe,50))}catch(fe){X++,console.error(`Failed to create habit "${de.name}":`,fe)}}X>0?(S(`Created ${tt} habits, but ${X} failed. Please try again.`),I(!1)):(await new Promise(ae=>setTimeout(ae,200)),t())}catch(me){S(me.message||"Failed to create habits from template"),I(!1)}},Fe=["","","","","","","","","","","","","","","",""],ke=J=>{J.key==="Enter"&&ye()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:p?"Edit Habit":E?"Browse Templates":"Create New Habit"}),u.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition text-text-gray dark:text-dark-gray","aria-label":"Close",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-4",children:u.jsxs("button",{onClick:()=>P(!1),className:"flex items-center gap-2 text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text mb-4",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),u.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:qpe.map(J=>{const me=J.habits.filter(de=>s.some(fe=>fe.name.toLowerCase().trim()===de.name.toLowerCase().trim()&&fe.category===J.category&&!fe.archived)).length,tt=J.habits.length-me,X=N&&O.total>0,ae=O.total>0?Math.round(O.current/O.total*100):0;return u.jsx("button",{onClick:()=>Q(J),disabled:N,className:`w-full p-4 border-2 rounded-lg transition text-left relative ${N?"opacity-50 cursor-not-allowed border-gray-200 dark:border-gray-700":"hover:border-primary hover:bg-primary/5 dark:hover:bg-primary/10 border-gray-200 dark:border-gray-700"}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-3xl",children:J.emoji}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("h3",{className:"font-semibold text-text-dark dark:text-dark-text",children:J.name}),X&&u.jsxs("span",{className:"text-xs text-primary font-medium",children:[O.current,"/",O.total]})]}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-2",children:J.description}),X&&u.jsx("div",{className:"mb-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:u.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${ae}%`}})}),me>0&&!N&&u.jsxs("div",{className:"mb-2 text-xs text-amber-600 dark:text-amber-400",children:[me," habit",me>1?"s":""," already exist",me>1?"":"s",". ",tt," new habit",tt!==1?"s":""," will be created."]}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[J.habits.slice(0,4).map((de,fe)=>u.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:[de.emoji," ",de.name]},fe)),J.habits.length>4&&u.jsxs("span",{className:"text-xs text-text-gray dark:text-dark-gray",children:["+",J.habits.length-4," more"]})]})]})]})},J.id)})})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("div",{className:"mb-4",children:u.jsxs("button",{onClick:()=>P(!0),className:"w-full px-4 py-3 border-2 border-dashed border-primary/50 bg-primary/5 hover:bg-primary/10 dark:bg-primary/10 dark:hover:bg-primary/20 rounded-lg transition-all flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("span",{className:"text-primary font-semibold text-sm",children:"Browse Templates"})]})}),u.jsxs("div",{className:"mb-5",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Habit Name"}),u.jsxs("div",{className:"flex gap-2",children:[b&&u.jsx("div",{className:"text-3xl flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-lg",children:b}),u.jsx("input",{type:"text",value:g,onChange:J=>v(J.target.value),onKeyPress:ke,placeholder:"e.g., Morning Workout",className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition",autoFocus:!0})]})]}),u.jsxs("div",{className:"mb-5",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Icon (Optional)"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[Fe.map(J=>u.jsx("button",{onClick:()=>k(b===J?"":J),className:`text-2xl p-2 rounded-lg transition-all ${b===J?"bg-primary/20 border-2 border-primary scale-110":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-transparent"}`,children:J},J)),u.jsx("input",{type:"text",value:b,onChange:J=>k(J.target.value),placeholder:"Or type emoji",className:"flex-1 min-w-[100px] px-3 py-2 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-center",maxLength:2})]})]}),u.jsxs("div",{className:"mb-5",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Notes (Optional)"}),u.jsx("textarea",{value:j,onChange:J=>w(J.target.value),placeholder:"Add any notes or reminders about this habit...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition resize-none"})]}),u.jsx("div",{className:"mb-5",children:u.jsxs("details",{className:"group",children:[u.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-text-dark dark:text-dark-text mb-3 flex items-center gap-2 list-none",children:[u.jsx("svg",{className:"w-4 h-4 transition-transform group-open:rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Advanced Options"]}),u.jsxs("div",{className:"mt-4 space-y-4 pl-6 border-l-2 border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:"Frequency"}),u.jsx("div",{className:"flex gap-2",children:["daily","weekly","custom"].map(J=>u.jsx("button",{onClick:()=>{L(J),J==="daily"&&z([0,1,2,3,4,5,6])},className:`px-3 py-2 rounded-lg text-sm font-medium transition ${$===J?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:J.charAt(0).toUpperCase()+J.slice(1)},J))}),($==="weekly"||$==="custom")&&u.jsxs("div",{className:"mt-3",children:[u.jsx("label",{className:"block text-xs font-medium text-text-gray dark:text-dark-gray mb-2",children:"Select Days"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((J,me)=>u.jsx("button",{onClick:()=>{U.includes(me)?z(U.filter(tt=>tt!==me)):z([...U,me].sort())},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition ${U.includes(me)?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:J},me))})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Reminder"}),u.jsx("button",{onClick:()=>F(!M),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${M?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${M?"translate-x-5":"translate-x-1"}`})})]}),M&&u.jsx("input",{type:"time",value:B,onChange:J=>K(J.target.value),className:"mt-2 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Quantity Tracking"}),u.jsx("button",{onClick:()=>ee({...H,enabled:!H.enabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${H.enabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${H.enabled?"translate-x-5":"translate-x-1"}`})})]}),H.enabled&&u.jsxs("div",{className:"mt-2 space-y-2",children:[u.jsx("input",{type:"text",placeholder:"Unit (e.g., glasses, minutes, miles)",value:H.unit,onChange:J=>ee({...H,unit:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm"}),u.jsx("input",{type:"number",placeholder:"Target quantity",value:H.target,onChange:J=>ee({...H,target:parseFloat(J.target.value)||1}),min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Time Tracking"}),u.jsx("button",{onClick:()=>xe({enabled:!ce.enabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${ce.enabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${ce.enabled?"translate-x-5":"translate-x-1"}`})})]}),ce.enabled&&u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:"Track how long you spend on this habit each day"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:"Difficulty"}),u.jsx("div",{className:"flex gap-2",children:["easy","medium","hard"].map(J=>u.jsx("button",{onClick:()=>et(J),className:`px-3 py-2 rounded-lg text-sm font-medium transition ${qe===J?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:J.charAt(0).toUpperCase()+J.slice(1)},J))})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Set Goal"}),u.jsx("button",{onClick:()=>re({...Ne,enabled:!Ne.enabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${Ne.enabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${Ne.enabled?"translate-x-5":"translate-x-1"}`})})]}),Ne.enabled&&u.jsxs("div",{className:"mt-2 space-y-2",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"number",placeholder:"Target",value:Ne.target,onChange:J=>re({...Ne,target:parseInt(J.target.value)||7}),min:"1",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm"}),u.jsxs("select",{value:Ne.period,onChange:J=>re({...Ne,period:J.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm",children:[u.jsx("option",{value:"week",children:"Week"}),u.jsx("option",{value:"month",children:"Month"}),u.jsx("option",{value:"year",children:"Year"})]})]}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:["Complete this habit ",Ne.target," times per ",Ne.period]})]})]})]})]})}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text",children:"Category"}),n&&u.jsxs("button",{onClick:n,className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Category"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-medium text-text-gray dark:text-dark-gray mb-2",children:"Select a category:"}),u.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-56 overflow-y-auto overflow-x-hidden px-1",children:pe.map(J=>{const me=Vc(J.id,pe,d),tt=y===J.id;return u.jsx("button",{onClick:()=>x(J.id),className:`px-4 py-3 rounded-lg font-medium text-sm transition-all ${tt?"border-2 shadow-md":"border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-sm"}`,style:{backgroundColor:tt?me.bg:"transparent",borderColor:tt?me.border:void 0,color:me.text},children:J.label},J.id)})})]})]}),T&&u.jsx("div",{className:"mb-4 px-3 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg",children:T}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg font-semibold text-text-dark hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),u.jsx("button",{onClick:ye,disabled:N,className:`flex-1 px-4 py-3 bg-primary text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition flex items-center justify-center gap-2 ${N?"opacity-75 cursor-not-allowed":"hover:bg-primary/90"}`,children:N?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):p?"Update Habit":"Create Habit"})]})]})]})})},Kpe=({onClose:t,onCreateCategory:e})=>{const{isDark:r}=Cr(),{hiddenPredefinedCategories:n,restoreCategory:i}=Cw(),[a,o]=R.useState(""),[s,l]=R.useState("#6AA84F"),[c,d]=R.useState(""),f=async()=>{if(!a.trim()){d("Category name is required");return}try{if(e){const g=nO(s,r),v=U9(s,.15),y=z9(s,.2);await e({label:a.trim(),bgColor:v,textColor:g,borderColor:y}),o(""),l("#6AA84F"),d(""),t()}}catch(g){d(g.message)}},p=g=>{g.key==="Enter"&&f()},m=["#6AA84F","#DC2626","#1D4ED8","#B45309","#0D9488","#6B21A8","#BE185D"];return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-2xl p-6 max-w-md w-full mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:"Create New Category"}),u.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition text-text-gray dark:text-dark-gray","aria-label":"Close",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"mb-5",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Category Name"}),u.jsx("input",{type:"text",value:a,onChange:g=>o(g.target.value),onKeyPress:p,placeholder:"e.g., Gaming",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition",autoFocus:!0})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-3",children:"Category Color"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-2",children:"Quick select:"}),u.jsx("div",{className:"flex gap-3 flex-wrap",children:m.map(g=>u.jsx("button",{onClick:()=>l(g),className:`w-10 h-10 rounded-lg border-2 transition-all transform ${s===g?"border-gray-900 dark:border-gray-100 shadow-lg scale-110":"border-gray-300 dark:border-gray-600 hover:scale-105 hover:shadow-md"}`,style:{backgroundColor:g},title:g},g))})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("label",{className:"text-xs font-medium text-text-dark dark:text-dark-text",children:"Custom color:"}),u.jsx("input",{type:"color",value:s,onChange:g=>l(g.target.value),className:"w-12 h-12 rounded-lg border-2 border-gray-300 dark:border-gray-600 cursor-pointer"}),u.jsx("span",{className:"text-sm font-mono text-text-gray dark:text-dark-gray bg-white dark:bg-gray-700 px-2 py-1 rounded border border-gray-200 dark:border-gray-600",children:s})]})]}),n.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-3",children:"Restore Hidden Categories"}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 max-h-40 overflow-y-auto",children:u.jsx("div",{className:"space-y-2",children:n.map(g=>{const v=Aw.find(y=>y.id===g);return v?u.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[u.jsx("span",{className:"text-xs text-text-dark dark:text-dark-text",children:v.label}),u.jsx("button",{onClick:async()=>{try{await i(g),d("")}catch(y){d(`Error restoring category: ${y.message}`)}},className:"px-2 py-1 text-xs bg-primary hover:bg-primary/90 text-white rounded transition",children:"Restore"})]},g):null})})})]}),c&&u.jsx("div",{className:"mb-4 px-3 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg",children:c}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg font-semibold text-text-dark hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),u.jsx("button",{onClick:f,className:"flex-1 px-4 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 shadow-md hover:shadow-lg transition",children:"Create Category"})]})]})})},Ype=[{id:"first_habit",name:"Getting Started",description:"Created your first habit",emoji:"",condition:t=>t.totalHabits>=1},{id:"streak_7",name:"Week Warrior",description:"7-day streak on any habit",emoji:"",condition:t=>t.maxStreak>=7},{id:"streak_30",name:"Monthly Master",description:"30-day streak on any habit",emoji:"",condition:t=>t.maxStreak>=30},{id:"streak_100",name:"Centurion",description:"100-day streak on any habit",emoji:"",condition:t=>t.maxStreak>=100},{id:"perfect_week",name:"Perfect Week",description:"100% completion for a week",emoji:"",condition:t=>t.perfectWeeks>=1},{id:"perfect_month",name:"Perfect Month",description:"100% completion for a month",emoji:"",condition:t=>t.perfectMonths>=1},{id:"habit_master",name:"Habit Master",description:"10 active habits",emoji:"",condition:t=>t.totalHabits>=10},{id:"consistency_king",name:"Consistency King",description:"80%+ consistency for 30 days",emoji:"",condition:t=>t.consistency30Days>=80},{id:"early_bird",name:"Early Bird",description:"Complete habits before 8 AM for 7 days",emoji:"",condition:t=>t.earlyCompletions>=7},{id:"night_owl",name:"Night Owl",description:"Complete habits after 10 PM for 7 days",emoji:"",condition:t=>t.lateCompletions>=7}],Qpe=(t,e)=>{const r={totalHabits:t.length,maxStreak:0,perfectWeeks:0,perfectMonths:0,consistency30Days:0,earlyCompletions:0,lateCompletions:0};return t.forEach(n=>{n.currentStreak>r.maxStreak&&(r.maxStreak=n.currentStreak)}),r},Xpe=(t,e)=>{const r=Qpe(t);return Ype.filter(n=>n.condition(r))},Jpe=({habits:t,logs:e})=>{const r=Xpe(t);return r.length===0?u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[u.jsxs("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),"Achievements"]}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:"Complete habits to unlock achievements!"})]}):u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[u.jsxs("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4 flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),"Achievements (",r.length,")"]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:r.map(n=>u.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 rounded-lg p-3 border border-primary/20 text-center",children:[u.jsx("div",{className:"text-3xl mb-2",children:n.emoji}),u.jsx("div",{className:"text-xs font-semibold text-text-dark dark:text-dark-text mb-1",children:n.name}),u.jsx("div",{className:"text-[10px] text-text-gray dark:text-dark-gray",children:n.description})]},n.id))})]})},Zpe=({habits:t,logs:e})=>{const{user:r}=br(),[n,i]=R.useState({weekly:{target:0,current:0},monthly:{target:0,current:0}}),[a,o]=R.useState(null);R.useEffect(()=>{r&&s()},[r]),R.useEffect(()=>{r&&e&&c()},[r,e,t]);const s=async()=>{try{const p=yr(ft,"users",r.uid),m=await Ew(p);m.exists()&&m.data().goals&&i(m.data().goals)}catch(p){console.error("Error loading goals:",p)}},l=async p=>{try{const m=yr(ft,"users",r.uid);await Po(m,{goals:p},{merge:!0}),i(p)}catch(m){console.error("Error saving goals:",m)}},c=()=>{const p=new Date;p.setHours(0,0,0,0);const m=new Date(p);m.setDate(p.getDate()-p.getDay()),m.setHours(0,0,0,0);const g=new Date(p.getFullYear(),p.getMonth(),1);g.setHours(0,0,0,0);let v=0,y=0;const x=new Set((t||[]).filter(b=>b.active&&!b.archived).map(b=>b.id));Object.entries(e||{}).forEach(([b,k])=>{const[j,w,T]=b.split("-").map(Number),S=new Date(j,w-1,T);S.setHours(0,0,0,0);let E=0;k.habits&&Object.entries(k.habits).forEach(([P,N])=>{x.has(P)&&(N===!0||typeof N=="object"&&(N==null?void 0:N.completed)===!0)&&E++}),S>=m&&S<=p&&(v+=E),S>=g&&S<=p&&(y+=E)}),i(b=>({...b,weekly:{...b.weekly,current:v},monthly:{...b.monthly,current:y}}))},d=(p,m)=>{const g={...n,[p]:{...n[p],target:parseInt(m)||0}};l(g)},f=(p,m)=>m===0?0:Math.min(p/m*100,100);return u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[u.jsxs("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4 flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),"Goals"]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Weekly Target"}),u.jsx("div",{className:"flex items-center gap-2",children:a==="weekly"?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"number",value:n.weekly.target,onChange:p=>d("weekly",p.target.value),onBlur:()=>o(null),className:"w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded",autoFocus:!0}),u.jsx("span",{className:"text-xs text-text-gray dark:text-dark-gray",children:"completions"})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm font-semibold text-text-dark dark:text-dark-text",children:n.weekly.target}),u.jsx("button",{onClick:()=>o("weekly"),className:"text-xs text-primary hover:text-primary/80",children:"Edit"})]})})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-primary h-full transition-all duration-300",style:{width:`${f(n.weekly.current,n.weekly.target)}%`}})}),u.jsxs("span",{className:"text-xs font-medium text-text-dark dark:text-dark-text min-w-[60px] text-right",children:[n.weekly.current,"/",n.weekly.target]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Monthly Target"}),u.jsx("div",{className:"flex items-center gap-2",children:a==="monthly"?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"number",value:n.monthly.target,onChange:p=>d("monthly",p.target.value),onBlur:()=>o(null),className:"w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded",autoFocus:!0}),u.jsx("span",{className:"text-xs text-text-gray dark:text-dark-gray",children:"completions"})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm font-semibold text-text-dark dark:text-dark-text",children:n.monthly.target}),u.jsx("button",{onClick:()=>o("monthly"),className:"text-xs text-primary hover:text-primary/80",children:"Edit"})]})})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-primary h-full transition-all duration-300",style:{width:`${f(n.monthly.current,n.monthly.target)}%`}})}),u.jsxs("span",{className:"text-xs font-medium text-text-dark dark:text-dark-text min-w-[60px] text-right",children:[n.monthly.current,"/",n.monthly.target]})]})]})]})]})},eme=({habits:t,logs:e,month:r,year:n,allCategories:i=null})=>{const a=["January","February","March","April","May","June","July","August","September","October","November","December"],o=g=>{const v=new Date(g);return`${a[v.getMonth()]} ${v.getDate()}, ${v.getFullYear()}`},s=()=>{const g=new Date(n,r,1),v=new Date(n,r+1,0);return`${a[r]} ${g.getDate()} - ${v.getDate()}, ${n}`};new Date(n,r+1,0).getDate();const l=t.length,c=t.filter(g=>!g.archived&&g.active).length;let d=0,f=0;Object.values(e||{}).forEach(g=>{const v=Object.values(g.habits||{}).filter(Boolean).length;v>0&&(d+=v,f++)}),f>0&&(d/f).toFixed(1);const p=l>0&&f>0?(d/(c*f)*100).toFixed(1):0,m=()=>{window.print()};return u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),"Monthly Report"]}),u.jsxs("button",{onClick:m,className:"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium text-sm transition flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]}),u.jsxs("div",{className:"print:block hidden print:absolute print:inset-0 print:p-4 print:bg-white",children:[u.jsx("style",{children:`
          @media print {
            @page {
              margin: 0.8cm;
              size: A4;
            }
            body {
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }
            .print-content {
              page-break-after: avoid;
            }
            table {
              page-break-inside: avoid;
            }
            tr {
              page-break-inside: avoid;
            }
          }
        `}),u.jsxs("div",{className:"print-content",children:[u.jsxs("div",{className:"mb-3 pb-2 border-b-2 border-gray-400",children:[u.jsx("h1",{className:"text-2xl font-bold mb-1 text-gray-900",children:"Habit Tracker Report"}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("p",{className:"text-gray-700 font-semibold",children:s()}),u.jsxs("p",{className:"text-gray-500",children:["Generated on ",o(new Date)]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900 border-b border-gray-400 pb-1",children:"Summary"}),u.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[u.jsxs("div",{className:"bg-gray-100 p-2 rounded border border-gray-300",children:[u.jsx("p",{className:"text-xs text-gray-700 mb-1 font-medium",children:"Total Habits"}),u.jsx("p",{className:"text-xl font-bold text-gray-900",children:l})]}),u.jsxs("div",{className:"bg-gray-100 p-2 rounded border border-gray-300",children:[u.jsx("p",{className:"text-xs text-gray-700 mb-1 font-medium",children:"Active Habits"}),u.jsx("p",{className:"text-xl font-bold text-gray-900",children:c})]}),u.jsxs("div",{className:"bg-gray-100 p-2 rounded border border-gray-300",children:[u.jsx("p",{className:"text-xs text-gray-700 mb-1 font-medium",children:"Total Completions"}),u.jsx("p",{className:"text-xl font-bold text-gray-900",children:d})]}),u.jsxs("div",{className:"bg-gray-100 p-2 rounded border border-gray-300",children:[u.jsx("p",{className:"text-xs text-gray-700 mb-1 font-medium",children:"Completion Rate"}),u.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[p,"%"]})]})]})]}),u.jsxs("div",{className:"mb-3",children:[u.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900 border-b border-gray-400 pb-1",children:"Habits Overview"}),u.jsxs("table",{className:"w-full border-collapse border border-gray-400 text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-200",children:[u.jsx("th",{className:"border border-gray-400 text-left p-1.5 font-bold text-gray-900",children:"Habit"}),u.jsx("th",{className:"border border-gray-400 text-left p-1.5 font-bold text-gray-900",children:"Category"}),u.jsx("th",{className:"border border-gray-400 text-center p-1.5 font-bold text-gray-900",children:"Completions"}),u.jsx("th",{className:"border border-gray-400 text-center p-1.5 font-bold text-gray-900",children:"Current Streak"}),u.jsx("th",{className:"border border-gray-400 text-center p-1.5 font-bold text-gray-900",children:"Best Streak"})]})}),u.jsx("tbody",{children:t.filter(g=>!g.archived).map((g,v)=>{var b;const y=Object.values(e||{}).reduce((k,j)=>{var w;return k+((w=j.habits)!=null&&w[g.id]?1:0)},0),x=g.category?((b=Pw(g.category,i))==null?void 0:b.label)||g.category:"N/A";return u.jsxs("tr",{className:v%2===0?"bg-white":"bg-gray-50",children:[u.jsx("td",{className:"border border-gray-400 p-1.5 text-gray-900",children:u.jsxs("span",{className:"flex items-center gap-1",children:[g.emoji&&u.jsx("span",{className:"text-sm",children:g.emoji}),u.jsx("span",{className:"font-medium text-xs",children:g.name})]})}),u.jsx("td",{className:"border border-gray-400 p-1.5 text-gray-700 text-xs",children:x}),u.jsx("td",{className:"border border-gray-400 p-1.5 text-center text-gray-900 font-semibold text-xs",children:y}),u.jsx("td",{className:"border border-gray-400 p-1.5 text-center text-gray-900 font-semibold text-xs",children:g.currentStreak||0}),u.jsx("td",{className:"border border-gray-400 p-1.5 text-center text-gray-900 font-semibold text-xs",children:g.bestStreak||0})]},g.id)})})]})]}),u.jsx("div",{className:"mt-3 pt-2 border-t border-gray-400 text-xs text-gray-500 text-center",children:u.jsx("p",{children:"This report was generated automatically by Habit Tracker"})})]})]}),u.jsxs("div",{className:"print:hidden",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-1",children:"Total Habits"}),u.jsx("p",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:l})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-1",children:"Active Habits"}),u.jsx("p",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:c})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-1",children:"Total Completions"}),u.jsx("p",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:d})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-1",children:"Completion Rate"}),u.jsxs("p",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:[p,"%"]})]})]}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:'Click "Print Report" to generate a printable version'})]})]})},MM=(t,e)=>{if(!t||t.length===0)return"";const r=e.map(i=>`"${i}"`).join(","),n=t.map(i=>e.map(a=>{const o=i[a]||"";return`"${String(o).replace(/"/g,'""')}"`}).join(","));return[r,...n].join(`
`)},tme=t=>{const e=["Name","Category","Icon","Current Streak","Best Streak","Created Date","Status"],r=t.map(n=>({Name:n.name||"",Category:n.category||"",Icon:n.emoji||"","Current Streak":n.currentStreak||0,"Best Streak":n.bestStreak||0,"Created Date":n.createdAt||"",Status:n.archived?"Archived":n.active?"Active":"Inactive"}));return MM(r,e)},rme=(t,e)=>{const r=["Date","Mood","Energy","Focus",...e.map(i=>i.name)],n=t.map(i=>{const a={Date:i.date||"",Mood:i.mood||"",Energy:i.energy||"",Focus:i.focus||""};return e.forEach(o=>{a[o.name]=i.habits&&i.habits[o.id]?"Yes":"No"}),a});return MM(n,r)},tP=(t,e)=>{const r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),i=URL.createObjectURL(r);n.setAttribute("href",i),n.setAttribute("download",e),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},nme=(t,e)=>{const r=new Date().toISOString().split("T")[0],n=tme(t);tP(n,`habits_export_${r}.csv`);const i=rme(e,t);tP(i,`daily_logs_export_${r}.csv`)},ime=()=>{var J,me,tt;const{user:t}=br(),{isDark:e}=Cr(),[r,n]=R.useState(new Date),[i,a]=R.useState({}),[o,s]=R.useState(!1),[l,c]=R.useState(!1),[d,f]=R.useState(null),[p,m]=R.useState("grid"),[g,v]=R.useState(new Set),{categories:y,customCategories:x,createCategory:b,removeCategory:k,hiddenPredefinedCategories:j,restoreCategory:w}=Cw(),{notificationSettings:T,sendBrowserNotification:S}=Tm(),[E,P]=R.useState(new Set),N=R.useRef(""),I=R.useMemo(()=>y.map(X=>X.id).sort().join(","),[y]);R.useEffect(()=>{y.length>0?I!==N.current&&(N.current=I,P(X=>{const ae=new Set(y.map(Ie=>Ie.id)),de=new Set;let fe=!1;return X.forEach(Ie=>{ae.has(Ie)?de.add(Ie):fe=!0}),y.forEach(Ie=>{de.has(Ie.id)||(de.add(Ie.id),fe=!0)}),fe?de:X})):E.size>0&&P(new Set)},[I,y.length]);const O=X=>{const ae=X.getFullYear(),de=String(X.getMonth()+1).padStart(2,"0"),fe=String(X.getDate()).padStart(2,"0");return`${ae}-${de}-${fe}`},[A,$]=R.useState(O(new Date)),[L,U]=R.useState(""),{habits:z,createHabit:M,removeHabit:F,updateHabit:B,archiveHabit:K,unarchiveHabit:H}=Em(A),[ee,ce]=R.useState(""),[xe,qe]=R.useState(!1);R.useEffect(()=>(z.length>0&&(T!=null&&T.browserEnabled)&&(ks.startDailyCheck(z,T,S),setTimeout(()=>{ks.logScheduledReminders(z)},1e3)),()=>{ks.stopDailyCheck()}),[z,T==null?void 0:T.browserEnabled,S]);const et=R.useMemo(()=>new Set(y.map(X=>X.id)),[y]),Ne=z.filter(X=>{var de,fe;const ae=X.category||"other";if(!et.has(ae)||!E.has(ae)||!xe&&X.archived||xe&&!X.archived)return!1;if(ee.trim()){const Ie=ee.toLowerCase(),Xe=(de=X.name)==null?void 0:de.toLowerCase().includes(Ie),ut=(fe=X.notes)==null?void 0:fe.toLowerCase().includes(Ie);if(!Xe&&!ut)return!1}return!0}),re=X=>{if(!et.has(X))return;const ae=new Set(E);ae.has(X)?ae.delete(X):ae.add(X),P(ae)};R.useEffect(()=>{if(!t)return;(async()=>{const ae=r.getFullYear(),de=r.getMonth(),fe=O(new Date(ae,de,1)),Ie=O(new Date(ae,de+1,0));try{const Xe=await go(t.uid,fe,Ie),ut={};Xe.forEach(Le=>{ut[Le.date]=Le}),a(ut)}catch{}})()},[t,r]);const pe=async(X,ae,de=null)=>{if(t)try{const fe=new Date;fe.setHours(0,0,0,0);const Ie=new Date(ae);Ie.setHours(0,0,0,0);const Xe=i[ae]||{date:ae,habits:{},mood:3,energy:3,focus:3},ut=Xe.habits[X],Le=ut===!0||typeof ut=="object"&&(ut==null?void 0:ut.completed)===!0;let Ue;if(Le)Ue=!1;else{if(Ie>fe){alert("Cannot mark future dates as completed. Please select today or a past date.");return}de?Ue=de:Ue=!0}const on={...Xe,habits:{...Xe.habits,[X]:Ue}};await mo(t.uid,ae,on),a({...i,[ae]:on})}catch{}},ye=async(X,ae,de)=>{const fe=O(new Date);if(X>fe){alert("Cannot update metrics for future dates. Please select today or a past date.");return}if(t)try{const Xe={...i[X]||{date:X,habits:{},mood:3,energy:3,focus:3},[ae]:de};await mo(t.uid,X,Xe),a({...i,[X]:Xe})}catch{}},Q=r.toLocaleDateString("en-US",{month:"long",year:"numeric"});(()=>{const X=r.getFullYear(),ae=r.getMonth(),de=new Date(X,ae,1),fe=new Date(X,ae+1,0);return`${de.toLocaleDateString("en-US",{month:"long"})} ${de.getDate()} - ${fe.getDate()}, ${X}`})();const ke=()=>{n(new Date(r.getFullYear(),r.getMonth()-1))},Be=()=>{n(new Date(r.getFullYear(),r.getMonth()+1))};return u.jsxs("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg",children:[u.jsx("div",{className:"bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-gray-700 sticky top-[57px] z-10 shadow-sm overflow-visible",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 py-4 lg:py-5",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3",children:[u.jsxs("div",{className:"hidden sm:flex items-center gap-2 bg-gray-100 dark:bg-gray-800 rounded-lg px-3 py-1.5",children:[u.jsx("button",{onClick:ke,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition text-text-gray dark:text-dark-gray","aria-label":"Previous month",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),u.jsx("span",{className:"text-base font-semibold text-text-dark dark:text-dark-text px-2 min-w-[140px] text-center",children:Q}),u.jsx("button",{onClick:Be,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition text-text-gray dark:text-dark-gray","aria-label":"Next month",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),u.jsxs("div",{className:"flex sm:hidden items-center gap-2 bg-gray-100 dark:bg-gray-800 rounded-lg px-3 py-2 w-full",children:[u.jsx("button",{onClick:ke,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition text-text-gray dark:text-dark-gray","aria-label":"Previous month",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),u.jsx("span",{className:"text-sm font-semibold text-text-dark dark:text-dark-text flex-1 text-center",children:Q}),u.jsx("button",{onClick:Be,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition text-text-gray dark:text-dark-gray","aria-label":"Next month",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),u.jsxs("div",{className:"inline-flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[u.jsx("button",{onClick:()=>m("grid"),className:`px-4 py-2 rounded-md font-medium text-sm transition-all ${p==="grid"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Grid View"]})}),u.jsx("button",{onClick:()=>m("heatmap"),className:`px-4 py-2 rounded-md font-medium text-sm transition-all ${p==="heatmap"?"bg-white dark:bg-gray-700 text-primary shadow-sm":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Heat Map"]})})]})]}),u.jsxs("button",{onClick:()=>{f(null),s(!0)},className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-primary hover:bg-primary/90 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105 whitespace-nowrap w-full sm:w-auto justify-center relative z-10",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),u.jsx("span",{className:"text-sm sm:text-base",children:"Create Habit"})]})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[u.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[u.jsx("div",{className:"flex-1 w-full sm:max-w-md",children:u.jsxs("div",{className:"relative",children:[u.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-gray dark:text-dark-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),u.jsx("input",{type:"text",value:ee,onChange:X=>ce(X.target.value),placeholder:"Search habits...",className:"w-full pl-10 pr-4 py-2 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary"})]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>qe(!xe),className:`px-4 py-2 rounded-lg font-medium text-sm transition ${xe?"bg-gray-200 dark:bg-gray-700 text-text-dark dark:text-dark-text":"bg-gray-100 dark:bg-gray-800 text-text-gray dark:text-dark-gray hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:xe?"Show Active":"Show Archived"}),u.jsxs("button",{onClick:()=>{const X=Object.values(i);nme(z,X)},className:"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium text-sm transition flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),u.jsx("h3",{className:"text-base font-semibold text-text-dark dark:text-dark-text",children:"Filter by Category"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>c(!0),className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1 px-2 py-1 rounded hover:bg-primary/5 dark:hover:bg-primary/10 transition",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Category"]}),u.jsx("span",{className:"text-xs text-text-gray dark:text-dark-gray",children:E.size===y.length?"All selected":`${E.size} of ${y.length} selected`})]})]}),u.jsx("div",{className:"flex flex-wrap gap-2.5",children:y.map(X=>{const ae=E.has(X.id),de=Vc(X.id,y,e),fe=X.isCustom,Ie=z.some(Xe=>Xe.category===X.id);return u.jsxs("div",{className:"relative group",children:[u.jsx("button",{onClick:()=>re(X.id),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${ae?"border-2 shadow-md scale-105":"border border-gray-300 dark:border-gray-600 opacity-60 hover:opacity-100"}`,style:{backgroundColor:ae?de.bg:"transparent",borderColor:ae?de.border:void 0,color:de.text},children:X.label}),(fe||!Ie)&&u.jsx("button",{onClick:async Xe=>{if(Xe.stopPropagation(),Ie){const Le=z.filter(Ue=>Ue.category===X.id).length;alert(`Cannot delete category "${X.label}" because it is being used by ${Le} habit(s). Please change or delete those habits first.`);return}const ut=fe?"delete":"hide";if(window.confirm(`Are you sure you want to ${ut} the category "${X.label}"? ${fe?"This action cannot be undone.":"You can restore it later from your profile settings."}`))try{await k(X.id),P(Le=>{const Ue=new Set(Le);return Ue.delete(X.id),Ue})}catch(Le){alert(`Error ${ut==="delete"?"deleting":"hiding"} category: ${Le.message}`)}},className:"absolute -top-1 -right-1 p-1 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition shadow-md",title:fe?"Delete category":"Hide category",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},X.id)})})]})}),p==="grid"?u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[u.jsx("div",{className:"lg:col-span-8",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 dark:from-primary/10 dark:to-primary/20 px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-dark dark:text-dark-text mb-1",children:"Habit Tracker"}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:"Tap a habit to expand weeks. Grid is scrollable on small screens."})]}),u.jsx("div",{className:"text-sm font-medium text-primary bg-white dark:bg-gray-800 px-3 py-1.5 rounded-lg",children:Q})]})}),u.jsx("div",{className:"p-6",children:u.jsx(Wpe,{habits:Ne,logs:i,currentMonth:r,onToggleHabit:pe,allCategories:y,newlyCreatedHabits:g,onDeleteHabit:async X=>{try{await F(X)}catch(ae){alert(`Error deleting habit: ${ae.message}`)}},onArchiveHabit:async X=>{try{await K(X)}catch(ae){alert(`Error archiving habit: ${ae.message}`)}},onUnarchiveHabit:async X=>{try{await H(X)}catch(ae){alert(`Error unarchiving habit: ${ae.message}`)}},onUpdateHabit:async(X,ae)=>{try{await B(X,ae)}catch(de){alert(`Error updating habit: ${de.message}`)}},onEditHabit:X=>{f(X),s(!0)}})})]})}),u.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-5",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("h3",{className:"text-base font-semibold text-text-dark dark:text-dark-text",children:"Select Date"})]}),u.jsx("input",{type:"date",value:A,onChange:X=>$(X.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition"})]}),u.jsx("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:u.jsx(DM,{mood:((J=i[A])==null?void 0:J.mood)||3,energy:((me=i[A])==null?void 0:me.energy)||3,focus:((tt=i[A])==null?void 0:tt.focus)||3,onUpdate:(X,ae)=>ye(A,X,ae),disabled:A>O(new Date)})}),u.jsx(Zpe,{habits:z,logs:i}),u.jsx(Jpe,{habits:z,logs:i}),u.jsx(eme,{habits:z,logs:i,month:r.getMonth(),year:r.getFullYear(),allCategories:y})]})]}):u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-text-dark dark:text-dark-text mb-2",children:"Completion Heat Map"}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:"Intensity shows overall habit completion for the day"})]}),u.jsx(Hpe,{month:r.getMonth(),year:r.getFullYear(),logs:i,habits:Ne})]}),o&&u.jsx(Gpe,{onClose:()=>{s(!1),f(null)},editingHabit:d,onUpdate:async(X,ae)=>{await B(X,ae),f(null),s(!1)},onCreate:async X=>{const ae=typeof X=="string"||X&&!X.name;let de,fe,Ie,Xe,ut,Le,Ue,on,Oo,Ro,Dl,Hn;if(ae?(de=X,fe=arguments[1]||"other",Ie=arguments[2]||"",Xe=arguments[3]||"",ut="daily",Le={daysOfWeek:[0,1,2,3,4,5,6]},Ue=!1,on=null,Oo=null,Ro=null,Dl="medium",Hn=null):(de=X.name,fe=X.category,Ie=X.emoji||"",Xe=X.notes||"",ut=X.frequency||"daily",Le=X.schedule||{daysOfWeek:[0,1,2,3,4,5,6]},Ue=X.reminderEnabled||!1,on=X.reminderTime||null,Oo=X.quantityTracking||null,Ro=X.timeTracking||null,Dl=X.difficulty||"medium",Hn=X.goal||null),P(Ct=>{if(Ct.has(fe))return Ct;const sn=new Set(Ct);return sn.add(fe),sn}),j.includes(fe))try{await w(fe);let Ct=0;for(;Ct<20&&(await new Promise(sn=>setTimeout(sn,50)),!y.some(sn=>sn.id===fe));)Ct++}catch{}if(z.some(Ct=>Ct.name.toLowerCase().trim()===de.toLowerCase().trim()&&Ct.category===fe&&!Ct.archived))return;const Do=await M(de,fe,Ie,Xe,{frequency:ut,schedule:Le,reminderEnabled:Ue,reminderTime:on,quantityTracking:Oo,timeTracking:Ro,difficulty:Dl,goal:Hn});Do&&(v(Ct=>new Set([...Ct,Do])),setTimeout(()=>{v(Ct=>{const sn=new Set(Ct);return sn.delete(Do),sn})},3e3))},categories:y,onOpenCreateCategory:()=>{c(!0)},hiddenPredefinedCategories:j,restoreCategory:w,onCategoryRestored:X=>{P(ae=>{const de=new Set(ae);return de.add(X),de})},existingHabits:z}),l&&u.jsx(Kpe,{onClose:()=>{c(!1)},onCreateCategory:async X=>{const ae=await b(X);P(de=>new Set([...de,ae.id])),c(!1)}})]})]})},ame=()=>{const{user:t}=br(),[e,r]=R.useState(new Date().getFullYear()),[n,i]=R.useState({}),o=(x=>{const b=x.getFullYear(),k=String(x.getMonth()+1).padStart(2,"0"),j=String(x.getDate()).padStart(2,"0");return`${b}-${k}-${j}`})(new Date),{habits:s}=Em(o);R.useEffect(()=>{if(!t)return;(async()=>{const b=`${e}-01-01`,k=`${e}-12-31`;try{const j=await go(t.uid,b,k),w={};j.forEach(T=>{w[T.date]=T}),i(w)}catch(j){console.error("Error fetching year logs:",j)}})()},[t,e]);const c=(()=>{const x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=[];for(let k=0;k<12;k++){`${e}${String(k+1).padStart(2,"0")}`;const j=new Date(e,k+1,0).getDate();`${e}${String(k+1).padStart(2,"0")}${j}`;let w=0,T=0,S=0,E=0,P=0,N=0;for(let L=1;L<=j;L++){const U=`${e}-${String(k+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`,z=n[U];z&&(N++,S+=z.mood||0,E+=z.energy||0,P+=z.focus||0,s.length>0&&s.forEach(M=>{T++,z.habits&&z.habits[M.id]&&w++}))}const I=T>0?Math.round(w/T*100):0,O=N>0?Math.round(S/N*10)/10:0,A=N>0?Math.round(E/N*10)/10:0,$=N>0?Math.round(P/N*10)/10:0;b.push({month:x[k],completion:I,mood:O,energy:A,focus:$})}return b})(),d=[...c].sort((x,b)=>b.completion-x.completion),f=d[0],p=d[d.length-1],g=[...c].sort((x,b)=>b.mood-x.mood)[0],v=()=>r(e-1),y=()=>r(e+1);return u.jsxs("div",{className:"min-h-screen bg-bg-light",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[u.jsx("h1",{className:"text-2xl font-bold text-text-dark",children:"Analytics"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:v,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:" Previous Year"}),u.jsx("span",{className:"text-lg font-semibold text-text-dark w-20 text-center",children:e}),u.jsx("button",{onClick:y,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"Next Year "})]})]})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("p",{className:"text-sm text-text-gray mb-1",children:"Best Month (Completion)"}),u.jsx("p",{className:"text-2xl font-bold text-primary",children:f.month}),u.jsxs("p",{className:"text-xs text-text-gray mt-1",children:[f.completion,"% complete"]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("p",{className:"text-sm text-text-gray mb-1",children:"Lowest Month"}),u.jsx("p",{className:"text-2xl font-bold text-orange-500",children:p.month}),u.jsxs("p",{className:"text-xs text-text-gray mt-1",children:[p.completion,"% complete"]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("p",{className:"text-sm text-text-gray mb-1",children:"Best Mood Month"}),u.jsx("p",{className:"text-2xl font-bold text-blue-500",children:g.month}),u.jsxs("p",{className:"text-xs text-text-gray mt-1",children:[g.mood,"/5 average"]})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark mb-4",children:"Habit Completion by Month"}),u.jsx("div",{className:"w-full h-96",children:u.jsx(cs,{width:"100%",height:"100%",children:u.jsxs(RM,{data:c,children:[u.jsx(Qa,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),u.jsx(Nn,{dataKey:"month",tick:{fontSize:12},stroke:"#6B7280"}),u.jsx(In,{tick:{fontSize:12},stroke:"#6B7280",domain:[0,100]}),u.jsx(hr,{formatter:x=>`${x}%`,contentStyle:{backgroundColor:"#F3F7F1",border:"1px solid #6AA84F",borderRadius:"8px"}}),u.jsx(Ca,{dataKey:"completion",fill:"#6AA84F",radius:[8,8,0,0]})]})})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark mb-4",children:"Mood Trend"}),u.jsx("div",{className:"w-full h-48",children:u.jsx(cs,{width:"100%",height:"100%",children:u.jsxs(Xf,{data:c,children:[u.jsx(Qa,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),u.jsx(Nn,{dataKey:"month",tick:{fontSize:10},stroke:"#6B7280"}),u.jsx(In,{tick:{fontSize:10},stroke:"#6B7280",domain:[0,5]}),u.jsx(hr,{formatter:x=>x.toFixed(1),contentStyle:{backgroundColor:"#F3F7F1",border:"1px solid #6AA84F",borderRadius:"8px"}}),u.jsx(ha,{type:"monotone",dataKey:"mood",stroke:"#8B5CF6",strokeWidth:2,dot:{r:3}})]})})}),u.jsxs("p",{className:"text-sm text-text-gray text-center mt-2",children:["Avg: ",(c.reduce((x,b)=>x+b.mood,0)/12).toFixed(1),"/5"]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark mb-4",children:"Energy Trend"}),u.jsx("div",{className:"w-full h-48",children:u.jsx(cs,{width:"100%",height:"100%",children:u.jsxs(Xf,{data:c,children:[u.jsx(Qa,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),u.jsx(Nn,{dataKey:"month",tick:{fontSize:10},stroke:"#6B7280"}),u.jsx(In,{tick:{fontSize:10},stroke:"#6B7280",domain:[0,5]}),u.jsx(hr,{formatter:x=>x.toFixed(1),contentStyle:{backgroundColor:"#F3F7F1",border:"1px solid #6AA84F",borderRadius:"8px"}}),u.jsx(ha,{type:"monotone",dataKey:"energy",stroke:"#F59E0B",strokeWidth:2,dot:{r:3}})]})})}),u.jsxs("p",{className:"text-sm text-text-gray text-center mt-2",children:["Avg: ",(c.reduce((x,b)=>x+b.energy,0)/12).toFixed(1),"/5"]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark mb-4",children:"Focus Trend"}),u.jsx("div",{className:"w-full h-48",children:u.jsx(cs,{width:"100%",height:"100%",children:u.jsxs(Xf,{data:c,children:[u.jsx(Qa,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),u.jsx(Nn,{dataKey:"month",tick:{fontSize:10},stroke:"#6B7280"}),u.jsx(In,{tick:{fontSize:10},stroke:"#6B7280",domain:[0,5]}),u.jsx(hr,{formatter:x=>x.toFixed(1),contentStyle:{backgroundColor:"#F3F7F1",border:"1px solid #6AA84F",borderRadius:"8px"}}),u.jsx(ha,{type:"monotone",dataKey:"focus",stroke:"#3B82F6",strokeWidth:2,dot:{r:3}})]})})}),u.jsxs("p",{className:"text-sm text-text-gray text-center mt-2",children:["Avg: ",(c.reduce((x,b)=>x+b.focus,0)/12).toFixed(1),"/5"]})]})]})]})]})},Jf=(t,e="daily",r=1)=>{if(!t||t.length===0||r===0)return[];const n={};return t.forEach(i=>{if(!i.date)return;const a=new Date(i.date);let o;if(e==="weekly"){const l=new Date(a);l.setDate(a.getDate()-a.getDay()),o=l.toISOString().split("T")[0]}else e==="monthly"?o=i.date.substring(0,7):o=i.date;n[o]||(n[o]={completed:0,total:0,date:o});const s=i.habits?Object.values(i.habits).filter(l=>l===!0).length:0;n[o].completed+=s,n[o].total+=r}),Object.values(n).sort((i,a)=>new Date(i.date)-new Date(a.date)).map(i=>({date:i.date,completion:i.total>0?Math.min(100,Math.round(i.completed/i.total*100)):0}))},ome=(t,e)=>{if(!t||t.length===0||!e||e.length===0)return{bestHabits:[],worstHabits:[]};const r={};t.forEach(i=>{r[i.id]={id:i.id,name:i.name,category:i.category,completed:0,total:0,currentStreak:i.currentStreak||0,bestStreak:i.bestStreak||0}}),e.forEach(i=>{t.forEach(a=>{r[a.id].total++,i.habits&&i.habits[a.id]===!0&&r[a.id].completed++})});const n=Object.values(r).map(i=>({...i,completionRate:i.total>0?Math.round(i.completed/i.total*100):0})).sort((i,a)=>a.completionRate-i.completionRate);return{bestHabits:n.slice(0,5),worstHabits:n.slice(-5).reverse(),allHabits:n}},sme=(t,e)=>{if(!t||t.length<2||!e||e.length===0)return[];const r={},n={};return t.forEach(a=>{n[a.id]=0}),e.forEach(a=>{if(!a.habits)return;const o=t.filter(s=>a.habits[s.id]===!0).map(s=>s.id);o.forEach(s=>{n[s]++});for(let s=0;s<o.length;s++)for(let l=s+1;l<o.length;l++){const c=[o[s],o[l]].sort().join("-");r[c]=(r[c]||0)+1}}),Object.entries(r).map(([a,o])=>{const[s,l]=a.split("-"),c=t.find(p=>p.id===s),d=t.find(p=>p.id===l),f=Math.round(o/e.length*100);return{habit1:(c==null?void 0:c.name)||s,habit2:(d==null?void 0:d.name)||l,coOccurrences:o,support:f,displayText:`${(c==null?void 0:c.name)||s}  ${(d==null?void 0:d.name)||l}`}}).sort((a,o)=>o.support-a.support).slice(0,10)},lme=(t,e,r=7)=>{if(!e||e.length===0)return{probability:50,prediction:"Not enough data"};const n=e.filter(c=>c.habits&&c.habits[t.id]!==void 0).map(c=>({date:c.date,completed:c.habits[t.id]===!0})).sort((c,d)=>new Date(c.date)-new Date(d.date));if(n.length<7)return{probability:50,prediction:"Insufficient history"};const i=n.slice(-30),a=i.filter(c=>c.completed).length,o=Math.round(a/i.length*100);let s=o,l="Will likely continue";return t.currentStreak>=7?(s=Math.min(95,o+20),l="Strong momentum - very likely to continue"):t.currentStreak===0?(s=Math.max(30,o-15),l="Broke streak - needs restart"):t.currentStreak>0&&t.currentStreak<3&&(s=Math.max(50,o-10),l="Building momentum"),{habitId:t.id,habitName:t.name,completionRate:o,currentStreak:t.currentStreak,probability:Math.min(100,Math.max(0,s)),prediction:l}},cme=(t,e=1)=>{if(!t||t.length===0||e===0)return{consistency:0,variation:"No data"};const r=Jf(t,"weekly",e);if(r.length<2)return{consistency:50,variation:"Insufficient weeks"};const n=r.map(c=>c.completion),i=n.reduce((c,d)=>c+d)/n.length,a=n.reduce((c,d)=>c+Math.pow(d-i,2),0)/n.length,o=Math.sqrt(a),s=Math.max(0,100-o);let l="Highly consistent";return o>30&&(l="Variable"),o>20&&(l="Somewhat variable"),{consistency:Math.round(s),variation:l,stdDev:Math.round(o*10)/10}},ume=t=>{const{user:e}=br(),[r,n]=R.useState(null),[i,a]=R.useState(!0),[o,s]=R.useState(null);return R.useEffect(()=>{if(!e||!t||t.length===0){a(!1);return}(async()=>{try{a(!0);const c=new Date,d=new Date;d.setDate(d.getDate()-90);const f=d.toISOString().split("T")[0],p=c.toISOString().split("T")[0],m=await go(e.uid,f,p),g=Jf(m,"daily",t.length),v=Jf(m,"weekly",t.length),y=Jf(m,"monthly",t.length),x=ome(t,m),b=sme(t,m),k=cme(m,t.length),j=t.map(w=>lme(w,m));n({dailyTrends:g,weeklyTrends:v,monthlyTrends:y,bestHabits:x.bestHabits,worstHabits:x.worstHabits,allHabitStats:x.allHabits,correlations:b,consistency:k,predictions:j,period:"90 days"}),s(null)}catch(c){s(c.message),console.error("Error fetching analytics:",c)}finally{a(!1)}})()},[e,t]),{analyticsData:r,loading:i,error:o}},dme=()=>{const{user:t}=br(),{habits:e}=Em(new Date().toISOString().split("T")[0]),{analyticsData:r,loading:n}=ume(e),[i,a]=R.useState("daily");if(!t)return u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg flex items-center justify-center",children:u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:"Please log in to view analytics"})});if(n)return u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg flex items-center justify-center",children:u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:"Loading analytics..."})});if(!r)return u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg flex items-center justify-center",children:u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:"No analytics data available. Start tracking habits to see insights."})});const o=()=>{switch(i){case"weekly":return r.weeklyTrends;case"monthly":return r.monthlyTrends;default:return r.dailyTrends}};return u.jsxs("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg",children:[u.jsx("div",{className:"bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:"Analytics"}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:"Last 90 days of habit data"})]})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-text-gray dark:text-dark-gray mb-2",children:"Consistency Score"}),u.jsx("div",{className:"flex items-baseline gap-2",children:u.jsxs("span",{className:"text-3xl font-bold text-primary",children:[r.consistency.consistency,"%"]})}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-2",children:r.consistency.variation})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-text-gray dark:text-dark-gray mb-2",children:"Total Habits"}),u.jsx("div",{className:"flex items-baseline gap-2",children:u.jsx("span",{className:"text-3xl font-bold text-primary",children:e.length})}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-2",children:"Active habits"})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-text-gray dark:text-dark-gray mb-2",children:"Data Period"}),u.jsx("div",{className:"flex items-baseline gap-2",children:u.jsx("span",{className:"text-xl font-bold text-primary",children:r.period})}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-2",children:"Historical analysis"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text",children:"Completion Trends"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>a("daily"),className:`px-3 py-1 rounded text-sm font-medium ${i==="daily"?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Daily"}),u.jsx("button",{onClick:()=>a("weekly"),className:`px-3 py-1 rounded text-sm font-medium ${i==="weekly"?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Weekly"}),u.jsx("button",{onClick:()=>a("monthly"),className:`px-3 py-1 rounded text-sm font-medium ${i==="monthly"?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Monthly"})]})]}),u.jsx(cs,{width:"100%",height:300,children:u.jsxs(Xf,{data:o(),children:[u.jsx(Qa,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),u.jsx(Nn,{dataKey:"date",tick:{fontSize:12},stroke:"#9CA3AF",tickFormatter:s=>{const l=new Date(s);return i==="daily"?l.toLocaleDateString("en-US",{month:"short",day:"numeric"}):i==="weekly"?`Week of ${l.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`:l.toLocaleDateString("en-US",{month:"short",year:"2-digit"})}}),u.jsx(In,{domain:[0,100],tick:{fontSize:12},stroke:"#9CA3AF",allowDataOverflow:!1,tickFormatter:s=>`${s}%`}),u.jsx(hr,{contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"8px",color:"#FFF"},formatter:s=>`${s}%`}),u.jsx(ha,{type:"monotone",dataKey:"completion",stroke:"#6AA84F",strokeWidth:2,dot:{fill:"#6AA84F",r:4},activeDot:{r:6}})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4",children:"Top Performing Habits"}),u.jsx("div",{className:"space-y-3",children:r.bestHabits.map((s,l)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium text-text-dark dark:text-dark-text",children:["#",l+1," ",s.name]}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:[s.completedCount||0," completions"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-lg font-bold text-primary",children:[s.completionRate,"%"]}),u.jsx("p",{className:"text-xs text-primary",children:"Completion"})]})]},s.id||`best-habit-${l}`))})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4",children:"Habits Needing Focus"}),u.jsx("div",{className:"space-y-3",children:r.worstHabits.map((s,l)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-text-dark dark:text-dark-text",children:s.name}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:[s.completed||0," / ",s.total," days"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:[s.completionRate,"%"]}),u.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Completion"})]})]},s.id||`worst-habit-${l}`))})]})]}),r.correlations&&r.correlations.length>0&&u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4",children:"Habit Correlations"}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray mb-4",children:"Habits that are often completed together (synergistic pairs)"}),u.jsx("div",{className:"space-y-2",children:r.correlations.map((s,l)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:s.displayText}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[s.support,"%"]}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:"co-occur"})]})})]},s.habitPair||`correlation-${l}`))})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-surface p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text mb-4",children:"Completion Predictions"}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray mb-4",children:"Based on your historical patterns and current streaks"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.predictions.map((s,l)=>u.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 rounded-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("p",{className:"font-medium text-text-dark dark:text-dark-text",children:s.habitName}),u.jsxs("span",{className:"text-sm font-semibold text-primary",children:[s.probability,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mb-2",children:u.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${s.probability}%`}})}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:s.prediction}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:["Completion rate: ",s.completionRate,"% | Streak: ",s.currentStreak," days"]})]},s.habitId||`prediction-${l}`))})]})]})]})},fme=()=>{const{user:t}=br(),[e,r]=R.useState([]),[n,i]=R.useState(!0),[a,o]=R.useState(null);R.useEffect(()=>{if(!t){i(!1);return}(async()=>{try{i(!0);const m=(await JI(t.uid)).map(g=>({...g,id:g.id||g.createdAt||Date.now().toString()}));r(m)}catch(p){o(p.message)}finally{i(!1)}})()},[t]);const s=R.useCallback(async(f,p="",m="medium",g=null)=>{if(t)try{const v=Date.now().toString(),y={id:v,title:f.trim(),description:p.trim()||"",completed:!1,pinned:!1,priority:m||"medium",dueDate:g||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r(x=>[y,...x]),await Qf(t.uid,v,y),v}catch(v){throw o(v.message),v}},[t]),l=R.useCallback(async(f,p)=>{if(!(!t||!f))try{const m={...p,updatedAt:new Date().toISOString()};r(g=>g.map(v=>v.id===f?{...v,...m}:v)),await Qf(t.uid,f,m)}catch(m){throw o(m.message),m}},[t]),c=R.useCallback(async f=>{if(!(!t||!f))try{const p=e.find(g=>g.id===f);if(!p){console.error("Todo not found:",f);return}const m={completed:!p.completed,updatedAt:new Date().toISOString()};r(g=>g.map(v=>v.id===f?{...v,...m}:v)),await Qf(t.uid,f,m)}catch(p){throw o(p.message),p}},[t,e]),d=R.useCallback(async f=>{if(t)try{r(p=>p.filter(m=>m.id!==f)),await ZI(t.uid,f)}catch(p){throw o(p.message),p}},[t]);return{todos:e,loading:n,error:a,createTodo:s,updateTodo:l,toggleTodo:c,removeTodo:d}},hme=()=>{const{isDark:t}=Cr(),{todos:e,loading:r,error:n,createTodo:i,updateTodo:a,toggleTodo:o,removeTodo:s}=fme(),[l,c]=R.useState(!1),[d,f]=R.useState("all"),[p,m]=R.useState("created"),[g,v]=R.useState(null),[y,x]=R.useState(""),[b,k]=R.useState(!1),[j,w]=R.useState(""),[T,S]=R.useState("list"),P=[...e.filter(A=>{var U,z;let $=!0;d==="active"&&($=!A.completed),d==="completed"&&($=A.completed);let L=!0;if(j.trim()){const M=j.toLowerCase().trim(),F=(U=A.title)==null?void 0:U.toLowerCase().includes(M),B=(z=A.description)==null?void 0:z.toLowerCase().includes(M);L=F||B}return $&&L})].sort((A,$)=>{if(A.pinned&&!$.pinned)return-1;if(!A.pinned&&$.pinned)return 1;if(p==="priority"){const L={high:3,medium:2,low:1};return(L[$.priority]||0)-(L[A.priority]||0)}return p==="dueDate"?!A.dueDate&&!$.dueDate?0:A.dueDate?$.dueDate?new Date(A.dueDate)-new Date($.dueDate):-1:1:new Date($.createdAt||0)-new Date(A.createdAt||0)}),N=e.filter(A=>!A.completed).length,I=e.filter(A=>A.completed).length,O=async A=>{A.preventDefault();const $=y.trim();if(!(!$||b)){k(!0);try{await i($,"","medium",null),x("")}catch(L){console.error("Error creating todo:",L)}finally{k(!1)}}};return r?u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:"Loading todos..."})]})}):u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg py-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-5",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-dark dark:text-dark-text mb-1",children:"To Do"}),u.jsxs("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:[N," active, ",I," completed"]})]}),u.jsxs("button",{onClick:()=>c(!0),className:"px-5 py-2.5 bg-primary hover:bg-primary/90 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2 self-start sm:self-auto",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Task"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[u.jsxs("form",{onSubmit:O,className:"relative",children:[u.jsx("input",{type:"text",value:y,onChange:A=>x(A.target.value),placeholder:"Quick add task...",className:"w-full px-4 py-2.5 pr-10 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition text-sm",disabled:b}),u.jsx("button",{type:"submit",disabled:!y.trim()||b,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 text-primary hover:text-primary/80 disabled:text-gray-400 disabled:cursor-not-allowed transition",title:"Add task (Enter)",children:b?u.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-gray dark:text-dark-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),u.jsx("input",{type:"text",value:j,onChange:A=>w(A.target.value),placeholder:"Search tasks...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-dark-surface border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-text-dark dark:text-dark-text focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition"}),j&&u.jsx("button",{onClick:()=>w(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text transition",title:"Clear search",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[u.jsx("div",{className:"flex items-center gap-2",children:["all","active","completed"].map(A=>u.jsx("button",{onClick:()=>f(A),className:`px-3 py-1.5 rounded-lg font-medium text-xs sm:text-sm transition ${d===A?"bg-primary text-white":"bg-white dark:bg-dark-surface text-text-dark dark:text-dark-text hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600"}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-dark-surface border border-gray-200 dark:border-gray-600 rounded-lg p-1",children:[u.jsx("button",{onClick:()=>S("list"),className:`p-1.5 rounded transition ${T==="list"?"bg-primary text-white":"text-text-gray dark:text-dark-gray hover:text-primary"}`,title:"List view",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),u.jsx("button",{onClick:()=>S("grid"),className:`p-1.5 rounded transition ${T==="grid"?"bg-primary text-white":"text-text-gray dark:text-dark-gray hover:text-primary"}`,title:"Grid view",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})})]}),u.jsxs("select",{value:p,onChange:A=>m(A.target.value),className:"px-3 py-1.5 bg-white dark:bg-dark-surface border border-gray-300 dark:border-gray-600 rounded-lg text-xs sm:text-sm text-text-dark dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary",children:[u.jsx("option",{value:"created",children:"Sort by Created"}),u.jsx("option",{value:"priority",children:"Sort by Priority"}),u.jsx("option",{value:"dueDate",children:"Sort by Due Date"})]})]})]})]}),n&&u.jsxs("div",{className:"mb-4 px-4 py-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:[n,n.includes("permission")&&u.jsxs("div",{className:"mt-2 text-xs",children:[u.jsx("p",{className:"font-semibold mb-1",children:"To fix this:"}),u.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[u.jsx("li",{children:"Go to Firebase Console  Firestore Database  Rules"}),u.jsx("li",{children:"Add this rule for todos:"}),u.jsxs("li",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded mt-1",children:["match /todos/","{userId}","/items/","{todoId}"," ","{",u.jsx("br",{}),"allow read, write: if request.auth.uid == userId;",u.jsx("br",{}),"}"]}),u.jsx("li",{children:'Click "Publish" to save the rules'})]})]})]}),P.length===0?u.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[u.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray text-lg",children:j?u.jsxs(u.Fragment,{children:['No tasks found matching "',j,'"']}):d==="completed"?"No completed tasks yet":d==="active"?"No active tasks. Great job!":"No tasks yet. Create one to get started!"}),j&&u.jsx("button",{onClick:()=>w(""),className:"mt-4 px-4 py-2 text-sm text-primary hover:text-primary/80 font-medium",children:"Clear search"})]}):T==="grid"?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map((A,$)=>u.jsx(mme,{todo:A,onToggle:()=>o(A.id),onUpdate:L=>a(A.id,L),onDelete:()=>s(A.id),onPin:()=>a(A.id,{pinned:!A.pinned}),isEditing:g===A.id,onEdit:()=>v(A.id),onCancelEdit:()=>v(null)},A.id||`todo-${$}-${A.createdAt}`))}):u.jsx("div",{className:"space-y-3",children:P.map((A,$)=>u.jsx(pme,{todo:A,onToggle:()=>o(A.id),onUpdate:L=>a(A.id,L),onDelete:()=>s(A.id),onPin:()=>a(A.id,{pinned:!A.pinned}),isEditing:g===A.id,onEdit:()=>v(A.id),onCancelEdit:()=>v(null)},A.id||`todo-${$}-${A.createdAt}`))}),l&&u.jsx(gme,{onClose:()=>c(!1),onCreate:async(A,$,L,U)=>{await i(A,$,L,U),c(!1)}})]})})},pme=({todo:t,onToggle:e,onUpdate:r,onDelete:n,onPin:i,isEditing:a,onEdit:o,onCancelEdit:s})=>{const{isDark:l}=Cr(),[c,d]=R.useState(t.title),[f,p]=R.useState(t.description||""),[m,g]=R.useState(t.priority||"medium"),[v,y]=R.useState(t.dueDate||""),x={high:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-300 dark:border-red-700",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border-yellow-300 dark:border-yellow-700",low:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-300 dark:border-green-700"},b=()=>{r({title:c.trim(),description:f.trim(),priority:m,dueDate:v||null}),s()},k=t.dueDate&&!t.completed&&new Date(t.dueDate)<new Date;return a?u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border-2 border-primary dark:border-primary p-4 ring-2 ring-primary/20",children:[u.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Task title",autoFocus:!0}),u.jsx("textarea",{value:f,onChange:j=>p(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"Description (optional)",rows:3}),u.jsxs("div",{className:"flex gap-3 mb-3",children:[u.jsxs("select",{value:m,onChange:j=>g(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[u.jsx("option",{value:"low",children:"Low Priority"}),u.jsx("option",{value:"medium",children:"Medium Priority"}),u.jsx("option",{value:"high",children:"High Priority"})]}),u.jsx("input",{type:"date",value:v,onChange:j=>y(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:b,className:"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition",children:"Save"}),u.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-dark dark:text-dark-text rounded-lg font-medium transition",children:"Cancel"})]})]}):u.jsx("div",{className:`bg-white dark:bg-dark-surface rounded-xl shadow-sm border-2 ${t.pinned?"border-primary dark:border-primary":"border-gray-300 dark:border-gray-600"} p-4 transition ${t.completed?"opacity-60":""}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:t.completed||!1,onChange:e,className:"mt-1 w-5 h-5 text-primary rounded cursor-pointer accent-primary flex-shrink-0"}),u.jsx("div",{className:"flex-1 min-w-0",children:u.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[t.pinned&&u.jsx("svg",{className:"w-4 h-4 text-primary flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),u.jsx("h3",{className:`font-semibold text-text-dark dark:text-dark-text flex-1 ${t.completed?"line-through":""}`,children:t.title})]}),t.description&&u.jsx("p",{className:`text-sm text-text-gray dark:text-dark-gray mt-1 ${t.completed?"line-through":""}`,children:t.description})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[t.dueDate&&u.jsxs("span",{className:`text-xs px-2 py-1 rounded ${k?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-text-gray dark:text-dark-gray"}`,children:[new Date(t.dueDate).toLocaleDateString(),k&&" "]}),u.jsx("span",{className:`text-xs px-2 py-1 rounded border ${x[t.priority]||x.medium}`,children:t.priority})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:i,className:`p-1.5 rounded transition ${t.pinned?"text-primary hover:text-primary/80 hover:bg-primary/10":"text-text-gray dark:text-dark-gray hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:t.pinned?"Unpin task":"Pin task","aria-label":t.pinned?"Unpin task":"Pin task",children:u.jsx("svg",{className:"w-4 h-4",fill:t.pinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.pinned?u.jsx("path",{fill:"currentColor",d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})}),u.jsx("button",{onClick:o,className:"p-1.5 text-primary hover:text-primary/80 hover:bg-primary/10 rounded transition",title:"Edit task","aria-label":"Edit task",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),u.jsx("button",{onClick:n,className:"p-1.5 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition",title:"Delete task","aria-label":"Delete task",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})})]})})},mme=({todo:t,onToggle:e,onUpdate:r,onDelete:n,onPin:i,isEditing:a,onEdit:o,onCancelEdit:s})=>{const{isDark:l}=Cr(),[c,d]=R.useState(t.title),[f,p]=R.useState(t.description||""),[m,g]=R.useState(t.priority||"medium"),[v,y]=R.useState(t.dueDate||""),x={high:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-300 dark:border-red-700",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border-yellow-300 dark:border-yellow-700",low:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-300 dark:border-green-700"},b=()=>{r({title:c.trim(),description:f.trim(),priority:m,dueDate:v||null}),s()},k=t.dueDate&&!t.completed&&new Date(t.dueDate)<new Date;return a?u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border-2 border-primary dark:border-primary p-4 ring-2 ring-primary/20 h-full",children:[u.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"Task title",autoFocus:!0}),u.jsx("textarea",{value:f,onChange:j=>p(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-primary resize-none text-sm",placeholder:"Description (optional)",rows:3}),u.jsxs("div",{className:"flex gap-2 mb-3",children:[u.jsxs("select",{value:m,onChange:j=>g(j.target.value),className:"flex-1 px-2 py-1.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-primary",children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"})]}),u.jsx("input",{type:"date",value:v,onChange:j=>y(j.target.value),className:"flex-1 px-2 py-1.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-primary"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:b,className:"flex-1 px-3 py-1.5 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition text-sm",children:"Save"}),u.jsx("button",{onClick:s,className:"flex-1 px-3 py-1.5 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-dark dark:text-dark-text rounded-lg font-medium transition text-sm",children:"Cancel"})]})]}):u.jsxs("div",{className:`bg-white dark:bg-dark-surface rounded-xl shadow-sm border-2 ${t.pinned?"border-primary dark:border-primary":"border-gray-300 dark:border-gray-600"} p-4 transition h-full flex flex-col ${t.completed?"opacity-60":""}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsx("input",{type:"checkbox",checked:t.completed||!1,onChange:e,className:"w-4 h-4 text-primary rounded cursor-pointer accent-primary flex-shrink-0"}),t.pinned&&u.jsx("svg",{className:"w-3.5 h-3.5 text-primary flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})]}),u.jsx("button",{onClick:i,className:`p-1 rounded transition ${t.pinned?"text-primary hover:text-primary/80 hover:bg-primary/10":"text-text-gray dark:text-dark-gray hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:t.pinned?"Unpin task":"Pin task",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:t.pinned?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.pinned?u.jsx("path",{fill:"currentColor",d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})})]}),u.jsxs("div",{className:"flex-1 mb-3",children:[u.jsx("h3",{className:`font-semibold text-text-dark dark:text-dark-text mb-1.5 text-sm ${t.completed?"line-through":""}`,children:t.title}),t.description&&u.jsx("p",{className:`text-xs text-text-gray dark:text-dark-gray line-clamp-3 ${t.completed?"line-through":""}`,children:t.description})]}),u.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.dueDate&&u.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${k?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-text-gray dark:text-dark-gray"}`,children:new Date(t.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),u.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${x[t.priority]||x.medium}`,children:t.priority})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:o,className:"p-1 text-primary hover:text-primary/80 hover:bg-primary/10 rounded transition",title:"Edit",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),u.jsx("button",{onClick:n,className:"p-1 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition",title:"Delete",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},gme=({onClose:t,onCreate:e})=>{const{isDark:r}=Cr(),[n,i]=R.useState(""),[a,o]=R.useState(""),[s,l]=R.useState("medium"),[c,d]=R.useState(""),[f,p]=R.useState(""),m=async()=>{if(!n.trim()){p("Task title is required");return}try{await e(n.trim(),a.trim(),s,c||null),i(""),o(""),l("medium"),d(""),p("")}catch(g){p(g.message)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-2xl p-6 max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-dark dark:text-dark-text",children:"New Task"}),u.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f&&u.jsx("div",{className:"mb-4 px-3 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg",children:f}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Task Title *"}),u.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value),placeholder:"e.g., Buy groceries",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition",autoFocus:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Description (Optional)"}),u.jsx("textarea",{value:a,onChange:g=>o(g.target.value),placeholder:"Add details about this task...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition resize-none"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Priority"}),u.jsxs("select",{value:s,onChange:g=>l(g.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition",children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-dark dark:text-dark-text mb-2",children:"Due Date (Optional)"}),u.jsx("input",{type:"date",value:c,onChange:g=>d(g.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition"})]})]}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg font-semibold text-text-dark hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),u.jsx("button",{onClick:m,className:"flex-1 px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg font-semibold transition",children:"Create Task"})]})]})]})})},yme=({children:t})=>u.jsx("span",{className:"inline-block animate-pulse",children:t}),vme=()=>{const[t,e]=R.useState(0);R.useEffect(()=>{const a=setTimeout(()=>e(75),300);return()=>clearTimeout(a)},[]);const r=40,n=2*Math.PI*r,i=n-t/100*n;return u.jsx("div",{className:"my-4 flex justify-center",children:u.jsxs("div",{className:"relative w-32 h-32",children:[u.jsxs("svg",{className:"transform -rotate-90",width:"128",height:"128",children:[u.jsx("circle",{cx:"64",cy:"64",r,fill:"none",stroke:"#E5E7EB",strokeWidth:"8",className:"dark:stroke-gray-700"}),u.jsx("circle",{cx:"64",cy:"64",r,fill:"none",stroke:"#6AA84F",strokeWidth:"8",strokeDasharray:n,strokeDashoffset:i,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:"text-2xl font-bold text-primary",children:[t,"%"]})})]})})},xme=({guideId:t,onFeedback:e})=>{const[r,n]=R.useState(null),[i,a]=R.useState(!1),o=s=>{n(s),a(!0),e&&e(t,s),setTimeout(()=>a(!1),3e3)};return i?u.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-center",children:u.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Thank you for your feedback!"})}):u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[u.jsx("p",{className:"text-sm font-medium text-text-dark dark:text-dark-text mb-3",children:"Was this guide helpful?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>o("yes"),className:`flex-1 px-4 py-2 rounded-lg font-medium text-sm transition ${r==="yes"?"bg-green-500 text-white":"bg-white dark:bg-gray-700 text-text-dark dark:text-dark-text hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:" Yes"}),u.jsx("button",{onClick:()=>o("no"),className:`flex-1 px-4 py-2 rounded-lg font-medium text-sm transition ${r==="no"?"bg-red-500 text-white":"bg-white dark:bg-gray-700 text-text-dark dark:text-dark-text hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:" No"})]})]})},bme=()=>{const{isDark:t}=Cr(),[e,r]=R.useState("getting-started"),[n,i]=R.useState(""),[a,o]=R.useState("all"),s={"getting-started":{id:"getting-started",title:"Getting Started",icon:"",category:"basics",description:"Learn the fundamentals of using the Habit Dashboard",content:{intro:"Welcome to the Habit Dashboard! This guide will help you get started with tracking your habits and building a better lifestyle.",steps:[{title:"Create Your Account",description:"Sign up with your email address and create a secure password. Your data is automatically synced across all devices using Firebase.",action:'Navigate to the login page and click "Create an account"',visual:"account"},{title:"Understand the Navigation",description:"The dashboard has five main sections accessible from the top navigation bar.",action:"Familiarize yourself with each section",items:[{name:"Dashboard",desc:"View your weekly progress and daily habit completion",icon:""},{name:"Habits",desc:"Manage all your habits in a monthly grid view",icon:""},{name:"Analytics",desc:"Analyze your performance and identify patterns",icon:""},{name:"To Do",desc:"Manage tasks with priorities and due dates",icon:""},{name:"Guide",desc:"Access this comprehensive help documentation",icon:""}]},{title:"Create Your First Habit",description:"Start by creating a simple habit to understand how the system works.",action:"Follow these steps to create a habit",steps:['Click the "Create Habit" button on the Habits page','Enter a clear, descriptive name (e.g., "Drink 8 glasses of water")',"Select an appropriate category or create a custom one",'Click "Create" to add the habit to your list']}],tip:"Start with 3-5 simple habits to build momentum. You can always add more complex habits later as you become familiar with the system."},related:["basic-tracking","categories"]},"basic-tracking":{id:"basic-tracking",title:"How to Track Your Habits",icon:"",category:"basics",description:"Master the essential habit tracking features",content:{intro:"Tracking habits is the core functionality of this dashboard. Learn how to mark habits complete and track your daily metrics.",steps:[{title:"Mark Habits as Complete",description:"You can mark habits complete from either the Dashboard or Habits page.",action:"Choose your preferred method",methods:[{name:"Dashboard Method",steps:["Select a day from the weekly overview cards","Check the checkbox next to each habit you completed","Uncheck to mark as incomplete if needed"]},{name:"Habits Page Method",steps:["Navigate to the Habits page","Click any checkbox in the monthly grid","Each row represents a habit, each column represents a day"]}]},{title:"Track Daily Metrics",description:"Monitor your mood, energy, and focus levels daily to identify patterns and correlations.",action:"Use the sliders to rate each metric",metrics:[{name:"Mood",scale:"1 (Very Poor) to 5 (Excellent)",icon:""},{name:"Energy",scale:"1 (Very Low) to 5 (Very High)",icon:""},{name:"Focus",scale:"1 (Very Poor) to 5 (Excellent)",icon:""}],note:"You cannot update metrics for future dates. This ensures accurate historical tracking."},{title:"View Your Progress",description:"Multiple visualizations help you understand your progress at a glance.",action:"Explore different progress views",views:[{name:"Weekly Progress Ring",desc:"Circular visualization showing overall completion percentage",visual:"ring"},{name:"Daily Cards",desc:"Individual day cards with completion counts and streaks",visual:"cards"},{name:"Monthly Grid",desc:"Complete overview of all habits for the entire month",visual:"grid"}]}]},related:["categories","intermediate"]},categories:{id:"categories",title:"Organizing Habits with Categories",icon:"",category:"organization",description:"Create and manage categories to organize your habits",content:{intro:"Categories help you organize and filter your habits effectively. Use predefined categories or create custom ones that match your lifestyle.",steps:[{title:"Understanding Predefined Categories",description:"The dashboard comes with several built-in categories to get you started.",action:"Familiarize yourself with available categories",categories:["Health","Fitness","Learning","Productivity","Social","Mindfulness","Finance","Other"]},{title:"Create a Custom Category",description:"Create categories that match your specific needs and preferences.",action:"Follow these steps",steps:["Navigate to the Habits page",'In the category filter section, click "New Category"',"Enter a descriptive category name","Choose a color that helps you identify it quickly",'Click "Create" to add your custom category']},{title:"Filter Habits by Category",description:"Use category filters to focus on specific areas of your life.",action:"Toggle categories on and off",steps:["Click category buttons in the filter section to toggle them","Selected categories are highlighted with a border","Only habits from selected categories are displayed","Select all categories to view all habits"]},{title:"Manage Categories",description:"Keep your category list organized by hiding unused categories or deleting custom ones.",action:"Use these management options",options:["Hover over a category to see the delete/hide button","Hide predefined categories you don't use (can be restored later)","Delete custom categories that are no longer needed","Note: You cannot delete categories that are in use by habits"]}]},related:["basic-tracking","intermediate"]},intermediate:{id:"intermediate",title:"Intermediate Features",icon:"",category:"features",description:"Explore advanced habit management features",content:{intro:"Once you're comfortable with basic tracking, explore these intermediate features to enhance your habit management experience.",steps:[{title:"Edit Existing Habits",description:"Modify habit properties as your needs change.",action:"Click the pencil icon next to any habit",editable:["Habit name","Category","Emoji","Notes","All advanced options"]},{title:"Archive and Unarchive Habits",description:"Temporarily hide habits without deleting them permanently.",action:"Use the archive feature",steps:["Click the archive icon on a habit row","Archived habits are hidden by default",'Toggle "Show Archived" to view archived habits','Click "Unarchive" to restore a habit']},{title:"Search Your Habits",description:"Quickly find specific habits using the search functionality.",action:"Use the search bar",steps:["Type in the search bar on the Habits page","Search matches both habit names and notes","Search is case-insensitive"]},{title:"Set Habit Frequency",description:"Configure how often each habit should be tracked.",action:"Choose the appropriate frequency",frequencies:[{name:"Daily",desc:"Track every day",use:"For habits you want to do consistently"},{name:"Weekly",desc:"Track once per week",use:"For habits with weekly goals"},{name:"Custom",desc:"Select specific days",use:"For habits like gym workouts on specific days"}]},{title:"Set Up Reminders",description:"Get browser notifications to remind you about your habits.",action:"Configure reminders",steps:["Enable reminders in the habit's Advanced Options",'Set a reminder time (e.g., "09:00" for 9 AM)',"Enable browser notifications in Profile  Notification Settings","Note: Reminders only work when the browser tab is open"]},{title:"Set Completion Goals",description:"Define targets for how often you want to complete each habit.",action:"Set goals in Advanced Options",goalTypes:[{period:"Weekly",desc:"Complete X times per week"},{period:"Monthly",desc:"Complete X times per month"},{period:"Yearly",desc:"Complete X times per year"}],note:"Goals are tracked automatically and displayed in the Goals Tracker sidebar"}]},related:["advanced","analytics"]},advanced:{id:"advanced",title:"Advanced Features",icon:"",category:"advanced",description:"Master powerful tracking capabilities",content:{intro:"Unlock the full potential of the Habit Dashboard with these advanced features designed for detailed tracking and analysis.",steps:[{title:"Quantity Tracking",description:"Track specific amounts for habits like water intake or distance walked.",action:"Enable quantity tracking",steps:['When creating or editing a habit, enable "Quantity Tracking"','Set a unit (e.g., "glasses", "miles", "pages")',"Define your target amount (e.g., 8 glasses, 5 miles)","When marking complete, enter the actual quantity achieved","The system indicates if you reached your target"],example:{habit:"Drink Water",target:"8 glasses",unit:"glasses"}},{title:"Time Tracking",description:"Track duration for time-based habits like meditation or exercise.",action:"Enable time tracking",steps:['Enable "Time Tracking" in Advanced Options',"When marking a habit complete, enter the duration in minutes","The system calculates average duration over time","Use this for habits where duration matters more than just completion"],example:{habit:"Meditation",duration:"20 minutes"}},{title:"Custom Schedules",description:"Set habits to only appear on specific days of the week.",action:"Configure custom schedules",steps:['Set frequency to "Custom" in Advanced Options',"Select the days of the week when the habit applies","The habit will only appear on selected days","Perfect for habits like gym workouts on specific days"],example:{habit:"Gym Workout",days:["Monday","Wednesday","Friday"]}},{title:"Habit Notes",description:"Add contextual information, tips, or reminders to your habits.",action:"Add notes to habits",steps:["Notes are searchable and help you remember important details","View notes when you expand a habit row","Use notes for tips, variations, or reflections"]},{title:"Difficulty Levels",description:"Categorize habits by difficulty to better understand your progress.",action:"Set difficulty levels",levels:[{level:"Easy",desc:"Simple habits requiring minimal effort"},{level:"Medium",desc:"Moderate habits requiring some commitment"},{level:"Hard",desc:"Challenging habits requiring significant effort"}]},{title:"Completion Notes",description:"Add notes specific to individual habit completions.",action:"Add notes when marking complete",steps:["When marking a habit complete, you can add a note","Track variations, reflections, or specific details for that day","Useful for understanding what worked or didn't work"]}]},related:["intermediate","analytics"]},analytics:{id:"analytics",title:"Analytics & Insights",icon:"",category:"analytics",description:"Understand your habits through data and insights",content:{intro:"Use analytics to understand your habits, identify patterns, and make data-driven decisions about your lifestyle.",steps:[{title:"Dashboard Analytics",description:"Get a quick overview of your weekly performance.",action:"Review these dashboard elements",elements:[{name:"Weekly Progress Ring",desc:"Overall completion percentage for the week"},{name:"Weekly Bar Chart",desc:"Day-by-day completion breakdown"},{name:"Daily Cards",desc:"Individual day progress with streak information"},{name:"Current Streaks",desc:"Consecutive days of completing all habits"}]},{title:"Yearly View",description:"Analyze long-term trends and patterns.",action:"Navigate to the Yearly view",features:["Monthly completion bar charts","Best and worst performing months","Mood, energy, and focus trend lines","Average metrics per month"]},{title:"Analytics Page",description:"Deep dive into your habit performance.",action:"Explore the Analytics page",insights:["Habit performance analysis","Completion rate trends","Best and worst performing habits","Correlation insights between habits and metrics","Predictive analytics"]},{title:"Monthly Reports",description:"Generate printable reports for offline review.",action:"Create monthly reports",steps:["Navigate to the Habits page",'Click "Print Report" in the sidebar',"Reports include summary statistics, completion overview, streaks, and category breakdown"]},{title:"Heat Map View",description:"Visualize completion patterns with a calendar heat map.",action:"Switch to Heat Map view",steps:['On the Habits page, click "Heat Map" view toggle',"See a visual calendar showing completion intensity","Darker colors indicate higher completion rates","Quickly identify patterns and gaps"]}]},related:["intermediate","tips"]},tips:{id:"tips",title:"Tips & Best Practices",icon:"",category:"tips",description:"Maximize your success with proven strategies",content:{intro:"Learn from best practices and proven strategies to make the most of your habit tracking journey.",steps:[{title:"Starting Your Journey",description:"Set yourself up for success from the beginning.",tips:["Start with 3-5 simple habits to build momentum","Focus on consistency over perfection","Review your progress weekly","Don't be discouraged by missed days - streaks can be rebuilt"]},{title:"Designing Effective Habits",description:"Create habits that are easy to track and maintain.",tips:["Make habits specific and measurable","Use quantity tracking for habits with targets","Use time tracking for duration-based habits","Set realistic goals that challenge but don't overwhelm","Group related habits in the same category"]},{title:"Maintaining Consistency",description:"Stay on track with these consistency strategies.",tips:["Check in daily, even if you didn't complete all habits","Use reminders for habits you tend to forget","Track your mood, energy, and focus to identify patterns","Review analytics monthly to see what's working","Archive habits that no longer serve you"]},{title:"Using Categories Effectively",description:"Organize your habits for better management.",tips:["Create categories that make sense for your lifestyle","Use category filters to focus on specific areas","Balance habits across different categories","Hide unused categories to keep your interface clean"]},{title:"Advanced Tips",description:"Pro tips for power users.",tips:["Use custom schedules for habits that only apply on certain days","Set per-habit goals to track progress toward specific targets","Add completion notes to reflect on what worked","Export data regularly for backup or analysis","Use the heat map to quickly identify patterns"]},{title:"Troubleshooting Common Issues",description:"Solutions to common problems.",solutions:[{problem:"Data not syncing",solution:"Check your internet connection and refresh the page"},{problem:"Reminders not working",solution:"Ensure browser notifications are enabled and the tab is open"},{problem:"Can't mark future dates",solution:"This is intentional - you can only log past or current dates"},{problem:"Habit not showing",solution:"Check category filters and archived status"}]}]},related:["getting-started","analytics"]}},l=[{id:"all",name:"All Guides",icon:""},{id:"basics",name:"Basics",icon:""},{id:"organization",name:"Organization",icon:""},{id:"features",name:"Features",icon:""},{id:"advanced",name:"Advanced",icon:""},{id:"analytics",name:"Analytics",icon:""},{id:"tips",name:"Tips",icon:""}],c=R.useMemo(()=>Object.values(s).filter(m=>{const g=a==="all"||m.category===a,v=!n.trim()||m.title.toLowerCase().includes(n.toLowerCase())||m.description.toLowerCase().includes(n.toLowerCase())||JSON.stringify(m.content).toLowerCase().includes(n.toLowerCase());return g&&v}),[n,a]),d=m=>{r(e===m?null:m)},f=(m,g)=>{},p=m=>e!==m.id?null:u.jsxs("div",{className:"px-6 pb-6 space-y-6 animate-fade-in",children:[u.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 rounded-lg p-4 border-l-4 border-primary",children:u.jsx("p",{className:"text-text-dark dark:text-dark-text",children:m.content.intro})}),m.content.steps.map((g,v)=>u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text flex items-center gap-2",children:[u.jsxs("span",{className:"text-primary font-bold",children:[v+1,"."]}),g.title]}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:g.description}),g.action&&u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border-l-4 border-blue-500",children:u.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:[u.jsx("strong",{children:"Action:"})," ",g.action]})}),g.steps&&u.jsx("ol",{className:"list-decimal list-inside space-y-2 text-text-gray dark:text-dark-gray ml-4",children:g.steps.map((y,x)=>u.jsx("li",{className:"leading-relaxed",children:y},x))}),g.items&&u.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:g.items.map((y,x)=>u.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 rounded-lg p-3 transform hover:scale-105 transition-all duration-300 animate-fade-in",style:{animationDelay:`${x*.1}s`},children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-xl",children:y.icon}),u.jsx("span",{className:"font-semibold text-text-dark dark:text-dark-text",children:y.name})]}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:y.desc})]},x))}),g.methods&&u.jsx("div",{className:"space-y-4",children:g.methods.map((y,x)=>u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[u.jsx("h4",{className:"font-semibold text-text-dark dark:text-dark-text mb-2",children:y.name}),u.jsx("ol",{className:"list-decimal list-inside space-y-1 text-text-gray dark:text-dark-gray ml-2",children:y.steps.map((b,k)=>u.jsx("li",{children:b},k))})]},x))}),g.metrics&&u.jsx("div",{className:"grid sm:grid-cols-3 gap-4",children:g.metrics.map((y,x)=>u.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 dark:from-primary/20 dark:to-primary/10 rounded-lg p-4 text-center transform hover:scale-105 transition-all duration-300 animate-fade-in",style:{animationDelay:`${x*.1}s`},children:[u.jsx("div",{className:"text-3xl mb-2",children:y.icon}),u.jsx("div",{className:"font-semibold text-text-dark dark:text-dark-text mb-1",children:y.name}),u.jsx("div",{className:"text-xs text-text-gray dark:text-dark-gray",children:y.scale})]},x))}),g.views&&g.views.some(y=>y.visual==="ring")&&u.jsx(vme,{}),g.example&&u.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border-l-4 border-green-500",children:u.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[u.jsx("strong",{children:"Example:"})," ",g.example.habit," - ",g.example.target||g.example.duration]})}),g.tips&&u.jsx("ul",{className:"list-disc list-inside space-y-2 text-text-gray dark:text-dark-gray ml-4",children:g.tips.map((y,x)=>u.jsx("li",{className:"leading-relaxed",children:y},x))}),g.solutions&&u.jsx("div",{className:"space-y-3",children:g.solutions.map((y,x)=>u.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3 border-l-4 border-yellow-500",children:[u.jsxs("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-1",children:[u.jsx("strong",{children:"Problem:"})," ",y.problem]}),u.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[u.jsx("strong",{children:"Solution:"})," ",y.solution]})]},x))})]},v)),m.content.tip&&u.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border-l-4 border-blue-500 p-4 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300 flex items-start gap-2",children:[u.jsx(yme,{children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:"Pro Tip:"})," ",m.content.tip]})]})}),m.related&&m.related.length>0&&u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[u.jsx("h4",{className:"font-semibold text-text-dark dark:text-dark-text mb-3",children:"Related Guides"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:m.related.map(g=>{const v=s[g];return v?u.jsxs("button",{onClick:()=>{d(g),setTimeout(()=>{var y;(y=document.getElementById(g))==null||y.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"px-3 py-1.5 bg-white dark:bg-gray-700 text-text-dark dark:text-dark-text rounded-lg text-sm font-medium hover:bg-primary hover:text-white transition-all duration-200",children:[v.icon," ",v.title]},g):null})})]}),u.jsx(xme,{guideId:m.id,onFeedback:f})]});return u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg",children:u.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"mb-8 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"text-5xl animate-bounce",style:{animationDuration:"2s"},children:""}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-dark dark:text-dark-text",children:"User Guide"}),u.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-primary to-primary/50 rounded-full mt-2 animate-pulse"})]})]}),u.jsx("p",{className:"text-lg text-text-gray dark:text-dark-gray animate-slide-up",children:"Comprehensive documentation to help you master the Habit Dashboard"})]}),u.jsx("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 mb-6 animate-fade-in",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-gray dark:text-dark-gray",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),u.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),placeholder:"Search guides... (e.g., 'create habit', 'categories', 'analytics')",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition text-sm"}),n&&u.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text transition",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:"Filter by Category:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(m=>u.jsxs("button",{onClick:()=>o(m.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${a===m.id?"bg-primary text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[u.jsx("span",{className:"mr-2",children:m.icon}),m.name]},m.id))})]}),n&&u.jsxs("p",{className:"text-sm text-text-gray dark:text-dark-gray",children:["Found ",c.length," guide",c.length!==1?"s":""]})]})}),!n&&u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 mb-8 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("span",{className:"text-2xl animate-pulse",children:""}),u.jsx("h2",{className:"text-lg font-semibold text-text-dark dark:text-dark-text",children:"Quick Navigation"})]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Object.values(s).map((m,g)=>u.jsxs("button",{onClick:()=>{d(m.id),setTimeout(()=>{var v;(v=document.getElementById(m.id))==null||v.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:`p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 hover:shadow-md ${e===m.id?"bg-primary text-white shadow-lg scale-105":"bg-gray-100 dark:bg-gray-800 text-text-dark dark:text-dark-text hover:bg-gray-200 dark:hover:bg-gray-700"} animate-fade-in`,style:{animationDelay:`${g*.05}s`},children:[u.jsx("div",{className:"text-3xl mb-2 transform hover:rotate-12 transition-transform",children:m.icon}),u.jsx("div",{className:"text-sm font-medium",children:m.title}),u.jsx("div",{className:"text-xs opacity-75 mt-1",children:m.description})]},m.id))})]}),u.jsx("div",{className:"space-y-6",children:c.map(m=>u.jsx("section",{id:m.id,className:"mb-8",children:u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden transform hover:shadow-xl transition-shadow duration-300",children:[u.jsxs("button",{onClick:()=>d(m.id),className:"w-full px-6 py-5 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200",children:[u.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[u.jsx("span",{className:"text-3xl",children:m.icon}),u.jsxs("div",{className:"text-left flex-1",children:[u.jsx("h2",{className:"text-xl font-bold text-text-dark dark:text-dark-text",children:m.title}),u.jsx("p",{className:"text-sm text-text-gray dark:text-dark-gray mt-1",children:m.description})]})]}),u.jsx("svg",{className:`w-5 h-5 text-text-gray dark:text-dark-gray transition-transform duration-300 flex-shrink-0 ${e===m.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p(m)]})},m.id))}),c.length===0&&u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-12 text-center animate-fade-in",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h3",{className:"text-xl font-semibold text-text-dark dark:text-dark-text mb-2",children:"No guides found"}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray mb-4",children:"Try adjusting your search query or category filter"}),u.jsx("button",{onClick:()=>{i(""),o("all")},className:"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition",children:"Clear Filters"})]}),u.jsxs("div",{className:"mt-12 bg-gradient-to-r from-primary to-primary/80 rounded-xl shadow-lg p-8 text-center text-white animate-fade-in",children:[u.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Still Need Help?"}),u.jsx("p",{className:"mb-4 opacity-90",children:"If you can't find what you're looking for, check the code comments or Firebase documentation."}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-2xl animate-bounce",style:{animationDuration:"2s"},children:""}),u.jsx("p",{className:"font-medium",children:"Happy habit tracking!"})]})]})]})})},wme=({onClose:t})=>{const{user:e}=br(),{notificationPermission:r,notificationSettings:n,requestPermission:i,updateNotificationSettings:a}=Tm(),[o,s]=R.useState(n),[l,c]=R.useState(!1),[d,f]=R.useState({type:"",text:""});R.useEffect(()=>{s(n)},[n]);const p=async v=>{const y={...o,[v]:!o[v]};if(s(y),v==="browserEnabled"&&y.browserEnabled&&r!=="granted"){const x=await i();if(!x.success){f({type:"error",text:x.error}),s({...y,browserEnabled:!1});return}}await g(y)},m=async(v,y)=>{const x={...o,[v]:y};s(x),await g(x)},g=async v=>{c(!0),f({type:"",text:""});try{const y=await a(v);y.success?(f({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>f({type:"",text:""}),3e3)):f({type:"error",text:y.error||"Failed to save settings"})}catch(y){f({type:"error",text:y.message})}finally{c(!1)}};return u.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-dark dark:text-dark-text",children:"Notification Settings"}),t&&u.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.text&&u.jsx("div",{className:`mb-4 px-4 py-2 rounded-lg text-sm ${d.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:d.text}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Browser Notifications"}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:"Get reminders directly in your browser"})]}),u.jsx("button",{onClick:()=>p("browserEnabled"),disabled:l||r==="denied",className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.browserEnabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"} ${r==="denied"?"opacity-50 cursor-not-allowed":""}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.browserEnabled?"translate-x-6":"translate-x-1"}`})})]}),r==="default"&&!o.browserEnabled&&u.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"Click the toggle to enable browser notifications. You'll be asked for permission."}),r==="denied"&&u.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:"Notifications are blocked. Please enable them in your browser settings."})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Email Notifications"}),u.jsxs("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:["Receive reminders via email (",e==null?void 0:e.email,")"]})]}),u.jsx("button",{onClick:()=>p("emailEnabled"),disabled:l,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.emailEnabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.emailEnabled?"translate-x-6":"translate-x-1"}`})})]})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-dark dark:text-dark-text mb-2",children:"Default Reminder Time"}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mb-2",children:"This time will be used as the default when creating new habits with reminders enabled"}),u.jsx("input",{type:"time",value:o.reminderTime,onChange:v=>m("reminderTime",v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-dark-text rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:"Default time for habit reminders"})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Weekly Summary Email"}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:"Receive a weekly progress report every Sunday"})]}),u.jsx("button",{onClick:()=>p("weeklySummary"),disabled:l,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.weeklySummary?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.weeklySummary?"translate-x-6":"translate-x-1"}`})})]})}),u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-dark dark:text-dark-text",children:"Streak Break Warnings"}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray mt-1",children:"Get notified when you're about to break a streak"})]}),u.jsx("button",{onClick:()=>p("streakWarnings"),disabled:l,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.streakWarnings?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.streakWarnings?"translate-x-6":"translate-x-1"}`})})]})}),u.jsx("div",{className:"mt-6 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:u.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-300",children:[u.jsx("strong",{children:"Note:"})," Browser reminders only work when the page/tab is open. Keep the browser tab open for reminders to fire."]})})]})},rP=()=>{const{user:t}=br(),{isDark:e,toggleTheme:r}=Cr(),{hiddenPredefinedCategories:n,restoreCategory:i}=Cw(),[a,o]=R.useState(!1),[s,l]=R.useState(null),[c,d]=R.useState(!0),[f,p]=R.useState(!1),[m,g]=R.useState(!1),[v,y]=R.useState(!1),x=R.useRef(null);R.useEffect(()=>{(async()=>{if(t)try{const N=await Sm(t.uid);l(N)}catch(N){console.error("Error fetching user data:",N)}finally{d(!1)}})()},[t]),R.useEffect(()=>{const P=N=>{x.current&&!x.current.contains(N.target)&&o(!1)};return a&&document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[a]);const b=P=>{if(!P)return"N/A";const N=new Date(P);return`${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][N.getMonth()]} ${N.getFullYear()}`},k=P=>{if(!P)return"Never";const N=new Date(P),O=new Date-N,A=Math.floor(O/6e4),$=Math.floor(O/36e5),L=Math.floor(O/864e5);return A<1?"Just now":A<60?`${A} min${A>1?"s":""} ago`:$<24?`${$} hour${$>1?"s":""} ago`:L<7?`${L} day${L>1?"s":""} ago`:N.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},j=async()=>{try{await D9(t.email),alert("Password reset email sent! Check your inbox."),o(!1)}catch(P){alert(`Error: ${P.message}`)}},w=async()=>{if(!f){p(!0);return}try{await M9(t.uid),alert("Account deleted successfully. You will be logged out."),await dE()}catch(P){alert(`Error deleting account: ${P.message}`),p(!1)}};if(!t)return null;const T=(s==null?void 0:s.name)||"User",S=s!=null&&s.createdAt?b(s.createdAt):"N/A",E=s!=null&&s.lastLogin?k(s.lastLogin):"Never";return u.jsxs("div",{className:"relative",ref:x,children:[u.jsxs("button",{onClick:()=>o(!a),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition w-full md:w-auto","aria-label":"Profile menu",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white font-semibold text-sm",children:T.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-sm text-text-gray dark:text-dark-gray truncate max-w-[150px]",children:T}),u.jsx("svg",{className:`w-4 h-4 text-text-gray dark:text-dark-gray transition-transform ${a?"rotate-180":""} ml-auto md:ml-0`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&u.jsxs("div",{className:"absolute md:right-0 mt-2 w-full md:w-72 bg-white dark:bg-dark-surface rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-[80vh] overflow-y-auto",children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white font-semibold text-lg",children:T.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-semibold text-text-dark dark:text-dark-text truncate",children:T}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray truncate",children:t.email})]})]}),u.jsxs("div",{className:"space-y-1 text-xs text-text-gray dark:text-dark-gray",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Member since:"}),u.jsx("span",{className:"font-medium",children:S})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Last login:"}),u.jsx("span",{className:"font-medium",children:E})]})]})]}),u.jsxs("div",{className:"p-2",children:[u.jsxs("button",{onClick:r,className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 text-sm text-text-dark dark:text-dark-text transition",children:[u.jsx("span",{children:e?"":""}),u.jsx("span",{children:e?"Light Mode":"Dark Mode"})]}),u.jsxs("button",{onClick:j,className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 text-sm text-text-dark dark:text-dark-text transition",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),u.jsx("span",{children:"Reset Password"})]}),u.jsxs("button",{onClick:()=>{y(!v),g(!1)},className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 text-sm text-text-dark dark:text-dark-text transition",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),u.jsx("span",{children:"Notification Settings"})]}),v&&u.jsx("div",{className:"mt-2 p-3",children:u.jsx(wme,{onClose:()=>y(!1)})}),u.jsxs("button",{onClick:()=>{g(!m),y(!1)},className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 text-sm text-text-dark dark:text-dark-text transition",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),u.jsx("span",{children:"Category Settings"}),n.length>0&&u.jsx("span",{className:"ml-auto bg-primary text-white text-xs px-2 py-0.5 rounded-full",children:n.length})]}),m&&u.jsxs("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[u.jsx("h4",{className:"text-xs font-semibold text-text-dark dark:text-dark-text mb-2",children:"Hidden Categories"}),n.length===0?u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray",children:"No hidden categories"}):u.jsx("div",{className:"space-y-2",children:n.map(P=>{const N=Aw.find(I=>I.id===P);return N?u.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[u.jsx("span",{className:"text-xs text-text-dark dark:text-dark-text",children:N.label}),u.jsx("button",{onClick:async()=>{try{await i(P)}catch(I){alert(`Error restoring category: ${I.message}`)}},className:"px-2 py-1 text-xs bg-primary hover:bg-primary/90 text-white rounded transition",children:"Restore"})]},P):null})})]}),u.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),f?u.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-md border border-red-200 dark:border-red-800",children:[u.jsx("p",{className:"text-xs text-red-800 dark:text-red-300 mb-2 font-medium",children:"This will permanently delete your account and all data. This action cannot be undone."}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:w,className:"flex-1 px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded-md transition",children:"Confirm Delete"}),u.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-3 py-1.5 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-dark dark:text-dark-text text-xs rounded-md transition",children:"Cancel"})]})]}):u.jsxs("button",{onClick:w,className:"w-full text-left px-3 py-2 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-2 text-sm text-red-600 dark:text-red-400 transition",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),u.jsx("span",{children:"Delete Account"})]}),u.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),u.jsxs("button",{onClick:async()=>{await dE(),o(!1)},className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 text-sm text-text-dark dark:text-dark-text transition",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),u.jsx("span",{children:"Logout"})]})]})]})]})},_me=()=>{const{user:t,refreshUser:e}=br(),[r,n]=R.useState(!1),[i,a]=R.useState(!1),[o,s]=R.useState(""),[l,c]=R.useState(!1);R.useEffect(()=>{t!=null&&t.emailVerified},[t==null?void 0:t.emailVerified]);const d=async()=>{n(!0),s(""),a(!1);try{await O9(),a(!0),setTimeout(()=>a(!1),5e3)}catch(p){let m="Failed to resend verification email. Please try again.";if(p.code)switch(p.code){case"auth/too-many-requests":m="Too many requests. Please wait a few minutes before requesting another email.";break;case"auth/user-not-found":case"auth/invalid-credential":m="User not found. Please sign out and sign in again.";break;case"auth/network-request-failed":m="Network error. Please check your internet connection and try again.";break;case"auth/requires-recent-login":m="For security, please sign out and sign in again.";break;default:p.message&&(m=p.message)}else p.message&&(m=p.message);s(m)}finally{n(!1)}},f=async()=>{c(!0),s(""),a(!1);try{await e(),await new Promise(m=>setTimeout(m,500));const p=Sr.currentUser;p!=null&&p.emailVerified?(a(!0),await e(),await new Promise(m=>setTimeout(m,300))):s("Email not verified yet. Please check your inbox and click the verification link in the email.")}catch{s("Failed to check verification status. Please try again.")}finally{c(!1)}};return u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-dark-surface rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold text-text-dark dark:text-dark-text mb-2",children:"Verify Your Email"}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:"We've sent a verification email to"}),u.jsx("p",{className:"text-primary font-semibold mt-1",children:t==null?void 0:t.email})]}),u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-lg mb-6",children:u.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[u.jsx("strong",{children:"Please check your inbox"})," and click the verification link to activate your account. You won't be able to access the app until your email is verified."]})}),i&&u.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4 rounded-lg mb-4",children:u.jsx("p",{className:"text-sm text-green-800 dark:text-green-300",children:" Verification email sent! Please check your inbox."})}),o&&u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded-lg mb-4",children:u.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:o})}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:d,disabled:r,className:"w-full bg-primary hover:bg-primary/90 text-white font-semibold py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Sending...":"Resend Verification Email"}),u.jsx("button",{onClick:f,disabled:l,className:"w-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-text-dark dark:text-dark-text font-semibold py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Checking...":"I've Verified My Email"})]}),u.jsx("p",{className:"text-xs text-text-gray dark:text-dark-gray text-center mt-6",children:"Didn't receive the email? Check your spam folder or try resending."})]})})},Ho=({children:t})=>{const{user:e,loading:r}=br();return r?u.jsx("div",{className:"min-h-screen bg-bg-light dark:bg-dark-bg flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-text-gray dark:text-dark-gray",children:"Loading..."})]})}):e?e.emailVerified?t:u.jsx(_me,{},`verify-${e.uid}-${e.emailVerified}`):u.jsx(Pj,{to:"/login",replace:!0})},qo=()=>{const{user:t}=br(),[e,r]=R.useState(!1),n=im(),i=a=>n.pathname===a;return t?u.jsxs("nav",{className:"bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20",children:[u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Toggle menu",onClick:()=>r(!e),children:u.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),u.jsx("a",{href:"/dashboard",className:"font-semibold text-primary text-lg",children:"Habit"})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[u.jsx("a",{href:"/dashboard",className:`font-medium transition ${i("/dashboard")?"text-primary":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:"Dashboard"}),u.jsx("a",{href:"/monthly",className:`font-medium transition ${i("/monthly")?"text-primary":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:"Habits"}),u.jsx("a",{href:"/analytics",className:`font-medium transition ${i("/analytics")?"text-primary":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:"Analytics"}),u.jsx("a",{href:"/todos",className:`font-medium transition ${i("/todos")?"text-primary":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:"To Do"}),u.jsx("a",{href:"/guide",className:`font-medium transition ${i("/guide")?"text-primary":"text-text-gray dark:text-dark-gray hover:text-text-dark dark:hover:text-dark-text"}`,children:"Guide"})]}),u.jsx("div",{className:"hidden md:flex items-center gap-4",children:u.jsx(rP,{})})]}),e&&u.jsx("div",{className:"md:hidden border-t border-gray-100 bg-white dark:bg-dark-surface dark:border-gray-700",children:u.jsxs("div",{className:"px-4 py-3 space-y-2",children:[u.jsx("a",{href:"/dashboard",className:`block font-medium ${i("/dashboard")?"text-primary":"text-text-gray dark:text-dark-gray"}`,children:"Dashboard"}),u.jsx("a",{href:"/monthly",className:`block font-medium ${i("/monthly")?"text-primary":"text-text-gray dark:text-dark-gray"}`,children:"Habits"}),u.jsx("a",{href:"/analytics",className:`block font-medium ${i("/analytics")?"text-primary":"text-text-gray dark:text-dark-gray"}`,children:"Analytics"}),u.jsx("a",{href:"/todos",className:`block font-medium ${i("/todos")?"text-primary":"text-text-gray dark:text-dark-gray"}`,children:"To Do"}),u.jsx("a",{href:"/guide",className:`block font-medium ${i("/guide")?"text-primary":"text-text-gray dark:text-dark-gray"}`,children:"Guide"}),u.jsx("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:u.jsx(rP,{})})]})})]}):null},kme=()=>u.jsxs(E3,{children:[u.jsx(Yn,{path:"/login",element:u.jsx(q9,{})}),u.jsx(Yn,{path:"/dashboard",element:u.jsxs(Ho,{children:[u.jsx(qo,{}),u.jsx(Lpe,{})]})}),u.jsx(Yn,{path:"/monthly",element:u.jsxs(Ho,{children:[u.jsx(qo,{}),u.jsx(ime,{})]})}),u.jsx(Yn,{path:"/yearly",element:u.jsxs(Ho,{children:[u.jsx(qo,{}),u.jsx(ame,{})]})}),u.jsx(Yn,{path:"/analytics",element:u.jsxs(Ho,{children:[u.jsx(qo,{}),u.jsx(dme,{})]})}),u.jsx(Yn,{path:"/todos",element:u.jsxs(Ho,{children:[u.jsx(qo,{}),u.jsx(hme,{})]})}),u.jsx(Yn,{path:"/guide",element:u.jsxs(Ho,{children:[u.jsx(qo,{}),u.jsx(bme,{})]})}),u.jsx(Yn,{path:"/",element:u.jsx(Pj,{to:"/dashboard",replace:!0})})]}),Sme=()=>u.jsx(P3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:u.jsx($9,{children:u.jsx(H9,{children:u.jsx(kme,{})})})});zy.createRoot(document.getElementById("root")).render(u.jsx(V.StrictMode,{children:u.jsx(L9,{children:u.jsx(Sme,{})})}));
